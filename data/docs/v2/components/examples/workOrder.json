{
  "label": "Provision devices",
  "work_order_id": "0f40ff8c-a3b5-4a30-90e5-0421c153183c",
  "slug": "provision-devices",
  "description": "Provision 150 devices for 123 Main St",
  "type": "device",
  "due_date": "2020-08-07T18:10:53.0Z",
  "current_status": {
    "status": "Verifying",
    "category": "IN_PROGRESS"
  },
  "status_history": [
    {
      "status": "Cancelled",
      "created": "1991-09-25T04:47:23.156Z",
      "category": "IN_PROGRESS"
    },
    {
      "status": "Reticulating Splines",
      "created": "1964-09-26T20:18:40.75Z",
      "category": "COMPLETE"
    }
  ],
  "project": {
    "label": "Store 42",
    "customer": {
      "label": "Zones Inc",
      "customer_id": "e530652e-28e8-4f64-84af-e1cf0ff7c805",
      "slug": "zones-inc",
      "external_platform": {
        "ax_customer_id": "eff3ada3-0966-42be-a5e8-78efd3c52d39"
      },
      "allowed_statuses": [
        {
          "status": "Verifying",
          "category": "CANCELLED"
        },
        {
          "status": "Cancelled",
          "category": "IN_PROGRESS"
        }
      ],
      "created": "1952-09-21T13:28:55.455Z",
      "updated": "1956-09-02T04:23:41.805Z"
    },
    "program": {
      "label": "GAP Store refresh",
      "customer": {
        "label": "Zones Inc",
        "customer_id": "e530652e-28e8-4f64-84af-e1cf0ff7c805",
        "slug": "zones-inc",
        "external_platform": {
          "ax_customer_id": "eff3ada3-0966-42be-a5e8-78efd3c52d39"
        },
        "allowed_statuses": [
          {
            "status": "Complete",
            "category": "COMPLETE"
          },
          {
            "status": "Verifying",
            "category": "CANCELLED"
          }
        ],
        "created": "2002-04-24T06:57:58.147Z",
        "updated": "1969-05-23T16:18:15.427Z"
      },
      "program_id": "ec5db56d-32e6-4e5d-9bef-1016f3e13670",
      "slug": "gap-store-refresh",
      "allowed_statuses": [
        {
          "status": "In Progress",
          "category": "PENDING"
        },
        {
          "status": "Complete",
          "category": "BLOCKED"
        },
        {
          "status": "Cancelled",
          "category": "BLOCKED"
        }
      ],
      "start_date": "2019-08-07T18:10:53.0Z",
      "end_date": "2020-08-07T18:10:53.0Z",
      "created": "2015-07-10T01:07:07.307Z",
      "updated": "2008-03-05T20:21:36.379Z"
    },
    "slug": "store-42",
    "project_id": "ec5db56d-32e6-4e5d-9bef-1016f3e13670",
    "allowed_statuses": [
      {
        "status": "Complete",
        "category": "COMPLETE"
      },
      {
        "status": "In Progress",
        "category": "COMPLETE"
      },
      {
        "status": "Reticulating Splines",
        "category": "BLOCKED"
      },
      {
        "status": "In Progress",
        "category": "CANCELLED"
      },
      {
        "status": "Complete",
        "category": "PENDING"
      }
    ],
    "start_date": "2019-08-07T18:10:53.0Z",
    "end_date": "2020-08-07T18:10:53.0Z",
    "created": "1994-02-14T06:25:28.534Z",
    "updated": "2006-07-16T21:54:12.781Z"
  },
  "work_flows": [
    {
      "cycles_needed": 4,
      "work_flow": {
        "steps": {
          "success": {
            "label": "Find units",
            "type": "success",
            "onComplete": {
              "actions": [
                {
                  "type": "email",
                  "options": {
                    "to": "bob@example.com",
                    "from": "alice@example.com"
                  }
                }
              ]
            }
          }
        },
        "starts_at": "entry",
        "label": "MLTI iPad Assembly Assignment",
        "workflow_id": "e530652e-28e8-4f64-84af-e1cf0ff7c805",
        "applies_to": "unit",
        "slug": "mlti-ipad-assembly-assignment",
        "version": "1.0",
        "workflow_version": 7,
        "context": [
          {
            "key": "$.fizz",
            "value": "$.buzz",
            "lock": true,
            "ignore": false
          },
          {
            "key": "$.fizz",
            "value": "$.buzz",
            "lock": false,
            "ignore": false
          },
          {
            "key": "$.fizz",
            "value": "true",
            "lock": true,
            "ignore": false
          },
          {
            "key": "$.unit.status",
            "value": "$.buzz",
            "lock": false,
            "ignore": true
          }
        ],
        "created": "2016-02-01T09:09:59.475Z",
        "updated": "1942-09-15T12:14:31.46Z"
      },
      "cycles_pending": 4,
      "cycles_in_progress": 4,
      "cycles_verifying": 4,
      "cycles_complete": 4,
      "cycles_blocked": 4,
      "cycles_cancelled": 4
    },
    {
      "cycles_needed": 4,
      "work_flow": {
        "steps": {
          "success": {
            "type": "function",
            "label": "Run Application",
            "goto": "complete",
            "options": {
              "application": {
                "application_id": "ace-ios",
                "platforms": [
                  {
                    "platform": "freebsd",
                    "arch": "x64"
                  }
                ]
              },
              "configuration": {
                "pairing_cert": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                "pairing_key": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                "restore_device": true,
                "automated_enrollment": false,
                "mdm": {
                  "vendor": "Meraki",
                  "console_url": "http://jamf.zones.com",
                  "user": "NterpriseBob",
                  "password": "ad dolore do culpa veniam",
                  "tenant_code": "nterprise",
                  "set_asset_tag": "$._entity.input_filter[?(@.key = 'asset-tag')]"
                },
                "field_mappings": [
                  {
                    "from": "icon_layout",
                    "to": "$._entity.input_filter[?(@.key = 'serial-number')]"
                  }
                ],
                "wait_for_apps": [
                  "com.apple.itunes",
                  "com.apple.itunes",
                  "com.apple.itunes"
                ],
                "wait_for_battery_charge": 51
              }
            },
            "goto-fail": "process-fail",
            "context": [
              {
                "key": "$.unit.status",
                "value": "$.buzz",
                "lock": true,
                "ignore": true
              },
              {
                "key": "$.unit.status",
                "value": "true",
                "lock": true,
                "ignore": true
              },
              {
                "key": "$.unit.status",
                "value": "$.buzz",
                "lock": true,
                "ignore": false
              },
              {
                "key": "$.unit.status",
                "value": "Pending",
                "lock": true,
                "ignore": true
              },
              {
                "key": "extract_fields",
                "value": "Pending",
                "lock": true,
                "ignore": false
              }
            ],
            "onError": {
              "finally": {
                "goto": "failed",
                "actions": [
                  {
                    "type": "email",
                    "options": {
                      "to": "bob@example.com",
                      "from": "alice@example.com"
                    }
                  },
                  {
                    "type": "email",
                    "options": {
                      "to": "bob@example.com",
                      "from": "alice@example.com"
                    }
                  }
                ]
              },
              "retry": 9
            },
            "onComplete": {
              "actions": [
                {
                  "type": "email",
                  "options": {
                    "to": "bob@example.com",
                    "from": "alice@example.com"
                  }
                },
                {
                  "type": "email",
                  "options": {
                    "to": "bob@example.com",
                    "from": "alice@example.com"
                  }
                }
              ]
            }
          }
        },
        "starts_at": "entry",
        "label": "MLTI iPad Assembly Assignment",
        "workflow_id": "e530652e-28e8-4f64-84af-e1cf0ff7c805",
        "applies_to": "customer",
        "slug": "mlti-ipad-assembly-assignment",
        "version": "1.0",
        "workflow_version": 7,
        "context": [
          {
            "key": "$.unit.status",
            "value": "true",
            "lock": true,
            "ignore": true
          },
          {
            "key": "$.fizz",
            "value": "$.buzz",
            "lock": false,
            "ignore": true
          }
        ],
        "created": "1986-12-25T21:54:12.836Z",
        "updated": "1940-05-01T20:48:24.004Z"
      },
      "cycles_pending": 4,
      "cycles_in_progress": 4,
      "cycles_verifying": 4,
      "cycles_complete": 4,
      "cycles_blocked": 4,
      "cycles_cancelled": 4
    },
    {
      "cycles_needed": 4,
      "work_flow": {
        "steps": {
          "manual": {
            "type": "user",
            "options": {
              "component": "confirm-action",
              "payload": {
                "message": "Device powered off?",
                "negative_message": "Device not functioning"
              }
            },
            "label": "Confirm the device has powered off",
            "goto": "complete",
            "goto-fail": "process-fail",
            "context": [
              {
                "key": "$.unit.status",
                "value": "$.buzz",
                "lock": true,
                "ignore": true
              },
              {
                "key": "extract_fields",
                "value": "Pending",
                "lock": false,
                "ignore": false
              }
            ],
            "onError": {
              "finally": {
                "goto": "failed",
                "actions": [
                  {
                    "type": "email",
                    "options": {
                      "to": "bob@example.com",
                      "from": "alice@example.com"
                    }
                  },
                  {
                    "type": "email",
                    "options": {
                      "to": "bob@example.com",
                      "from": "alice@example.com"
                    }
                  }
                ]
              },
              "retry": 3
            },
            "onComplete": {
              "actions": [
                {
                  "type": "email",
                  "options": {
                    "to": "bob@example.com",
                    "from": "alice@example.com"
                  }
                },
                {
                  "type": "email",
                  "options": {
                    "to": "bob@example.com",
                    "from": "alice@example.com"
                  }
                },
                {
                  "type": "email",
                  "options": {
                    "to": "bob@example.com",
                    "from": "alice@example.com"
                  }
                },
                {
                  "type": "email",
                  "options": {
                    "to": "bob@example.com",
                    "from": "alice@example.com"
                  }
                },
                {
                  "type": "email",
                  "options": {
                    "to": "bob@example.com",
                    "from": "alice@example.com"
                  }
                }
              ]
            }
          }
        },
        "starts_at": "entry",
        "label": "MLTI iPad Assembly Assignment",
        "workflow_id": "e530652e-28e8-4f64-84af-e1cf0ff7c805",
        "applies_to": "project",
        "slug": "mlti-ipad-assembly-assignment",
        "version": "1.0",
        "workflow_version": 7,
        "context": [
          {
            "key": "extract_fields",
            "value": "$.buzz",
            "lock": false,
            "ignore": false
          },
          {
            "key": "extract_fields",
            "value": "true",
            "lock": false,
            "ignore": true
          }
        ],
        "created": "1960-05-11T10:47:23.274Z",
        "updated": "1997-09-11T20:00:43.699Z"
      },
      "cycles_pending": 4,
      "cycles_in_progress": 4,
      "cycles_verifying": 4,
      "cycles_complete": 4,
      "cycles_blocked": 4,
      "cycles_cancelled": 4
    },
    {
      "cycles_needed": 4,
      "work_flow": {
        "steps": {
          "confirm": {
            "type": "user",
            "label": "Run Application",
            "goto": "complete",
            "options": {
              "application": {
                "application_id": "ace-ios",
                "platforms": [
                  {
                    "platform": "openbsd",
                    "arch": "arm64"
                  },
                  {
                    "platform": "sunos",
                    "arch": "x64"
                  },
                  {
                    "platform": "linux",
                    "arch": "mips"
                  },
                  {
                    "platform": "freebsd",
                    "arch": "x32"
                  },
                  {
                    "platform": "sunos",
                    "arch": "mipsel"
                  }
                ]
              },
              "configuration": {
                "pairing_cert": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                "pairing_key": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                "restore_device": false,
                "automated_enrollment": false,
                "mdm": {
                  "vendor": "AirWatch",
                  "console_url": "http://jamf.zones.com",
                  "user": "NterpriseBob",
                  "password": "deserunt Duis",
                  "tenant_code": "nterprise",
                  "set_asset_tag": "$._entity.input_filter[?(@.key = 'asset-tag')]"
                },
                "field_mappings": [
                  {
                    "from": "model",
                    "to": "$._entity.input_filter[?(@.key = 'serial-number')]"
                  },
                  {
                    "from": "ethernet_mac",
                    "to": "$._entity.input_filter[?(@.key = 'serial-number')]"
                  },
                  {
                    "from": "ecid",
                    "to": "$._entity.input_filter[?(@.key = 'serial-number')]"
                  }
                ],
                "wait_for_apps": [
                  "com.apple.itunes",
                  "com.apple.itunes",
                  "com.apple.itunes",
                  "com.apple.itunes",
                  "com.apple.itunes"
                ],
                "wait_for_battery_charge": 45
              }
            },
            "goto-fail": "process-fail",
            "context": [
              {
                "key": "extract_fields",
                "value": "Pending",
                "lock": true,
                "ignore": false
              },
              {
                "key": "$.fizz",
                "value": "$.buzz",
                "lock": true,
                "ignore": false
              },
              {
                "key": "$.fizz",
                "value": "true",
                "lock": false,
                "ignore": true
              },
              {
                "key": "extract_fields",
                "value": "true",
                "lock": true,
                "ignore": true
              },
              {
                "key": "extract_fields",
                "value": "$.buzz",
                "lock": true,
                "ignore": false
              }
            ],
            "onError": {
              "finally": {
                "goto": "failed",
                "actions": [
                  {
                    "type": "email",
                    "options": {
                      "to": "bob@example.com",
                      "from": "alice@example.com"
                    }
                  },
                  {
                    "type": "email",
                    "options": {
                      "to": "bob@example.com",
                      "from": "alice@example.com"
                    }
                  },
                  {
                    "type": "email",
                    "options": {
                      "to": "bob@example.com",
                      "from": "alice@example.com"
                    }
                  },
                  {
                    "type": "email",
                    "options": {
                      "to": "bob@example.com",
                      "from": "alice@example.com"
                    }
                  }
                ]
              },
              "retry": 1
            },
            "onComplete": {
              "actions": [
                {
                  "type": "email",
                  "options": {
                    "to": "bob@example.com",
                    "from": "alice@example.com"
                  }
                },
                {
                  "type": "email",
                  "options": {
                    "to": "bob@example.com",
                    "from": "alice@example.com"
                  }
                },
                {
                  "type": "email",
                  "options": {
                    "to": "bob@example.com",
                    "from": "alice@example.com"
                  }
                },
                {
                  "type": "email",
                  "options": {
                    "to": "bob@example.com",
                    "from": "alice@example.com"
                  }
                }
              ]
            }
          },
          "aliquip_dc": {
            "type": "choice",
            "label": "Is device ok?",
            "goto": "complete",
            "choices": [
              {
                "goto": "complete",
                "and": [
                  {
                    "variable": "$.parts.available",
                    "greater_than_equals": "42"
                  }
                ]
              },
              {
                "goto": "complete",
                "and": [
                  {
                    "variable": "$.parts.available",
                    "greater_than_equals": "42"
                  },
                  {
                    "variable": "$.parts.available",
                    "greater_than_equals": "42"
                  }
                ]
              },
              {
                "goto": "complete",
                "and": [
                  {
                    "variable": "$.parts.available",
                    "greater_than_equals": "42"
                  },
                  {
                    "variable": "$.parts.available",
                    "greater_than_equals": "42"
                  },
                  {
                    "variable": "$.parts.available",
                    "greater_than_equals": "42"
                  }
                ]
              },
              {
                "goto": "complete",
                "and": [
                  {
                    "variable": "$.parts.available",
                    "greater_than_equals": "42"
                  },
                  {
                    "variable": "$.parts.available",
                    "greater_than_equals": "42"
                  },
                  {
                    "variable": "$.parts.available",
                    "greater_than_equals": "42"
                  },
                  {
                    "variable": "$.parts.available",
                    "greater_than_equals": "42"
                  },
                  {
                    "variable": "$.parts.available",
                    "greater_than_equals": "42"
                  }
                ]
              },
              {
                "goto": "complete",
                "and": [
                  {
                    "variable": "$.parts.available",
                    "greater_than_equals": "42"
                  },
                  {
                    "variable": "$.parts.available",
                    "greater_than_equals": "42"
                  },
                  {
                    "variable": "$.parts.available",
                    "greater_than_equals": "42"
                  }
                ]
              }
            ],
            "goto-fail": "process-fail",
            "context": [
              {
                "key": "$.fizz",
                "value": "true",
                "lock": false,
                "ignore": false
              },
              {
                "key": "$.fizz",
                "value": "Pending",
                "lock": false,
                "ignore": false
              }
            ],
            "onError": {
              "finally": {
                "goto": "failed",
                "actions": [
                  {
                    "type": "email",
                    "options": {
                      "to": "bob@example.com",
                      "from": "alice@example.com"
                    }
                  },
                  {
                    "type": "email",
                    "options": {
                      "to": "bob@example.com",
                      "from": "alice@example.com"
                    }
                  },
                  {
                    "type": "email",
                    "options": {
                      "to": "bob@example.com",
                      "from": "alice@example.com"
                    }
                  }
                ]
              },
              "retry": 1
            },
            "onComplete": {
              "actions": [
                {
                  "type": "email",
                  "options": {
                    "to": "bob@example.com",
                    "from": "alice@example.com"
                  }
                },
                {
                  "type": "email",
                  "options": {
                    "to": "bob@example.com",
                    "from": "alice@example.com"
                  }
                },
                {
                  "type": "email",
                  "options": {
                    "to": "bob@example.com",
                    "from": "alice@example.com"
                  }
                },
                {
                  "type": "email",
                  "options": {
                    "to": "bob@example.com",
                    "from": "alice@example.com"
                  }
                },
                {
                  "type": "email",
                  "options": {
                    "to": "bob@example.com",
                    "from": "alice@example.com"
                  }
                }
              ]
            }
          },
          "minim0": {
            "stop_at": 20,
            "time": 523,
            "type": "wait",
            "label": "Wait for cable",
            "goto": "complete",
            "listen_for": [
              {
                "event": "LOC.updated",
                "event_value": {
                  "variable": "$.parts.available",
                  "greater_than_equals": "42"
                }
              },
              {
                "event": "PRO.removed",
                "event_value": {
                  "variable": "$.parts.available",
                  "greater_than_equals": "42"
                }
              },
              {
                "event": "WOR.removed",
                "event_value": {
                  "variable": "$.parts.available",
                  "greater_than_equals": "42"
                }
              }
            ],
            "goto-fail": "process-fail",
            "context": [
              {
                "key": "extract_fields",
                "value": "Pending",
                "lock": false,
                "ignore": false
              },
              {
                "key": "$.unit.status",
                "value": "true",
                "lock": false,
                "ignore": true
              },
              {
                "key": "$.unit.status",
                "value": "$.buzz",
                "lock": false,
                "ignore": true
              }
            ],
            "onError": {
              "finally": {
                "goto": "failed",
                "actions": [
                  {
                    "type": "email",
                    "options": {
                      "to": "bob@example.com",
                      "from": "alice@example.com"
                    }
                  },
                  {
                    "type": "email",
                    "options": {
                      "to": "bob@example.com",
                      "from": "alice@example.com"
                    }
                  }
                ]
              },
              "retry": 10
            },
            "onComplete": {
              "actions": [
                {
                  "type": "email",
                  "options": {
                    "to": "bob@example.com",
                    "from": "alice@example.com"
                  }
                }
              ]
            }
          },
          "veniam_3": {
            "type": "function",
            "options": {
              "function": "assignUnitsFromCustomerToProject",
              "payload": {
                "part_id": "ebc810f8-adfa-4dac-a663-513e1a228789",
                "qty": 4,
                "program_id": "ebc810f8-adfa-4dac-a663-513e1a228789",
                "allow_scarcity": true,
                "force": true,
                "status": "Reticulating splines"
              }
            },
            "label": "Confirm the device has powered off",
            "goto": "complete",
            "goto-fail": "process-fail",
            "context": [
              {
                "key": "extract_fields",
                "value": "$.buzz",
                "lock": false,
                "ignore": true
              },
              {
                "key": "$.unit.status",
                "value": "$.buzz",
                "lock": true,
                "ignore": false
              },
              {
                "key": "extract_fields",
                "value": "Pending",
                "lock": false,
                "ignore": true
              },
              {
                "key": "$.unit.status",
                "value": "Pending",
                "lock": true,
                "ignore": true
              }
            ],
            "onError": {
              "finally": {
                "goto": "failed",
                "actions": [
                  {
                    "type": "email",
                    "options": {
                      "to": "bob@example.com",
                      "from": "alice@example.com"
                    }
                  },
                  {
                    "type": "email",
                    "options": {
                      "to": "bob@example.com",
                      "from": "alice@example.com"
                    }
                  }
                ]
              },
              "retry": 0
            },
            "onComplete": {
              "actions": [
                {
                  "type": "email",
                  "options": {
                    "to": "bob@example.com",
                    "from": "alice@example.com"
                  }
                },
                {
                  "type": "email",
                  "options": {
                    "to": "bob@example.com",
                    "from": "alice@example.com"
                  }
                },
                {
                  "type": "email",
                  "options": {
                    "to": "bob@example.com",
                    "from": "alice@example.com"
                  }
                },
                {
                  "type": "email",
                  "options": {
                    "to": "bob@example.com",
                    "from": "alice@example.com"
                  }
                }
              ]
            }
          }
        },
        "starts_at": "entry",
        "label": "MLTI iPad Assembly Assignment",
        "workflow_id": "e530652e-28e8-4f64-84af-e1cf0ff7c805",
        "applies_to": "part",
        "slug": "mlti-ipad-assembly-assignment",
        "version": "1.0",
        "workflow_version": 7,
        "context": [
          {
            "key": "$.unit.status",
            "value": "Pending",
            "lock": true,
            "ignore": false
          },
          {
            "key": "extract_fields",
            "value": "Pending",
            "lock": false,
            "ignore": true
          },
          {
            "key": "extract_fields",
            "value": "$.buzz",
            "lock": false,
            "ignore": false
          },
          {
            "key": "$.unit.status",
            "value": "true",
            "lock": false,
            "ignore": false
          },
          {
            "key": "$.fizz",
            "value": "Pending",
            "lock": false,
            "ignore": false
          }
        ],
        "created": "1991-07-22T09:31:56.551Z",
        "updated": "2008-11-03T02:21:04.903Z"
      },
      "cycles_pending": 4,
      "cycles_in_progress": 4,
      "cycles_verifying": 4,
      "cycles_complete": 4,
      "cycles_blocked": 4,
      "cycles_cancelled": 4
    }
  ],
  "start_date": "2019-08-07T18:10:53.0Z",
  "end_date": "2020-08-07T18:10:53.0Z",
  "created": "1976-09-07T08:40:45.54Z",
  "updated": "2002-02-16T03:22:47.457Z"
}