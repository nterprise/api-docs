---
layout: page
parent: Niagara API
nav_order: 18
title: Work Flows
language_tabs: ''
toc_footers: []
includes: []
search: true
highlight_theme: darkula
headingLevel: 2

---

<h1 id="work-flows">Work Flows v2.0.0</h1>

> Scroll down for example requests and responses.

API for the nterprise application

<h1 id="work-flows-workflow">Workflow</h1>

## fetchAllWorkflows

<a id="opIdfetchAllWorkflows"></a>

`GET /work-flows`

*Fetches A Page of workflows*

Fetch Workflow

<h3 id="fetchallworkflows-parameters">Parameters</h3>

|Name|In|Type|Required|Description|
|---|---|---|---|---|
|limit|query|integer(int32)|false|How many items to return at one time (max 100)|
|offset|query|string|false|Continue from last offset|
|sort|query|string|false|Sort by field|
|filter[label]|query|string|false|Filter where the label contains this value|

#### Enumerated Values

|Parameter|Value|
|---|---|
|sort|label|
|sort|-label|
|sort|created|
|sort|-created|
|sort|updated|
|sort|-updated|
|sort|version|
|sort|-version|
|sort|applies_to|
|sort|-applies_to|

> Example responses

> 200 Response

```json
{
  "properties": {
    "_embedded": {
      "type": "object",
      "properties": {
        "nter:work-flows": {
          "type": "array",
          "maxItems": 100,
          "items": {
            "type": "object",
            "x-hal": true,
            "x-ui-hide": true,
            "properties": {
              "_links": {
                "type": "object",
                "properties": {
                  "self": {
                    "type": "object",
                    "readOnly": true,
                    "properties": {
                      "href": {
                        "type": "string",
                        "example": "https://api.nterprise.com/work-flows/9f692b9f-958b-4f74-ba72-5878407bb60d"
                      }
                    }
                  }
                }
              }
            },
            "allOf": [
              {
                "x-id": "#workflow",
                "x-nter-relation": "work-flows",
                "x-nter-model": "WorkFlow",
                "x-nter-callable": true,
                "type": "object",
                "description": "Workflow",
                "required": [
                  "steps",
                  "starts_at",
                  "label",
                  "workflow_id",
                  "applies_to"
                ],
                "properties": {
                  "workflow_id": {
                    "type": "string",
                    "description": "Customer identifier",
                    "example": "e530652e-28e8-4f64-84af-e1cf0ff7c805",
                    "x-examples": [
                      "e530652e-28e8-4f64-84af-e1cf0ff7c805"
                    ],
                    "pattern": "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"
                  },
                  "label": {
                    "type": "string",
                    "example": "MLTI iPad Assembly Assignment",
                    "x-examples": [
                      "MLTI iPad Assembly Assignment"
                    ],
                    "description": "Label for the workflow"
                  },
                  "slug": {
                    "type": "string",
                    "description": "Auto-generated slug for the workflow",
                    "example": "mlti-ipad-assembly-assignment",
                    "x-examples": [
                      "mlti-ipad-assembly-assignment"
                    ]
                  },
                  "version": {
                    "type": "string",
                    "description": "Version of the workflow schema used",
                    "enum": [
                      "1.0"
                    ],
                    "example": "1.0"
                  },
                  "workflow_version": {
                    "type": "integer",
                    "format": "int32",
                    "example": 7,
                    "x-examples": [
                      7
                    ],
                    "readOnly": true,
                    "description": "Version number for the work flows (the number of times it has been changed"
                  },
                  "applies_to": {
                    "type": "string",
                    "description": "The entity type this work flow applies too",
                    "enum": [
                      "unit",
                      "part",
                      "program",
                      "project",
                      "customer",
                      "contact"
                    ],
                    "example": "unit"
                  },
                  "starts_at": {
                    "type": "string",
                    "description": "Starting step",
                    "example": "entry",
                    "x-examples": [
                      "entry"
                    ]
                  },
                  "context": {
                    "type": "array",
                    "description": "Initial values to set on the context",
                    "items": {
                      "type": "object",
                      "required": [
                        "key",
                        "value"
                      ],
                      "properties": {
                        "key": {
                          "type": "string",
                          "description": "The context key to set",
                          "example": "$.fizz",
                          "x-examples": [
                            "$.fizz",
                            "$.unit.status",
                            "extract_fields"
                          ]
                        },
                        "value": {
                          "type": "string",
                          "description": "Value to set",
                          "example": "$.buzz",
                          "x-examples": [
                            "$.buzz",
                            "Pending",
                            true
                          ]
                        },
                        "lock": {
                          "type": "boolean",
                          "description": "Prevents other steps from writing this value",
                          "example": true
                        },
                        "ignore": {
                          "type": "boolean",
                          "description": "When trying to set a locked key, do not fail",
                          "example": false
                        }
                      }
                    }
                  },
                  "steps": {
                    "type": "object",
                    "description": "Steps for the workflow",
                    "x-patternProperties": {
                      "(confirm|success|fail|manual|run-ace|follow)": {
                        "type": "object",
                        "allOf": [
                          {
                            "type": "object",
                            "description": "Close step",
                            "required": [
                              "step"
                            ],
                            "properties": {
                              "step": {
                                "type": "string",
                                "description": "Step to mark as complete",
                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                "example": "complete",
                                "x-examples": [
                                  "complete"
                                ]
                              }
                            },
                            "anyOf": [
                              {
                                "type": "object",
                                "description": "Require the user confirm an action. This is normally used when Niagara cannot automatically detect that a task or action has been performed.",
                                "x-nter-step-component": "confirm-action",
                                "properties": {
                                  "label": {
                                    "x-examples": [
                                      "Confirm the device has powered off"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "component",
                                      "payload"
                                    ],
                                    "properties": {
                                      "component": {
                                        "enum": [
                                          "confirm-action"
                                        ],
                                        "example": "confirm-action",
                                        "x-examples": [
                                          "confirm-action"
                                        ]
                                      },
                                      "payload": {
                                        "type": "object",
                                        "required": [
                                          "message"
                                        ],
                                        "properties": {
                                          "message": {
                                            "type": "string",
                                            "description": "The confirmation message to display to the user",
                                            "example": "Device powered off?",
                                            "x-examples": [
                                              "Device powered off?"
                                            ]
                                          },
                                          "negative_message": {
                                            "type": "string",
                                            "description": "An optional inverse message",
                                            "nullable": true,
                                            "example": "Device not functioning",
                                            "x-examples": [
                                              "Device not functioning"
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                },
                                "allOf": [
                                  {
                                    "type": "object",
                                    "x-ui-hide": true,
                                    "description": "A step which requires a user to complete",
                                    "required": [
                                      "type",
                                      "options"
                                    ],
                                    "properties": {
                                      "type": {
                                        "example": "user",
                                        "x-examples": [
                                          "user"
                                        ]
                                      },
                                      "options": {
                                        "type": "object",
                                        "required": [
                                          "component",
                                          "payload"
                                        ],
                                        "properties": {
                                          "component": {
                                            "type": "string",
                                            "description": "Name of the function to invoke",
                                            "example": "assignUnitsFromCustomerToProject",
                                            "x-examples": [
                                              "assignUnitsFromCustomerToProject"
                                            ]
                                          },
                                          "payload": {
                                            "type": "object"
                                          }
                                        }
                                      }
                                    },
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "x-ui-hide": true,
                                        "required": [
                                          "type",
                                          "label",
                                          "goto"
                                        ],
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "Type of workflow step",
                                            "enum": [
                                              "load",
                                              "choice",
                                              "function",
                                              "machine",
                                              "pass",
                                              "fail",
                                              "success",
                                              "user",
                                              "wait"
                                            ]
                                          },
                                          "label": {
                                            "type": "string",
                                            "description": "Label for the step",
                                            "example": "Find units",
                                            "x-examples": [
                                              "Find units"
                                            ]
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to move to",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "complete",
                                            "x-examples": [
                                              "complete"
                                            ]
                                          },
                                          "goto-fail": {
                                            "type": "string",
                                            "description": "Step to transition too if this step cannot be completed",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "process-fail",
                                            "x-examples": [
                                              "process-fail"
                                            ]
                                          },
                                          "context": {
                                            "type": "array",
                                            "description": "Initial values to set on the context",
                                            "items": {
                                              "type": "object",
                                              "required": [
                                                "key",
                                                "value"
                                              ],
                                              "properties": {
                                                "key": {
                                                  "type": "string",
                                                  "description": "The context key to set",
                                                  "example": "$.fizz",
                                                  "x-examples": [
                                                    "$.fizz",
                                                    "$.unit.status",
                                                    "extract_fields"
                                                  ]
                                                },
                                                "value": {
                                                  "type": "string",
                                                  "description": "Value to set",
                                                  "example": "$.buzz",
                                                  "x-examples": [
                                                    "$.buzz",
                                                    "Pending",
                                                    true
                                                  ]
                                                },
                                                "lock": {
                                                  "type": "boolean",
                                                  "description": "Prevents other steps from writing this value",
                                                  "example": true
                                                },
                                                "ignore": {
                                                  "type": "boolean",
                                                  "description": "When trying to set a locked key, do not fail",
                                                  "example": false
                                                }
                                              }
                                            }
                                          },
                                          "onError": {
                                            "type": "object",
                                            "description": "Action to take when step fails",
                                            "required": [
                                              "finally"
                                            ],
                                            "properties": {
                                              "retry": {
                                                "type": "integer",
                                                "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                                "minimum": 0,
                                                "maximum": 10,
                                                "example": 3,
                                                "default": 0
                                              },
                                              "finally": {
                                                "type": "object",
                                                "description": "What to do after all retries",
                                                "required": [
                                                  "goto"
                                                ],
                                                "properties": {
                                                  "actions": {
                                                    "type": "array",
                                                    "description": "Actions to take on failure",
                                                    "items": {
                                                      "anyOf": [
                                                        {
                                                          "type": "object",
                                                          "properties": {
                                                            "type": {
                                                              "type": "string",
                                                              "description": "The type of the action",
                                                              "enum": [
                                                                "email"
                                                              ]
                                                            },
                                                            "options": {
                                                              "type": "object",
                                                              "description": "settings for the action",
                                                              "additionalProperties": {
                                                                "type": "string"
                                                              },
                                                              "x-examples": [
                                                                {
                                                                  "to": "bob@example.com",
                                                                  "from": "alice@example.com"
                                                                }
                                                              ]
                                                            }
                                                          }
                                                        }
                                                      ]
                                                    }
                                                  },
                                                  "goto": {
                                                    "type": "string",
                                                    "description": "Step to transition to on failure",
                                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                                    "example": "failed",
                                                    "x-examples": [
                                                      "failed"
                                                    ]
                                                  }
                                                }
                                              }
                                            }
                                          },
                                          "onComplete": {
                                            "type": "object",
                                            "description": "Actions to take when the step completes",
                                            "properties": {
                                              "actions": {
                                                "type": "array",
                                                "items": {
                                                  "anyOf": [
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "type": {
                                                          "type": "string",
                                                          "description": "The type of the action",
                                                          "enum": [
                                                            "email"
                                                          ]
                                                        },
                                                        "options": {
                                                          "type": "object",
                                                          "description": "settings for the action",
                                                          "additionalProperties": {
                                                            "type": "string"
                                                          },
                                                          "x-examples": [
                                                            {
                                                              "to": "bob@example.com",
                                                              "from": "alice@example.com"
                                                            }
                                                          ]
                                                        }
                                                      }
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "object",
                                "description": "Display a link or modal to a user which contains instructions from a PDF",
                                "x-nter-step-component": "follow-pdf-instructions",
                                "required": [
                                  "label",
                                  "payload"
                                ],
                                "properties": {
                                  "label": {
                                    "x-examples": [
                                      "Instruct user to follow steps outlined in Apple PDF"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "component",
                                      "payload"
                                    ],
                                    "properties": {
                                      "component": {
                                        "enum": [
                                          "follow-pds-instructions"
                                        ],
                                        "example": "follow-pdf-instructions",
                                        "x-examples": [
                                          "follow-pdf-instructions"
                                        ]
                                      },
                                      "payload": {
                                        "type": "object",
                                        "required": [
                                          "attachment_id"
                                        ],
                                        "properties": {
                                          "attachment_id": {
                                            "type": "string",
                                            "description": "UUID for the attachment",
                                            "format": "uuid",
                                            "example": "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7",
                                            "x-examples": [
                                              "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7"
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                },
                                "allOf": [
                                  {
                                    "type": "object",
                                    "x-ui-hide": true,
                                    "description": "A step which requires a user to complete",
                                    "required": [
                                      "type",
                                      "options"
                                    ],
                                    "properties": {
                                      "type": {
                                        "example": "user",
                                        "x-examples": [
                                          "user"
                                        ]
                                      },
                                      "options": {
                                        "type": "object",
                                        "required": [
                                          "component",
                                          "payload"
                                        ],
                                        "properties": {
                                          "component": {
                                            "type": "string",
                                            "description": "Name of the function to invoke",
                                            "example": "assignUnitsFromCustomerToProject",
                                            "x-examples": [
                                              "assignUnitsFromCustomerToProject"
                                            ]
                                          },
                                          "payload": {
                                            "type": "object"
                                          }
                                        }
                                      }
                                    },
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "x-ui-hide": true,
                                        "required": [
                                          "type",
                                          "label",
                                          "goto"
                                        ],
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "Type of workflow step",
                                            "enum": [
                                              "load",
                                              "choice",
                                              "function",
                                              "machine",
                                              "pass",
                                              "fail",
                                              "success",
                                              "user",
                                              "wait"
                                            ]
                                          },
                                          "label": {
                                            "type": "string",
                                            "description": "Label for the step",
                                            "example": "Find units",
                                            "x-examples": [
                                              "Find units"
                                            ]
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to move to",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "complete",
                                            "x-examples": [
                                              "complete"
                                            ]
                                          },
                                          "goto-fail": {
                                            "type": "string",
                                            "description": "Step to transition too if this step cannot be completed",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "process-fail",
                                            "x-examples": [
                                              "process-fail"
                                            ]
                                          },
                                          "context": {
                                            "type": "array",
                                            "description": "Initial values to set on the context",
                                            "items": {
                                              "type": "object",
                                              "required": [
                                                "key",
                                                "value"
                                              ],
                                              "properties": {
                                                "key": {
                                                  "type": "string",
                                                  "description": "The context key to set",
                                                  "example": "$.fizz",
                                                  "x-examples": [
                                                    "$.fizz",
                                                    "$.unit.status",
                                                    "extract_fields"
                                                  ]
                                                },
                                                "value": {
                                                  "type": "string",
                                                  "description": "Value to set",
                                                  "example": "$.buzz",
                                                  "x-examples": [
                                                    "$.buzz",
                                                    "Pending",
                                                    true
                                                  ]
                                                },
                                                "lock": {
                                                  "type": "boolean",
                                                  "description": "Prevents other steps from writing this value",
                                                  "example": true
                                                },
                                                "ignore": {
                                                  "type": "boolean",
                                                  "description": "When trying to set a locked key, do not fail",
                                                  "example": false
                                                }
                                              }
                                            }
                                          },
                                          "onError": {
                                            "type": "object",
                                            "description": "Action to take when step fails",
                                            "required": [
                                              "finally"
                                            ],
                                            "properties": {
                                              "retry": {
                                                "type": "integer",
                                                "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                                "minimum": 0,
                                                "maximum": 10,
                                                "example": 3,
                                                "default": 0
                                              },
                                              "finally": {
                                                "type": "object",
                                                "description": "What to do after all retries",
                                                "required": [
                                                  "goto"
                                                ],
                                                "properties": {
                                                  "actions": {
                                                    "type": "array",
                                                    "description": "Actions to take on failure",
                                                    "items": {
                                                      "anyOf": [
                                                        {
                                                          "type": "object",
                                                          "properties": {
                                                            "type": {
                                                              "type": "string",
                                                              "description": "The type of the action",
                                                              "enum": [
                                                                "email"
                                                              ]
                                                            },
                                                            "options": {
                                                              "type": "object",
                                                              "description": "settings for the action",
                                                              "additionalProperties": {
                                                                "type": "string"
                                                              },
                                                              "x-examples": [
                                                                {
                                                                  "to": "bob@example.com",
                                                                  "from": "alice@example.com"
                                                                }
                                                              ]
                                                            }
                                                          }
                                                        }
                                                      ]
                                                    }
                                                  },
                                                  "goto": {
                                                    "type": "string",
                                                    "description": "Step to transition to on failure",
                                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                                    "example": "failed",
                                                    "x-examples": [
                                                      "failed"
                                                    ]
                                                  }
                                                }
                                              }
                                            }
                                          },
                                          "onComplete": {
                                            "type": "object",
                                            "description": "Actions to take when the step completes",
                                            "properties": {
                                              "actions": {
                                                "type": "array",
                                                "items": {
                                                  "anyOf": [
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "type": {
                                                          "type": "string",
                                                          "description": "The type of the action",
                                                          "enum": [
                                                            "email"
                                                          ]
                                                        },
                                                        "options": {
                                                          "type": "object",
                                                          "description": "settings for the action",
                                                          "additionalProperties": {
                                                            "type": "string"
                                                          },
                                                          "x-examples": [
                                                            {
                                                              "to": "bob@example.com",
                                                              "from": "alice@example.com"
                                                            }
                                                          ]
                                                        }
                                                      }
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "object",
                                "description": "Ask the user to manually enter (or confirm) data for an entity",
                                "x-nter-step-component": "manual-data-entry",
                                "properties": {
                                  "label": {
                                    "x-examples": [
                                      "Enter asset tag and confirm serial number"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "component",
                                      "payload"
                                    ],
                                    "properties": {
                                      "component": {
                                        "enum": [
                                          "manual-data-entry"
                                        ],
                                        "example": "manual-data-entry",
                                        "x-examples": [
                                          "manual-data-entry"
                                        ]
                                      },
                                      "payload": {
                                        "type": "object",
                                        "required": [
                                          "fields"
                                        ],
                                        "properties": {
                                          "fields": {
                                            "type": "array",
                                            "description": "Configuration for each field",
                                            "items": {
                                              "type": "object",
                                              "required": [
                                                "input_type",
                                                "label",
                                                "required",
                                                "entity_field"
                                              ],
                                              "properties": {
                                                "input_type": {
                                                  "type": "string",
                                                  "description": "The type of input field to display",
                                                  "enum": [
                                                    "textbox",
                                                    "input"
                                                  ]
                                                },
                                                "label": {
                                                  "type": "string",
                                                  "description": "Label to display for the field",
                                                  "example": "Asset Tag",
                                                  "x-examples": [
                                                    "Asset Tag"
                                                  ]
                                                },
                                                "required": {
                                                  "type": "boolean",
                                                  "description": "Display the field as required input. Note: this is a helper function. It singles that the user is required to input data at this step. If the field is required on the entity, the user will be presented with a validation message",
                                                  "example": true
                                                },
                                                "entity_field": {
                                                  "type": "string",
                                                  "description": "JSON Path to the field on the entity. If the path does not start with '$' then the entity on the context is assumed. Otherwise the data will be set on the context path",
                                                  "example": "input_filter[?(@.key = 'asset-tag')]",
                                                  "x-examples": [
                                                    "input_filter[?(@.key = 'asset-tag')]"
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                },
                                "allOf": [
                                  {
                                    "type": "object",
                                    "x-ui-hide": true,
                                    "description": "A step which requires a user to complete",
                                    "required": [
                                      "type",
                                      "options"
                                    ],
                                    "properties": {
                                      "type": {
                                        "example": "user",
                                        "x-examples": [
                                          "user"
                                        ]
                                      },
                                      "options": {
                                        "type": "object",
                                        "required": [
                                          "component",
                                          "payload"
                                        ],
                                        "properties": {
                                          "component": {
                                            "type": "string",
                                            "description": "Name of the function to invoke",
                                            "example": "assignUnitsFromCustomerToProject",
                                            "x-examples": [
                                              "assignUnitsFromCustomerToProject"
                                            ]
                                          },
                                          "payload": {
                                            "type": "object"
                                          }
                                        }
                                      }
                                    },
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "x-ui-hide": true,
                                        "required": [
                                          "type",
                                          "label",
                                          "goto"
                                        ],
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "Type of workflow step",
                                            "enum": [
                                              "load",
                                              "choice",
                                              "function",
                                              "machine",
                                              "pass",
                                              "fail",
                                              "success",
                                              "user",
                                              "wait"
                                            ]
                                          },
                                          "label": {
                                            "type": "string",
                                            "description": "Label for the step",
                                            "example": "Find units",
                                            "x-examples": [
                                              "Find units"
                                            ]
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to move to",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "complete",
                                            "x-examples": [
                                              "complete"
                                            ]
                                          },
                                          "goto-fail": {
                                            "type": "string",
                                            "description": "Step to transition too if this step cannot be completed",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "process-fail",
                                            "x-examples": [
                                              "process-fail"
                                            ]
                                          },
                                          "context": {
                                            "type": "array",
                                            "description": "Initial values to set on the context",
                                            "items": {
                                              "type": "object",
                                              "required": [
                                                "key",
                                                "value"
                                              ],
                                              "properties": {
                                                "key": {
                                                  "type": "string",
                                                  "description": "The context key to set",
                                                  "example": "$.fizz",
                                                  "x-examples": [
                                                    "$.fizz",
                                                    "$.unit.status",
                                                    "extract_fields"
                                                  ]
                                                },
                                                "value": {
                                                  "type": "string",
                                                  "description": "Value to set",
                                                  "example": "$.buzz",
                                                  "x-examples": [
                                                    "$.buzz",
                                                    "Pending",
                                                    true
                                                  ]
                                                },
                                                "lock": {
                                                  "type": "boolean",
                                                  "description": "Prevents other steps from writing this value",
                                                  "example": true
                                                },
                                                "ignore": {
                                                  "type": "boolean",
                                                  "description": "When trying to set a locked key, do not fail",
                                                  "example": false
                                                }
                                              }
                                            }
                                          },
                                          "onError": {
                                            "type": "object",
                                            "description": "Action to take when step fails",
                                            "required": [
                                              "finally"
                                            ],
                                            "properties": {
                                              "retry": {
                                                "type": "integer",
                                                "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                                "minimum": 0,
                                                "maximum": 10,
                                                "example": 3,
                                                "default": 0
                                              },
                                              "finally": {
                                                "type": "object",
                                                "description": "What to do after all retries",
                                                "required": [
                                                  "goto"
                                                ],
                                                "properties": {
                                                  "actions": {
                                                    "type": "array",
                                                    "description": "Actions to take on failure",
                                                    "items": {
                                                      "anyOf": [
                                                        {
                                                          "type": "object",
                                                          "properties": {
                                                            "type": {
                                                              "type": "string",
                                                              "description": "The type of the action",
                                                              "enum": [
                                                                "email"
                                                              ]
                                                            },
                                                            "options": {
                                                              "type": "object",
                                                              "description": "settings for the action",
                                                              "additionalProperties": {
                                                                "type": "string"
                                                              },
                                                              "x-examples": [
                                                                {
                                                                  "to": "bob@example.com",
                                                                  "from": "alice@example.com"
                                                                }
                                                              ]
                                                            }
                                                          }
                                                        }
                                                      ]
                                                    }
                                                  },
                                                  "goto": {
                                                    "type": "string",
                                                    "description": "Step to transition to on failure",
                                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                                    "example": "failed",
                                                    "x-examples": [
                                                      "failed"
                                                    ]
                                                  }
                                                }
                                              }
                                            }
                                          },
                                          "onComplete": {
                                            "type": "object",
                                            "description": "Actions to take when the step completes",
                                            "properties": {
                                              "actions": {
                                                "type": "array",
                                                "items": {
                                                  "anyOf": [
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "type": {
                                                          "type": "string",
                                                          "description": "The type of the action",
                                                          "enum": [
                                                            "email"
                                                          ]
                                                        },
                                                        "options": {
                                                          "type": "object",
                                                          "description": "settings for the action",
                                                          "additionalProperties": {
                                                            "type": "string"
                                                          },
                                                          "x-examples": [
                                                            {
                                                              "to": "bob@example.com",
                                                              "from": "alice@example.com"
                                                            }
                                                          ]
                                                        }
                                                      }
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "object",
                                "description": "Ask the user to follow a list and check off boxes",
                                "x-nter-step-component": "task-list",
                                "properties": {
                                  "label": {
                                    "x-examples": [
                                      "Enter asset tag and confirm serial number"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "component",
                                      "payload"
                                    ],
                                    "properties": {
                                      "component": {
                                        "enum": [
                                          "task-list"
                                        ],
                                        "example": "task-list",
                                        "x-examples": [
                                          "task-list"
                                        ]
                                      },
                                      "payload": {
                                        "type": "object",
                                        "required": [
                                          "items"
                                        ],
                                        "properties": {
                                          "is_qc": {
                                            "type": "boolean",
                                            "description": "Flags this list as a QC task list. This means that a different user can close the task to one previously on the context"
                                          },
                                          "items": {
                                            "type": "array",
                                            "description": "Configuration for each task list item",
                                            "items": {
                                              "type": "object",
                                              "required": [
                                                "label",
                                                "help",
                                                "evaluated",
                                                "na_option"
                                              ],
                                              "properties": {
                                                "label": {
                                                  "type": "string",
                                                  "description": "Label to display for the field",
                                                  "example": "Asset Tag placement",
                                                  "x-examples": [
                                                    "Asset Tag placement"
                                                  ]
                                                },
                                                "slug": {
                                                  "type": "string",
                                                  "description": "Slug for the item (Auto-generated from the label)",
                                                  "readOnly": true,
                                                  "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$",
                                                  "example": "asset-tag-placement",
                                                  "x-examples": [
                                                    "asset-tag-placement"
                                                  ]
                                                },
                                                "help": {
                                                  "type": "string",
                                                  "description": "Message describing what is needed to be checked",
                                                  "example": "Asset Tag attached to the unit in the correct position",
                                                  "x-examples": [
                                                    "Asset Tag attached to the unit in the correct position"
                                                  ]
                                                },
                                                "evaluated": {
                                                  "type": "boolean",
                                                  "description": "When set to true, this will fail the step if the value for the item is false or N/A",
                                                  "example": true
                                                },
                                                "na_field": {
                                                  "type": "boolean",
                                                  "description": "Allow the user to select the N/A option when checking off the list",
                                                  "example": true
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                },
                                "allOf": [
                                  {
                                    "type": "object",
                                    "x-ui-hide": true,
                                    "description": "A step which requires a user to complete",
                                    "required": [
                                      "type",
                                      "options"
                                    ],
                                    "properties": {
                                      "type": {
                                        "example": "user",
                                        "x-examples": [
                                          "user"
                                        ]
                                      },
                                      "options": {
                                        "type": "object",
                                        "required": [
                                          "component",
                                          "payload"
                                        ],
                                        "properties": {
                                          "component": {
                                            "type": "string",
                                            "description": "Name of the function to invoke",
                                            "example": "assignUnitsFromCustomerToProject",
                                            "x-examples": [
                                              "assignUnitsFromCustomerToProject"
                                            ]
                                          },
                                          "payload": {
                                            "type": "object"
                                          }
                                        }
                                      }
                                    },
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "x-ui-hide": true,
                                        "required": [
                                          "type",
                                          "label",
                                          "goto"
                                        ],
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "Type of workflow step",
                                            "enum": [
                                              "load",
                                              "choice",
                                              "function",
                                              "machine",
                                              "pass",
                                              "fail",
                                              "success",
                                              "user",
                                              "wait"
                                            ]
                                          },
                                          "label": {
                                            "type": "string",
                                            "description": "Label for the step",
                                            "example": "Find units",
                                            "x-examples": [
                                              "Find units"
                                            ]
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to move to",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "complete",
                                            "x-examples": [
                                              "complete"
                                            ]
                                          },
                                          "goto-fail": {
                                            "type": "string",
                                            "description": "Step to transition too if this step cannot be completed",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "process-fail",
                                            "x-examples": [
                                              "process-fail"
                                            ]
                                          },
                                          "context": {
                                            "type": "array",
                                            "description": "Initial values to set on the context",
                                            "items": {
                                              "type": "object",
                                              "required": [
                                                "key",
                                                "value"
                                              ],
                                              "properties": {
                                                "key": {
                                                  "type": "string",
                                                  "description": "The context key to set",
                                                  "example": "$.fizz",
                                                  "x-examples": [
                                                    "$.fizz",
                                                    "$.unit.status",
                                                    "extract_fields"
                                                  ]
                                                },
                                                "value": {
                                                  "type": "string",
                                                  "description": "Value to set",
                                                  "example": "$.buzz",
                                                  "x-examples": [
                                                    "$.buzz",
                                                    "Pending",
                                                    true
                                                  ]
                                                },
                                                "lock": {
                                                  "type": "boolean",
                                                  "description": "Prevents other steps from writing this value",
                                                  "example": true
                                                },
                                                "ignore": {
                                                  "type": "boolean",
                                                  "description": "When trying to set a locked key, do not fail",
                                                  "example": false
                                                }
                                              }
                                            }
                                          },
                                          "onError": {
                                            "type": "object",
                                            "description": "Action to take when step fails",
                                            "required": [
                                              "finally"
                                            ],
                                            "properties": {
                                              "retry": {
                                                "type": "integer",
                                                "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                                "minimum": 0,
                                                "maximum": 10,
                                                "example": 3,
                                                "default": 0
                                              },
                                              "finally": {
                                                "type": "object",
                                                "description": "What to do after all retries",
                                                "required": [
                                                  "goto"
                                                ],
                                                "properties": {
                                                  "actions": {
                                                    "type": "array",
                                                    "description": "Actions to take on failure",
                                                    "items": {
                                                      "anyOf": [
                                                        {
                                                          "type": "object",
                                                          "properties": {
                                                            "type": {
                                                              "type": "string",
                                                              "description": "The type of the action",
                                                              "enum": [
                                                                "email"
                                                              ]
                                                            },
                                                            "options": {
                                                              "type": "object",
                                                              "description": "settings for the action",
                                                              "additionalProperties": {
                                                                "type": "string"
                                                              },
                                                              "x-examples": [
                                                                {
                                                                  "to": "bob@example.com",
                                                                  "from": "alice@example.com"
                                                                }
                                                              ]
                                                            }
                                                          }
                                                        }
                                                      ]
                                                    }
                                                  },
                                                  "goto": {
                                                    "type": "string",
                                                    "description": "Step to transition to on failure",
                                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                                    "example": "failed",
                                                    "x-examples": [
                                                      "failed"
                                                    ]
                                                  }
                                                }
                                              }
                                            }
                                          },
                                          "onComplete": {
                                            "type": "object",
                                            "description": "Actions to take when the step completes",
                                            "properties": {
                                              "actions": {
                                                "type": "array",
                                                "items": {
                                                  "anyOf": [
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "type": {
                                                          "type": "string",
                                                          "description": "The type of the action",
                                                          "enum": [
                                                            "email"
                                                          ]
                                                        },
                                                        "options": {
                                                          "type": "object",
                                                          "description": "settings for the action",
                                                          "additionalProperties": {
                                                            "type": "string"
                                                          },
                                                          "x-examples": [
                                                            {
                                                              "to": "bob@example.com",
                                                              "from": "alice@example.com"
                                                            }
                                                          ]
                                                        }
                                                      }
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "object",
                                "description": "Run the ACE-IOS application to provision iOS devices or ",
                                "properties": {
                                  "type": {
                                    "example": "machine",
                                    "x-examples": [
                                      "machine"
                                    ]
                                  },
                                  "label": {
                                    "x-examples": [
                                      "Run Application"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "application",
                                      "configuration"
                                    ],
                                    "properties": {
                                      "configuration": {
                                        "type": "object",
                                        "description": "ACE Configuration options",
                                        "properties": {
                                          "pairing_cert": {
                                            "type": "string",
                                            "format": "base64",
                                            "description": "Contents of a *.crt file exported from Apple Configurator or MDM",
                                            "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                            "x-examples": [
                                              "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                            ],
                                            "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                          },
                                          "pairing_key": {
                                            "type": "string",
                                            "format": "base64",
                                            "description": "Contents of a *.der file exported from Apple Configurator or MDM",
                                            "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                            "x-examples": [
                                              "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                            ],
                                            "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                          },
                                          "restore_device": {
                                            "type": "boolean",
                                            "description": "Restore device to factory defaults"
                                          },
                                          "automated_enrollment": {
                                            "type": "boolean",
                                            "description": "Automatically enroll the device to MDM"
                                          },
                                          "mdm": {
                                            "type": "object",
                                            "format": "base64",
                                            "description": "The settings for the Customers MDM",
                                            "properties": {
                                              "vendor": {
                                                "type": "string",
                                                "description": "MDM vendor. Currently, supported values are AirWatch, JAMF, and Meraki.",
                                                "enum": [
                                                  "AirWatch",
                                                  "JAMF",
                                                  "Meraki"
                                                ]
                                              },
                                              "console_url": {
                                                "type": "string",
                                                "format": "uri",
                                                "description": "Base URL for HTTP requests",
                                                "example": "http://jamf.zones.com",
                                                "x-examples": [
                                                  "http://jamf.zones.com"
                                                ]
                                              },
                                              "user": {
                                                "type": "string",
                                                "description": "MDM User name",
                                                "example": "NterpriseBob",
                                                "x-examples": [
                                                  "NterpriseBob"
                                                ]
                                              },
                                              "password": {
                                                "type": "string",
                                                "description": "MDM password"
                                              },
                                              "tenant_code": {
                                                "type": "string",
                                                "description": "MDM authentication key",
                                                "example": "nterprise",
                                                "x-examples": [
                                                  "nterprise"
                                                ]
                                              },
                                              "set_asset_tag": {
                                                "type": "string",
                                                "description": "Sets the devices Asset tag based on a field from the unit",
                                                "example": "$._entity.input_filter[?(@.key = 'asset-tag')]",
                                                "x-examples": [
                                                  "$._entity.input_filter[?(@.key = 'asset-tag')]"
                                                ]
                                              }
                                            }
                                          },
                                          "field_mappings": {
                                            "type": "array",
                                            "description": "List of fields to map to the device",
                                            "items": {
                                              "type": "object",
                                              "properties": {
                                                "from": {
                                                  "type": "string",
                                                  "description": "The field reported from ACE",
                                                  "enum": [
                                                    "serial_number",
                                                    "name",
                                                    "ecid",
                                                    "udid",
                                                    "configurator_serial",
                                                    "ios",
                                                    "model",
                                                    "storage",
                                                    "wifi_mac",
                                                    "bt_mac",
                                                    "ethernet_mac",
                                                    "thundersync_serial",
                                                    "iccid",
                                                    "iccid2",
                                                    "imei",
                                                    "imei2",
                                                    "missed_profiles",
                                                    "missed_apps",
                                                    "icon_list_regex",
                                                    "icon_layout",
                                                    "bat_capacity"
                                                  ]
                                                },
                                                "to": {
                                                  "type": "string",
                                                  "description": "Field to set on the entity",
                                                  "example": "$._entity.input_filter[?(@.key = 'serial-number')]",
                                                  "x-examples": [
                                                    "$._entity.input_filter[?(@.key = 'serial-number')]"
                                                  ]
                                                }
                                              }
                                            }
                                          },
                                          "wait_for_apps": {
                                            "type": "array",
                                            "description": "A list of applications needed to be installed on the device. This will cause the extension to poll the device for installed applications. Once all the applications have been installed, this step can be completed",
                                            "items": {
                                              "type": "string",
                                              "format": "uri",
                                              "example": "com.apple.itunes",
                                              "x-examples": [
                                                "com.apple.itunes"
                                              ]
                                            }
                                          },
                                          "wait_for_battery_charge": {
                                            "type": "integer",
                                            "description": "The required battery percentage needed before this step can move on",
                                            "minimum": 0,
                                            "maximum": 100
                                          }
                                        }
                                      }
                                    }
                                  }
                                },
                                "allOf": [
                                  {
                                    "type": "object",
                                    "description": "Run an application extension",
                                    "properties": {
                                      "label": {
                                        "x-examples": [
                                          "Run Application"
                                        ]
                                      },
                                      "options": {
                                        "type": "object",
                                        "required": [
                                          "application",
                                          "configuration"
                                        ],
                                        "properties": {
                                          "application": {
                                            "type": "object",
                                            "required": [
                                              "application_id",
                                              "platforms"
                                            ],
                                            "properties": {
                                              "application_id": {
                                                "type": "string",
                                                "description": "Registered application ID",
                                                "example": "ace-ios",
                                                "x-examples": [
                                                  "ace-ios"
                                                ]
                                              },
                                              "platforms": {
                                                "type": "array",
                                                "description": "Allowed platforms the application can run on",
                                                "items": {
                                                  "type": "object",
                                                  "required": [
                                                    "platform",
                                                    "arch"
                                                  ],
                                                  "properties": {
                                                    "platform": {
                                                      "type": "string",
                                                      "description": "The platform (OS) the application can run on",
                                                      "enum": [
                                                        "aix",
                                                        "darwin",
                                                        "freebsd",
                                                        "linux",
                                                        "openbsd",
                                                        "sunos",
                                                        "win32"
                                                      ]
                                                    },
                                                    "arch": {
                                                      "type": "string",
                                                      "description": "The CPU architecture needed to run the application",
                                                      "enum": [
                                                        "arm",
                                                        "arm64",
                                                        "ia32",
                                                        "mips",
                                                        "mipsel",
                                                        "ppc",
                                                        "ppc64",
                                                        "s390",
                                                        "s390x",
                                                        "x32",
                                                        "x64"
                                                      ]
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "x-ui-hide": true,
                                        "required": [
                                          "type",
                                          "label",
                                          "goto"
                                        ],
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "Type of workflow step",
                                            "enum": [
                                              "load",
                                              "choice",
                                              "function",
                                              "machine",
                                              "pass",
                                              "fail",
                                              "success",
                                              "user",
                                              "wait"
                                            ]
                                          },
                                          "label": {
                                            "type": "string",
                                            "description": "Label for the step",
                                            "example": "Find units",
                                            "x-examples": [
                                              "Find units"
                                            ]
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to move to",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "complete",
                                            "x-examples": [
                                              "complete"
                                            ]
                                          },
                                          "goto-fail": {
                                            "type": "string",
                                            "description": "Step to transition too if this step cannot be completed",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "process-fail",
                                            "x-examples": [
                                              "process-fail"
                                            ]
                                          },
                                          "context": {
                                            "type": "array",
                                            "description": "Initial values to set on the context",
                                            "items": {
                                              "type": "object",
                                              "required": [
                                                "key",
                                                "value"
                                              ],
                                              "properties": {
                                                "key": {
                                                  "type": "string",
                                                  "description": "The context key to set",
                                                  "example": "$.fizz",
                                                  "x-examples": [
                                                    "$.fizz",
                                                    "$.unit.status",
                                                    "extract_fields"
                                                  ]
                                                },
                                                "value": {
                                                  "type": "string",
                                                  "description": "Value to set",
                                                  "example": "$.buzz",
                                                  "x-examples": [
                                                    "$.buzz",
                                                    "Pending",
                                                    true
                                                  ]
                                                },
                                                "lock": {
                                                  "type": "boolean",
                                                  "description": "Prevents other steps from writing this value",
                                                  "example": true
                                                },
                                                "ignore": {
                                                  "type": "boolean",
                                                  "description": "When trying to set a locked key, do not fail",
                                                  "example": false
                                                }
                                              }
                                            }
                                          },
                                          "onError": {
                                            "type": "object",
                                            "description": "Action to take when step fails",
                                            "required": [
                                              "finally"
                                            ],
                                            "properties": {
                                              "retry": {
                                                "type": "integer",
                                                "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                                "minimum": 0,
                                                "maximum": 10,
                                                "example": 3,
                                                "default": 0
                                              },
                                              "finally": {
                                                "type": "object",
                                                "description": "What to do after all retries",
                                                "required": [
                                                  "goto"
                                                ],
                                                "properties": {
                                                  "actions": {
                                                    "type": "array",
                                                    "description": "Actions to take on failure",
                                                    "items": {
                                                      "anyOf": [
                                                        {
                                                          "type": "object",
                                                          "properties": {
                                                            "type": {
                                                              "type": "string",
                                                              "description": "The type of the action",
                                                              "enum": [
                                                                "email"
                                                              ]
                                                            },
                                                            "options": {
                                                              "type": "object",
                                                              "description": "settings for the action",
                                                              "additionalProperties": {
                                                                "type": "string"
                                                              },
                                                              "x-examples": [
                                                                {
                                                                  "to": "bob@example.com",
                                                                  "from": "alice@example.com"
                                                                }
                                                              ]
                                                            }
                                                          }
                                                        }
                                                      ]
                                                    }
                                                  },
                                                  "goto": {
                                                    "type": "string",
                                                    "description": "Step to transition to on failure",
                                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                                    "example": "failed",
                                                    "x-examples": [
                                                      "failed"
                                                    ]
                                                  }
                                                }
                                              }
                                            }
                                          },
                                          "onComplete": {
                                            "type": "object",
                                            "description": "Actions to take when the step completes",
                                            "properties": {
                                              "actions": {
                                                "type": "array",
                                                "items": {
                                                  "anyOf": [
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "type": {
                                                          "type": "string",
                                                          "description": "The type of the action",
                                                          "enum": [
                                                            "email"
                                                          ]
                                                        },
                                                        "options": {
                                                          "type": "object",
                                                          "description": "settings for the action",
                                                          "additionalProperties": {
                                                            "type": "string"
                                                          },
                                                          "x-examples": [
                                                            {
                                                              "to": "bob@example.com",
                                                              "from": "alice@example.com"
                                                            }
                                                          ]
                                                        }
                                                      }
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "object",
                                "properties": {
                                  "label": {
                                    "example": "Is device ok?",
                                    "x-examples": [
                                      "Is device ok?"
                                    ]
                                  },
                                  "type": {
                                    "example": "choice",
                                    "x-examples": [
                                      "choice"
                                    ]
                                  },
                                  "choices": {
                                    "type": "array",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "goto"
                                      ],
                                      "maxProperties": 2,
                                      "minProperties": 2,
                                      "maximum": 20,
                                      "properties": {
                                        "and": {
                                          "type": "array",
                                          "description": "All choices must be satisfied",
                                          "maximum": 5,
                                          "items": {
                                            "description": "A Step choice",
                                            "type": "object",
                                            "maxProperties": 2,
                                            "minProperties": 2,
                                            "required": [
                                              "variable"
                                            ],
                                            "properties": {
                                              "variable": {
                                                "type": "string",
                                                "description": "Context variable to check",
                                                "example": "$.parts.available",
                                                "x-examples": [
                                                  "$.parts.available"
                                                ]
                                              },
                                              "greater_than_equals": {
                                                "type": "string",
                                                "description": "Value has to be greater than or equals to",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "less_than_equals": {
                                                "type": "string",
                                                "description": "Value has to be less than or equals to",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "greater_than": {
                                                "type": "string",
                                                "description": "Value has to be greater than",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "less_than": {
                                                "type": "string",
                                                "description": "Value has to be less than",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "equals": {
                                                "type": "string",
                                                "description": "Value has to equal",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "not_equals": {
                                                "type": "string",
                                                "description": "Value must not equal",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              }
                                            }
                                          }
                                        },
                                        "or": {
                                          "type": "array",
                                          "description": "Any of these choices must be satisfied",
                                          "maximum": 5,
                                          "items": {
                                            "description": "A Step choice",
                                            "type": "object",
                                            "maxProperties": 2,
                                            "minProperties": 2,
                                            "required": [
                                              "variable"
                                            ],
                                            "properties": {
                                              "variable": {
                                                "type": "string",
                                                "description": "Context variable to check",
                                                "example": "$.parts.available",
                                                "x-examples": [
                                                  "$.parts.available"
                                                ]
                                              },
                                              "greater_than_equals": {
                                                "type": "string",
                                                "description": "Value has to be greater than or equals to",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "less_than_equals": {
                                                "type": "string",
                                                "description": "Value has to be less than or equals to",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "greater_than": {
                                                "type": "string",
                                                "description": "Value has to be greater than",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "less_than": {
                                                "type": "string",
                                                "description": "Value has to be less than",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "equals": {
                                                "type": "string",
                                                "description": "Value has to equal",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "not_equals": {
                                                "type": "string",
                                                "description": "Value must not equal",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              }
                                            }
                                          }
                                        },
                                        "not": {
                                          "type": "array",
                                          "description": "None of these choices must be satisfied",
                                          "maximum": 5,
                                          "items": {
                                            "description": "A Step choice",
                                            "type": "object",
                                            "maxProperties": 2,
                                            "minProperties": 2,
                                            "required": [
                                              "variable"
                                            ],
                                            "properties": {
                                              "variable": {
                                                "type": "string",
                                                "description": "Context variable to check",
                                                "example": "$.parts.available",
                                                "x-examples": [
                                                  "$.parts.available"
                                                ]
                                              },
                                              "greater_than_equals": {
                                                "type": "string",
                                                "description": "Value has to be greater than or equals to",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "less_than_equals": {
                                                "type": "string",
                                                "description": "Value has to be less than or equals to",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "greater_than": {
                                                "type": "string",
                                                "description": "Value has to be greater than",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "less_than": {
                                                "type": "string",
                                                "description": "Value has to be less than",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "equals": {
                                                "type": "string",
                                                "description": "Value has to equal",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "not_equals": {
                                                "type": "string",
                                                "description": "Value must not equal",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              }
                                            }
                                          }
                                        },
                                        "goto": {
                                          "description": "Step to goto when condition is met",
                                          "allOf": [
                                            {
                                              "type": "string",
                                              "description": "Step to move to",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "complete",
                                              "x-examples": [
                                                "complete"
                                              ]
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  },
                                  "goto": {
                                    "description": "Default step to goto when no choice can be made"
                                  }
                                },
                                "allOf": [
                                  {
                                    "type": "object",
                                    "x-ui-hide": true,
                                    "required": [
                                      "type",
                                      "label",
                                      "goto"
                                    ],
                                    "properties": {
                                      "type": {
                                        "type": "string",
                                        "description": "Type of workflow step",
                                        "enum": [
                                          "load",
                                          "choice",
                                          "function",
                                          "machine",
                                          "pass",
                                          "fail",
                                          "success",
                                          "user",
                                          "wait"
                                        ]
                                      },
                                      "label": {
                                        "type": "string",
                                        "description": "Label for the step",
                                        "example": "Find units",
                                        "x-examples": [
                                          "Find units"
                                        ]
                                      },
                                      "goto": {
                                        "type": "string",
                                        "description": "Step to move to",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "complete",
                                        "x-examples": [
                                          "complete"
                                        ]
                                      },
                                      "goto-fail": {
                                        "type": "string",
                                        "description": "Step to transition too if this step cannot be completed",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "process-fail",
                                        "x-examples": [
                                          "process-fail"
                                        ]
                                      },
                                      "context": {
                                        "type": "array",
                                        "description": "Initial values to set on the context",
                                        "items": {
                                          "type": "object",
                                          "required": [
                                            "key",
                                            "value"
                                          ],
                                          "properties": {
                                            "key": {
                                              "type": "string",
                                              "description": "The context key to set",
                                              "example": "$.fizz",
                                              "x-examples": [
                                                "$.fizz",
                                                "$.unit.status",
                                                "extract_fields"
                                              ]
                                            },
                                            "value": {
                                              "type": "string",
                                              "description": "Value to set",
                                              "example": "$.buzz",
                                              "x-examples": [
                                                "$.buzz",
                                                "Pending",
                                                true
                                              ]
                                            },
                                            "lock": {
                                              "type": "boolean",
                                              "description": "Prevents other steps from writing this value",
                                              "example": true
                                            },
                                            "ignore": {
                                              "type": "boolean",
                                              "description": "When trying to set a locked key, do not fail",
                                              "example": false
                                            }
                                          }
                                        }
                                      },
                                      "onError": {
                                        "type": "object",
                                        "description": "Action to take when step fails",
                                        "required": [
                                          "finally"
                                        ],
                                        "properties": {
                                          "retry": {
                                            "type": "integer",
                                            "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                            "minimum": 0,
                                            "maximum": 10,
                                            "example": 3,
                                            "default": 0
                                          },
                                          "finally": {
                                            "type": "object",
                                            "description": "What to do after all retries",
                                            "required": [
                                              "goto"
                                            ],
                                            "properties": {
                                              "actions": {
                                                "type": "array",
                                                "description": "Actions to take on failure",
                                                "items": {
                                                  "anyOf": [
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "type": {
                                                          "type": "string",
                                                          "description": "The type of the action",
                                                          "enum": [
                                                            "email"
                                                          ]
                                                        },
                                                        "options": {
                                                          "type": "object",
                                                          "description": "settings for the action",
                                                          "additionalProperties": {
                                                            "type": "string"
                                                          },
                                                          "x-examples": [
                                                            {
                                                              "to": "bob@example.com",
                                                              "from": "alice@example.com"
                                                            }
                                                          ]
                                                        }
                                                      }
                                                    }
                                                  ]
                                                }
                                              },
                                              "goto": {
                                                "type": "string",
                                                "description": "Step to transition to on failure",
                                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                                "example": "failed",
                                                "x-examples": [
                                                  "failed"
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      },
                                      "onComplete": {
                                        "type": "object",
                                        "description": "Actions to take when the step completes",
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                ]
                              },
                              {
                                "type": "object",
                                "description": "Finial step which is marked as failed",
                                "properties": {
                                  "label": {
                                    "example": "Failed",
                                    "x-examples": [
                                      "Failed"
                                    ],
                                    "allOf": [
                                      {
                                        "type": "string",
                                        "description": "Label for the step",
                                        "example": "Find units",
                                        "x-examples": [
                                          "Find units"
                                        ]
                                      }
                                    ]
                                  },
                                  "type": {
                                    "example": "fail",
                                    "x-examples": [
                                      "fail"
                                    ],
                                    "allOf": [
                                      {
                                        "type": "string",
                                        "description": "Type of workflow step",
                                        "enum": [
                                          "load",
                                          "choice",
                                          "function",
                                          "machine",
                                          "pass",
                                          "fail",
                                          "success",
                                          "user",
                                          "wait"
                                        ]
                                      }
                                    ]
                                  },
                                  "onComplete": {
                                    "type": "object",
                                    "description": "Actions to take when the step completes",
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              },
                              {
                                "type": "object",
                                "description": "Allows executing actions with out performing any function",
                                "properties": {
                                  "label": {
                                    "example": "Send email to project manager",
                                    "x-examples": [
                                      "Send email to project manager"
                                    ]
                                  },
                                  "type": {
                                    "example": "pass",
                                    "x-examples": [
                                      "pass"
                                    ],
                                    "allOf": [
                                      {
                                        "type": "string",
                                        "description": "Type of workflow step",
                                        "enum": [
                                          "load",
                                          "choice",
                                          "function",
                                          "machine",
                                          "pass",
                                          "fail",
                                          "success",
                                          "user",
                                          "wait"
                                        ]
                                      }
                                    ]
                                  }
                                },
                                "allOf": [
                                  {
                                    "type": "object",
                                    "x-ui-hide": true,
                                    "required": [
                                      "type",
                                      "label",
                                      "goto"
                                    ],
                                    "properties": {
                                      "type": {
                                        "type": "string",
                                        "description": "Type of workflow step",
                                        "enum": [
                                          "load",
                                          "choice",
                                          "function",
                                          "machine",
                                          "pass",
                                          "fail",
                                          "success",
                                          "user",
                                          "wait"
                                        ]
                                      },
                                      "label": {
                                        "type": "string",
                                        "description": "Label for the step",
                                        "example": "Find units",
                                        "x-examples": [
                                          "Find units"
                                        ]
                                      },
                                      "goto": {
                                        "type": "string",
                                        "description": "Step to move to",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "complete",
                                        "x-examples": [
                                          "complete"
                                        ]
                                      },
                                      "goto-fail": {
                                        "type": "string",
                                        "description": "Step to transition too if this step cannot be completed",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "process-fail",
                                        "x-examples": [
                                          "process-fail"
                                        ]
                                      },
                                      "context": {
                                        "type": "array",
                                        "description": "Initial values to set on the context",
                                        "items": {
                                          "type": "object",
                                          "required": [
                                            "key",
                                            "value"
                                          ],
                                          "properties": {
                                            "key": {
                                              "type": "string",
                                              "description": "The context key to set",
                                              "example": "$.fizz",
                                              "x-examples": [
                                                "$.fizz",
                                                "$.unit.status",
                                                "extract_fields"
                                              ]
                                            },
                                            "value": {
                                              "type": "string",
                                              "description": "Value to set",
                                              "example": "$.buzz",
                                              "x-examples": [
                                                "$.buzz",
                                                "Pending",
                                                true
                                              ]
                                            },
                                            "lock": {
                                              "type": "boolean",
                                              "description": "Prevents other steps from writing this value",
                                              "example": true
                                            },
                                            "ignore": {
                                              "type": "boolean",
                                              "description": "When trying to set a locked key, do not fail",
                                              "example": false
                                            }
                                          }
                                        }
                                      },
                                      "onError": {
                                        "type": "object",
                                        "description": "Action to take when step fails",
                                        "required": [
                                          "finally"
                                        ],
                                        "properties": {
                                          "retry": {
                                            "type": "integer",
                                            "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                            "minimum": 0,
                                            "maximum": 10,
                                            "example": 3,
                                            "default": 0
                                          },
                                          "finally": {
                                            "type": "object",
                                            "description": "What to do after all retries",
                                            "required": [
                                              "goto"
                                            ],
                                            "properties": {
                                              "actions": {
                                                "type": "array",
                                                "description": "Actions to take on failure",
                                                "items": {
                                                  "anyOf": [
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "type": {
                                                          "type": "string",
                                                          "description": "The type of the action",
                                                          "enum": [
                                                            "email"
                                                          ]
                                                        },
                                                        "options": {
                                                          "type": "object",
                                                          "description": "settings for the action",
                                                          "additionalProperties": {
                                                            "type": "string"
                                                          },
                                                          "x-examples": [
                                                            {
                                                              "to": "bob@example.com",
                                                              "from": "alice@example.com"
                                                            }
                                                          ]
                                                        }
                                                      }
                                                    }
                                                  ]
                                                }
                                              },
                                              "goto": {
                                                "type": "string",
                                                "description": "Step to transition to on failure",
                                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                                "example": "failed",
                                                "x-examples": [
                                                  "failed"
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      },
                                      "onComplete": {
                                        "type": "object",
                                        "description": "Actions to take when the step completes",
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                ]
                              },
                              {
                                "type": "object",
                                "description": "Finial step which is marked as completed successfully",
                                "properties": {
                                  "label": {
                                    "example": "Complete",
                                    "x-examples": [
                                      "Complete"
                                    ],
                                    "allOf": [
                                      {
                                        "type": "string",
                                        "description": "Label for the step",
                                        "example": "Find units",
                                        "x-examples": [
                                          "Find units"
                                        ]
                                      }
                                    ]
                                  },
                                  "type": {
                                    "example": "success",
                                    "x-examples": [
                                      "success"
                                    ],
                                    "allOf": [
                                      {
                                        "type": "string",
                                        "description": "Type of workflow step",
                                        "enum": [
                                          "load",
                                          "choice",
                                          "function",
                                          "machine",
                                          "pass",
                                          "fail",
                                          "success",
                                          "user",
                                          "wait"
                                        ]
                                      }
                                    ]
                                  },
                                  "onComplete": {
                                    "type": "object",
                                    "description": "Actions to take when the step completes",
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              },
                              {
                                "type": "object",
                                "description": "A step which run at certain times",
                                "required": [
                                  "stop_at",
                                  "time"
                                ],
                                "properties": {
                                  "label": {
                                    "example": "Wait for cable",
                                    "x-examples": [
                                      "Wait for cable"
                                    ],
                                    "allOf": [
                                      {
                                        "type": "string",
                                        "description": "Label for the step",
                                        "example": "Find units",
                                        "x-examples": [
                                          "Find units"
                                        ]
                                      }
                                    ]
                                  },
                                  "type": {
                                    "x-examples": [
                                      "wait"
                                    ],
                                    "example": "wait"
                                  },
                                  "stop_at": {
                                    "type": "integer",
                                    "description": "Time in seconds to stop this task",
                                    "maximum": 900,
                                    "minimum": 1
                                  },
                                  "time": {
                                    "type": "integer",
                                    "description": "Time to wait before checking this step",
                                    "example": 600,
                                    "maximum": 900,
                                    "minimum": 1
                                  },
                                  "listen_for": {
                                    "type": "array",
                                    "description": "List of events and conditions to listen for to trigger",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "event"
                                      ],
                                      "properties": {
                                        "event": {
                                          "type": "string",
                                          "description": "Name of the event to listen for",
                                          "allOf": [
                                            {
                                              "type": "string",
                                              "description": "Possible entity events",
                                              "enum": [
                                                "CON.attached",
                                                "CON.created",
                                                "CON.deleted",
                                                "CON.detached",
                                                "CON.removed",
                                                "CON.updated",
                                                "CUS.attached",
                                                "CUS.created",
                                                "CUS.deleted",
                                                "CUS.detached",
                                                "CUS.removed",
                                                "CUS.updated",
                                                "LOC.attached",
                                                "LOC.created",
                                                "LOC.deleted",
                                                "LOC.detached",
                                                "LOC.removed",
                                                "LOC.updated",
                                                "NOTE.attached",
                                                "NOTE.created",
                                                "NOTE.deleted",
                                                "NOTE.detached",
                                                "NOTE.removed",
                                                "NOTE.updated",
                                                "PART.attached",
                                                "PART.created",
                                                "PART.deleted",
                                                "PART.detached",
                                                "PART.removed",
                                                "PART.updated",
                                                "PGM.attached",
                                                "PGM.created",
                                                "PGM.deleted",
                                                "PGM.detached",
                                                "PGM.removed",
                                                "PGM.updated",
                                                "PRO.attached",
                                                "PRO.created",
                                                "PRO.deleted",
                                                "PRO.detached",
                                                "PRO.removed",
                                                "PRO.updated",
                                                "RES.attached",
                                                "RES.created",
                                                "RES.deleted",
                                                "RES.detached",
                                                "RES.removed",
                                                "RES.updated",
                                                "UNIT.attached",
                                                "UNIT.created",
                                                "UNIT.deleted",
                                                "UNIT.detached",
                                                "UNIT.removed",
                                                "UNIT.updated",
                                                "USER.attached",
                                                "USER.created",
                                                "USER.deleted",
                                                "USER.detached",
                                                "USER.removed",
                                                "USER.updated",
                                                "WKF.attached",
                                                "WKF.created",
                                                "WKF.deleted",
                                                "WKF.detached",
                                                "WKF.removed",
                                                "WKF.updated",
                                                "WOR.attached",
                                                "WOR.created",
                                                "WOR.deleted",
                                                "WOR.detached",
                                                "WOR.removed",
                                                "WOR.updated"
                                              ]
                                            }
                                          ]
                                        },
                                        "event_value": {
                                          "type": "object",
                                          "description": "The event conditions that have to be met",
                                          "allOf": [
                                            {
                                              "description": "A Step choice",
                                              "type": "object",
                                              "maxProperties": 2,
                                              "minProperties": 2,
                                              "required": [
                                                "variable"
                                              ],
                                              "properties": {
                                                "variable": {
                                                  "type": "string",
                                                  "description": "Context variable to check",
                                                  "example": "$.parts.available",
                                                  "x-examples": [
                                                    "$.parts.available"
                                                  ]
                                                },
                                                "greater_than_equals": {
                                                  "type": "string",
                                                  "description": "Value has to be greater than or equals to",
                                                  "example": "42",
                                                  "x-examples": [
                                                    "42"
                                                  ]
                                                },
                                                "less_than_equals": {
                                                  "type": "string",
                                                  "description": "Value has to be less than or equals to",
                                                  "example": "42",
                                                  "x-examples": [
                                                    "42"
                                                  ]
                                                },
                                                "greater_than": {
                                                  "type": "string",
                                                  "description": "Value has to be greater than",
                                                  "example": "42",
                                                  "x-examples": [
                                                    "42"
                                                  ]
                                                },
                                                "less_than": {
                                                  "type": "string",
                                                  "description": "Value has to be less than",
                                                  "example": "42",
                                                  "x-examples": [
                                                    "42"
                                                  ]
                                                },
                                                "equals": {
                                                  "type": "string",
                                                  "description": "Value has to equal",
                                                  "example": "42",
                                                  "x-examples": [
                                                    "42"
                                                  ]
                                                },
                                                "not_equals": {
                                                  "type": "string",
                                                  "description": "Value must not equal",
                                                  "example": "42",
                                                  "x-examples": [
                                                    "42"
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  }
                                },
                                "allOf": [
                                  {
                                    "type": "object",
                                    "x-ui-hide": true,
                                    "required": [
                                      "type",
                                      "label",
                                      "goto"
                                    ],
                                    "properties": {
                                      "type": {
                                        "type": "string",
                                        "description": "Type of workflow step",
                                        "enum": [
                                          "load",
                                          "choice",
                                          "function",
                                          "machine",
                                          "pass",
                                          "fail",
                                          "success",
                                          "user",
                                          "wait"
                                        ]
                                      },
                                      "label": {
                                        "type": "string",
                                        "description": "Label for the step",
                                        "example": "Find units",
                                        "x-examples": [
                                          "Find units"
                                        ]
                                      },
                                      "goto": {
                                        "type": "string",
                                        "description": "Step to move to",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "complete",
                                        "x-examples": [
                                          "complete"
                                        ]
                                      },
                                      "goto-fail": {
                                        "type": "string",
                                        "description": "Step to transition too if this step cannot be completed",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "process-fail",
                                        "x-examples": [
                                          "process-fail"
                                        ]
                                      },
                                      "context": {
                                        "type": "array",
                                        "description": "Initial values to set on the context",
                                        "items": {
                                          "type": "object",
                                          "required": [
                                            "key",
                                            "value"
                                          ],
                                          "properties": {
                                            "key": {
                                              "type": "string",
                                              "description": "The context key to set",
                                              "example": "$.fizz",
                                              "x-examples": [
                                                "$.fizz",
                                                "$.unit.status",
                                                "extract_fields"
                                              ]
                                            },
                                            "value": {
                                              "type": "string",
                                              "description": "Value to set",
                                              "example": "$.buzz",
                                              "x-examples": [
                                                "$.buzz",
                                                "Pending",
                                                true
                                              ]
                                            },
                                            "lock": {
                                              "type": "boolean",
                                              "description": "Prevents other steps from writing this value",
                                              "example": true
                                            },
                                            "ignore": {
                                              "type": "boolean",
                                              "description": "When trying to set a locked key, do not fail",
                                              "example": false
                                            }
                                          }
                                        }
                                      },
                                      "onError": {
                                        "type": "object",
                                        "description": "Action to take when step fails",
                                        "required": [
                                          "finally"
                                        ],
                                        "properties": {
                                          "retry": {
                                            "type": "integer",
                                            "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                            "minimum": 0,
                                            "maximum": 10,
                                            "example": 3,
                                            "default": 0
                                          },
                                          "finally": {
                                            "type": "object",
                                            "description": "What to do after all retries",
                                            "required": [
                                              "goto"
                                            ],
                                            "properties": {
                                              "actions": {
                                                "type": "array",
                                                "description": "Actions to take on failure",
                                                "items": {
                                                  "anyOf": [
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "type": {
                                                          "type": "string",
                                                          "description": "The type of the action",
                                                          "enum": [
                                                            "email"
                                                          ]
                                                        },
                                                        "options": {
                                                          "type": "object",
                                                          "description": "settings for the action",
                                                          "additionalProperties": {
                                                            "type": "string"
                                                          },
                                                          "x-examples": [
                                                            {
                                                              "to": "bob@example.com",
                                                              "from": "alice@example.com"
                                                            }
                                                          ]
                                                        }
                                                      }
                                                    }
                                                  ]
                                                }
                                              },
                                              "goto": {
                                                "type": "string",
                                                "description": "Step to transition to on failure",
                                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                                "example": "failed",
                                                "x-examples": [
                                                  "failed"
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      },
                                      "onComplete": {
                                        "type": "object",
                                        "description": "Actions to take when the step completes",
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    },
                    "additionalProperties": {
                      "type": "object",
                      "anyOf": [
                        {
                          "type": "object",
                          "description": "Close step",
                          "required": [
                            "step"
                          ],
                          "properties": {
                            "step": {
                              "type": "string",
                              "description": "Step to mark as complete",
                              "pattern": "^[a-z][a-z-]+[a-z]$",
                              "example": "complete",
                              "x-examples": [
                                "complete"
                              ]
                            }
                          },
                          "anyOf": [
                            {
                              "type": "object",
                              "description": "Require the user confirm an action. This is normally used when Niagara cannot automatically detect that a task or action has been performed.",
                              "x-nter-step-component": "confirm-action",
                              "properties": {
                                "label": {
                                  "x-examples": [
                                    "Confirm the device has powered off"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "component",
                                    "payload"
                                  ],
                                  "properties": {
                                    "component": {
                                      "enum": [
                                        "confirm-action"
                                      ],
                                      "example": "confirm-action",
                                      "x-examples": [
                                        "confirm-action"
                                      ]
                                    },
                                    "payload": {
                                      "type": "object",
                                      "required": [
                                        "message"
                                      ],
                                      "properties": {
                                        "message": {
                                          "type": "string",
                                          "description": "The confirmation message to display to the user",
                                          "example": "Device powered off?",
                                          "x-examples": [
                                            "Device powered off?"
                                          ]
                                        },
                                        "negative_message": {
                                          "type": "string",
                                          "description": "An optional inverse message",
                                          "nullable": true,
                                          "example": "Device not functioning",
                                          "x-examples": [
                                            "Device not functioning"
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "description": "A step which requires a user to complete",
                                  "required": [
                                    "type",
                                    "options"
                                  ],
                                  "properties": {
                                    "type": {
                                      "example": "user",
                                      "x-examples": [
                                        "user"
                                      ]
                                    },
                                    "options": {
                                      "type": "object",
                                      "required": [
                                        "component",
                                        "payload"
                                      ],
                                      "properties": {
                                        "component": {
                                          "type": "string",
                                          "description": "Name of the function to invoke",
                                          "example": "assignUnitsFromCustomerToProject",
                                          "x-examples": [
                                            "assignUnitsFromCustomerToProject"
                                          ]
                                        },
                                        "payload": {
                                          "type": "object"
                                        }
                                      }
                                    }
                                  },
                                  "allOf": [
                                    {
                                      "type": "object",
                                      "x-ui-hide": true,
                                      "required": [
                                        "type",
                                        "label",
                                        "goto"
                                      ],
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "Type of workflow step",
                                          "enum": [
                                            "load",
                                            "choice",
                                            "function",
                                            "machine",
                                            "pass",
                                            "fail",
                                            "success",
                                            "user",
                                            "wait"
                                          ]
                                        },
                                        "label": {
                                          "type": "string",
                                          "description": "Label for the step",
                                          "example": "Find units",
                                          "x-examples": [
                                            "Find units"
                                          ]
                                        },
                                        "goto": {
                                          "type": "string",
                                          "description": "Step to move to",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "complete",
                                          "x-examples": [
                                            "complete"
                                          ]
                                        },
                                        "goto-fail": {
                                          "type": "string",
                                          "description": "Step to transition too if this step cannot be completed",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "process-fail",
                                          "x-examples": [
                                            "process-fail"
                                          ]
                                        },
                                        "context": {
                                          "type": "array",
                                          "description": "Initial values to set on the context",
                                          "items": {
                                            "type": "object",
                                            "required": [
                                              "key",
                                              "value"
                                            ],
                                            "properties": {
                                              "key": {
                                                "type": "string",
                                                "description": "The context key to set",
                                                "example": "$.fizz",
                                                "x-examples": [
                                                  "$.fizz",
                                                  "$.unit.status",
                                                  "extract_fields"
                                                ]
                                              },
                                              "value": {
                                                "type": "string",
                                                "description": "Value to set",
                                                "example": "$.buzz",
                                                "x-examples": [
                                                  "$.buzz",
                                                  "Pending",
                                                  true
                                                ]
                                              },
                                              "lock": {
                                                "type": "boolean",
                                                "description": "Prevents other steps from writing this value",
                                                "example": true
                                              },
                                              "ignore": {
                                                "type": "boolean",
                                                "description": "When trying to set a locked key, do not fail",
                                                "example": false
                                              }
                                            }
                                          }
                                        },
                                        "onError": {
                                          "type": "object",
                                          "description": "Action to take when step fails",
                                          "required": [
                                            "finally"
                                          ],
                                          "properties": {
                                            "retry": {
                                              "type": "integer",
                                              "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                              "minimum": 0,
                                              "maximum": 10,
                                              "example": 3,
                                              "default": 0
                                            },
                                            "finally": {
                                              "type": "object",
                                              "description": "What to do after all retries",
                                              "required": [
                                                "goto"
                                              ],
                                              "properties": {
                                                "actions": {
                                                  "type": "array",
                                                  "description": "Actions to take on failure",
                                                  "items": {
                                                    "anyOf": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "type": {
                                                            "type": "string",
                                                            "description": "The type of the action",
                                                            "enum": [
                                                              "email"
                                                            ]
                                                          },
                                                          "options": {
                                                            "type": "object",
                                                            "description": "settings for the action",
                                                            "additionalProperties": {
                                                              "type": "string"
                                                            },
                                                            "x-examples": [
                                                              {
                                                                "to": "bob@example.com",
                                                                "from": "alice@example.com"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  }
                                                },
                                                "goto": {
                                                  "type": "string",
                                                  "description": "Step to transition to on failure",
                                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                                  "example": "failed",
                                                  "x-examples": [
                                                    "failed"
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        },
                                        "onComplete": {
                                          "type": "object",
                                          "description": "Actions to take when the step completes",
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "object",
                              "description": "Display a link or modal to a user which contains instructions from a PDF",
                              "x-nter-step-component": "follow-pdf-instructions",
                              "required": [
                                "label",
                                "payload"
                              ],
                              "properties": {
                                "label": {
                                  "x-examples": [
                                    "Instruct user to follow steps outlined in Apple PDF"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "component",
                                    "payload"
                                  ],
                                  "properties": {
                                    "component": {
                                      "enum": [
                                        "follow-pds-instructions"
                                      ],
                                      "example": "follow-pdf-instructions",
                                      "x-examples": [
                                        "follow-pdf-instructions"
                                      ]
                                    },
                                    "payload": {
                                      "type": "object",
                                      "required": [
                                        "attachment_id"
                                      ],
                                      "properties": {
                                        "attachment_id": {
                                          "type": "string",
                                          "description": "UUID for the attachment",
                                          "format": "uuid",
                                          "example": "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7",
                                          "x-examples": [
                                            "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7"
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "description": "A step which requires a user to complete",
                                  "required": [
                                    "type",
                                    "options"
                                  ],
                                  "properties": {
                                    "type": {
                                      "example": "user",
                                      "x-examples": [
                                        "user"
                                      ]
                                    },
                                    "options": {
                                      "type": "object",
                                      "required": [
                                        "component",
                                        "payload"
                                      ],
                                      "properties": {
                                        "component": {
                                          "type": "string",
                                          "description": "Name of the function to invoke",
                                          "example": "assignUnitsFromCustomerToProject",
                                          "x-examples": [
                                            "assignUnitsFromCustomerToProject"
                                          ]
                                        },
                                        "payload": {
                                          "type": "object"
                                        }
                                      }
                                    }
                                  },
                                  "allOf": [
                                    {
                                      "type": "object",
                                      "x-ui-hide": true,
                                      "required": [
                                        "type",
                                        "label",
                                        "goto"
                                      ],
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "Type of workflow step",
                                          "enum": [
                                            "load",
                                            "choice",
                                            "function",
                                            "machine",
                                            "pass",
                                            "fail",
                                            "success",
                                            "user",
                                            "wait"
                                          ]
                                        },
                                        "label": {
                                          "type": "string",
                                          "description": "Label for the step",
                                          "example": "Find units",
                                          "x-examples": [
                                            "Find units"
                                          ]
                                        },
                                        "goto": {
                                          "type": "string",
                                          "description": "Step to move to",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "complete",
                                          "x-examples": [
                                            "complete"
                                          ]
                                        },
                                        "goto-fail": {
                                          "type": "string",
                                          "description": "Step to transition too if this step cannot be completed",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "process-fail",
                                          "x-examples": [
                                            "process-fail"
                                          ]
                                        },
                                        "context": {
                                          "type": "array",
                                          "description": "Initial values to set on the context",
                                          "items": {
                                            "type": "object",
                                            "required": [
                                              "key",
                                              "value"
                                            ],
                                            "properties": {
                                              "key": {
                                                "type": "string",
                                                "description": "The context key to set",
                                                "example": "$.fizz",
                                                "x-examples": [
                                                  "$.fizz",
                                                  "$.unit.status",
                                                  "extract_fields"
                                                ]
                                              },
                                              "value": {
                                                "type": "string",
                                                "description": "Value to set",
                                                "example": "$.buzz",
                                                "x-examples": [
                                                  "$.buzz",
                                                  "Pending",
                                                  true
                                                ]
                                              },
                                              "lock": {
                                                "type": "boolean",
                                                "description": "Prevents other steps from writing this value",
                                                "example": true
                                              },
                                              "ignore": {
                                                "type": "boolean",
                                                "description": "When trying to set a locked key, do not fail",
                                                "example": false
                                              }
                                            }
                                          }
                                        },
                                        "onError": {
                                          "type": "object",
                                          "description": "Action to take when step fails",
                                          "required": [
                                            "finally"
                                          ],
                                          "properties": {
                                            "retry": {
                                              "type": "integer",
                                              "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                              "minimum": 0,
                                              "maximum": 10,
                                              "example": 3,
                                              "default": 0
                                            },
                                            "finally": {
                                              "type": "object",
                                              "description": "What to do after all retries",
                                              "required": [
                                                "goto"
                                              ],
                                              "properties": {
                                                "actions": {
                                                  "type": "array",
                                                  "description": "Actions to take on failure",
                                                  "items": {
                                                    "anyOf": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "type": {
                                                            "type": "string",
                                                            "description": "The type of the action",
                                                            "enum": [
                                                              "email"
                                                            ]
                                                          },
                                                          "options": {
                                                            "type": "object",
                                                            "description": "settings for the action",
                                                            "additionalProperties": {
                                                              "type": "string"
                                                            },
                                                            "x-examples": [
                                                              {
                                                                "to": "bob@example.com",
                                                                "from": "alice@example.com"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  }
                                                },
                                                "goto": {
                                                  "type": "string",
                                                  "description": "Step to transition to on failure",
                                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                                  "example": "failed",
                                                  "x-examples": [
                                                    "failed"
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        },
                                        "onComplete": {
                                          "type": "object",
                                          "description": "Actions to take when the step completes",
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "object",
                              "description": "Ask the user to manually enter (or confirm) data for an entity",
                              "x-nter-step-component": "manual-data-entry",
                              "properties": {
                                "label": {
                                  "x-examples": [
                                    "Enter asset tag and confirm serial number"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "component",
                                    "payload"
                                  ],
                                  "properties": {
                                    "component": {
                                      "enum": [
                                        "manual-data-entry"
                                      ],
                                      "example": "manual-data-entry",
                                      "x-examples": [
                                        "manual-data-entry"
                                      ]
                                    },
                                    "payload": {
                                      "type": "object",
                                      "required": [
                                        "fields"
                                      ],
                                      "properties": {
                                        "fields": {
                                          "type": "array",
                                          "description": "Configuration for each field",
                                          "items": {
                                            "type": "object",
                                            "required": [
                                              "input_type",
                                              "label",
                                              "required",
                                              "entity_field"
                                            ],
                                            "properties": {
                                              "input_type": {
                                                "type": "string",
                                                "description": "The type of input field to display",
                                                "enum": [
                                                  "textbox",
                                                  "input"
                                                ]
                                              },
                                              "label": {
                                                "type": "string",
                                                "description": "Label to display for the field",
                                                "example": "Asset Tag",
                                                "x-examples": [
                                                  "Asset Tag"
                                                ]
                                              },
                                              "required": {
                                                "type": "boolean",
                                                "description": "Display the field as required input. Note: this is a helper function. It singles that the user is required to input data at this step. If the field is required on the entity, the user will be presented with a validation message",
                                                "example": true
                                              },
                                              "entity_field": {
                                                "type": "string",
                                                "description": "JSON Path to the field on the entity. If the path does not start with '$' then the entity on the context is assumed. Otherwise the data will be set on the context path",
                                                "example": "input_filter[?(@.key = 'asset-tag')]",
                                                "x-examples": [
                                                  "input_filter[?(@.key = 'asset-tag')]"
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "description": "A step which requires a user to complete",
                                  "required": [
                                    "type",
                                    "options"
                                  ],
                                  "properties": {
                                    "type": {
                                      "example": "user",
                                      "x-examples": [
                                        "user"
                                      ]
                                    },
                                    "options": {
                                      "type": "object",
                                      "required": [
                                        "component",
                                        "payload"
                                      ],
                                      "properties": {
                                        "component": {
                                          "type": "string",
                                          "description": "Name of the function to invoke",
                                          "example": "assignUnitsFromCustomerToProject",
                                          "x-examples": [
                                            "assignUnitsFromCustomerToProject"
                                          ]
                                        },
                                        "payload": {
                                          "type": "object"
                                        }
                                      }
                                    }
                                  },
                                  "allOf": [
                                    {
                                      "type": "object",
                                      "x-ui-hide": true,
                                      "required": [
                                        "type",
                                        "label",
                                        "goto"
                                      ],
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "Type of workflow step",
                                          "enum": [
                                            "load",
                                            "choice",
                                            "function",
                                            "machine",
                                            "pass",
                                            "fail",
                                            "success",
                                            "user",
                                            "wait"
                                          ]
                                        },
                                        "label": {
                                          "type": "string",
                                          "description": "Label for the step",
                                          "example": "Find units",
                                          "x-examples": [
                                            "Find units"
                                          ]
                                        },
                                        "goto": {
                                          "type": "string",
                                          "description": "Step to move to",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "complete",
                                          "x-examples": [
                                            "complete"
                                          ]
                                        },
                                        "goto-fail": {
                                          "type": "string",
                                          "description": "Step to transition too if this step cannot be completed",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "process-fail",
                                          "x-examples": [
                                            "process-fail"
                                          ]
                                        },
                                        "context": {
                                          "type": "array",
                                          "description": "Initial values to set on the context",
                                          "items": {
                                            "type": "object",
                                            "required": [
                                              "key",
                                              "value"
                                            ],
                                            "properties": {
                                              "key": {
                                                "type": "string",
                                                "description": "The context key to set",
                                                "example": "$.fizz",
                                                "x-examples": [
                                                  "$.fizz",
                                                  "$.unit.status",
                                                  "extract_fields"
                                                ]
                                              },
                                              "value": {
                                                "type": "string",
                                                "description": "Value to set",
                                                "example": "$.buzz",
                                                "x-examples": [
                                                  "$.buzz",
                                                  "Pending",
                                                  true
                                                ]
                                              },
                                              "lock": {
                                                "type": "boolean",
                                                "description": "Prevents other steps from writing this value",
                                                "example": true
                                              },
                                              "ignore": {
                                                "type": "boolean",
                                                "description": "When trying to set a locked key, do not fail",
                                                "example": false
                                              }
                                            }
                                          }
                                        },
                                        "onError": {
                                          "type": "object",
                                          "description": "Action to take when step fails",
                                          "required": [
                                            "finally"
                                          ],
                                          "properties": {
                                            "retry": {
                                              "type": "integer",
                                              "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                              "minimum": 0,
                                              "maximum": 10,
                                              "example": 3,
                                              "default": 0
                                            },
                                            "finally": {
                                              "type": "object",
                                              "description": "What to do after all retries",
                                              "required": [
                                                "goto"
                                              ],
                                              "properties": {
                                                "actions": {
                                                  "type": "array",
                                                  "description": "Actions to take on failure",
                                                  "items": {
                                                    "anyOf": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "type": {
                                                            "type": "string",
                                                            "description": "The type of the action",
                                                            "enum": [
                                                              "email"
                                                            ]
                                                          },
                                                          "options": {
                                                            "type": "object",
                                                            "description": "settings for the action",
                                                            "additionalProperties": {
                                                              "type": "string"
                                                            },
                                                            "x-examples": [
                                                              {
                                                                "to": "bob@example.com",
                                                                "from": "alice@example.com"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  }
                                                },
                                                "goto": {
                                                  "type": "string",
                                                  "description": "Step to transition to on failure",
                                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                                  "example": "failed",
                                                  "x-examples": [
                                                    "failed"
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        },
                                        "onComplete": {
                                          "type": "object",
                                          "description": "Actions to take when the step completes",
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "object",
                              "description": "Ask the user to follow a list and check off boxes",
                              "x-nter-step-component": "task-list",
                              "properties": {
                                "label": {
                                  "x-examples": [
                                    "Enter asset tag and confirm serial number"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "component",
                                    "payload"
                                  ],
                                  "properties": {
                                    "component": {
                                      "enum": [
                                        "task-list"
                                      ],
                                      "example": "task-list",
                                      "x-examples": [
                                        "task-list"
                                      ]
                                    },
                                    "payload": {
                                      "type": "object",
                                      "required": [
                                        "items"
                                      ],
                                      "properties": {
                                        "is_qc": {
                                          "type": "boolean",
                                          "description": "Flags this list as a QC task list. This means that a different user can close the task to one previously on the context"
                                        },
                                        "items": {
                                          "type": "array",
                                          "description": "Configuration for each task list item",
                                          "items": {
                                            "type": "object",
                                            "required": [
                                              "label",
                                              "help",
                                              "evaluated",
                                              "na_option"
                                            ],
                                            "properties": {
                                              "label": {
                                                "type": "string",
                                                "description": "Label to display for the field",
                                                "example": "Asset Tag placement",
                                                "x-examples": [
                                                  "Asset Tag placement"
                                                ]
                                              },
                                              "slug": {
                                                "type": "string",
                                                "description": "Slug for the item (Auto-generated from the label)",
                                                "readOnly": true,
                                                "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$",
                                                "example": "asset-tag-placement",
                                                "x-examples": [
                                                  "asset-tag-placement"
                                                ]
                                              },
                                              "help": {
                                                "type": "string",
                                                "description": "Message describing what is needed to be checked",
                                                "example": "Asset Tag attached to the unit in the correct position",
                                                "x-examples": [
                                                  "Asset Tag attached to the unit in the correct position"
                                                ]
                                              },
                                              "evaluated": {
                                                "type": "boolean",
                                                "description": "When set to true, this will fail the step if the value for the item is false or N/A",
                                                "example": true
                                              },
                                              "na_field": {
                                                "type": "boolean",
                                                "description": "Allow the user to select the N/A option when checking off the list",
                                                "example": true
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "description": "A step which requires a user to complete",
                                  "required": [
                                    "type",
                                    "options"
                                  ],
                                  "properties": {
                                    "type": {
                                      "example": "user",
                                      "x-examples": [
                                        "user"
                                      ]
                                    },
                                    "options": {
                                      "type": "object",
                                      "required": [
                                        "component",
                                        "payload"
                                      ],
                                      "properties": {
                                        "component": {
                                          "type": "string",
                                          "description": "Name of the function to invoke",
                                          "example": "assignUnitsFromCustomerToProject",
                                          "x-examples": [
                                            "assignUnitsFromCustomerToProject"
                                          ]
                                        },
                                        "payload": {
                                          "type": "object"
                                        }
                                      }
                                    }
                                  },
                                  "allOf": [
                                    {
                                      "type": "object",
                                      "x-ui-hide": true,
                                      "required": [
                                        "type",
                                        "label",
                                        "goto"
                                      ],
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "Type of workflow step",
                                          "enum": [
                                            "load",
                                            "choice",
                                            "function",
                                            "machine",
                                            "pass",
                                            "fail",
                                            "success",
                                            "user",
                                            "wait"
                                          ]
                                        },
                                        "label": {
                                          "type": "string",
                                          "description": "Label for the step",
                                          "example": "Find units",
                                          "x-examples": [
                                            "Find units"
                                          ]
                                        },
                                        "goto": {
                                          "type": "string",
                                          "description": "Step to move to",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "complete",
                                          "x-examples": [
                                            "complete"
                                          ]
                                        },
                                        "goto-fail": {
                                          "type": "string",
                                          "description": "Step to transition too if this step cannot be completed",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "process-fail",
                                          "x-examples": [
                                            "process-fail"
                                          ]
                                        },
                                        "context": {
                                          "type": "array",
                                          "description": "Initial values to set on the context",
                                          "items": {
                                            "type": "object",
                                            "required": [
                                              "key",
                                              "value"
                                            ],
                                            "properties": {
                                              "key": {
                                                "type": "string",
                                                "description": "The context key to set",
                                                "example": "$.fizz",
                                                "x-examples": [
                                                  "$.fizz",
                                                  "$.unit.status",
                                                  "extract_fields"
                                                ]
                                              },
                                              "value": {
                                                "type": "string",
                                                "description": "Value to set",
                                                "example": "$.buzz",
                                                "x-examples": [
                                                  "$.buzz",
                                                  "Pending",
                                                  true
                                                ]
                                              },
                                              "lock": {
                                                "type": "boolean",
                                                "description": "Prevents other steps from writing this value",
                                                "example": true
                                              },
                                              "ignore": {
                                                "type": "boolean",
                                                "description": "When trying to set a locked key, do not fail",
                                                "example": false
                                              }
                                            }
                                          }
                                        },
                                        "onError": {
                                          "type": "object",
                                          "description": "Action to take when step fails",
                                          "required": [
                                            "finally"
                                          ],
                                          "properties": {
                                            "retry": {
                                              "type": "integer",
                                              "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                              "minimum": 0,
                                              "maximum": 10,
                                              "example": 3,
                                              "default": 0
                                            },
                                            "finally": {
                                              "type": "object",
                                              "description": "What to do after all retries",
                                              "required": [
                                                "goto"
                                              ],
                                              "properties": {
                                                "actions": {
                                                  "type": "array",
                                                  "description": "Actions to take on failure",
                                                  "items": {
                                                    "anyOf": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "type": {
                                                            "type": "string",
                                                            "description": "The type of the action",
                                                            "enum": [
                                                              "email"
                                                            ]
                                                          },
                                                          "options": {
                                                            "type": "object",
                                                            "description": "settings for the action",
                                                            "additionalProperties": {
                                                              "type": "string"
                                                            },
                                                            "x-examples": [
                                                              {
                                                                "to": "bob@example.com",
                                                                "from": "alice@example.com"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  }
                                                },
                                                "goto": {
                                                  "type": "string",
                                                  "description": "Step to transition to on failure",
                                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                                  "example": "failed",
                                                  "x-examples": [
                                                    "failed"
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        },
                                        "onComplete": {
                                          "type": "object",
                                          "description": "Actions to take when the step completes",
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "object",
                              "description": "Run the ACE-IOS application to provision iOS devices or ",
                              "properties": {
                                "type": {
                                  "example": "machine",
                                  "x-examples": [
                                    "machine"
                                  ]
                                },
                                "label": {
                                  "x-examples": [
                                    "Run Application"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "application",
                                    "configuration"
                                  ],
                                  "properties": {
                                    "configuration": {
                                      "type": "object",
                                      "description": "ACE Configuration options",
                                      "properties": {
                                        "pairing_cert": {
                                          "type": "string",
                                          "format": "base64",
                                          "description": "Contents of a *.crt file exported from Apple Configurator or MDM",
                                          "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                          "x-examples": [
                                            "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                          ],
                                          "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                        },
                                        "pairing_key": {
                                          "type": "string",
                                          "format": "base64",
                                          "description": "Contents of a *.der file exported from Apple Configurator or MDM",
                                          "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                          "x-examples": [
                                            "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                          ],
                                          "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                        },
                                        "restore_device": {
                                          "type": "boolean",
                                          "description": "Restore device to factory defaults"
                                        },
                                        "automated_enrollment": {
                                          "type": "boolean",
                                          "description": "Automatically enroll the device to MDM"
                                        },
                                        "mdm": {
                                          "type": "object",
                                          "format": "base64",
                                          "description": "The settings for the Customers MDM",
                                          "properties": {
                                            "vendor": {
                                              "type": "string",
                                              "description": "MDM vendor. Currently, supported values are AirWatch, JAMF, and Meraki.",
                                              "enum": [
                                                "AirWatch",
                                                "JAMF",
                                                "Meraki"
                                              ]
                                            },
                                            "console_url": {
                                              "type": "string",
                                              "format": "uri",
                                              "description": "Base URL for HTTP requests",
                                              "example": "http://jamf.zones.com",
                                              "x-examples": [
                                                "http://jamf.zones.com"
                                              ]
                                            },
                                            "user": {
                                              "type": "string",
                                              "description": "MDM User name",
                                              "example": "NterpriseBob",
                                              "x-examples": [
                                                "NterpriseBob"
                                              ]
                                            },
                                            "password": {
                                              "type": "string",
                                              "description": "MDM password"
                                            },
                                            "tenant_code": {
                                              "type": "string",
                                              "description": "MDM authentication key",
                                              "example": "nterprise",
                                              "x-examples": [
                                                "nterprise"
                                              ]
                                            },
                                            "set_asset_tag": {
                                              "type": "string",
                                              "description": "Sets the devices Asset tag based on a field from the unit",
                                              "example": "$._entity.input_filter[?(@.key = 'asset-tag')]",
                                              "x-examples": [
                                                "$._entity.input_filter[?(@.key = 'asset-tag')]"
                                              ]
                                            }
                                          }
                                        },
                                        "field_mappings": {
                                          "type": "array",
                                          "description": "List of fields to map to the device",
                                          "items": {
                                            "type": "object",
                                            "properties": {
                                              "from": {
                                                "type": "string",
                                                "description": "The field reported from ACE",
                                                "enum": [
                                                  "serial_number",
                                                  "name",
                                                  "ecid",
                                                  "udid",
                                                  "configurator_serial",
                                                  "ios",
                                                  "model",
                                                  "storage",
                                                  "wifi_mac",
                                                  "bt_mac",
                                                  "ethernet_mac",
                                                  "thundersync_serial",
                                                  "iccid",
                                                  "iccid2",
                                                  "imei",
                                                  "imei2",
                                                  "missed_profiles",
                                                  "missed_apps",
                                                  "icon_list_regex",
                                                  "icon_layout",
                                                  "bat_capacity"
                                                ]
                                              },
                                              "to": {
                                                "type": "string",
                                                "description": "Field to set on the entity",
                                                "example": "$._entity.input_filter[?(@.key = 'serial-number')]",
                                                "x-examples": [
                                                  "$._entity.input_filter[?(@.key = 'serial-number')]"
                                                ]
                                              }
                                            }
                                          }
                                        },
                                        "wait_for_apps": {
                                          "type": "array",
                                          "description": "A list of applications needed to be installed on the device. This will cause the extension to poll the device for installed applications. Once all the applications have been installed, this step can be completed",
                                          "items": {
                                            "type": "string",
                                            "format": "uri",
                                            "example": "com.apple.itunes",
                                            "x-examples": [
                                              "com.apple.itunes"
                                            ]
                                          }
                                        },
                                        "wait_for_battery_charge": {
                                          "type": "integer",
                                          "description": "The required battery percentage needed before this step can move on",
                                          "minimum": 0,
                                          "maximum": 100
                                        }
                                      }
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "description": "Run an application extension",
                                  "properties": {
                                    "label": {
                                      "x-examples": [
                                        "Run Application"
                                      ]
                                    },
                                    "options": {
                                      "type": "object",
                                      "required": [
                                        "application",
                                        "configuration"
                                      ],
                                      "properties": {
                                        "application": {
                                          "type": "object",
                                          "required": [
                                            "application_id",
                                            "platforms"
                                          ],
                                          "properties": {
                                            "application_id": {
                                              "type": "string",
                                              "description": "Registered application ID",
                                              "example": "ace-ios",
                                              "x-examples": [
                                                "ace-ios"
                                              ]
                                            },
                                            "platforms": {
                                              "type": "array",
                                              "description": "Allowed platforms the application can run on",
                                              "items": {
                                                "type": "object",
                                                "required": [
                                                  "platform",
                                                  "arch"
                                                ],
                                                "properties": {
                                                  "platform": {
                                                    "type": "string",
                                                    "description": "The platform (OS) the application can run on",
                                                    "enum": [
                                                      "aix",
                                                      "darwin",
                                                      "freebsd",
                                                      "linux",
                                                      "openbsd",
                                                      "sunos",
                                                      "win32"
                                                    ]
                                                  },
                                                  "arch": {
                                                    "type": "string",
                                                    "description": "The CPU architecture needed to run the application",
                                                    "enum": [
                                                      "arm",
                                                      "arm64",
                                                      "ia32",
                                                      "mips",
                                                      "mipsel",
                                                      "ppc",
                                                      "ppc64",
                                                      "s390",
                                                      "s390x",
                                                      "x32",
                                                      "x64"
                                                    ]
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "allOf": [
                                    {
                                      "type": "object",
                                      "x-ui-hide": true,
                                      "required": [
                                        "type",
                                        "label",
                                        "goto"
                                      ],
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "Type of workflow step",
                                          "enum": [
                                            "load",
                                            "choice",
                                            "function",
                                            "machine",
                                            "pass",
                                            "fail",
                                            "success",
                                            "user",
                                            "wait"
                                          ]
                                        },
                                        "label": {
                                          "type": "string",
                                          "description": "Label for the step",
                                          "example": "Find units",
                                          "x-examples": [
                                            "Find units"
                                          ]
                                        },
                                        "goto": {
                                          "type": "string",
                                          "description": "Step to move to",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "complete",
                                          "x-examples": [
                                            "complete"
                                          ]
                                        },
                                        "goto-fail": {
                                          "type": "string",
                                          "description": "Step to transition too if this step cannot be completed",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "process-fail",
                                          "x-examples": [
                                            "process-fail"
                                          ]
                                        },
                                        "context": {
                                          "type": "array",
                                          "description": "Initial values to set on the context",
                                          "items": {
                                            "type": "object",
                                            "required": [
                                              "key",
                                              "value"
                                            ],
                                            "properties": {
                                              "key": {
                                                "type": "string",
                                                "description": "The context key to set",
                                                "example": "$.fizz",
                                                "x-examples": [
                                                  "$.fizz",
                                                  "$.unit.status",
                                                  "extract_fields"
                                                ]
                                              },
                                              "value": {
                                                "type": "string",
                                                "description": "Value to set",
                                                "example": "$.buzz",
                                                "x-examples": [
                                                  "$.buzz",
                                                  "Pending",
                                                  true
                                                ]
                                              },
                                              "lock": {
                                                "type": "boolean",
                                                "description": "Prevents other steps from writing this value",
                                                "example": true
                                              },
                                              "ignore": {
                                                "type": "boolean",
                                                "description": "When trying to set a locked key, do not fail",
                                                "example": false
                                              }
                                            }
                                          }
                                        },
                                        "onError": {
                                          "type": "object",
                                          "description": "Action to take when step fails",
                                          "required": [
                                            "finally"
                                          ],
                                          "properties": {
                                            "retry": {
                                              "type": "integer",
                                              "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                              "minimum": 0,
                                              "maximum": 10,
                                              "example": 3,
                                              "default": 0
                                            },
                                            "finally": {
                                              "type": "object",
                                              "description": "What to do after all retries",
                                              "required": [
                                                "goto"
                                              ],
                                              "properties": {
                                                "actions": {
                                                  "type": "array",
                                                  "description": "Actions to take on failure",
                                                  "items": {
                                                    "anyOf": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "type": {
                                                            "type": "string",
                                                            "description": "The type of the action",
                                                            "enum": [
                                                              "email"
                                                            ]
                                                          },
                                                          "options": {
                                                            "type": "object",
                                                            "description": "settings for the action",
                                                            "additionalProperties": {
                                                              "type": "string"
                                                            },
                                                            "x-examples": [
                                                              {
                                                                "to": "bob@example.com",
                                                                "from": "alice@example.com"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  }
                                                },
                                                "goto": {
                                                  "type": "string",
                                                  "description": "Step to transition to on failure",
                                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                                  "example": "failed",
                                                  "x-examples": [
                                                    "failed"
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        },
                                        "onComplete": {
                                          "type": "object",
                                          "description": "Actions to take when the step completes",
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "label": {
                                  "example": "Is device ok?",
                                  "x-examples": [
                                    "Is device ok?"
                                  ]
                                },
                                "type": {
                                  "example": "choice",
                                  "x-examples": [
                                    "choice"
                                  ]
                                },
                                "choices": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "required": [
                                      "goto"
                                    ],
                                    "maxProperties": 2,
                                    "minProperties": 2,
                                    "maximum": 20,
                                    "properties": {
                                      "and": {
                                        "type": "array",
                                        "description": "All choices must be satisfied",
                                        "maximum": 5,
                                        "items": {
                                          "description": "A Step choice",
                                          "type": "object",
                                          "maxProperties": 2,
                                          "minProperties": 2,
                                          "required": [
                                            "variable"
                                          ],
                                          "properties": {
                                            "variable": {
                                              "type": "string",
                                              "description": "Context variable to check",
                                              "example": "$.parts.available",
                                              "x-examples": [
                                                "$.parts.available"
                                              ]
                                            },
                                            "greater_than_equals": {
                                              "type": "string",
                                              "description": "Value has to be greater than or equals to",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "less_than_equals": {
                                              "type": "string",
                                              "description": "Value has to be less than or equals to",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "greater_than": {
                                              "type": "string",
                                              "description": "Value has to be greater than",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "less_than": {
                                              "type": "string",
                                              "description": "Value has to be less than",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "equals": {
                                              "type": "string",
                                              "description": "Value has to equal",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "not_equals": {
                                              "type": "string",
                                              "description": "Value must not equal",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            }
                                          }
                                        }
                                      },
                                      "or": {
                                        "type": "array",
                                        "description": "Any of these choices must be satisfied",
                                        "maximum": 5,
                                        "items": {
                                          "description": "A Step choice",
                                          "type": "object",
                                          "maxProperties": 2,
                                          "minProperties": 2,
                                          "required": [
                                            "variable"
                                          ],
                                          "properties": {
                                            "variable": {
                                              "type": "string",
                                              "description": "Context variable to check",
                                              "example": "$.parts.available",
                                              "x-examples": [
                                                "$.parts.available"
                                              ]
                                            },
                                            "greater_than_equals": {
                                              "type": "string",
                                              "description": "Value has to be greater than or equals to",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "less_than_equals": {
                                              "type": "string",
                                              "description": "Value has to be less than or equals to",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "greater_than": {
                                              "type": "string",
                                              "description": "Value has to be greater than",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "less_than": {
                                              "type": "string",
                                              "description": "Value has to be less than",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "equals": {
                                              "type": "string",
                                              "description": "Value has to equal",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "not_equals": {
                                              "type": "string",
                                              "description": "Value must not equal",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            }
                                          }
                                        }
                                      },
                                      "not": {
                                        "type": "array",
                                        "description": "None of these choices must be satisfied",
                                        "maximum": 5,
                                        "items": {
                                          "description": "A Step choice",
                                          "type": "object",
                                          "maxProperties": 2,
                                          "minProperties": 2,
                                          "required": [
                                            "variable"
                                          ],
                                          "properties": {
                                            "variable": {
                                              "type": "string",
                                              "description": "Context variable to check",
                                              "example": "$.parts.available",
                                              "x-examples": [
                                                "$.parts.available"
                                              ]
                                            },
                                            "greater_than_equals": {
                                              "type": "string",
                                              "description": "Value has to be greater than or equals to",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "less_than_equals": {
                                              "type": "string",
                                              "description": "Value has to be less than or equals to",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "greater_than": {
                                              "type": "string",
                                              "description": "Value has to be greater than",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "less_than": {
                                              "type": "string",
                                              "description": "Value has to be less than",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "equals": {
                                              "type": "string",
                                              "description": "Value has to equal",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "not_equals": {
                                              "type": "string",
                                              "description": "Value must not equal",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            }
                                          }
                                        }
                                      },
                                      "goto": {
                                        "description": "Step to goto when condition is met",
                                        "allOf": [
                                          {
                                            "type": "string",
                                            "description": "Step to move to",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "complete",
                                            "x-examples": [
                                              "complete"
                                            ]
                                          }
                                        ]
                                      }
                                    }
                                  }
                                },
                                "goto": {
                                  "description": "Default step to goto when no choice can be made"
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "required": [
                                    "type",
                                    "label",
                                    "goto"
                                  ],
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    },
                                    "label": {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to move to",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "complete",
                                      "x-examples": [
                                        "complete"
                                      ]
                                    },
                                    "goto-fail": {
                                      "type": "string",
                                      "description": "Step to transition too if this step cannot be completed",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "process-fail",
                                      "x-examples": [
                                        "process-fail"
                                      ]
                                    },
                                    "context": {
                                      "type": "array",
                                      "description": "Initial values to set on the context",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "key",
                                          "value"
                                        ],
                                        "properties": {
                                          "key": {
                                            "type": "string",
                                            "description": "The context key to set",
                                            "example": "$.fizz",
                                            "x-examples": [
                                              "$.fizz",
                                              "$.unit.status",
                                              "extract_fields"
                                            ]
                                          },
                                          "value": {
                                            "type": "string",
                                            "description": "Value to set",
                                            "example": "$.buzz",
                                            "x-examples": [
                                              "$.buzz",
                                              "Pending",
                                              true
                                            ]
                                          },
                                          "lock": {
                                            "type": "boolean",
                                            "description": "Prevents other steps from writing this value",
                                            "example": true
                                          },
                                          "ignore": {
                                            "type": "boolean",
                                            "description": "When trying to set a locked key, do not fail",
                                            "example": false
                                          }
                                        }
                                      }
                                    },
                                    "onError": {
                                      "type": "object",
                                      "description": "Action to take when step fails",
                                      "required": [
                                        "finally"
                                      ],
                                      "properties": {
                                        "retry": {
                                          "type": "integer",
                                          "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                          "minimum": 0,
                                          "maximum": 10,
                                          "example": 3,
                                          "default": 0
                                        },
                                        "finally": {
                                          "type": "object",
                                          "description": "What to do after all retries",
                                          "required": [
                                            "goto"
                                          ],
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "description": "Actions to take on failure",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to transition to on failure",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "failed",
                                              "x-examples": [
                                                "failed"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "onComplete": {
                                      "type": "object",
                                      "description": "Actions to take when the step completes",
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            },
                            {
                              "type": "object",
                              "description": "Finial step which is marked as failed",
                              "properties": {
                                "label": {
                                  "example": "Failed",
                                  "x-examples": [
                                    "Failed"
                                  ],
                                  "allOf": [
                                    {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    }
                                  ]
                                },
                                "type": {
                                  "example": "fail",
                                  "x-examples": [
                                    "fail"
                                  ],
                                  "allOf": [
                                    {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    }
                                  ]
                                },
                                "onComplete": {
                                  "type": "object",
                                  "description": "Actions to take when the step completes",
                                  "properties": {
                                    "actions": {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "The type of the action",
                                                "enum": [
                                                  "email"
                                                ]
                                              },
                                              "options": {
                                                "type": "object",
                                                "description": "settings for the action",
                                                "additionalProperties": {
                                                  "type": "string"
                                                },
                                                "x-examples": [
                                                  {
                                                    "to": "bob@example.com",
                                                    "from": "alice@example.com"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            {
                              "type": "object",
                              "description": "Allows executing actions with out performing any function",
                              "properties": {
                                "label": {
                                  "example": "Send email to project manager",
                                  "x-examples": [
                                    "Send email to project manager"
                                  ]
                                },
                                "type": {
                                  "example": "pass",
                                  "x-examples": [
                                    "pass"
                                  ],
                                  "allOf": [
                                    {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    }
                                  ]
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "required": [
                                    "type",
                                    "label",
                                    "goto"
                                  ],
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    },
                                    "label": {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to move to",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "complete",
                                      "x-examples": [
                                        "complete"
                                      ]
                                    },
                                    "goto-fail": {
                                      "type": "string",
                                      "description": "Step to transition too if this step cannot be completed",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "process-fail",
                                      "x-examples": [
                                        "process-fail"
                                      ]
                                    },
                                    "context": {
                                      "type": "array",
                                      "description": "Initial values to set on the context",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "key",
                                          "value"
                                        ],
                                        "properties": {
                                          "key": {
                                            "type": "string",
                                            "description": "The context key to set",
                                            "example": "$.fizz",
                                            "x-examples": [
                                              "$.fizz",
                                              "$.unit.status",
                                              "extract_fields"
                                            ]
                                          },
                                          "value": {
                                            "type": "string",
                                            "description": "Value to set",
                                            "example": "$.buzz",
                                            "x-examples": [
                                              "$.buzz",
                                              "Pending",
                                              true
                                            ]
                                          },
                                          "lock": {
                                            "type": "boolean",
                                            "description": "Prevents other steps from writing this value",
                                            "example": true
                                          },
                                          "ignore": {
                                            "type": "boolean",
                                            "description": "When trying to set a locked key, do not fail",
                                            "example": false
                                          }
                                        }
                                      }
                                    },
                                    "onError": {
                                      "type": "object",
                                      "description": "Action to take when step fails",
                                      "required": [
                                        "finally"
                                      ],
                                      "properties": {
                                        "retry": {
                                          "type": "integer",
                                          "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                          "minimum": 0,
                                          "maximum": 10,
                                          "example": 3,
                                          "default": 0
                                        },
                                        "finally": {
                                          "type": "object",
                                          "description": "What to do after all retries",
                                          "required": [
                                            "goto"
                                          ],
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "description": "Actions to take on failure",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to transition to on failure",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "failed",
                                              "x-examples": [
                                                "failed"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "onComplete": {
                                      "type": "object",
                                      "description": "Actions to take when the step completes",
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            },
                            {
                              "type": "object",
                              "description": "Finial step which is marked as completed successfully",
                              "properties": {
                                "label": {
                                  "example": "Complete",
                                  "x-examples": [
                                    "Complete"
                                  ],
                                  "allOf": [
                                    {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    }
                                  ]
                                },
                                "type": {
                                  "example": "success",
                                  "x-examples": [
                                    "success"
                                  ],
                                  "allOf": [
                                    {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    }
                                  ]
                                },
                                "onComplete": {
                                  "type": "object",
                                  "description": "Actions to take when the step completes",
                                  "properties": {
                                    "actions": {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "The type of the action",
                                                "enum": [
                                                  "email"
                                                ]
                                              },
                                              "options": {
                                                "type": "object",
                                                "description": "settings for the action",
                                                "additionalProperties": {
                                                  "type": "string"
                                                },
                                                "x-examples": [
                                                  {
                                                    "to": "bob@example.com",
                                                    "from": "alice@example.com"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            {
                              "type": "object",
                              "description": "A step which run at certain times",
                              "required": [
                                "stop_at",
                                "time"
                              ],
                              "properties": {
                                "label": {
                                  "example": "Wait for cable",
                                  "x-examples": [
                                    "Wait for cable"
                                  ],
                                  "allOf": [
                                    {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    }
                                  ]
                                },
                                "type": {
                                  "x-examples": [
                                    "wait"
                                  ],
                                  "example": "wait"
                                },
                                "stop_at": {
                                  "type": "integer",
                                  "description": "Time in seconds to stop this task",
                                  "maximum": 900,
                                  "minimum": 1
                                },
                                "time": {
                                  "type": "integer",
                                  "description": "Time to wait before checking this step",
                                  "example": 600,
                                  "maximum": 900,
                                  "minimum": 1
                                },
                                "listen_for": {
                                  "type": "array",
                                  "description": "List of events and conditions to listen for to trigger",
                                  "items": {
                                    "type": "object",
                                    "required": [
                                      "event"
                                    ],
                                    "properties": {
                                      "event": {
                                        "type": "string",
                                        "description": "Name of the event to listen for",
                                        "allOf": [
                                          {
                                            "type": "string",
                                            "description": "Possible entity events",
                                            "enum": [
                                              "CON.attached",
                                              "CON.created",
                                              "CON.deleted",
                                              "CON.detached",
                                              "CON.removed",
                                              "CON.updated",
                                              "CUS.attached",
                                              "CUS.created",
                                              "CUS.deleted",
                                              "CUS.detached",
                                              "CUS.removed",
                                              "CUS.updated",
                                              "LOC.attached",
                                              "LOC.created",
                                              "LOC.deleted",
                                              "LOC.detached",
                                              "LOC.removed",
                                              "LOC.updated",
                                              "NOTE.attached",
                                              "NOTE.created",
                                              "NOTE.deleted",
                                              "NOTE.detached",
                                              "NOTE.removed",
                                              "NOTE.updated",
                                              "PART.attached",
                                              "PART.created",
                                              "PART.deleted",
                                              "PART.detached",
                                              "PART.removed",
                                              "PART.updated",
                                              "PGM.attached",
                                              "PGM.created",
                                              "PGM.deleted",
                                              "PGM.detached",
                                              "PGM.removed",
                                              "PGM.updated",
                                              "PRO.attached",
                                              "PRO.created",
                                              "PRO.deleted",
                                              "PRO.detached",
                                              "PRO.removed",
                                              "PRO.updated",
                                              "RES.attached",
                                              "RES.created",
                                              "RES.deleted",
                                              "RES.detached",
                                              "RES.removed",
                                              "RES.updated",
                                              "UNIT.attached",
                                              "UNIT.created",
                                              "UNIT.deleted",
                                              "UNIT.detached",
                                              "UNIT.removed",
                                              "UNIT.updated",
                                              "USER.attached",
                                              "USER.created",
                                              "USER.deleted",
                                              "USER.detached",
                                              "USER.removed",
                                              "USER.updated",
                                              "WKF.attached",
                                              "WKF.created",
                                              "WKF.deleted",
                                              "WKF.detached",
                                              "WKF.removed",
                                              "WKF.updated",
                                              "WOR.attached",
                                              "WOR.created",
                                              "WOR.deleted",
                                              "WOR.detached",
                                              "WOR.removed",
                                              "WOR.updated"
                                            ]
                                          }
                                        ]
                                      },
                                      "event_value": {
                                        "type": "object",
                                        "description": "The event conditions that have to be met",
                                        "allOf": [
                                          {
                                            "description": "A Step choice",
                                            "type": "object",
                                            "maxProperties": 2,
                                            "minProperties": 2,
                                            "required": [
                                              "variable"
                                            ],
                                            "properties": {
                                              "variable": {
                                                "type": "string",
                                                "description": "Context variable to check",
                                                "example": "$.parts.available",
                                                "x-examples": [
                                                  "$.parts.available"
                                                ]
                                              },
                                              "greater_than_equals": {
                                                "type": "string",
                                                "description": "Value has to be greater than or equals to",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "less_than_equals": {
                                                "type": "string",
                                                "description": "Value has to be less than or equals to",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "greater_than": {
                                                "type": "string",
                                                "description": "Value has to be greater than",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "less_than": {
                                                "type": "string",
                                                "description": "Value has to be less than",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "equals": {
                                                "type": "string",
                                                "description": "Value has to equal",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "not_equals": {
                                                "type": "string",
                                                "description": "Value must not equal",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "required": [
                                    "type",
                                    "label",
                                    "goto"
                                  ],
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    },
                                    "label": {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to move to",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "complete",
                                      "x-examples": [
                                        "complete"
                                      ]
                                    },
                                    "goto-fail": {
                                      "type": "string",
                                      "description": "Step to transition too if this step cannot be completed",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "process-fail",
                                      "x-examples": [
                                        "process-fail"
                                      ]
                                    },
                                    "context": {
                                      "type": "array",
                                      "description": "Initial values to set on the context",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "key",
                                          "value"
                                        ],
                                        "properties": {
                                          "key": {
                                            "type": "string",
                                            "description": "The context key to set",
                                            "example": "$.fizz",
                                            "x-examples": [
                                              "$.fizz",
                                              "$.unit.status",
                                              "extract_fields"
                                            ]
                                          },
                                          "value": {
                                            "type": "string",
                                            "description": "Value to set",
                                            "example": "$.buzz",
                                            "x-examples": [
                                              "$.buzz",
                                              "Pending",
                                              true
                                            ]
                                          },
                                          "lock": {
                                            "type": "boolean",
                                            "description": "Prevents other steps from writing this value",
                                            "example": true
                                          },
                                          "ignore": {
                                            "type": "boolean",
                                            "description": "When trying to set a locked key, do not fail",
                                            "example": false
                                          }
                                        }
                                      }
                                    },
                                    "onError": {
                                      "type": "object",
                                      "description": "Action to take when step fails",
                                      "required": [
                                        "finally"
                                      ],
                                      "properties": {
                                        "retry": {
                                          "type": "integer",
                                          "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                          "minimum": 0,
                                          "maximum": 10,
                                          "example": 3,
                                          "default": 0
                                        },
                                        "finally": {
                                          "type": "object",
                                          "description": "What to do after all retries",
                                          "required": [
                                            "goto"
                                          ],
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "description": "Actions to take on failure",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to transition to on failure",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "failed",
                                              "x-examples": [
                                                "failed"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "onComplete": {
                                      "type": "object",
                                      "description": "Actions to take when the step completes",
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  }
                },
                "allOf": [
                  {
                    "x-ui-hide": true,
                    "type": "object",
                    "description": "Common Properties to all entities",
                    "required": [
                      "label"
                    ],
                    "properties": {
                      "label": {
                        "type": "string",
                        "description": "Label for the entity",
                        "example": "primary"
                      },
                      "slug": {
                        "type": "string",
                        "description": "Slug for the entity (Auto-generated from the label)",
                        "readOnly": true,
                        "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$"
                      },
                      "created": {
                        "description": "Date the entity was created",
                        "type": "string",
                        "format": "date-time",
                        "readOnly": true
                      },
                      "updated": {
                        "description": "Last date the entity was updated",
                        "type": "string",
                        "format": "date-time",
                        "readOnly": true
                      }
                    }
                  }
                ],
                "example": {
                  "steps": {
                    "fail": {
                      "step": "complete",
                      "type": "user",
                      "options": {
                        "component": "assignUnitsFromCustomerToProject",
                        "payload": {
                          "message": "Device powered off?",
                          "negative_message": "Device not functioning"
                        }
                      },
                      "label": "Find units",
                      "goto": "complete",
                      "goto-fail": "process-fail",
                      "context": [
                        {
                          "key": "$.unit.status",
                          "value": "Pending",
                          "lock": true,
                          "ignore": true
                        }
                      ],
                      "onError": {
                        "finally": {
                          "goto": "failed",
                          "actions": [
                            {
                              "type": "email",
                              "options": {
                                "to": "bob@example.com",
                                "from": "alice@example.com"
                              }
                            }
                          ]
                        },
                        "retry": 8
                      },
                      "onComplete": {
                        "actions": [
                          {
                            "type": "email",
                            "options": {
                              "to": "bob@example.com",
                              "from": "alice@example.com"
                            }
                          },
                          {
                            "type": "email",
                            "options": {
                              "to": "bob@example.com",
                              "from": "alice@example.com"
                            }
                          },
                          {
                            "type": "email",
                            "options": {
                              "to": "bob@example.com",
                              "from": "alice@example.com"
                            }
                          }
                        ]
                      }
                    },
                    "amet_b64$": {
                      "step": "complete",
                      "label": "Find units",
                      "type": "success",
                      "onComplete": {
                        "actions": [
                          {
                            "type": "email",
                            "options": {
                              "to": "bob@example.com",
                              "from": "alice@example.com"
                            }
                          }
                        ]
                      }
                    },
                    "minim2__": {
                      "step": "complete",
                      "type": "pass",
                      "label": "Find units",
                      "goto": "complete",
                      "goto-fail": "process-fail",
                      "context": [
                        {
                          "key": "$.fizz",
                          "value": "$.buzz",
                          "lock": false,
                          "ignore": true
                        }
                      ],
                      "onError": {
                        "finally": {
                          "goto": "failed",
                          "actions": [
                            {
                              "type": "email",
                              "options": {
                                "to": "bob@example.com",
                                "from": "alice@example.com"
                              }
                            },
                            {
                              "type": "email",
                              "options": {
                                "to": "bob@example.com",
                                "from": "alice@example.com"
                              }
                            },
                            {
                              "type": "email",
                              "options": {
                                "to": "bob@example.com",
                                "from": "alice@example.com"
                              }
                            },
                            {
                              "type": "email",
                              "options": {
                                "to": "bob@example.com",
                                "from": "alice@example.com"
                              }
                            }
                          ]
                        },
                        "retry": 0
                      },
                      "onComplete": {
                        "actions": [
                          {
                            "type": "email",
                            "options": {
                              "to": "bob@example.com",
                              "from": "alice@example.com"
                            }
                          },
                          {
                            "type": "email",
                            "options": {
                              "to": "bob@example.com",
                              "from": "alice@example.com"
                            }
                          },
                          {
                            "type": "email",
                            "options": {
                              "to": "bob@example.com",
                              "from": "alice@example.com"
                            }
                          },
                          {
                            "type": "email",
                            "options": {
                              "to": "bob@example.com",
                              "from": "alice@example.com"
                            }
                          }
                        ]
                      }
                    }
                  },
                  "starts_at": "entry",
                  "label": "MLTI iPad Assembly Assignment",
                  "workflow_id": "e530652e-28e8-4f64-84af-e1cf0ff7c805",
                  "applies_to": "customer",
                  "slug": "mlti-ipad-assembly-assignment",
                  "version": "1.0",
                  "workflow_version": 7,
                  "context": [
                    {
                      "key": "$.fizz",
                      "value": "Pending",
                      "lock": false,
                      "ignore": true
                    },
                    {
                      "key": "$.unit.status",
                      "value": "true",
                      "lock": false,
                      "ignore": true
                    },
                    {
                      "key": "$.unit.status",
                      "value": "Pending",
                      "lock": false,
                      "ignore": true
                    },
                    {
                      "key": "extract_fields",
                      "value": "Pending",
                      "lock": true,
                      "ignore": false
                    }
                  ],
                  "created": "1991-03-23T20:31:55.727Z",
                  "updated": "1988-03-24T09:13:18.759Z"
                }
              }
            ],
            "example": "undefined"
          }
        }
      }
    }
  },
  "allOf": [
    {
      "type": "object",
      "x-hal": true,
      "x-ui-hide": true,
      "properties": {
        "total_count": {
          "type": "integer",
          "format": "int32",
          "readOnly": true,
          "minimum": 0,
          "example": 32
        },
        "limit": {
          "type": "integer",
          "format": "int32",
          "readOnly": true,
          "minimum": 1,
          "maximum": 100,
          "example": 50
        },
        "offset": {
          "type": "string",
          "readOnly": true,
          "example": "363yHhUhhI"
        }
      },
      "allOf": [
        {
          "type": "object",
          "x-ui-hide": true,
          "properties": {
            "_links": {
              "type": "object",
              "readOnly": true,
              "properties": {
                "self": {
                  "type": "object",
                  "properties": {
                    "href": {
                      "type": "string",
                      "format": "uri"
                    }
                  }
                }
              }
            }
          }
        },
        {
          "type": "object",
          "x-ui-hide": true,
          "properties": {
            "_links": {
              "type": "object",
              "readOnly": true,
              "properties": {
                "next": {
                  "type": "object",
                  "properties": {
                    "href": {
                      "type": "string",
                      "format": "uri"
                    }
                  }
                }
              }
            }
          }
        }
      ],
      "example": "undefined"
    }
  ]
}
```

<h3 id="fetchallworkflows-responses">Responses</h3>

|Status|Meaning|Description|Schema|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|A paged response for work flows|Inline|
|401|[Unauthorized](https://tools.ietf.org/html/rfc7235#section-3.1)|Unauthorized|Inline|
|403|[Forbidden](https://tools.ietf.org/html/rfc7231#section-6.5.3)|Forbidden|Inline|

<h3 id="fetchallworkflows-responseschema">Response Schema</h3>

Status Code **200**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» _embedded|object|false|none|none|
|»» nter:work-flows|[allOf]|false|none|none|
|»»» _links|object|false|none|none|
|»»»» self|object|false|read-only|none|
|»»»»» href|string|false|none|none|

Status Code **401**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» title|any|false|none|none|
|» type|any|false|none|none|
|» status|any|false|none|none|
|» detail|any|false|none|none|

Status Code **403**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» title|any|false|none|none|
|» type|any|false|none|none|
|» status|any|false|none|none|
|» detail|any|false|none|none|

<aside class="success">
This operation does not require authentication
</aside>

## createWorkflow

<a id="opIdcreateWorkflow"></a>

`POST /work-flows`

*Creates a workflow*

Creates a new workflow

> Body parameter

```json
{
  "type": "object",
  "required": [
    "label",
    "steps",
    "workflow_version",
    "applies_to",
    "starts_at"
  ],
  "properties": {
    "label": {
      "type": "string",
      "example": "MLTI iPad Assembly Assignment",
      "x-examples": [
        "MLTI iPad Assembly Assignment"
      ],
      "description": "Label for the workflow"
    },
    "workflow_version": {
      "type": "integer",
      "format": "int32",
      "example": 7,
      "x-examples": [
        7
      ],
      "readOnly": true,
      "description": "Version number for the work flows (the number of times it has been changed"
    },
    "applies_to": {
      "type": "string",
      "description": "The entity type this work flow applies too",
      "enum": [
        "unit",
        "part",
        "program",
        "project",
        "customer",
        "contact"
      ],
      "example": "unit"
    },
    "starts_at": {
      "type": "string",
      "description": "Starting step",
      "example": "entry",
      "x-examples": [
        "entry"
      ]
    },
    "context": {
      "type": "array",
      "description": "Initial values to set on the context",
      "items": {
        "type": "object",
        "required": [
          "key",
          "value"
        ],
        "properties": {
          "key": {
            "type": "string",
            "description": "The context key to set",
            "example": "$.fizz",
            "x-examples": [
              "$.fizz",
              "$.unit.status",
              "extract_fields"
            ]
          },
          "value": {
            "type": "string",
            "description": "Value to set",
            "example": "$.buzz",
            "x-examples": [
              "$.buzz",
              "Pending",
              true
            ]
          },
          "lock": {
            "type": "boolean",
            "description": "Prevents other steps from writing this value",
            "example": true
          },
          "ignore": {
            "type": "boolean",
            "description": "When trying to set a locked key, do not fail",
            "example": false
          }
        }
      }
    },
    "steps": {
      "type": "object",
      "description": "Steps for the workflow",
      "x-patternProperties": {
        "(confirm|success|fail|manual|run-ace|follow)": {
          "type": "object",
          "allOf": [
            {
              "type": "object",
              "description": "Close step",
              "required": [
                "step"
              ],
              "properties": {
                "step": {
                  "type": "string",
                  "description": "Step to mark as complete",
                  "pattern": "^[a-z][a-z-]+[a-z]$",
                  "example": "complete",
                  "x-examples": [
                    "complete"
                  ]
                }
              },
              "anyOf": [
                {
                  "type": "object",
                  "description": "Require the user confirm an action. This is normally used when Niagara cannot automatically detect that a task or action has been performed.",
                  "x-nter-step-component": "confirm-action",
                  "properties": {
                    "label": {
                      "x-examples": [
                        "Confirm the device has powered off"
                      ]
                    },
                    "options": {
                      "type": "object",
                      "required": [
                        "component",
                        "payload"
                      ],
                      "properties": {
                        "component": {
                          "enum": [
                            "confirm-action"
                          ],
                          "example": "confirm-action",
                          "x-examples": [
                            "confirm-action"
                          ]
                        },
                        "payload": {
                          "type": "object",
                          "required": [
                            "message"
                          ],
                          "properties": {
                            "message": {
                              "type": "string",
                              "description": "The confirmation message to display to the user",
                              "example": "Device powered off?",
                              "x-examples": [
                                "Device powered off?"
                              ]
                            },
                            "negative_message": {
                              "type": "string",
                              "description": "An optional inverse message",
                              "nullable": true,
                              "example": "Device not functioning",
                              "x-examples": [
                                "Device not functioning"
                              ]
                            }
                          }
                        }
                      }
                    }
                  },
                  "allOf": [
                    {
                      "type": "object",
                      "x-ui-hide": true,
                      "description": "A step which requires a user to complete",
                      "required": [
                        "type",
                        "options"
                      ],
                      "properties": {
                        "type": {
                          "example": "user",
                          "x-examples": [
                            "user"
                          ]
                        },
                        "options": {
                          "type": "object",
                          "required": [
                            "component",
                            "payload"
                          ],
                          "properties": {
                            "component": {
                              "type": "string",
                              "description": "Name of the function to invoke",
                              "example": "assignUnitsFromCustomerToProject",
                              "x-examples": [
                                "assignUnitsFromCustomerToProject"
                              ]
                            },
                            "payload": {
                              "type": "object"
                            }
                          }
                        }
                      },
                      "allOf": [
                        {
                          "type": "object",
                          "x-ui-hide": true,
                          "required": [
                            "type",
                            "label",
                            "goto"
                          ],
                          "properties": {
                            "type": {
                              "type": "string",
                              "description": "Type of workflow step",
                              "enum": [
                                "load",
                                "choice",
                                "function",
                                "machine",
                                "pass",
                                "fail",
                                "success",
                                "user",
                                "wait"
                              ]
                            },
                            "label": {
                              "type": "string",
                              "description": "Label for the step",
                              "example": "Find units",
                              "x-examples": [
                                "Find units"
                              ]
                            },
                            "goto": {
                              "type": "string",
                              "description": "Step to move to",
                              "pattern": "^[a-z][a-z-]+[a-z]$",
                              "example": "complete",
                              "x-examples": [
                                "complete"
                              ]
                            },
                            "goto-fail": {
                              "type": "string",
                              "description": "Step to transition too if this step cannot be completed",
                              "pattern": "^[a-z][a-z-]+[a-z]$",
                              "example": "process-fail",
                              "x-examples": [
                                "process-fail"
                              ]
                            },
                            "context": {
                              "type": "array",
                              "description": "Initial values to set on the context",
                              "items": {
                                "type": "object",
                                "required": [
                                  "key",
                                  "value"
                                ],
                                "properties": {
                                  "key": {
                                    "type": "string",
                                    "description": "The context key to set",
                                    "example": "$.fizz",
                                    "x-examples": [
                                      "$.fizz",
                                      "$.unit.status",
                                      "extract_fields"
                                    ]
                                  },
                                  "value": {
                                    "type": "string",
                                    "description": "Value to set",
                                    "example": "$.buzz",
                                    "x-examples": [
                                      "$.buzz",
                                      "Pending",
                                      true
                                    ]
                                  },
                                  "lock": {
                                    "type": "boolean",
                                    "description": "Prevents other steps from writing this value",
                                    "example": true
                                  },
                                  "ignore": {
                                    "type": "boolean",
                                    "description": "When trying to set a locked key, do not fail",
                                    "example": false
                                  }
                                }
                              }
                            },
                            "onError": {
                              "type": "object",
                              "description": "Action to take when step fails",
                              "required": [
                                "finally"
                              ],
                              "properties": {
                                "retry": {
                                  "type": "integer",
                                  "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                  "minimum": 0,
                                  "maximum": 10,
                                  "example": 3,
                                  "default": 0
                                },
                                "finally": {
                                  "type": "object",
                                  "description": "What to do after all retries",
                                  "required": [
                                    "goto"
                                  ],
                                  "properties": {
                                    "actions": {
                                      "type": "array",
                                      "description": "Actions to take on failure",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "The type of the action",
                                                "enum": [
                                                  "email"
                                                ]
                                              },
                                              "options": {
                                                "type": "object",
                                                "description": "settings for the action",
                                                "additionalProperties": {
                                                  "type": "string"
                                                },
                                                "x-examples": [
                                                  {
                                                    "to": "bob@example.com",
                                                    "from": "alice@example.com"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to transition to on failure",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "failed",
                                      "x-examples": [
                                        "failed"
                                      ]
                                    }
                                  }
                                }
                              }
                            },
                            "onComplete": {
                              "type": "object",
                              "description": "Actions to take when the step completes",
                              "properties": {
                                "actions": {
                                  "type": "array",
                                  "items": {
                                    "anyOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "The type of the action",
                                            "enum": [
                                              "email"
                                            ]
                                          },
                                          "options": {
                                            "type": "object",
                                            "description": "settings for the action",
                                            "additionalProperties": {
                                              "type": "string"
                                            },
                                            "x-examples": [
                                              {
                                                "to": "bob@example.com",
                                                "from": "alice@example.com"
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "object",
                  "description": "Display a link or modal to a user which contains instructions from a PDF",
                  "x-nter-step-component": "follow-pdf-instructions",
                  "required": [
                    "label",
                    "payload"
                  ],
                  "properties": {
                    "label": {
                      "x-examples": [
                        "Instruct user to follow steps outlined in Apple PDF"
                      ]
                    },
                    "options": {
                      "type": "object",
                      "required": [
                        "component",
                        "payload"
                      ],
                      "properties": {
                        "component": {
                          "enum": [
                            "follow-pds-instructions"
                          ],
                          "example": "follow-pdf-instructions",
                          "x-examples": [
                            "follow-pdf-instructions"
                          ]
                        },
                        "payload": {
                          "type": "object",
                          "required": [
                            "attachment_id"
                          ],
                          "properties": {
                            "attachment_id": {
                              "type": "string",
                              "description": "UUID for the attachment",
                              "format": "uuid",
                              "example": "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7",
                              "x-examples": [
                                "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7"
                              ]
                            }
                          }
                        }
                      }
                    }
                  },
                  "allOf": [
                    {
                      "type": "object",
                      "x-ui-hide": true,
                      "description": "A step which requires a user to complete",
                      "required": [
                        "type",
                        "options"
                      ],
                      "properties": {
                        "type": {
                          "example": "user",
                          "x-examples": [
                            "user"
                          ]
                        },
                        "options": {
                          "type": "object",
                          "required": [
                            "component",
                            "payload"
                          ],
                          "properties": {
                            "component": {
                              "type": "string",
                              "description": "Name of the function to invoke",
                              "example": "assignUnitsFromCustomerToProject",
                              "x-examples": [
                                "assignUnitsFromCustomerToProject"
                              ]
                            },
                            "payload": {
                              "type": "object"
                            }
                          }
                        }
                      },
                      "allOf": [
                        {
                          "type": "object",
                          "x-ui-hide": true,
                          "required": [
                            "type",
                            "label",
                            "goto"
                          ],
                          "properties": {
                            "type": {
                              "type": "string",
                              "description": "Type of workflow step",
                              "enum": [
                                "load",
                                "choice",
                                "function",
                                "machine",
                                "pass",
                                "fail",
                                "success",
                                "user",
                                "wait"
                              ]
                            },
                            "label": {
                              "type": "string",
                              "description": "Label for the step",
                              "example": "Find units",
                              "x-examples": [
                                "Find units"
                              ]
                            },
                            "goto": {
                              "type": "string",
                              "description": "Step to move to",
                              "pattern": "^[a-z][a-z-]+[a-z]$",
                              "example": "complete",
                              "x-examples": [
                                "complete"
                              ]
                            },
                            "goto-fail": {
                              "type": "string",
                              "description": "Step to transition too if this step cannot be completed",
                              "pattern": "^[a-z][a-z-]+[a-z]$",
                              "example": "process-fail",
                              "x-examples": [
                                "process-fail"
                              ]
                            },
                            "context": {
                              "type": "array",
                              "description": "Initial values to set on the context",
                              "items": {
                                "type": "object",
                                "required": [
                                  "key",
                                  "value"
                                ],
                                "properties": {
                                  "key": {
                                    "type": "string",
                                    "description": "The context key to set",
                                    "example": "$.fizz",
                                    "x-examples": [
                                      "$.fizz",
                                      "$.unit.status",
                                      "extract_fields"
                                    ]
                                  },
                                  "value": {
                                    "type": "string",
                                    "description": "Value to set",
                                    "example": "$.buzz",
                                    "x-examples": [
                                      "$.buzz",
                                      "Pending",
                                      true
                                    ]
                                  },
                                  "lock": {
                                    "type": "boolean",
                                    "description": "Prevents other steps from writing this value",
                                    "example": true
                                  },
                                  "ignore": {
                                    "type": "boolean",
                                    "description": "When trying to set a locked key, do not fail",
                                    "example": false
                                  }
                                }
                              }
                            },
                            "onError": {
                              "type": "object",
                              "description": "Action to take when step fails",
                              "required": [
                                "finally"
                              ],
                              "properties": {
                                "retry": {
                                  "type": "integer",
                                  "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                  "minimum": 0,
                                  "maximum": 10,
                                  "example": 3,
                                  "default": 0
                                },
                                "finally": {
                                  "type": "object",
                                  "description": "What to do after all retries",
                                  "required": [
                                    "goto"
                                  ],
                                  "properties": {
                                    "actions": {
                                      "type": "array",
                                      "description": "Actions to take on failure",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "The type of the action",
                                                "enum": [
                                                  "email"
                                                ]
                                              },
                                              "options": {
                                                "type": "object",
                                                "description": "settings for the action",
                                                "additionalProperties": {
                                                  "type": "string"
                                                },
                                                "x-examples": [
                                                  {
                                                    "to": "bob@example.com",
                                                    "from": "alice@example.com"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to transition to on failure",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "failed",
                                      "x-examples": [
                                        "failed"
                                      ]
                                    }
                                  }
                                }
                              }
                            },
                            "onComplete": {
                              "type": "object",
                              "description": "Actions to take when the step completes",
                              "properties": {
                                "actions": {
                                  "type": "array",
                                  "items": {
                                    "anyOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "The type of the action",
                                            "enum": [
                                              "email"
                                            ]
                                          },
                                          "options": {
                                            "type": "object",
                                            "description": "settings for the action",
                                            "additionalProperties": {
                                              "type": "string"
                                            },
                                            "x-examples": [
                                              {
                                                "to": "bob@example.com",
                                                "from": "alice@example.com"
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "object",
                  "description": "Ask the user to manually enter (or confirm) data for an entity",
                  "x-nter-step-component": "manual-data-entry",
                  "properties": {
                    "label": {
                      "x-examples": [
                        "Enter asset tag and confirm serial number"
                      ]
                    },
                    "options": {
                      "type": "object",
                      "required": [
                        "component",
                        "payload"
                      ],
                      "properties": {
                        "component": {
                          "enum": [
                            "manual-data-entry"
                          ],
                          "example": "manual-data-entry",
                          "x-examples": [
                            "manual-data-entry"
                          ]
                        },
                        "payload": {
                          "type": "object",
                          "required": [
                            "fields"
                          ],
                          "properties": {
                            "fields": {
                              "type": "array",
                              "description": "Configuration for each field",
                              "items": {
                                "type": "object",
                                "required": [
                                  "input_type",
                                  "label",
                                  "required",
                                  "entity_field"
                                ],
                                "properties": {
                                  "input_type": {
                                    "type": "string",
                                    "description": "The type of input field to display",
                                    "enum": [
                                      "textbox",
                                      "input"
                                    ]
                                  },
                                  "label": {
                                    "type": "string",
                                    "description": "Label to display for the field",
                                    "example": "Asset Tag",
                                    "x-examples": [
                                      "Asset Tag"
                                    ]
                                  },
                                  "required": {
                                    "type": "boolean",
                                    "description": "Display the field as required input. Note: this is a helper function. It singles that the user is required to input data at this step. If the field is required on the entity, the user will be presented with a validation message",
                                    "example": true
                                  },
                                  "entity_field": {
                                    "type": "string",
                                    "description": "JSON Path to the field on the entity. If the path does not start with '$' then the entity on the context is assumed. Otherwise the data will be set on the context path",
                                    "example": "input_filter[?(@.key = 'asset-tag')]",
                                    "x-examples": [
                                      "input_filter[?(@.key = 'asset-tag')]"
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  },
                  "allOf": [
                    {
                      "type": "object",
                      "x-ui-hide": true,
                      "description": "A step which requires a user to complete",
                      "required": [
                        "type",
                        "options"
                      ],
                      "properties": {
                        "type": {
                          "example": "user",
                          "x-examples": [
                            "user"
                          ]
                        },
                        "options": {
                          "type": "object",
                          "required": [
                            "component",
                            "payload"
                          ],
                          "properties": {
                            "component": {
                              "type": "string",
                              "description": "Name of the function to invoke",
                              "example": "assignUnitsFromCustomerToProject",
                              "x-examples": [
                                "assignUnitsFromCustomerToProject"
                              ]
                            },
                            "payload": {
                              "type": "object"
                            }
                          }
                        }
                      },
                      "allOf": [
                        {
                          "type": "object",
                          "x-ui-hide": true,
                          "required": [
                            "type",
                            "label",
                            "goto"
                          ],
                          "properties": {
                            "type": {
                              "type": "string",
                              "description": "Type of workflow step",
                              "enum": [
                                "load",
                                "choice",
                                "function",
                                "machine",
                                "pass",
                                "fail",
                                "success",
                                "user",
                                "wait"
                              ]
                            },
                            "label": {
                              "type": "string",
                              "description": "Label for the step",
                              "example": "Find units",
                              "x-examples": [
                                "Find units"
                              ]
                            },
                            "goto": {
                              "type": "string",
                              "description": "Step to move to",
                              "pattern": "^[a-z][a-z-]+[a-z]$",
                              "example": "complete",
                              "x-examples": [
                                "complete"
                              ]
                            },
                            "goto-fail": {
                              "type": "string",
                              "description": "Step to transition too if this step cannot be completed",
                              "pattern": "^[a-z][a-z-]+[a-z]$",
                              "example": "process-fail",
                              "x-examples": [
                                "process-fail"
                              ]
                            },
                            "context": {
                              "type": "array",
                              "description": "Initial values to set on the context",
                              "items": {
                                "type": "object",
                                "required": [
                                  "key",
                                  "value"
                                ],
                                "properties": {
                                  "key": {
                                    "type": "string",
                                    "description": "The context key to set",
                                    "example": "$.fizz",
                                    "x-examples": [
                                      "$.fizz",
                                      "$.unit.status",
                                      "extract_fields"
                                    ]
                                  },
                                  "value": {
                                    "type": "string",
                                    "description": "Value to set",
                                    "example": "$.buzz",
                                    "x-examples": [
                                      "$.buzz",
                                      "Pending",
                                      true
                                    ]
                                  },
                                  "lock": {
                                    "type": "boolean",
                                    "description": "Prevents other steps from writing this value",
                                    "example": true
                                  },
                                  "ignore": {
                                    "type": "boolean",
                                    "description": "When trying to set a locked key, do not fail",
                                    "example": false
                                  }
                                }
                              }
                            },
                            "onError": {
                              "type": "object",
                              "description": "Action to take when step fails",
                              "required": [
                                "finally"
                              ],
                              "properties": {
                                "retry": {
                                  "type": "integer",
                                  "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                  "minimum": 0,
                                  "maximum": 10,
                                  "example": 3,
                                  "default": 0
                                },
                                "finally": {
                                  "type": "object",
                                  "description": "What to do after all retries",
                                  "required": [
                                    "goto"
                                  ],
                                  "properties": {
                                    "actions": {
                                      "type": "array",
                                      "description": "Actions to take on failure",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "The type of the action",
                                                "enum": [
                                                  "email"
                                                ]
                                              },
                                              "options": {
                                                "type": "object",
                                                "description": "settings for the action",
                                                "additionalProperties": {
                                                  "type": "string"
                                                },
                                                "x-examples": [
                                                  {
                                                    "to": "bob@example.com",
                                                    "from": "alice@example.com"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to transition to on failure",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "failed",
                                      "x-examples": [
                                        "failed"
                                      ]
                                    }
                                  }
                                }
                              }
                            },
                            "onComplete": {
                              "type": "object",
                              "description": "Actions to take when the step completes",
                              "properties": {
                                "actions": {
                                  "type": "array",
                                  "items": {
                                    "anyOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "The type of the action",
                                            "enum": [
                                              "email"
                                            ]
                                          },
                                          "options": {
                                            "type": "object",
                                            "description": "settings for the action",
                                            "additionalProperties": {
                                              "type": "string"
                                            },
                                            "x-examples": [
                                              {
                                                "to": "bob@example.com",
                                                "from": "alice@example.com"
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "object",
                  "description": "Ask the user to follow a list and check off boxes",
                  "x-nter-step-component": "task-list",
                  "properties": {
                    "label": {
                      "x-examples": [
                        "Enter asset tag and confirm serial number"
                      ]
                    },
                    "options": {
                      "type": "object",
                      "required": [
                        "component",
                        "payload"
                      ],
                      "properties": {
                        "component": {
                          "enum": [
                            "task-list"
                          ],
                          "example": "task-list",
                          "x-examples": [
                            "task-list"
                          ]
                        },
                        "payload": {
                          "type": "object",
                          "required": [
                            "items"
                          ],
                          "properties": {
                            "is_qc": {
                              "type": "boolean",
                              "description": "Flags this list as a QC task list. This means that a different user can close the task to one previously on the context"
                            },
                            "items": {
                              "type": "array",
                              "description": "Configuration for each task list item",
                              "items": {
                                "type": "object",
                                "required": [
                                  "label",
                                  "help",
                                  "evaluated",
                                  "na_option"
                                ],
                                "properties": {
                                  "label": {
                                    "type": "string",
                                    "description": "Label to display for the field",
                                    "example": "Asset Tag placement",
                                    "x-examples": [
                                      "Asset Tag placement"
                                    ]
                                  },
                                  "slug": {
                                    "type": "string",
                                    "description": "Slug for the item (Auto-generated from the label)",
                                    "readOnly": true,
                                    "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$",
                                    "example": "asset-tag-placement",
                                    "x-examples": [
                                      "asset-tag-placement"
                                    ]
                                  },
                                  "help": {
                                    "type": "string",
                                    "description": "Message describing what is needed to be checked",
                                    "example": "Asset Tag attached to the unit in the correct position",
                                    "x-examples": [
                                      "Asset Tag attached to the unit in the correct position"
                                    ]
                                  },
                                  "evaluated": {
                                    "type": "boolean",
                                    "description": "When set to true, this will fail the step if the value for the item is false or N/A",
                                    "example": true
                                  },
                                  "na_field": {
                                    "type": "boolean",
                                    "description": "Allow the user to select the N/A option when checking off the list",
                                    "example": true
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  },
                  "allOf": [
                    {
                      "type": "object",
                      "x-ui-hide": true,
                      "description": "A step which requires a user to complete",
                      "required": [
                        "type",
                        "options"
                      ],
                      "properties": {
                        "type": {
                          "example": "user",
                          "x-examples": [
                            "user"
                          ]
                        },
                        "options": {
                          "type": "object",
                          "required": [
                            "component",
                            "payload"
                          ],
                          "properties": {
                            "component": {
                              "type": "string",
                              "description": "Name of the function to invoke",
                              "example": "assignUnitsFromCustomerToProject",
                              "x-examples": [
                                "assignUnitsFromCustomerToProject"
                              ]
                            },
                            "payload": {
                              "type": "object"
                            }
                          }
                        }
                      },
                      "allOf": [
                        {
                          "type": "object",
                          "x-ui-hide": true,
                          "required": [
                            "type",
                            "label",
                            "goto"
                          ],
                          "properties": {
                            "type": {
                              "type": "string",
                              "description": "Type of workflow step",
                              "enum": [
                                "load",
                                "choice",
                                "function",
                                "machine",
                                "pass",
                                "fail",
                                "success",
                                "user",
                                "wait"
                              ]
                            },
                            "label": {
                              "type": "string",
                              "description": "Label for the step",
                              "example": "Find units",
                              "x-examples": [
                                "Find units"
                              ]
                            },
                            "goto": {
                              "type": "string",
                              "description": "Step to move to",
                              "pattern": "^[a-z][a-z-]+[a-z]$",
                              "example": "complete",
                              "x-examples": [
                                "complete"
                              ]
                            },
                            "goto-fail": {
                              "type": "string",
                              "description": "Step to transition too if this step cannot be completed",
                              "pattern": "^[a-z][a-z-]+[a-z]$",
                              "example": "process-fail",
                              "x-examples": [
                                "process-fail"
                              ]
                            },
                            "context": {
                              "type": "array",
                              "description": "Initial values to set on the context",
                              "items": {
                                "type": "object",
                                "required": [
                                  "key",
                                  "value"
                                ],
                                "properties": {
                                  "key": {
                                    "type": "string",
                                    "description": "The context key to set",
                                    "example": "$.fizz",
                                    "x-examples": [
                                      "$.fizz",
                                      "$.unit.status",
                                      "extract_fields"
                                    ]
                                  },
                                  "value": {
                                    "type": "string",
                                    "description": "Value to set",
                                    "example": "$.buzz",
                                    "x-examples": [
                                      "$.buzz",
                                      "Pending",
                                      true
                                    ]
                                  },
                                  "lock": {
                                    "type": "boolean",
                                    "description": "Prevents other steps from writing this value",
                                    "example": true
                                  },
                                  "ignore": {
                                    "type": "boolean",
                                    "description": "When trying to set a locked key, do not fail",
                                    "example": false
                                  }
                                }
                              }
                            },
                            "onError": {
                              "type": "object",
                              "description": "Action to take when step fails",
                              "required": [
                                "finally"
                              ],
                              "properties": {
                                "retry": {
                                  "type": "integer",
                                  "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                  "minimum": 0,
                                  "maximum": 10,
                                  "example": 3,
                                  "default": 0
                                },
                                "finally": {
                                  "type": "object",
                                  "description": "What to do after all retries",
                                  "required": [
                                    "goto"
                                  ],
                                  "properties": {
                                    "actions": {
                                      "type": "array",
                                      "description": "Actions to take on failure",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "The type of the action",
                                                "enum": [
                                                  "email"
                                                ]
                                              },
                                              "options": {
                                                "type": "object",
                                                "description": "settings for the action",
                                                "additionalProperties": {
                                                  "type": "string"
                                                },
                                                "x-examples": [
                                                  {
                                                    "to": "bob@example.com",
                                                    "from": "alice@example.com"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to transition to on failure",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "failed",
                                      "x-examples": [
                                        "failed"
                                      ]
                                    }
                                  }
                                }
                              }
                            },
                            "onComplete": {
                              "type": "object",
                              "description": "Actions to take when the step completes",
                              "properties": {
                                "actions": {
                                  "type": "array",
                                  "items": {
                                    "anyOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "The type of the action",
                                            "enum": [
                                              "email"
                                            ]
                                          },
                                          "options": {
                                            "type": "object",
                                            "description": "settings for the action",
                                            "additionalProperties": {
                                              "type": "string"
                                            },
                                            "x-examples": [
                                              {
                                                "to": "bob@example.com",
                                                "from": "alice@example.com"
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "object",
                  "description": "Run the ACE-IOS application to provision iOS devices or ",
                  "properties": {
                    "type": {
                      "example": "machine",
                      "x-examples": [
                        "machine"
                      ]
                    },
                    "label": {
                      "x-examples": [
                        "Run Application"
                      ]
                    },
                    "options": {
                      "type": "object",
                      "required": [
                        "application",
                        "configuration"
                      ],
                      "properties": {
                        "configuration": {
                          "type": "object",
                          "description": "ACE Configuration options",
                          "properties": {
                            "pairing_cert": {
                              "type": "string",
                              "format": "base64",
                              "description": "Contents of a *.crt file exported from Apple Configurator or MDM",
                              "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                              "x-examples": [
                                "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                              ],
                              "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                            },
                            "pairing_key": {
                              "type": "string",
                              "format": "base64",
                              "description": "Contents of a *.der file exported from Apple Configurator or MDM",
                              "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                              "x-examples": [
                                "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                              ],
                              "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                            },
                            "restore_device": {
                              "type": "boolean",
                              "description": "Restore device to factory defaults"
                            },
                            "automated_enrollment": {
                              "type": "boolean",
                              "description": "Automatically enroll the device to MDM"
                            },
                            "mdm": {
                              "type": "object",
                              "format": "base64",
                              "description": "The settings for the Customers MDM",
                              "properties": {
                                "vendor": {
                                  "type": "string",
                                  "description": "MDM vendor. Currently, supported values are AirWatch, JAMF, and Meraki.",
                                  "enum": [
                                    "AirWatch",
                                    "JAMF",
                                    "Meraki"
                                  ]
                                },
                                "console_url": {
                                  "type": "string",
                                  "format": "uri",
                                  "description": "Base URL for HTTP requests",
                                  "example": "http://jamf.zones.com",
                                  "x-examples": [
                                    "http://jamf.zones.com"
                                  ]
                                },
                                "user": {
                                  "type": "string",
                                  "description": "MDM User name",
                                  "example": "NterpriseBob",
                                  "x-examples": [
                                    "NterpriseBob"
                                  ]
                                },
                                "password": {
                                  "type": "string",
                                  "description": "MDM password"
                                },
                                "tenant_code": {
                                  "type": "string",
                                  "description": "MDM authentication key",
                                  "example": "nterprise",
                                  "x-examples": [
                                    "nterprise"
                                  ]
                                },
                                "set_asset_tag": {
                                  "type": "string",
                                  "description": "Sets the devices Asset tag based on a field from the unit",
                                  "example": "$._entity.input_filter[?(@.key = 'asset-tag')]",
                                  "x-examples": [
                                    "$._entity.input_filter[?(@.key = 'asset-tag')]"
                                  ]
                                }
                              }
                            },
                            "field_mappings": {
                              "type": "array",
                              "description": "List of fields to map to the device",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "from": {
                                    "type": "string",
                                    "description": "The field reported from ACE",
                                    "enum": [
                                      "serial_number",
                                      "name",
                                      "ecid",
                                      "udid",
                                      "configurator_serial",
                                      "ios",
                                      "model",
                                      "storage",
                                      "wifi_mac",
                                      "bt_mac",
                                      "ethernet_mac",
                                      "thundersync_serial",
                                      "iccid",
                                      "iccid2",
                                      "imei",
                                      "imei2",
                                      "missed_profiles",
                                      "missed_apps",
                                      "icon_list_regex",
                                      "icon_layout",
                                      "bat_capacity"
                                    ]
                                  },
                                  "to": {
                                    "type": "string",
                                    "description": "Field to set on the entity",
                                    "example": "$._entity.input_filter[?(@.key = 'serial-number')]",
                                    "x-examples": [
                                      "$._entity.input_filter[?(@.key = 'serial-number')]"
                                    ]
                                  }
                                }
                              }
                            },
                            "wait_for_apps": {
                              "type": "array",
                              "description": "A list of applications needed to be installed on the device. This will cause the extension to poll the device for installed applications. Once all the applications have been installed, this step can be completed",
                              "items": {
                                "type": "string",
                                "format": "uri",
                                "example": "com.apple.itunes",
                                "x-examples": [
                                  "com.apple.itunes"
                                ]
                              }
                            },
                            "wait_for_battery_charge": {
                              "type": "integer",
                              "description": "The required battery percentage needed before this step can move on",
                              "minimum": 0,
                              "maximum": 100
                            }
                          }
                        }
                      }
                    }
                  },
                  "allOf": [
                    {
                      "type": "object",
                      "description": "Run an application extension",
                      "properties": {
                        "label": {
                          "x-examples": [
                            "Run Application"
                          ]
                        },
                        "options": {
                          "type": "object",
                          "required": [
                            "application",
                            "configuration"
                          ],
                          "properties": {
                            "application": {
                              "type": "object",
                              "required": [
                                "application_id",
                                "platforms"
                              ],
                              "properties": {
                                "application_id": {
                                  "type": "string",
                                  "description": "Registered application ID",
                                  "example": "ace-ios",
                                  "x-examples": [
                                    "ace-ios"
                                  ]
                                },
                                "platforms": {
                                  "type": "array",
                                  "description": "Allowed platforms the application can run on",
                                  "items": {
                                    "type": "object",
                                    "required": [
                                      "platform",
                                      "arch"
                                    ],
                                    "properties": {
                                      "platform": {
                                        "type": "string",
                                        "description": "The platform (OS) the application can run on",
                                        "enum": [
                                          "aix",
                                          "darwin",
                                          "freebsd",
                                          "linux",
                                          "openbsd",
                                          "sunos",
                                          "win32"
                                        ]
                                      },
                                      "arch": {
                                        "type": "string",
                                        "description": "The CPU architecture needed to run the application",
                                        "enum": [
                                          "arm",
                                          "arm64",
                                          "ia32",
                                          "mips",
                                          "mipsel",
                                          "ppc",
                                          "ppc64",
                                          "s390",
                                          "s390x",
                                          "x32",
                                          "x64"
                                        ]
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      },
                      "allOf": [
                        {
                          "type": "object",
                          "x-ui-hide": true,
                          "required": [
                            "type",
                            "label",
                            "goto"
                          ],
                          "properties": {
                            "type": {
                              "type": "string",
                              "description": "Type of workflow step",
                              "enum": [
                                "load",
                                "choice",
                                "function",
                                "machine",
                                "pass",
                                "fail",
                                "success",
                                "user",
                                "wait"
                              ]
                            },
                            "label": {
                              "type": "string",
                              "description": "Label for the step",
                              "example": "Find units",
                              "x-examples": [
                                "Find units"
                              ]
                            },
                            "goto": {
                              "type": "string",
                              "description": "Step to move to",
                              "pattern": "^[a-z][a-z-]+[a-z]$",
                              "example": "complete",
                              "x-examples": [
                                "complete"
                              ]
                            },
                            "goto-fail": {
                              "type": "string",
                              "description": "Step to transition too if this step cannot be completed",
                              "pattern": "^[a-z][a-z-]+[a-z]$",
                              "example": "process-fail",
                              "x-examples": [
                                "process-fail"
                              ]
                            },
                            "context": {
                              "type": "array",
                              "description": "Initial values to set on the context",
                              "items": {
                                "type": "object",
                                "required": [
                                  "key",
                                  "value"
                                ],
                                "properties": {
                                  "key": {
                                    "type": "string",
                                    "description": "The context key to set",
                                    "example": "$.fizz",
                                    "x-examples": [
                                      "$.fizz",
                                      "$.unit.status",
                                      "extract_fields"
                                    ]
                                  },
                                  "value": {
                                    "type": "string",
                                    "description": "Value to set",
                                    "example": "$.buzz",
                                    "x-examples": [
                                      "$.buzz",
                                      "Pending",
                                      true
                                    ]
                                  },
                                  "lock": {
                                    "type": "boolean",
                                    "description": "Prevents other steps from writing this value",
                                    "example": true
                                  },
                                  "ignore": {
                                    "type": "boolean",
                                    "description": "When trying to set a locked key, do not fail",
                                    "example": false
                                  }
                                }
                              }
                            },
                            "onError": {
                              "type": "object",
                              "description": "Action to take when step fails",
                              "required": [
                                "finally"
                              ],
                              "properties": {
                                "retry": {
                                  "type": "integer",
                                  "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                  "minimum": 0,
                                  "maximum": 10,
                                  "example": 3,
                                  "default": 0
                                },
                                "finally": {
                                  "type": "object",
                                  "description": "What to do after all retries",
                                  "required": [
                                    "goto"
                                  ],
                                  "properties": {
                                    "actions": {
                                      "type": "array",
                                      "description": "Actions to take on failure",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "The type of the action",
                                                "enum": [
                                                  "email"
                                                ]
                                              },
                                              "options": {
                                                "type": "object",
                                                "description": "settings for the action",
                                                "additionalProperties": {
                                                  "type": "string"
                                                },
                                                "x-examples": [
                                                  {
                                                    "to": "bob@example.com",
                                                    "from": "alice@example.com"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to transition to on failure",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "failed",
                                      "x-examples": [
                                        "failed"
                                      ]
                                    }
                                  }
                                }
                              }
                            },
                            "onComplete": {
                              "type": "object",
                              "description": "Actions to take when the step completes",
                              "properties": {
                                "actions": {
                                  "type": "array",
                                  "items": {
                                    "anyOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "The type of the action",
                                            "enum": [
                                              "email"
                                            ]
                                          },
                                          "options": {
                                            "type": "object",
                                            "description": "settings for the action",
                                            "additionalProperties": {
                                              "type": "string"
                                            },
                                            "x-examples": [
                                              {
                                                "to": "bob@example.com",
                                                "from": "alice@example.com"
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "object",
                  "properties": {
                    "label": {
                      "example": "Is device ok?",
                      "x-examples": [
                        "Is device ok?"
                      ]
                    },
                    "type": {
                      "example": "choice",
                      "x-examples": [
                        "choice"
                      ]
                    },
                    "choices": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "required": [
                          "goto"
                        ],
                        "maxProperties": 2,
                        "minProperties": 2,
                        "maximum": 20,
                        "properties": {
                          "and": {
                            "type": "array",
                            "description": "All choices must be satisfied",
                            "maximum": 5,
                            "items": {
                              "description": "A Step choice",
                              "type": "object",
                              "maxProperties": 2,
                              "minProperties": 2,
                              "required": [
                                "variable"
                              ],
                              "properties": {
                                "variable": {
                                  "type": "string",
                                  "description": "Context variable to check",
                                  "example": "$.parts.available",
                                  "x-examples": [
                                    "$.parts.available"
                                  ]
                                },
                                "greater_than_equals": {
                                  "type": "string",
                                  "description": "Value has to be greater than or equals to",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "less_than_equals": {
                                  "type": "string",
                                  "description": "Value has to be less than or equals to",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "greater_than": {
                                  "type": "string",
                                  "description": "Value has to be greater than",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "less_than": {
                                  "type": "string",
                                  "description": "Value has to be less than",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "equals": {
                                  "type": "string",
                                  "description": "Value has to equal",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "not_equals": {
                                  "type": "string",
                                  "description": "Value must not equal",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                }
                              }
                            }
                          },
                          "or": {
                            "type": "array",
                            "description": "Any of these choices must be satisfied",
                            "maximum": 5,
                            "items": {
                              "description": "A Step choice",
                              "type": "object",
                              "maxProperties": 2,
                              "minProperties": 2,
                              "required": [
                                "variable"
                              ],
                              "properties": {
                                "variable": {
                                  "type": "string",
                                  "description": "Context variable to check",
                                  "example": "$.parts.available",
                                  "x-examples": [
                                    "$.parts.available"
                                  ]
                                },
                                "greater_than_equals": {
                                  "type": "string",
                                  "description": "Value has to be greater than or equals to",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "less_than_equals": {
                                  "type": "string",
                                  "description": "Value has to be less than or equals to",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "greater_than": {
                                  "type": "string",
                                  "description": "Value has to be greater than",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "less_than": {
                                  "type": "string",
                                  "description": "Value has to be less than",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "equals": {
                                  "type": "string",
                                  "description": "Value has to equal",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "not_equals": {
                                  "type": "string",
                                  "description": "Value must not equal",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                }
                              }
                            }
                          },
                          "not": {
                            "type": "array",
                            "description": "None of these choices must be satisfied",
                            "maximum": 5,
                            "items": {
                              "description": "A Step choice",
                              "type": "object",
                              "maxProperties": 2,
                              "minProperties": 2,
                              "required": [
                                "variable"
                              ],
                              "properties": {
                                "variable": {
                                  "type": "string",
                                  "description": "Context variable to check",
                                  "example": "$.parts.available",
                                  "x-examples": [
                                    "$.parts.available"
                                  ]
                                },
                                "greater_than_equals": {
                                  "type": "string",
                                  "description": "Value has to be greater than or equals to",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "less_than_equals": {
                                  "type": "string",
                                  "description": "Value has to be less than or equals to",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "greater_than": {
                                  "type": "string",
                                  "description": "Value has to be greater than",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "less_than": {
                                  "type": "string",
                                  "description": "Value has to be less than",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "equals": {
                                  "type": "string",
                                  "description": "Value has to equal",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "not_equals": {
                                  "type": "string",
                                  "description": "Value must not equal",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                }
                              }
                            }
                          },
                          "goto": {
                            "description": "Step to goto when condition is met",
                            "allOf": [
                              {
                                "type": "string",
                                "description": "Step to move to",
                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                "example": "complete",
                                "x-examples": [
                                  "complete"
                                ]
                              }
                            ]
                          }
                        }
                      }
                    },
                    "goto": {
                      "description": "Default step to goto when no choice can be made"
                    }
                  },
                  "allOf": [
                    {
                      "type": "object",
                      "x-ui-hide": true,
                      "required": [
                        "type",
                        "label",
                        "goto"
                      ],
                      "properties": {
                        "type": {
                          "type": "string",
                          "description": "Type of workflow step",
                          "enum": [
                            "load",
                            "choice",
                            "function",
                            "machine",
                            "pass",
                            "fail",
                            "success",
                            "user",
                            "wait"
                          ]
                        },
                        "label": {
                          "type": "string",
                          "description": "Label for the step",
                          "example": "Find units",
                          "x-examples": [
                            "Find units"
                          ]
                        },
                        "goto": {
                          "type": "string",
                          "description": "Step to move to",
                          "pattern": "^[a-z][a-z-]+[a-z]$",
                          "example": "complete",
                          "x-examples": [
                            "complete"
                          ]
                        },
                        "goto-fail": {
                          "type": "string",
                          "description": "Step to transition too if this step cannot be completed",
                          "pattern": "^[a-z][a-z-]+[a-z]$",
                          "example": "process-fail",
                          "x-examples": [
                            "process-fail"
                          ]
                        },
                        "context": {
                          "type": "array",
                          "description": "Initial values to set on the context",
                          "items": {
                            "type": "object",
                            "required": [
                              "key",
                              "value"
                            ],
                            "properties": {
                              "key": {
                                "type": "string",
                                "description": "The context key to set",
                                "example": "$.fizz",
                                "x-examples": [
                                  "$.fizz",
                                  "$.unit.status",
                                  "extract_fields"
                                ]
                              },
                              "value": {
                                "type": "string",
                                "description": "Value to set",
                                "example": "$.buzz",
                                "x-examples": [
                                  "$.buzz",
                                  "Pending",
                                  true
                                ]
                              },
                              "lock": {
                                "type": "boolean",
                                "description": "Prevents other steps from writing this value",
                                "example": true
                              },
                              "ignore": {
                                "type": "boolean",
                                "description": "When trying to set a locked key, do not fail",
                                "example": false
                              }
                            }
                          }
                        },
                        "onError": {
                          "type": "object",
                          "description": "Action to take when step fails",
                          "required": [
                            "finally"
                          ],
                          "properties": {
                            "retry": {
                              "type": "integer",
                              "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                              "minimum": 0,
                              "maximum": 10,
                              "example": 3,
                              "default": 0
                            },
                            "finally": {
                              "type": "object",
                              "description": "What to do after all retries",
                              "required": [
                                "goto"
                              ],
                              "properties": {
                                "actions": {
                                  "type": "array",
                                  "description": "Actions to take on failure",
                                  "items": {
                                    "anyOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "The type of the action",
                                            "enum": [
                                              "email"
                                            ]
                                          },
                                          "options": {
                                            "type": "object",
                                            "description": "settings for the action",
                                            "additionalProperties": {
                                              "type": "string"
                                            },
                                            "x-examples": [
                                              {
                                                "to": "bob@example.com",
                                                "from": "alice@example.com"
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "goto": {
                                  "type": "string",
                                  "description": "Step to transition to on failure",
                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                  "example": "failed",
                                  "x-examples": [
                                    "failed"
                                  ]
                                }
                              }
                            }
                          }
                        },
                        "onComplete": {
                          "type": "object",
                          "description": "Actions to take when the step completes",
                          "properties": {
                            "actions": {
                              "type": "array",
                              "items": {
                                "anyOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "type": {
                                        "type": "string",
                                        "description": "The type of the action",
                                        "enum": [
                                          "email"
                                        ]
                                      },
                                      "options": {
                                        "type": "object",
                                        "description": "settings for the action",
                                        "additionalProperties": {
                                          "type": "string"
                                        },
                                        "x-examples": [
                                          {
                                            "to": "bob@example.com",
                                            "from": "alice@example.com"
                                          }
                                        ]
                                      }
                                    }
                                  }
                                ]
                              }
                            }
                          }
                        }
                      }
                    }
                  ]
                },
                {
                  "type": "object",
                  "description": "Finial step which is marked as failed",
                  "properties": {
                    "label": {
                      "example": "Failed",
                      "x-examples": [
                        "Failed"
                      ],
                      "allOf": [
                        {
                          "type": "string",
                          "description": "Label for the step",
                          "example": "Find units",
                          "x-examples": [
                            "Find units"
                          ]
                        }
                      ]
                    },
                    "type": {
                      "example": "fail",
                      "x-examples": [
                        "fail"
                      ],
                      "allOf": [
                        {
                          "type": "string",
                          "description": "Type of workflow step",
                          "enum": [
                            "load",
                            "choice",
                            "function",
                            "machine",
                            "pass",
                            "fail",
                            "success",
                            "user",
                            "wait"
                          ]
                        }
                      ]
                    },
                    "onComplete": {
                      "type": "object",
                      "description": "Actions to take when the step completes",
                      "properties": {
                        "actions": {
                          "type": "array",
                          "items": {
                            "anyOf": [
                              {
                                "type": "object",
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "description": "The type of the action",
                                    "enum": [
                                      "email"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "description": "settings for the action",
                                    "additionalProperties": {
                                      "type": "string"
                                    },
                                    "x-examples": [
                                      {
                                        "to": "bob@example.com",
                                        "from": "alice@example.com"
                                      }
                                    ]
                                  }
                                }
                              }
                            ]
                          }
                        }
                      }
                    }
                  }
                },
                {
                  "type": "object",
                  "description": "Allows executing actions with out performing any function",
                  "properties": {
                    "label": {
                      "example": "Send email to project manager",
                      "x-examples": [
                        "Send email to project manager"
                      ]
                    },
                    "type": {
                      "example": "pass",
                      "x-examples": [
                        "pass"
                      ],
                      "allOf": [
                        {
                          "type": "string",
                          "description": "Type of workflow step",
                          "enum": [
                            "load",
                            "choice",
                            "function",
                            "machine",
                            "pass",
                            "fail",
                            "success",
                            "user",
                            "wait"
                          ]
                        }
                      ]
                    }
                  },
                  "allOf": [
                    {
                      "type": "object",
                      "x-ui-hide": true,
                      "required": [
                        "type",
                        "label",
                        "goto"
                      ],
                      "properties": {
                        "type": {
                          "type": "string",
                          "description": "Type of workflow step",
                          "enum": [
                            "load",
                            "choice",
                            "function",
                            "machine",
                            "pass",
                            "fail",
                            "success",
                            "user",
                            "wait"
                          ]
                        },
                        "label": {
                          "type": "string",
                          "description": "Label for the step",
                          "example": "Find units",
                          "x-examples": [
                            "Find units"
                          ]
                        },
                        "goto": {
                          "type": "string",
                          "description": "Step to move to",
                          "pattern": "^[a-z][a-z-]+[a-z]$",
                          "example": "complete",
                          "x-examples": [
                            "complete"
                          ]
                        },
                        "goto-fail": {
                          "type": "string",
                          "description": "Step to transition too if this step cannot be completed",
                          "pattern": "^[a-z][a-z-]+[a-z]$",
                          "example": "process-fail",
                          "x-examples": [
                            "process-fail"
                          ]
                        },
                        "context": {
                          "type": "array",
                          "description": "Initial values to set on the context",
                          "items": {
                            "type": "object",
                            "required": [
                              "key",
                              "value"
                            ],
                            "properties": {
                              "key": {
                                "type": "string",
                                "description": "The context key to set",
                                "example": "$.fizz",
                                "x-examples": [
                                  "$.fizz",
                                  "$.unit.status",
                                  "extract_fields"
                                ]
                              },
                              "value": {
                                "type": "string",
                                "description": "Value to set",
                                "example": "$.buzz",
                                "x-examples": [
                                  "$.buzz",
                                  "Pending",
                                  true
                                ]
                              },
                              "lock": {
                                "type": "boolean",
                                "description": "Prevents other steps from writing this value",
                                "example": true
                              },
                              "ignore": {
                                "type": "boolean",
                                "description": "When trying to set a locked key, do not fail",
                                "example": false
                              }
                            }
                          }
                        },
                        "onError": {
                          "type": "object",
                          "description": "Action to take when step fails",
                          "required": [
                            "finally"
                          ],
                          "properties": {
                            "retry": {
                              "type": "integer",
                              "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                              "minimum": 0,
                              "maximum": 10,
                              "example": 3,
                              "default": 0
                            },
                            "finally": {
                              "type": "object",
                              "description": "What to do after all retries",
                              "required": [
                                "goto"
                              ],
                              "properties": {
                                "actions": {
                                  "type": "array",
                                  "description": "Actions to take on failure",
                                  "items": {
                                    "anyOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "The type of the action",
                                            "enum": [
                                              "email"
                                            ]
                                          },
                                          "options": {
                                            "type": "object",
                                            "description": "settings for the action",
                                            "additionalProperties": {
                                              "type": "string"
                                            },
                                            "x-examples": [
                                              {
                                                "to": "bob@example.com",
                                                "from": "alice@example.com"
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "goto": {
                                  "type": "string",
                                  "description": "Step to transition to on failure",
                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                  "example": "failed",
                                  "x-examples": [
                                    "failed"
                                  ]
                                }
                              }
                            }
                          }
                        },
                        "onComplete": {
                          "type": "object",
                          "description": "Actions to take when the step completes",
                          "properties": {
                            "actions": {
                              "type": "array",
                              "items": {
                                "anyOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "type": {
                                        "type": "string",
                                        "description": "The type of the action",
                                        "enum": [
                                          "email"
                                        ]
                                      },
                                      "options": {
                                        "type": "object",
                                        "description": "settings for the action",
                                        "additionalProperties": {
                                          "type": "string"
                                        },
                                        "x-examples": [
                                          {
                                            "to": "bob@example.com",
                                            "from": "alice@example.com"
                                          }
                                        ]
                                      }
                                    }
                                  }
                                ]
                              }
                            }
                          }
                        }
                      }
                    }
                  ]
                },
                {
                  "type": "object",
                  "description": "Finial step which is marked as completed successfully",
                  "properties": {
                    "label": {
                      "example": "Complete",
                      "x-examples": [
                        "Complete"
                      ],
                      "allOf": [
                        {
                          "type": "string",
                          "description": "Label for the step",
                          "example": "Find units",
                          "x-examples": [
                            "Find units"
                          ]
                        }
                      ]
                    },
                    "type": {
                      "example": "success",
                      "x-examples": [
                        "success"
                      ],
                      "allOf": [
                        {
                          "type": "string",
                          "description": "Type of workflow step",
                          "enum": [
                            "load",
                            "choice",
                            "function",
                            "machine",
                            "pass",
                            "fail",
                            "success",
                            "user",
                            "wait"
                          ]
                        }
                      ]
                    },
                    "onComplete": {
                      "type": "object",
                      "description": "Actions to take when the step completes",
                      "properties": {
                        "actions": {
                          "type": "array",
                          "items": {
                            "anyOf": [
                              {
                                "type": "object",
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "description": "The type of the action",
                                    "enum": [
                                      "email"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "description": "settings for the action",
                                    "additionalProperties": {
                                      "type": "string"
                                    },
                                    "x-examples": [
                                      {
                                        "to": "bob@example.com",
                                        "from": "alice@example.com"
                                      }
                                    ]
                                  }
                                }
                              }
                            ]
                          }
                        }
                      }
                    }
                  }
                },
                {
                  "type": "object",
                  "description": "A step which run at certain times",
                  "required": [
                    "stop_at",
                    "time"
                  ],
                  "properties": {
                    "label": {
                      "example": "Wait for cable",
                      "x-examples": [
                        "Wait for cable"
                      ],
                      "allOf": [
                        {
                          "type": "string",
                          "description": "Label for the step",
                          "example": "Find units",
                          "x-examples": [
                            "Find units"
                          ]
                        }
                      ]
                    },
                    "type": {
                      "x-examples": [
                        "wait"
                      ],
                      "example": "wait"
                    },
                    "stop_at": {
                      "type": "integer",
                      "description": "Time in seconds to stop this task",
                      "maximum": 900,
                      "minimum": 1
                    },
                    "time": {
                      "type": "integer",
                      "description": "Time to wait before checking this step",
                      "example": 600,
                      "maximum": 900,
                      "minimum": 1
                    },
                    "listen_for": {
                      "type": "array",
                      "description": "List of events and conditions to listen for to trigger",
                      "items": {
                        "type": "object",
                        "required": [
                          "event"
                        ],
                        "properties": {
                          "event": {
                            "type": "string",
                            "description": "Name of the event to listen for",
                            "allOf": [
                              {
                                "type": "string",
                                "description": "Possible entity events",
                                "enum": [
                                  "CON.attached",
                                  "CON.created",
                                  "CON.deleted",
                                  "CON.detached",
                                  "CON.removed",
                                  "CON.updated",
                                  "CUS.attached",
                                  "CUS.created",
                                  "CUS.deleted",
                                  "CUS.detached",
                                  "CUS.removed",
                                  "CUS.updated",
                                  "LOC.attached",
                                  "LOC.created",
                                  "LOC.deleted",
                                  "LOC.detached",
                                  "LOC.removed",
                                  "LOC.updated",
                                  "NOTE.attached",
                                  "NOTE.created",
                                  "NOTE.deleted",
                                  "NOTE.detached",
                                  "NOTE.removed",
                                  "NOTE.updated",
                                  "PART.attached",
                                  "PART.created",
                                  "PART.deleted",
                                  "PART.detached",
                                  "PART.removed",
                                  "PART.updated",
                                  "PGM.attached",
                                  "PGM.created",
                                  "PGM.deleted",
                                  "PGM.detached",
                                  "PGM.removed",
                                  "PGM.updated",
                                  "PRO.attached",
                                  "PRO.created",
                                  "PRO.deleted",
                                  "PRO.detached",
                                  "PRO.removed",
                                  "PRO.updated",
                                  "RES.attached",
                                  "RES.created",
                                  "RES.deleted",
                                  "RES.detached",
                                  "RES.removed",
                                  "RES.updated",
                                  "UNIT.attached",
                                  "UNIT.created",
                                  "UNIT.deleted",
                                  "UNIT.detached",
                                  "UNIT.removed",
                                  "UNIT.updated",
                                  "USER.attached",
                                  "USER.created",
                                  "USER.deleted",
                                  "USER.detached",
                                  "USER.removed",
                                  "USER.updated",
                                  "WKF.attached",
                                  "WKF.created",
                                  "WKF.deleted",
                                  "WKF.detached",
                                  "WKF.removed",
                                  "WKF.updated",
                                  "WOR.attached",
                                  "WOR.created",
                                  "WOR.deleted",
                                  "WOR.detached",
                                  "WOR.removed",
                                  "WOR.updated"
                                ]
                              }
                            ]
                          },
                          "event_value": {
                            "type": "object",
                            "description": "The event conditions that have to be met",
                            "allOf": [
                              {
                                "description": "A Step choice",
                                "type": "object",
                                "maxProperties": 2,
                                "minProperties": 2,
                                "required": [
                                  "variable"
                                ],
                                "properties": {
                                  "variable": {
                                    "type": "string",
                                    "description": "Context variable to check",
                                    "example": "$.parts.available",
                                    "x-examples": [
                                      "$.parts.available"
                                    ]
                                  },
                                  "greater_than_equals": {
                                    "type": "string",
                                    "description": "Value has to be greater than or equals to",
                                    "example": "42",
                                    "x-examples": [
                                      "42"
                                    ]
                                  },
                                  "less_than_equals": {
                                    "type": "string",
                                    "description": "Value has to be less than or equals to",
                                    "example": "42",
                                    "x-examples": [
                                      "42"
                                    ]
                                  },
                                  "greater_than": {
                                    "type": "string",
                                    "description": "Value has to be greater than",
                                    "example": "42",
                                    "x-examples": [
                                      "42"
                                    ]
                                  },
                                  "less_than": {
                                    "type": "string",
                                    "description": "Value has to be less than",
                                    "example": "42",
                                    "x-examples": [
                                      "42"
                                    ]
                                  },
                                  "equals": {
                                    "type": "string",
                                    "description": "Value has to equal",
                                    "example": "42",
                                    "x-examples": [
                                      "42"
                                    ]
                                  },
                                  "not_equals": {
                                    "type": "string",
                                    "description": "Value must not equal",
                                    "example": "42",
                                    "x-examples": [
                                      "42"
                                    ]
                                  }
                                }
                              }
                            ]
                          }
                        }
                      }
                    }
                  },
                  "allOf": [
                    {
                      "type": "object",
                      "x-ui-hide": true,
                      "required": [
                        "type",
                        "label",
                        "goto"
                      ],
                      "properties": {
                        "type": {
                          "type": "string",
                          "description": "Type of workflow step",
                          "enum": [
                            "load",
                            "choice",
                            "function",
                            "machine",
                            "pass",
                            "fail",
                            "success",
                            "user",
                            "wait"
                          ]
                        },
                        "label": {
                          "type": "string",
                          "description": "Label for the step",
                          "example": "Find units",
                          "x-examples": [
                            "Find units"
                          ]
                        },
                        "goto": {
                          "type": "string",
                          "description": "Step to move to",
                          "pattern": "^[a-z][a-z-]+[a-z]$",
                          "example": "complete",
                          "x-examples": [
                            "complete"
                          ]
                        },
                        "goto-fail": {
                          "type": "string",
                          "description": "Step to transition too if this step cannot be completed",
                          "pattern": "^[a-z][a-z-]+[a-z]$",
                          "example": "process-fail",
                          "x-examples": [
                            "process-fail"
                          ]
                        },
                        "context": {
                          "type": "array",
                          "description": "Initial values to set on the context",
                          "items": {
                            "type": "object",
                            "required": [
                              "key",
                              "value"
                            ],
                            "properties": {
                              "key": {
                                "type": "string",
                                "description": "The context key to set",
                                "example": "$.fizz",
                                "x-examples": [
                                  "$.fizz",
                                  "$.unit.status",
                                  "extract_fields"
                                ]
                              },
                              "value": {
                                "type": "string",
                                "description": "Value to set",
                                "example": "$.buzz",
                                "x-examples": [
                                  "$.buzz",
                                  "Pending",
                                  true
                                ]
                              },
                              "lock": {
                                "type": "boolean",
                                "description": "Prevents other steps from writing this value",
                                "example": true
                              },
                              "ignore": {
                                "type": "boolean",
                                "description": "When trying to set a locked key, do not fail",
                                "example": false
                              }
                            }
                          }
                        },
                        "onError": {
                          "type": "object",
                          "description": "Action to take when step fails",
                          "required": [
                            "finally"
                          ],
                          "properties": {
                            "retry": {
                              "type": "integer",
                              "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                              "minimum": 0,
                              "maximum": 10,
                              "example": 3,
                              "default": 0
                            },
                            "finally": {
                              "type": "object",
                              "description": "What to do after all retries",
                              "required": [
                                "goto"
                              ],
                              "properties": {
                                "actions": {
                                  "type": "array",
                                  "description": "Actions to take on failure",
                                  "items": {
                                    "anyOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "The type of the action",
                                            "enum": [
                                              "email"
                                            ]
                                          },
                                          "options": {
                                            "type": "object",
                                            "description": "settings for the action",
                                            "additionalProperties": {
                                              "type": "string"
                                            },
                                            "x-examples": [
                                              {
                                                "to": "bob@example.com",
                                                "from": "alice@example.com"
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "goto": {
                                  "type": "string",
                                  "description": "Step to transition to on failure",
                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                  "example": "failed",
                                  "x-examples": [
                                    "failed"
                                  ]
                                }
                              }
                            }
                          }
                        },
                        "onComplete": {
                          "type": "object",
                          "description": "Actions to take when the step completes",
                          "properties": {
                            "actions": {
                              "type": "array",
                              "items": {
                                "anyOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "type": {
                                        "type": "string",
                                        "description": "The type of the action",
                                        "enum": [
                                          "email"
                                        ]
                                      },
                                      "options": {
                                        "type": "object",
                                        "description": "settings for the action",
                                        "additionalProperties": {
                                          "type": "string"
                                        },
                                        "x-examples": [
                                          {
                                            "to": "bob@example.com",
                                            "from": "alice@example.com"
                                          }
                                        ]
                                      }
                                    }
                                  }
                                ]
                              }
                            }
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            }
          ]
        }
      },
      "additionalProperties": {
        "type": "object",
        "anyOf": [
          {
            "type": "object",
            "description": "Close step",
            "required": [
              "step"
            ],
            "properties": {
              "step": {
                "type": "string",
                "description": "Step to mark as complete",
                "pattern": "^[a-z][a-z-]+[a-z]$",
                "example": "complete",
                "x-examples": [
                  "complete"
                ]
              }
            },
            "anyOf": [
              {
                "type": "object",
                "description": "Require the user confirm an action. This is normally used when Niagara cannot automatically detect that a task or action has been performed.",
                "x-nter-step-component": "confirm-action",
                "properties": {
                  "label": {
                    "x-examples": [
                      "Confirm the device has powered off"
                    ]
                  },
                  "options": {
                    "type": "object",
                    "required": [
                      "component",
                      "payload"
                    ],
                    "properties": {
                      "component": {
                        "enum": [
                          "confirm-action"
                        ],
                        "example": "confirm-action",
                        "x-examples": [
                          "confirm-action"
                        ]
                      },
                      "payload": {
                        "type": "object",
                        "required": [
                          "message"
                        ],
                        "properties": {
                          "message": {
                            "type": "string",
                            "description": "The confirmation message to display to the user",
                            "example": "Device powered off?",
                            "x-examples": [
                              "Device powered off?"
                            ]
                          },
                          "negative_message": {
                            "type": "string",
                            "description": "An optional inverse message",
                            "nullable": true,
                            "example": "Device not functioning",
                            "x-examples": [
                              "Device not functioning"
                            ]
                          }
                        }
                      }
                    }
                  }
                },
                "allOf": [
                  {
                    "type": "object",
                    "x-ui-hide": true,
                    "description": "A step which requires a user to complete",
                    "required": [
                      "type",
                      "options"
                    ],
                    "properties": {
                      "type": {
                        "example": "user",
                        "x-examples": [
                          "user"
                        ]
                      },
                      "options": {
                        "type": "object",
                        "required": [
                          "component",
                          "payload"
                        ],
                        "properties": {
                          "component": {
                            "type": "string",
                            "description": "Name of the function to invoke",
                            "example": "assignUnitsFromCustomerToProject",
                            "x-examples": [
                              "assignUnitsFromCustomerToProject"
                            ]
                          },
                          "payload": {
                            "type": "object"
                          }
                        }
                      }
                    },
                    "allOf": [
                      {
                        "type": "object",
                        "x-ui-hide": true,
                        "required": [
                          "type",
                          "label",
                          "goto"
                        ],
                        "properties": {
                          "type": {
                            "type": "string",
                            "description": "Type of workflow step",
                            "enum": [
                              "load",
                              "choice",
                              "function",
                              "machine",
                              "pass",
                              "fail",
                              "success",
                              "user",
                              "wait"
                            ]
                          },
                          "label": {
                            "type": "string",
                            "description": "Label for the step",
                            "example": "Find units",
                            "x-examples": [
                              "Find units"
                            ]
                          },
                          "goto": {
                            "type": "string",
                            "description": "Step to move to",
                            "pattern": "^[a-z][a-z-]+[a-z]$",
                            "example": "complete",
                            "x-examples": [
                              "complete"
                            ]
                          },
                          "goto-fail": {
                            "type": "string",
                            "description": "Step to transition too if this step cannot be completed",
                            "pattern": "^[a-z][a-z-]+[a-z]$",
                            "example": "process-fail",
                            "x-examples": [
                              "process-fail"
                            ]
                          },
                          "context": {
                            "type": "array",
                            "description": "Initial values to set on the context",
                            "items": {
                              "type": "object",
                              "required": [
                                "key",
                                "value"
                              ],
                              "properties": {
                                "key": {
                                  "type": "string",
                                  "description": "The context key to set",
                                  "example": "$.fizz",
                                  "x-examples": [
                                    "$.fizz",
                                    "$.unit.status",
                                    "extract_fields"
                                  ]
                                },
                                "value": {
                                  "type": "string",
                                  "description": "Value to set",
                                  "example": "$.buzz",
                                  "x-examples": [
                                    "$.buzz",
                                    "Pending",
                                    true
                                  ]
                                },
                                "lock": {
                                  "type": "boolean",
                                  "description": "Prevents other steps from writing this value",
                                  "example": true
                                },
                                "ignore": {
                                  "type": "boolean",
                                  "description": "When trying to set a locked key, do not fail",
                                  "example": false
                                }
                              }
                            }
                          },
                          "onError": {
                            "type": "object",
                            "description": "Action to take when step fails",
                            "required": [
                              "finally"
                            ],
                            "properties": {
                              "retry": {
                                "type": "integer",
                                "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                "minimum": 0,
                                "maximum": 10,
                                "example": 3,
                                "default": 0
                              },
                              "finally": {
                                "type": "object",
                                "description": "What to do after all retries",
                                "required": [
                                  "goto"
                                ],
                                "properties": {
                                  "actions": {
                                    "type": "array",
                                    "description": "Actions to take on failure",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "The type of the action",
                                              "enum": [
                                                "email"
                                              ]
                                            },
                                            "options": {
                                              "type": "object",
                                              "description": "settings for the action",
                                              "additionalProperties": {
                                                "type": "string"
                                              },
                                              "x-examples": [
                                                {
                                                  "to": "bob@example.com",
                                                  "from": "alice@example.com"
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to transition to on failure",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "failed",
                                    "x-examples": [
                                      "failed"
                                    ]
                                  }
                                }
                              }
                            }
                          },
                          "onComplete": {
                            "type": "object",
                            "description": "Actions to take when the step completes",
                            "properties": {
                              "actions": {
                                "type": "array",
                                "items": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "The type of the action",
                                          "enum": [
                                            "email"
                                          ]
                                        },
                                        "options": {
                                          "type": "object",
                                          "description": "settings for the action",
                                          "additionalProperties": {
                                            "type": "string"
                                          },
                                          "x-examples": [
                                            {
                                              "to": "bob@example.com",
                                              "from": "alice@example.com"
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              },
              {
                "type": "object",
                "description": "Display a link or modal to a user which contains instructions from a PDF",
                "x-nter-step-component": "follow-pdf-instructions",
                "required": [
                  "label",
                  "payload"
                ],
                "properties": {
                  "label": {
                    "x-examples": [
                      "Instruct user to follow steps outlined in Apple PDF"
                    ]
                  },
                  "options": {
                    "type": "object",
                    "required": [
                      "component",
                      "payload"
                    ],
                    "properties": {
                      "component": {
                        "enum": [
                          "follow-pds-instructions"
                        ],
                        "example": "follow-pdf-instructions",
                        "x-examples": [
                          "follow-pdf-instructions"
                        ]
                      },
                      "payload": {
                        "type": "object",
                        "required": [
                          "attachment_id"
                        ],
                        "properties": {
                          "attachment_id": {
                            "type": "string",
                            "description": "UUID for the attachment",
                            "format": "uuid",
                            "example": "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7",
                            "x-examples": [
                              "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7"
                            ]
                          }
                        }
                      }
                    }
                  }
                },
                "allOf": [
                  {
                    "type": "object",
                    "x-ui-hide": true,
                    "description": "A step which requires a user to complete",
                    "required": [
                      "type",
                      "options"
                    ],
                    "properties": {
                      "type": {
                        "example": "user",
                        "x-examples": [
                          "user"
                        ]
                      },
                      "options": {
                        "type": "object",
                        "required": [
                          "component",
                          "payload"
                        ],
                        "properties": {
                          "component": {
                            "type": "string",
                            "description": "Name of the function to invoke",
                            "example": "assignUnitsFromCustomerToProject",
                            "x-examples": [
                              "assignUnitsFromCustomerToProject"
                            ]
                          },
                          "payload": {
                            "type": "object"
                          }
                        }
                      }
                    },
                    "allOf": [
                      {
                        "type": "object",
                        "x-ui-hide": true,
                        "required": [
                          "type",
                          "label",
                          "goto"
                        ],
                        "properties": {
                          "type": {
                            "type": "string",
                            "description": "Type of workflow step",
                            "enum": [
                              "load",
                              "choice",
                              "function",
                              "machine",
                              "pass",
                              "fail",
                              "success",
                              "user",
                              "wait"
                            ]
                          },
                          "label": {
                            "type": "string",
                            "description": "Label for the step",
                            "example": "Find units",
                            "x-examples": [
                              "Find units"
                            ]
                          },
                          "goto": {
                            "type": "string",
                            "description": "Step to move to",
                            "pattern": "^[a-z][a-z-]+[a-z]$",
                            "example": "complete",
                            "x-examples": [
                              "complete"
                            ]
                          },
                          "goto-fail": {
                            "type": "string",
                            "description": "Step to transition too if this step cannot be completed",
                            "pattern": "^[a-z][a-z-]+[a-z]$",
                            "example": "process-fail",
                            "x-examples": [
                              "process-fail"
                            ]
                          },
                          "context": {
                            "type": "array",
                            "description": "Initial values to set on the context",
                            "items": {
                              "type": "object",
                              "required": [
                                "key",
                                "value"
                              ],
                              "properties": {
                                "key": {
                                  "type": "string",
                                  "description": "The context key to set",
                                  "example": "$.fizz",
                                  "x-examples": [
                                    "$.fizz",
                                    "$.unit.status",
                                    "extract_fields"
                                  ]
                                },
                                "value": {
                                  "type": "string",
                                  "description": "Value to set",
                                  "example": "$.buzz",
                                  "x-examples": [
                                    "$.buzz",
                                    "Pending",
                                    true
                                  ]
                                },
                                "lock": {
                                  "type": "boolean",
                                  "description": "Prevents other steps from writing this value",
                                  "example": true
                                },
                                "ignore": {
                                  "type": "boolean",
                                  "description": "When trying to set a locked key, do not fail",
                                  "example": false
                                }
                              }
                            }
                          },
                          "onError": {
                            "type": "object",
                            "description": "Action to take when step fails",
                            "required": [
                              "finally"
                            ],
                            "properties": {
                              "retry": {
                                "type": "integer",
                                "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                "minimum": 0,
                                "maximum": 10,
                                "example": 3,
                                "default": 0
                              },
                              "finally": {
                                "type": "object",
                                "description": "What to do after all retries",
                                "required": [
                                  "goto"
                                ],
                                "properties": {
                                  "actions": {
                                    "type": "array",
                                    "description": "Actions to take on failure",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "The type of the action",
                                              "enum": [
                                                "email"
                                              ]
                                            },
                                            "options": {
                                              "type": "object",
                                              "description": "settings for the action",
                                              "additionalProperties": {
                                                "type": "string"
                                              },
                                              "x-examples": [
                                                {
                                                  "to": "bob@example.com",
                                                  "from": "alice@example.com"
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to transition to on failure",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "failed",
                                    "x-examples": [
                                      "failed"
                                    ]
                                  }
                                }
                              }
                            }
                          },
                          "onComplete": {
                            "type": "object",
                            "description": "Actions to take when the step completes",
                            "properties": {
                              "actions": {
                                "type": "array",
                                "items": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "The type of the action",
                                          "enum": [
                                            "email"
                                          ]
                                        },
                                        "options": {
                                          "type": "object",
                                          "description": "settings for the action",
                                          "additionalProperties": {
                                            "type": "string"
                                          },
                                          "x-examples": [
                                            {
                                              "to": "bob@example.com",
                                              "from": "alice@example.com"
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              },
              {
                "type": "object",
                "description": "Ask the user to manually enter (or confirm) data for an entity",
                "x-nter-step-component": "manual-data-entry",
                "properties": {
                  "label": {
                    "x-examples": [
                      "Enter asset tag and confirm serial number"
                    ]
                  },
                  "options": {
                    "type": "object",
                    "required": [
                      "component",
                      "payload"
                    ],
                    "properties": {
                      "component": {
                        "enum": [
                          "manual-data-entry"
                        ],
                        "example": "manual-data-entry",
                        "x-examples": [
                          "manual-data-entry"
                        ]
                      },
                      "payload": {
                        "type": "object",
                        "required": [
                          "fields"
                        ],
                        "properties": {
                          "fields": {
                            "type": "array",
                            "description": "Configuration for each field",
                            "items": {
                              "type": "object",
                              "required": [
                                "input_type",
                                "label",
                                "required",
                                "entity_field"
                              ],
                              "properties": {
                                "input_type": {
                                  "type": "string",
                                  "description": "The type of input field to display",
                                  "enum": [
                                    "textbox",
                                    "input"
                                  ]
                                },
                                "label": {
                                  "type": "string",
                                  "description": "Label to display for the field",
                                  "example": "Asset Tag",
                                  "x-examples": [
                                    "Asset Tag"
                                  ]
                                },
                                "required": {
                                  "type": "boolean",
                                  "description": "Display the field as required input. Note: this is a helper function. It singles that the user is required to input data at this step. If the field is required on the entity, the user will be presented with a validation message",
                                  "example": true
                                },
                                "entity_field": {
                                  "type": "string",
                                  "description": "JSON Path to the field on the entity. If the path does not start with '$' then the entity on the context is assumed. Otherwise the data will be set on the context path",
                                  "example": "input_filter[?(@.key = 'asset-tag')]",
                                  "x-examples": [
                                    "input_filter[?(@.key = 'asset-tag')]"
                                  ]
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "allOf": [
                  {
                    "type": "object",
                    "x-ui-hide": true,
                    "description": "A step which requires a user to complete",
                    "required": [
                      "type",
                      "options"
                    ],
                    "properties": {
                      "type": {
                        "example": "user",
                        "x-examples": [
                          "user"
                        ]
                      },
                      "options": {
                        "type": "object",
                        "required": [
                          "component",
                          "payload"
                        ],
                        "properties": {
                          "component": {
                            "type": "string",
                            "description": "Name of the function to invoke",
                            "example": "assignUnitsFromCustomerToProject",
                            "x-examples": [
                              "assignUnitsFromCustomerToProject"
                            ]
                          },
                          "payload": {
                            "type": "object"
                          }
                        }
                      }
                    },
                    "allOf": [
                      {
                        "type": "object",
                        "x-ui-hide": true,
                        "required": [
                          "type",
                          "label",
                          "goto"
                        ],
                        "properties": {
                          "type": {
                            "type": "string",
                            "description": "Type of workflow step",
                            "enum": [
                              "load",
                              "choice",
                              "function",
                              "machine",
                              "pass",
                              "fail",
                              "success",
                              "user",
                              "wait"
                            ]
                          },
                          "label": {
                            "type": "string",
                            "description": "Label for the step",
                            "example": "Find units",
                            "x-examples": [
                              "Find units"
                            ]
                          },
                          "goto": {
                            "type": "string",
                            "description": "Step to move to",
                            "pattern": "^[a-z][a-z-]+[a-z]$",
                            "example": "complete",
                            "x-examples": [
                              "complete"
                            ]
                          },
                          "goto-fail": {
                            "type": "string",
                            "description": "Step to transition too if this step cannot be completed",
                            "pattern": "^[a-z][a-z-]+[a-z]$",
                            "example": "process-fail",
                            "x-examples": [
                              "process-fail"
                            ]
                          },
                          "context": {
                            "type": "array",
                            "description": "Initial values to set on the context",
                            "items": {
                              "type": "object",
                              "required": [
                                "key",
                                "value"
                              ],
                              "properties": {
                                "key": {
                                  "type": "string",
                                  "description": "The context key to set",
                                  "example": "$.fizz",
                                  "x-examples": [
                                    "$.fizz",
                                    "$.unit.status",
                                    "extract_fields"
                                  ]
                                },
                                "value": {
                                  "type": "string",
                                  "description": "Value to set",
                                  "example": "$.buzz",
                                  "x-examples": [
                                    "$.buzz",
                                    "Pending",
                                    true
                                  ]
                                },
                                "lock": {
                                  "type": "boolean",
                                  "description": "Prevents other steps from writing this value",
                                  "example": true
                                },
                                "ignore": {
                                  "type": "boolean",
                                  "description": "When trying to set a locked key, do not fail",
                                  "example": false
                                }
                              }
                            }
                          },
                          "onError": {
                            "type": "object",
                            "description": "Action to take when step fails",
                            "required": [
                              "finally"
                            ],
                            "properties": {
                              "retry": {
                                "type": "integer",
                                "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                "minimum": 0,
                                "maximum": 10,
                                "example": 3,
                                "default": 0
                              },
                              "finally": {
                                "type": "object",
                                "description": "What to do after all retries",
                                "required": [
                                  "goto"
                                ],
                                "properties": {
                                  "actions": {
                                    "type": "array",
                                    "description": "Actions to take on failure",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "The type of the action",
                                              "enum": [
                                                "email"
                                              ]
                                            },
                                            "options": {
                                              "type": "object",
                                              "description": "settings for the action",
                                              "additionalProperties": {
                                                "type": "string"
                                              },
                                              "x-examples": [
                                                {
                                                  "to": "bob@example.com",
                                                  "from": "alice@example.com"
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to transition to on failure",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "failed",
                                    "x-examples": [
                                      "failed"
                                    ]
                                  }
                                }
                              }
                            }
                          },
                          "onComplete": {
                            "type": "object",
                            "description": "Actions to take when the step completes",
                            "properties": {
                              "actions": {
                                "type": "array",
                                "items": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "The type of the action",
                                          "enum": [
                                            "email"
                                          ]
                                        },
                                        "options": {
                                          "type": "object",
                                          "description": "settings for the action",
                                          "additionalProperties": {
                                            "type": "string"
                                          },
                                          "x-examples": [
                                            {
                                              "to": "bob@example.com",
                                              "from": "alice@example.com"
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              },
              {
                "type": "object",
                "description": "Ask the user to follow a list and check off boxes",
                "x-nter-step-component": "task-list",
                "properties": {
                  "label": {
                    "x-examples": [
                      "Enter asset tag and confirm serial number"
                    ]
                  },
                  "options": {
                    "type": "object",
                    "required": [
                      "component",
                      "payload"
                    ],
                    "properties": {
                      "component": {
                        "enum": [
                          "task-list"
                        ],
                        "example": "task-list",
                        "x-examples": [
                          "task-list"
                        ]
                      },
                      "payload": {
                        "type": "object",
                        "required": [
                          "items"
                        ],
                        "properties": {
                          "is_qc": {
                            "type": "boolean",
                            "description": "Flags this list as a QC task list. This means that a different user can close the task to one previously on the context"
                          },
                          "items": {
                            "type": "array",
                            "description": "Configuration for each task list item",
                            "items": {
                              "type": "object",
                              "required": [
                                "label",
                                "help",
                                "evaluated",
                                "na_option"
                              ],
                              "properties": {
                                "label": {
                                  "type": "string",
                                  "description": "Label to display for the field",
                                  "example": "Asset Tag placement",
                                  "x-examples": [
                                    "Asset Tag placement"
                                  ]
                                },
                                "slug": {
                                  "type": "string",
                                  "description": "Slug for the item (Auto-generated from the label)",
                                  "readOnly": true,
                                  "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$",
                                  "example": "asset-tag-placement",
                                  "x-examples": [
                                    "asset-tag-placement"
                                  ]
                                },
                                "help": {
                                  "type": "string",
                                  "description": "Message describing what is needed to be checked",
                                  "example": "Asset Tag attached to the unit in the correct position",
                                  "x-examples": [
                                    "Asset Tag attached to the unit in the correct position"
                                  ]
                                },
                                "evaluated": {
                                  "type": "boolean",
                                  "description": "When set to true, this will fail the step if the value for the item is false or N/A",
                                  "example": true
                                },
                                "na_field": {
                                  "type": "boolean",
                                  "description": "Allow the user to select the N/A option when checking off the list",
                                  "example": true
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "allOf": [
                  {
                    "type": "object",
                    "x-ui-hide": true,
                    "description": "A step which requires a user to complete",
                    "required": [
                      "type",
                      "options"
                    ],
                    "properties": {
                      "type": {
                        "example": "user",
                        "x-examples": [
                          "user"
                        ]
                      },
                      "options": {
                        "type": "object",
                        "required": [
                          "component",
                          "payload"
                        ],
                        "properties": {
                          "component": {
                            "type": "string",
                            "description": "Name of the function to invoke",
                            "example": "assignUnitsFromCustomerToProject",
                            "x-examples": [
                              "assignUnitsFromCustomerToProject"
                            ]
                          },
                          "payload": {
                            "type": "object"
                          }
                        }
                      }
                    },
                    "allOf": [
                      {
                        "type": "object",
                        "x-ui-hide": true,
                        "required": [
                          "type",
                          "label",
                          "goto"
                        ],
                        "properties": {
                          "type": {
                            "type": "string",
                            "description": "Type of workflow step",
                            "enum": [
                              "load",
                              "choice",
                              "function",
                              "machine",
                              "pass",
                              "fail",
                              "success",
                              "user",
                              "wait"
                            ]
                          },
                          "label": {
                            "type": "string",
                            "description": "Label for the step",
                            "example": "Find units",
                            "x-examples": [
                              "Find units"
                            ]
                          },
                          "goto": {
                            "type": "string",
                            "description": "Step to move to",
                            "pattern": "^[a-z][a-z-]+[a-z]$",
                            "example": "complete",
                            "x-examples": [
                              "complete"
                            ]
                          },
                          "goto-fail": {
                            "type": "string",
                            "description": "Step to transition too if this step cannot be completed",
                            "pattern": "^[a-z][a-z-]+[a-z]$",
                            "example": "process-fail",
                            "x-examples": [
                              "process-fail"
                            ]
                          },
                          "context": {
                            "type": "array",
                            "description": "Initial values to set on the context",
                            "items": {
                              "type": "object",
                              "required": [
                                "key",
                                "value"
                              ],
                              "properties": {
                                "key": {
                                  "type": "string",
                                  "description": "The context key to set",
                                  "example": "$.fizz",
                                  "x-examples": [
                                    "$.fizz",
                                    "$.unit.status",
                                    "extract_fields"
                                  ]
                                },
                                "value": {
                                  "type": "string",
                                  "description": "Value to set",
                                  "example": "$.buzz",
                                  "x-examples": [
                                    "$.buzz",
                                    "Pending",
                                    true
                                  ]
                                },
                                "lock": {
                                  "type": "boolean",
                                  "description": "Prevents other steps from writing this value",
                                  "example": true
                                },
                                "ignore": {
                                  "type": "boolean",
                                  "description": "When trying to set a locked key, do not fail",
                                  "example": false
                                }
                              }
                            }
                          },
                          "onError": {
                            "type": "object",
                            "description": "Action to take when step fails",
                            "required": [
                              "finally"
                            ],
                            "properties": {
                              "retry": {
                                "type": "integer",
                                "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                "minimum": 0,
                                "maximum": 10,
                                "example": 3,
                                "default": 0
                              },
                              "finally": {
                                "type": "object",
                                "description": "What to do after all retries",
                                "required": [
                                  "goto"
                                ],
                                "properties": {
                                  "actions": {
                                    "type": "array",
                                    "description": "Actions to take on failure",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "The type of the action",
                                              "enum": [
                                                "email"
                                              ]
                                            },
                                            "options": {
                                              "type": "object",
                                              "description": "settings for the action",
                                              "additionalProperties": {
                                                "type": "string"
                                              },
                                              "x-examples": [
                                                {
                                                  "to": "bob@example.com",
                                                  "from": "alice@example.com"
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to transition to on failure",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "failed",
                                    "x-examples": [
                                      "failed"
                                    ]
                                  }
                                }
                              }
                            }
                          },
                          "onComplete": {
                            "type": "object",
                            "description": "Actions to take when the step completes",
                            "properties": {
                              "actions": {
                                "type": "array",
                                "items": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "The type of the action",
                                          "enum": [
                                            "email"
                                          ]
                                        },
                                        "options": {
                                          "type": "object",
                                          "description": "settings for the action",
                                          "additionalProperties": {
                                            "type": "string"
                                          },
                                          "x-examples": [
                                            {
                                              "to": "bob@example.com",
                                              "from": "alice@example.com"
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              },
              {
                "type": "object",
                "description": "Run the ACE-IOS application to provision iOS devices or ",
                "properties": {
                  "type": {
                    "example": "machine",
                    "x-examples": [
                      "machine"
                    ]
                  },
                  "label": {
                    "x-examples": [
                      "Run Application"
                    ]
                  },
                  "options": {
                    "type": "object",
                    "required": [
                      "application",
                      "configuration"
                    ],
                    "properties": {
                      "configuration": {
                        "type": "object",
                        "description": "ACE Configuration options",
                        "properties": {
                          "pairing_cert": {
                            "type": "string",
                            "format": "base64",
                            "description": "Contents of a *.crt file exported from Apple Configurator or MDM",
                            "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                            "x-examples": [
                              "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                            ],
                            "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                          },
                          "pairing_key": {
                            "type": "string",
                            "format": "base64",
                            "description": "Contents of a *.der file exported from Apple Configurator or MDM",
                            "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                            "x-examples": [
                              "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                            ],
                            "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                          },
                          "restore_device": {
                            "type": "boolean",
                            "description": "Restore device to factory defaults"
                          },
                          "automated_enrollment": {
                            "type": "boolean",
                            "description": "Automatically enroll the device to MDM"
                          },
                          "mdm": {
                            "type": "object",
                            "format": "base64",
                            "description": "The settings for the Customers MDM",
                            "properties": {
                              "vendor": {
                                "type": "string",
                                "description": "MDM vendor. Currently, supported values are AirWatch, JAMF, and Meraki.",
                                "enum": [
                                  "AirWatch",
                                  "JAMF",
                                  "Meraki"
                                ]
                              },
                              "console_url": {
                                "type": "string",
                                "format": "uri",
                                "description": "Base URL for HTTP requests",
                                "example": "http://jamf.zones.com",
                                "x-examples": [
                                  "http://jamf.zones.com"
                                ]
                              },
                              "user": {
                                "type": "string",
                                "description": "MDM User name",
                                "example": "NterpriseBob",
                                "x-examples": [
                                  "NterpriseBob"
                                ]
                              },
                              "password": {
                                "type": "string",
                                "description": "MDM password"
                              },
                              "tenant_code": {
                                "type": "string",
                                "description": "MDM authentication key",
                                "example": "nterprise",
                                "x-examples": [
                                  "nterprise"
                                ]
                              },
                              "set_asset_tag": {
                                "type": "string",
                                "description": "Sets the devices Asset tag based on a field from the unit",
                                "example": "$._entity.input_filter[?(@.key = 'asset-tag')]",
                                "x-examples": [
                                  "$._entity.input_filter[?(@.key = 'asset-tag')]"
                                ]
                              }
                            }
                          },
                          "field_mappings": {
                            "type": "array",
                            "description": "List of fields to map to the device",
                            "items": {
                              "type": "object",
                              "properties": {
                                "from": {
                                  "type": "string",
                                  "description": "The field reported from ACE",
                                  "enum": [
                                    "serial_number",
                                    "name",
                                    "ecid",
                                    "udid",
                                    "configurator_serial",
                                    "ios",
                                    "model",
                                    "storage",
                                    "wifi_mac",
                                    "bt_mac",
                                    "ethernet_mac",
                                    "thundersync_serial",
                                    "iccid",
                                    "iccid2",
                                    "imei",
                                    "imei2",
                                    "missed_profiles",
                                    "missed_apps",
                                    "icon_list_regex",
                                    "icon_layout",
                                    "bat_capacity"
                                  ]
                                },
                                "to": {
                                  "type": "string",
                                  "description": "Field to set on the entity",
                                  "example": "$._entity.input_filter[?(@.key = 'serial-number')]",
                                  "x-examples": [
                                    "$._entity.input_filter[?(@.key = 'serial-number')]"
                                  ]
                                }
                              }
                            }
                          },
                          "wait_for_apps": {
                            "type": "array",
                            "description": "A list of applications needed to be installed on the device. This will cause the extension to poll the device for installed applications. Once all the applications have been installed, this step can be completed",
                            "items": {
                              "type": "string",
                              "format": "uri",
                              "example": "com.apple.itunes",
                              "x-examples": [
                                "com.apple.itunes"
                              ]
                            }
                          },
                          "wait_for_battery_charge": {
                            "type": "integer",
                            "description": "The required battery percentage needed before this step can move on",
                            "minimum": 0,
                            "maximum": 100
                          }
                        }
                      }
                    }
                  }
                },
                "allOf": [
                  {
                    "type": "object",
                    "description": "Run an application extension",
                    "properties": {
                      "label": {
                        "x-examples": [
                          "Run Application"
                        ]
                      },
                      "options": {
                        "type": "object",
                        "required": [
                          "application",
                          "configuration"
                        ],
                        "properties": {
                          "application": {
                            "type": "object",
                            "required": [
                              "application_id",
                              "platforms"
                            ],
                            "properties": {
                              "application_id": {
                                "type": "string",
                                "description": "Registered application ID",
                                "example": "ace-ios",
                                "x-examples": [
                                  "ace-ios"
                                ]
                              },
                              "platforms": {
                                "type": "array",
                                "description": "Allowed platforms the application can run on",
                                "items": {
                                  "type": "object",
                                  "required": [
                                    "platform",
                                    "arch"
                                  ],
                                  "properties": {
                                    "platform": {
                                      "type": "string",
                                      "description": "The platform (OS) the application can run on",
                                      "enum": [
                                        "aix",
                                        "darwin",
                                        "freebsd",
                                        "linux",
                                        "openbsd",
                                        "sunos",
                                        "win32"
                                      ]
                                    },
                                    "arch": {
                                      "type": "string",
                                      "description": "The CPU architecture needed to run the application",
                                      "enum": [
                                        "arm",
                                        "arm64",
                                        "ia32",
                                        "mips",
                                        "mipsel",
                                        "ppc",
                                        "ppc64",
                                        "s390",
                                        "s390x",
                                        "x32",
                                        "x64"
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    },
                    "allOf": [
                      {
                        "type": "object",
                        "x-ui-hide": true,
                        "required": [
                          "type",
                          "label",
                          "goto"
                        ],
                        "properties": {
                          "type": {
                            "type": "string",
                            "description": "Type of workflow step",
                            "enum": [
                              "load",
                              "choice",
                              "function",
                              "machine",
                              "pass",
                              "fail",
                              "success",
                              "user",
                              "wait"
                            ]
                          },
                          "label": {
                            "type": "string",
                            "description": "Label for the step",
                            "example": "Find units",
                            "x-examples": [
                              "Find units"
                            ]
                          },
                          "goto": {
                            "type": "string",
                            "description": "Step to move to",
                            "pattern": "^[a-z][a-z-]+[a-z]$",
                            "example": "complete",
                            "x-examples": [
                              "complete"
                            ]
                          },
                          "goto-fail": {
                            "type": "string",
                            "description": "Step to transition too if this step cannot be completed",
                            "pattern": "^[a-z][a-z-]+[a-z]$",
                            "example": "process-fail",
                            "x-examples": [
                              "process-fail"
                            ]
                          },
                          "context": {
                            "type": "array",
                            "description": "Initial values to set on the context",
                            "items": {
                              "type": "object",
                              "required": [
                                "key",
                                "value"
                              ],
                              "properties": {
                                "key": {
                                  "type": "string",
                                  "description": "The context key to set",
                                  "example": "$.fizz",
                                  "x-examples": [
                                    "$.fizz",
                                    "$.unit.status",
                                    "extract_fields"
                                  ]
                                },
                                "value": {
                                  "type": "string",
                                  "description": "Value to set",
                                  "example": "$.buzz",
                                  "x-examples": [
                                    "$.buzz",
                                    "Pending",
                                    true
                                  ]
                                },
                                "lock": {
                                  "type": "boolean",
                                  "description": "Prevents other steps from writing this value",
                                  "example": true
                                },
                                "ignore": {
                                  "type": "boolean",
                                  "description": "When trying to set a locked key, do not fail",
                                  "example": false
                                }
                              }
                            }
                          },
                          "onError": {
                            "type": "object",
                            "description": "Action to take when step fails",
                            "required": [
                              "finally"
                            ],
                            "properties": {
                              "retry": {
                                "type": "integer",
                                "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                "minimum": 0,
                                "maximum": 10,
                                "example": 3,
                                "default": 0
                              },
                              "finally": {
                                "type": "object",
                                "description": "What to do after all retries",
                                "required": [
                                  "goto"
                                ],
                                "properties": {
                                  "actions": {
                                    "type": "array",
                                    "description": "Actions to take on failure",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "The type of the action",
                                              "enum": [
                                                "email"
                                              ]
                                            },
                                            "options": {
                                              "type": "object",
                                              "description": "settings for the action",
                                              "additionalProperties": {
                                                "type": "string"
                                              },
                                              "x-examples": [
                                                {
                                                  "to": "bob@example.com",
                                                  "from": "alice@example.com"
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to transition to on failure",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "failed",
                                    "x-examples": [
                                      "failed"
                                    ]
                                  }
                                }
                              }
                            }
                          },
                          "onComplete": {
                            "type": "object",
                            "description": "Actions to take when the step completes",
                            "properties": {
                              "actions": {
                                "type": "array",
                                "items": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "The type of the action",
                                          "enum": [
                                            "email"
                                          ]
                                        },
                                        "options": {
                                          "type": "object",
                                          "description": "settings for the action",
                                          "additionalProperties": {
                                            "type": "string"
                                          },
                                          "x-examples": [
                                            {
                                              "to": "bob@example.com",
                                              "from": "alice@example.com"
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              },
              {
                "type": "object",
                "properties": {
                  "label": {
                    "example": "Is device ok?",
                    "x-examples": [
                      "Is device ok?"
                    ]
                  },
                  "type": {
                    "example": "choice",
                    "x-examples": [
                      "choice"
                    ]
                  },
                  "choices": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "required": [
                        "goto"
                      ],
                      "maxProperties": 2,
                      "minProperties": 2,
                      "maximum": 20,
                      "properties": {
                        "and": {
                          "type": "array",
                          "description": "All choices must be satisfied",
                          "maximum": 5,
                          "items": {
                            "description": "A Step choice",
                            "type": "object",
                            "maxProperties": 2,
                            "minProperties": 2,
                            "required": [
                              "variable"
                            ],
                            "properties": {
                              "variable": {
                                "type": "string",
                                "description": "Context variable to check",
                                "example": "$.parts.available",
                                "x-examples": [
                                  "$.parts.available"
                                ]
                              },
                              "greater_than_equals": {
                                "type": "string",
                                "description": "Value has to be greater than or equals to",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "less_than_equals": {
                                "type": "string",
                                "description": "Value has to be less than or equals to",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "greater_than": {
                                "type": "string",
                                "description": "Value has to be greater than",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "less_than": {
                                "type": "string",
                                "description": "Value has to be less than",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "equals": {
                                "type": "string",
                                "description": "Value has to equal",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "not_equals": {
                                "type": "string",
                                "description": "Value must not equal",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              }
                            }
                          }
                        },
                        "or": {
                          "type": "array",
                          "description": "Any of these choices must be satisfied",
                          "maximum": 5,
                          "items": {
                            "description": "A Step choice",
                            "type": "object",
                            "maxProperties": 2,
                            "minProperties": 2,
                            "required": [
                              "variable"
                            ],
                            "properties": {
                              "variable": {
                                "type": "string",
                                "description": "Context variable to check",
                                "example": "$.parts.available",
                                "x-examples": [
                                  "$.parts.available"
                                ]
                              },
                              "greater_than_equals": {
                                "type": "string",
                                "description": "Value has to be greater than or equals to",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "less_than_equals": {
                                "type": "string",
                                "description": "Value has to be less than or equals to",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "greater_than": {
                                "type": "string",
                                "description": "Value has to be greater than",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "less_than": {
                                "type": "string",
                                "description": "Value has to be less than",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "equals": {
                                "type": "string",
                                "description": "Value has to equal",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "not_equals": {
                                "type": "string",
                                "description": "Value must not equal",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              }
                            }
                          }
                        },
                        "not": {
                          "type": "array",
                          "description": "None of these choices must be satisfied",
                          "maximum": 5,
                          "items": {
                            "description": "A Step choice",
                            "type": "object",
                            "maxProperties": 2,
                            "minProperties": 2,
                            "required": [
                              "variable"
                            ],
                            "properties": {
                              "variable": {
                                "type": "string",
                                "description": "Context variable to check",
                                "example": "$.parts.available",
                                "x-examples": [
                                  "$.parts.available"
                                ]
                              },
                              "greater_than_equals": {
                                "type": "string",
                                "description": "Value has to be greater than or equals to",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "less_than_equals": {
                                "type": "string",
                                "description": "Value has to be less than or equals to",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "greater_than": {
                                "type": "string",
                                "description": "Value has to be greater than",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "less_than": {
                                "type": "string",
                                "description": "Value has to be less than",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "equals": {
                                "type": "string",
                                "description": "Value has to equal",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "not_equals": {
                                "type": "string",
                                "description": "Value must not equal",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              }
                            }
                          }
                        },
                        "goto": {
                          "description": "Step to goto when condition is met",
                          "allOf": [
                            {
                              "type": "string",
                              "description": "Step to move to",
                              "pattern": "^[a-z][a-z-]+[a-z]$",
                              "example": "complete",
                              "x-examples": [
                                "complete"
                              ]
                            }
                          ]
                        }
                      }
                    }
                  },
                  "goto": {
                    "description": "Default step to goto when no choice can be made"
                  }
                },
                "allOf": [
                  {
                    "type": "object",
                    "x-ui-hide": true,
                    "required": [
                      "type",
                      "label",
                      "goto"
                    ],
                    "properties": {
                      "type": {
                        "type": "string",
                        "description": "Type of workflow step",
                        "enum": [
                          "load",
                          "choice",
                          "function",
                          "machine",
                          "pass",
                          "fail",
                          "success",
                          "user",
                          "wait"
                        ]
                      },
                      "label": {
                        "type": "string",
                        "description": "Label for the step",
                        "example": "Find units",
                        "x-examples": [
                          "Find units"
                        ]
                      },
                      "goto": {
                        "type": "string",
                        "description": "Step to move to",
                        "pattern": "^[a-z][a-z-]+[a-z]$",
                        "example": "complete",
                        "x-examples": [
                          "complete"
                        ]
                      },
                      "goto-fail": {
                        "type": "string",
                        "description": "Step to transition too if this step cannot be completed",
                        "pattern": "^[a-z][a-z-]+[a-z]$",
                        "example": "process-fail",
                        "x-examples": [
                          "process-fail"
                        ]
                      },
                      "context": {
                        "type": "array",
                        "description": "Initial values to set on the context",
                        "items": {
                          "type": "object",
                          "required": [
                            "key",
                            "value"
                          ],
                          "properties": {
                            "key": {
                              "type": "string",
                              "description": "The context key to set",
                              "example": "$.fizz",
                              "x-examples": [
                                "$.fizz",
                                "$.unit.status",
                                "extract_fields"
                              ]
                            },
                            "value": {
                              "type": "string",
                              "description": "Value to set",
                              "example": "$.buzz",
                              "x-examples": [
                                "$.buzz",
                                "Pending",
                                true
                              ]
                            },
                            "lock": {
                              "type": "boolean",
                              "description": "Prevents other steps from writing this value",
                              "example": true
                            },
                            "ignore": {
                              "type": "boolean",
                              "description": "When trying to set a locked key, do not fail",
                              "example": false
                            }
                          }
                        }
                      },
                      "onError": {
                        "type": "object",
                        "description": "Action to take when step fails",
                        "required": [
                          "finally"
                        ],
                        "properties": {
                          "retry": {
                            "type": "integer",
                            "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                            "minimum": 0,
                            "maximum": 10,
                            "example": 3,
                            "default": 0
                          },
                          "finally": {
                            "type": "object",
                            "description": "What to do after all retries",
                            "required": [
                              "goto"
                            ],
                            "properties": {
                              "actions": {
                                "type": "array",
                                "description": "Actions to take on failure",
                                "items": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "The type of the action",
                                          "enum": [
                                            "email"
                                          ]
                                        },
                                        "options": {
                                          "type": "object",
                                          "description": "settings for the action",
                                          "additionalProperties": {
                                            "type": "string"
                                          },
                                          "x-examples": [
                                            {
                                              "to": "bob@example.com",
                                              "from": "alice@example.com"
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              },
                              "goto": {
                                "type": "string",
                                "description": "Step to transition to on failure",
                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                "example": "failed",
                                "x-examples": [
                                  "failed"
                                ]
                              }
                            }
                          }
                        }
                      },
                      "onComplete": {
                        "type": "object",
                        "description": "Actions to take when the step completes",
                        "properties": {
                          "actions": {
                            "type": "array",
                            "items": {
                              "anyOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "The type of the action",
                                      "enum": [
                                        "email"
                                      ]
                                    },
                                    "options": {
                                      "type": "object",
                                      "description": "settings for the action",
                                      "additionalProperties": {
                                        "type": "string"
                                      },
                                      "x-examples": [
                                        {
                                          "to": "bob@example.com",
                                          "from": "alice@example.com"
                                        }
                                      ]
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        }
                      }
                    }
                  }
                ]
              },
              {
                "type": "object",
                "description": "Finial step which is marked as failed",
                "properties": {
                  "label": {
                    "example": "Failed",
                    "x-examples": [
                      "Failed"
                    ],
                    "allOf": [
                      {
                        "type": "string",
                        "description": "Label for the step",
                        "example": "Find units",
                        "x-examples": [
                          "Find units"
                        ]
                      }
                    ]
                  },
                  "type": {
                    "example": "fail",
                    "x-examples": [
                      "fail"
                    ],
                    "allOf": [
                      {
                        "type": "string",
                        "description": "Type of workflow step",
                        "enum": [
                          "load",
                          "choice",
                          "function",
                          "machine",
                          "pass",
                          "fail",
                          "success",
                          "user",
                          "wait"
                        ]
                      }
                    ]
                  },
                  "onComplete": {
                    "type": "object",
                    "description": "Actions to take when the step completes",
                    "properties": {
                      "actions": {
                        "type": "array",
                        "items": {
                          "anyOf": [
                            {
                              "type": "object",
                              "properties": {
                                "type": {
                                  "type": "string",
                                  "description": "The type of the action",
                                  "enum": [
                                    "email"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "description": "settings for the action",
                                  "additionalProperties": {
                                    "type": "string"
                                  },
                                  "x-examples": [
                                    {
                                      "to": "bob@example.com",
                                      "from": "alice@example.com"
                                    }
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      }
                    }
                  }
                }
              },
              {
                "type": "object",
                "description": "Allows executing actions with out performing any function",
                "properties": {
                  "label": {
                    "example": "Send email to project manager",
                    "x-examples": [
                      "Send email to project manager"
                    ]
                  },
                  "type": {
                    "example": "pass",
                    "x-examples": [
                      "pass"
                    ],
                    "allOf": [
                      {
                        "type": "string",
                        "description": "Type of workflow step",
                        "enum": [
                          "load",
                          "choice",
                          "function",
                          "machine",
                          "pass",
                          "fail",
                          "success",
                          "user",
                          "wait"
                        ]
                      }
                    ]
                  }
                },
                "allOf": [
                  {
                    "type": "object",
                    "x-ui-hide": true,
                    "required": [
                      "type",
                      "label",
                      "goto"
                    ],
                    "properties": {
                      "type": {
                        "type": "string",
                        "description": "Type of workflow step",
                        "enum": [
                          "load",
                          "choice",
                          "function",
                          "machine",
                          "pass",
                          "fail",
                          "success",
                          "user",
                          "wait"
                        ]
                      },
                      "label": {
                        "type": "string",
                        "description": "Label for the step",
                        "example": "Find units",
                        "x-examples": [
                          "Find units"
                        ]
                      },
                      "goto": {
                        "type": "string",
                        "description": "Step to move to",
                        "pattern": "^[a-z][a-z-]+[a-z]$",
                        "example": "complete",
                        "x-examples": [
                          "complete"
                        ]
                      },
                      "goto-fail": {
                        "type": "string",
                        "description": "Step to transition too if this step cannot be completed",
                        "pattern": "^[a-z][a-z-]+[a-z]$",
                        "example": "process-fail",
                        "x-examples": [
                          "process-fail"
                        ]
                      },
                      "context": {
                        "type": "array",
                        "description": "Initial values to set on the context",
                        "items": {
                          "type": "object",
                          "required": [
                            "key",
                            "value"
                          ],
                          "properties": {
                            "key": {
                              "type": "string",
                              "description": "The context key to set",
                              "example": "$.fizz",
                              "x-examples": [
                                "$.fizz",
                                "$.unit.status",
                                "extract_fields"
                              ]
                            },
                            "value": {
                              "type": "string",
                              "description": "Value to set",
                              "example": "$.buzz",
                              "x-examples": [
                                "$.buzz",
                                "Pending",
                                true
                              ]
                            },
                            "lock": {
                              "type": "boolean",
                              "description": "Prevents other steps from writing this value",
                              "example": true
                            },
                            "ignore": {
                              "type": "boolean",
                              "description": "When trying to set a locked key, do not fail",
                              "example": false
                            }
                          }
                        }
                      },
                      "onError": {
                        "type": "object",
                        "description": "Action to take when step fails",
                        "required": [
                          "finally"
                        ],
                        "properties": {
                          "retry": {
                            "type": "integer",
                            "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                            "minimum": 0,
                            "maximum": 10,
                            "example": 3,
                            "default": 0
                          },
                          "finally": {
                            "type": "object",
                            "description": "What to do after all retries",
                            "required": [
                              "goto"
                            ],
                            "properties": {
                              "actions": {
                                "type": "array",
                                "description": "Actions to take on failure",
                                "items": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "The type of the action",
                                          "enum": [
                                            "email"
                                          ]
                                        },
                                        "options": {
                                          "type": "object",
                                          "description": "settings for the action",
                                          "additionalProperties": {
                                            "type": "string"
                                          },
                                          "x-examples": [
                                            {
                                              "to": "bob@example.com",
                                              "from": "alice@example.com"
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              },
                              "goto": {
                                "type": "string",
                                "description": "Step to transition to on failure",
                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                "example": "failed",
                                "x-examples": [
                                  "failed"
                                ]
                              }
                            }
                          }
                        }
                      },
                      "onComplete": {
                        "type": "object",
                        "description": "Actions to take when the step completes",
                        "properties": {
                          "actions": {
                            "type": "array",
                            "items": {
                              "anyOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "The type of the action",
                                      "enum": [
                                        "email"
                                      ]
                                    },
                                    "options": {
                                      "type": "object",
                                      "description": "settings for the action",
                                      "additionalProperties": {
                                        "type": "string"
                                      },
                                      "x-examples": [
                                        {
                                          "to": "bob@example.com",
                                          "from": "alice@example.com"
                                        }
                                      ]
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        }
                      }
                    }
                  }
                ]
              },
              {
                "type": "object",
                "description": "Finial step which is marked as completed successfully",
                "properties": {
                  "label": {
                    "example": "Complete",
                    "x-examples": [
                      "Complete"
                    ],
                    "allOf": [
                      {
                        "type": "string",
                        "description": "Label for the step",
                        "example": "Find units",
                        "x-examples": [
                          "Find units"
                        ]
                      }
                    ]
                  },
                  "type": {
                    "example": "success",
                    "x-examples": [
                      "success"
                    ],
                    "allOf": [
                      {
                        "type": "string",
                        "description": "Type of workflow step",
                        "enum": [
                          "load",
                          "choice",
                          "function",
                          "machine",
                          "pass",
                          "fail",
                          "success",
                          "user",
                          "wait"
                        ]
                      }
                    ]
                  },
                  "onComplete": {
                    "type": "object",
                    "description": "Actions to take when the step completes",
                    "properties": {
                      "actions": {
                        "type": "array",
                        "items": {
                          "anyOf": [
                            {
                              "type": "object",
                              "properties": {
                                "type": {
                                  "type": "string",
                                  "description": "The type of the action",
                                  "enum": [
                                    "email"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "description": "settings for the action",
                                  "additionalProperties": {
                                    "type": "string"
                                  },
                                  "x-examples": [
                                    {
                                      "to": "bob@example.com",
                                      "from": "alice@example.com"
                                    }
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      }
                    }
                  }
                }
              },
              {
                "type": "object",
                "description": "A step which run at certain times",
                "required": [
                  "stop_at",
                  "time"
                ],
                "properties": {
                  "label": {
                    "example": "Wait for cable",
                    "x-examples": [
                      "Wait for cable"
                    ],
                    "allOf": [
                      {
                        "type": "string",
                        "description": "Label for the step",
                        "example": "Find units",
                        "x-examples": [
                          "Find units"
                        ]
                      }
                    ]
                  },
                  "type": {
                    "x-examples": [
                      "wait"
                    ],
                    "example": "wait"
                  },
                  "stop_at": {
                    "type": "integer",
                    "description": "Time in seconds to stop this task",
                    "maximum": 900,
                    "minimum": 1
                  },
                  "time": {
                    "type": "integer",
                    "description": "Time to wait before checking this step",
                    "example": 600,
                    "maximum": 900,
                    "minimum": 1
                  },
                  "listen_for": {
                    "type": "array",
                    "description": "List of events and conditions to listen for to trigger",
                    "items": {
                      "type": "object",
                      "required": [
                        "event"
                      ],
                      "properties": {
                        "event": {
                          "type": "string",
                          "description": "Name of the event to listen for",
                          "allOf": [
                            {
                              "type": "string",
                              "description": "Possible entity events",
                              "enum": [
                                "CON.attached",
                                "CON.created",
                                "CON.deleted",
                                "CON.detached",
                                "CON.removed",
                                "CON.updated",
                                "CUS.attached",
                                "CUS.created",
                                "CUS.deleted",
                                "CUS.detached",
                                "CUS.removed",
                                "CUS.updated",
                                "LOC.attached",
                                "LOC.created",
                                "LOC.deleted",
                                "LOC.detached",
                                "LOC.removed",
                                "LOC.updated",
                                "NOTE.attached",
                                "NOTE.created",
                                "NOTE.deleted",
                                "NOTE.detached",
                                "NOTE.removed",
                                "NOTE.updated",
                                "PART.attached",
                                "PART.created",
                                "PART.deleted",
                                "PART.detached",
                                "PART.removed",
                                "PART.updated",
                                "PGM.attached",
                                "PGM.created",
                                "PGM.deleted",
                                "PGM.detached",
                                "PGM.removed",
                                "PGM.updated",
                                "PRO.attached",
                                "PRO.created",
                                "PRO.deleted",
                                "PRO.detached",
                                "PRO.removed",
                                "PRO.updated",
                                "RES.attached",
                                "RES.created",
                                "RES.deleted",
                                "RES.detached",
                                "RES.removed",
                                "RES.updated",
                                "UNIT.attached",
                                "UNIT.created",
                                "UNIT.deleted",
                                "UNIT.detached",
                                "UNIT.removed",
                                "UNIT.updated",
                                "USER.attached",
                                "USER.created",
                                "USER.deleted",
                                "USER.detached",
                                "USER.removed",
                                "USER.updated",
                                "WKF.attached",
                                "WKF.created",
                                "WKF.deleted",
                                "WKF.detached",
                                "WKF.removed",
                                "WKF.updated",
                                "WOR.attached",
                                "WOR.created",
                                "WOR.deleted",
                                "WOR.detached",
                                "WOR.removed",
                                "WOR.updated"
                              ]
                            }
                          ]
                        },
                        "event_value": {
                          "type": "object",
                          "description": "The event conditions that have to be met",
                          "allOf": [
                            {
                              "description": "A Step choice",
                              "type": "object",
                              "maxProperties": 2,
                              "minProperties": 2,
                              "required": [
                                "variable"
                              ],
                              "properties": {
                                "variable": {
                                  "type": "string",
                                  "description": "Context variable to check",
                                  "example": "$.parts.available",
                                  "x-examples": [
                                    "$.parts.available"
                                  ]
                                },
                                "greater_than_equals": {
                                  "type": "string",
                                  "description": "Value has to be greater than or equals to",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "less_than_equals": {
                                  "type": "string",
                                  "description": "Value has to be less than or equals to",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "greater_than": {
                                  "type": "string",
                                  "description": "Value has to be greater than",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "less_than": {
                                  "type": "string",
                                  "description": "Value has to be less than",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "equals": {
                                  "type": "string",
                                  "description": "Value has to equal",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "not_equals": {
                                  "type": "string",
                                  "description": "Value must not equal",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      }
                    }
                  }
                },
                "allOf": [
                  {
                    "type": "object",
                    "x-ui-hide": true,
                    "required": [
                      "type",
                      "label",
                      "goto"
                    ],
                    "properties": {
                      "type": {
                        "type": "string",
                        "description": "Type of workflow step",
                        "enum": [
                          "load",
                          "choice",
                          "function",
                          "machine",
                          "pass",
                          "fail",
                          "success",
                          "user",
                          "wait"
                        ]
                      },
                      "label": {
                        "type": "string",
                        "description": "Label for the step",
                        "example": "Find units",
                        "x-examples": [
                          "Find units"
                        ]
                      },
                      "goto": {
                        "type": "string",
                        "description": "Step to move to",
                        "pattern": "^[a-z][a-z-]+[a-z]$",
                        "example": "complete",
                        "x-examples": [
                          "complete"
                        ]
                      },
                      "goto-fail": {
                        "type": "string",
                        "description": "Step to transition too if this step cannot be completed",
                        "pattern": "^[a-z][a-z-]+[a-z]$",
                        "example": "process-fail",
                        "x-examples": [
                          "process-fail"
                        ]
                      },
                      "context": {
                        "type": "array",
                        "description": "Initial values to set on the context",
                        "items": {
                          "type": "object",
                          "required": [
                            "key",
                            "value"
                          ],
                          "properties": {
                            "key": {
                              "type": "string",
                              "description": "The context key to set",
                              "example": "$.fizz",
                              "x-examples": [
                                "$.fizz",
                                "$.unit.status",
                                "extract_fields"
                              ]
                            },
                            "value": {
                              "type": "string",
                              "description": "Value to set",
                              "example": "$.buzz",
                              "x-examples": [
                                "$.buzz",
                                "Pending",
                                true
                              ]
                            },
                            "lock": {
                              "type": "boolean",
                              "description": "Prevents other steps from writing this value",
                              "example": true
                            },
                            "ignore": {
                              "type": "boolean",
                              "description": "When trying to set a locked key, do not fail",
                              "example": false
                            }
                          }
                        }
                      },
                      "onError": {
                        "type": "object",
                        "description": "Action to take when step fails",
                        "required": [
                          "finally"
                        ],
                        "properties": {
                          "retry": {
                            "type": "integer",
                            "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                            "minimum": 0,
                            "maximum": 10,
                            "example": 3,
                            "default": 0
                          },
                          "finally": {
                            "type": "object",
                            "description": "What to do after all retries",
                            "required": [
                              "goto"
                            ],
                            "properties": {
                              "actions": {
                                "type": "array",
                                "description": "Actions to take on failure",
                                "items": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "The type of the action",
                                          "enum": [
                                            "email"
                                          ]
                                        },
                                        "options": {
                                          "type": "object",
                                          "description": "settings for the action",
                                          "additionalProperties": {
                                            "type": "string"
                                          },
                                          "x-examples": [
                                            {
                                              "to": "bob@example.com",
                                              "from": "alice@example.com"
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              },
                              "goto": {
                                "type": "string",
                                "description": "Step to transition to on failure",
                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                "example": "failed",
                                "x-examples": [
                                  "failed"
                                ]
                              }
                            }
                          }
                        }
                      },
                      "onComplete": {
                        "type": "object",
                        "description": "Actions to take when the step completes",
                        "properties": {
                          "actions": {
                            "type": "array",
                            "items": {
                              "anyOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "The type of the action",
                                      "enum": [
                                        "email"
                                      ]
                                    },
                                    "options": {
                                      "type": "object",
                                      "description": "settings for the action",
                                      "additionalProperties": {
                                        "type": "string"
                                      },
                                      "x-examples": [
                                        {
                                          "to": "bob@example.com",
                                          "from": "alice@example.com"
                                        }
                                      ]
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        }
                      }
                    }
                  }
                ]
              }
            ]
          }
        ]
      }
    }
  }
}
```

<h3 id="createworkflow-parameters">Parameters</h3>

|Name|In|Type|Required|Description|
|---|---|---|---|---|
|label|body|string|true|Label for the workflow|
|workflow_version|body|integer(int32)|true|Version number for the work flows (the number of times it has been changed|
|applies_to|body|string|true|The entity type this work flow applies too|
|starts_at|body|string|true|Starting step|
|context|body|[object]|false|Initial values to set on the context|
|» key|body|string|true|The context key to set|
|» value|body|string|true|Value to set|
|» lock|body|boolean|false|Prevents other steps from writing this value|
|» ignore|body|boolean|false|When trying to set a locked key, do not fail|
|steps|body|object|true|Steps for the workflow|
|» **additionalProperties**|body|object|false|Close step|
|»» step|body|string|true|Step to mark as complete|

#### Enumerated Values

|Parameter|Value|
|---|---|
|applies_to|unit|
|applies_to|part|
|applies_to|program|
|applies_to|project|
|applies_to|customer|
|applies_to|contact|

> Example responses

> 200 Response

```json
{
  "type": "object",
  "allOf": [
    {
      "type": "object",
      "x-hal": true,
      "x-ui-hide": true,
      "properties": {
        "_links": {
          "type": "object",
          "properties": {
            "self": {
              "type": "object",
              "readOnly": true,
              "properties": {
                "href": {
                  "type": "string",
                  "example": "https://api.nterprise.com/work-flows/9f692b9f-958b-4f74-ba72-5878407bb60d"
                }
              }
            }
          }
        }
      },
      "allOf": [
        {
          "x-id": "#workflow",
          "x-nter-relation": "work-flows",
          "x-nter-model": "WorkFlow",
          "x-nter-callable": true,
          "type": "object",
          "description": "Workflow",
          "required": [
            "steps",
            "starts_at",
            "label",
            "workflow_id",
            "applies_to"
          ],
          "properties": {
            "workflow_id": {
              "type": "string",
              "description": "Customer identifier",
              "example": "e530652e-28e8-4f64-84af-e1cf0ff7c805",
              "x-examples": [
                "e530652e-28e8-4f64-84af-e1cf0ff7c805"
              ],
              "pattern": "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"
            },
            "label": {
              "type": "string",
              "example": "MLTI iPad Assembly Assignment",
              "x-examples": [
                "MLTI iPad Assembly Assignment"
              ],
              "description": "Label for the workflow"
            },
            "slug": {
              "type": "string",
              "description": "Auto-generated slug for the workflow",
              "example": "mlti-ipad-assembly-assignment",
              "x-examples": [
                "mlti-ipad-assembly-assignment"
              ]
            },
            "version": {
              "type": "string",
              "description": "Version of the workflow schema used",
              "enum": [
                "1.0"
              ],
              "example": "1.0"
            },
            "workflow_version": {
              "type": "integer",
              "format": "int32",
              "example": 7,
              "x-examples": [
                7
              ],
              "readOnly": true,
              "description": "Version number for the work flows (the number of times it has been changed"
            },
            "applies_to": {
              "type": "string",
              "description": "The entity type this work flow applies too",
              "enum": [
                "unit",
                "part",
                "program",
                "project",
                "customer",
                "contact"
              ],
              "example": "unit"
            },
            "starts_at": {
              "type": "string",
              "description": "Starting step",
              "example": "entry",
              "x-examples": [
                "entry"
              ]
            },
            "context": {
              "type": "array",
              "description": "Initial values to set on the context",
              "items": {
                "type": "object",
                "required": [
                  "key",
                  "value"
                ],
                "properties": {
                  "key": {
                    "type": "string",
                    "description": "The context key to set",
                    "example": "$.fizz",
                    "x-examples": [
                      "$.fizz",
                      "$.unit.status",
                      "extract_fields"
                    ]
                  },
                  "value": {
                    "type": "string",
                    "description": "Value to set",
                    "example": "$.buzz",
                    "x-examples": [
                      "$.buzz",
                      "Pending",
                      true
                    ]
                  },
                  "lock": {
                    "type": "boolean",
                    "description": "Prevents other steps from writing this value",
                    "example": true
                  },
                  "ignore": {
                    "type": "boolean",
                    "description": "When trying to set a locked key, do not fail",
                    "example": false
                  }
                }
              }
            },
            "steps": {
              "type": "object",
              "description": "Steps for the workflow",
              "x-patternProperties": {
                "(confirm|success|fail|manual|run-ace|follow)": {
                  "type": "object",
                  "allOf": [
                    {
                      "type": "object",
                      "description": "Close step",
                      "required": [
                        "step"
                      ],
                      "properties": {
                        "step": {
                          "type": "string",
                          "description": "Step to mark as complete",
                          "pattern": "^[a-z][a-z-]+[a-z]$",
                          "example": "complete",
                          "x-examples": [
                            "complete"
                          ]
                        }
                      },
                      "anyOf": [
                        {
                          "type": "object",
                          "description": "Require the user confirm an action. This is normally used when Niagara cannot automatically detect that a task or action has been performed.",
                          "x-nter-step-component": "confirm-action",
                          "properties": {
                            "label": {
                              "x-examples": [
                                "Confirm the device has powered off"
                              ]
                            },
                            "options": {
                              "type": "object",
                              "required": [
                                "component",
                                "payload"
                              ],
                              "properties": {
                                "component": {
                                  "enum": [
                                    "confirm-action"
                                  ],
                                  "example": "confirm-action",
                                  "x-examples": [
                                    "confirm-action"
                                  ]
                                },
                                "payload": {
                                  "type": "object",
                                  "required": [
                                    "message"
                                  ],
                                  "properties": {
                                    "message": {
                                      "type": "string",
                                      "description": "The confirmation message to display to the user",
                                      "example": "Device powered off?",
                                      "x-examples": [
                                        "Device powered off?"
                                      ]
                                    },
                                    "negative_message": {
                                      "type": "string",
                                      "description": "An optional inverse message",
                                      "nullable": true,
                                      "example": "Device not functioning",
                                      "x-examples": [
                                        "Device not functioning"
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          },
                          "allOf": [
                            {
                              "type": "object",
                              "x-ui-hide": true,
                              "description": "A step which requires a user to complete",
                              "required": [
                                "type",
                                "options"
                              ],
                              "properties": {
                                "type": {
                                  "example": "user",
                                  "x-examples": [
                                    "user"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "component",
                                    "payload"
                                  ],
                                  "properties": {
                                    "component": {
                                      "type": "string",
                                      "description": "Name of the function to invoke",
                                      "example": "assignUnitsFromCustomerToProject",
                                      "x-examples": [
                                        "assignUnitsFromCustomerToProject"
                                      ]
                                    },
                                    "payload": {
                                      "type": "object"
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "required": [
                                    "type",
                                    "label",
                                    "goto"
                                  ],
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    },
                                    "label": {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to move to",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "complete",
                                      "x-examples": [
                                        "complete"
                                      ]
                                    },
                                    "goto-fail": {
                                      "type": "string",
                                      "description": "Step to transition too if this step cannot be completed",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "process-fail",
                                      "x-examples": [
                                        "process-fail"
                                      ]
                                    },
                                    "context": {
                                      "type": "array",
                                      "description": "Initial values to set on the context",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "key",
                                          "value"
                                        ],
                                        "properties": {
                                          "key": {
                                            "type": "string",
                                            "description": "The context key to set",
                                            "example": "$.fizz",
                                            "x-examples": [
                                              "$.fizz",
                                              "$.unit.status",
                                              "extract_fields"
                                            ]
                                          },
                                          "value": {
                                            "type": "string",
                                            "description": "Value to set",
                                            "example": "$.buzz",
                                            "x-examples": [
                                              "$.buzz",
                                              "Pending",
                                              true
                                            ]
                                          },
                                          "lock": {
                                            "type": "boolean",
                                            "description": "Prevents other steps from writing this value",
                                            "example": true
                                          },
                                          "ignore": {
                                            "type": "boolean",
                                            "description": "When trying to set a locked key, do not fail",
                                            "example": false
                                          }
                                        }
                                      }
                                    },
                                    "onError": {
                                      "type": "object",
                                      "description": "Action to take when step fails",
                                      "required": [
                                        "finally"
                                      ],
                                      "properties": {
                                        "retry": {
                                          "type": "integer",
                                          "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                          "minimum": 0,
                                          "maximum": 10,
                                          "example": 3,
                                          "default": 0
                                        },
                                        "finally": {
                                          "type": "object",
                                          "description": "What to do after all retries",
                                          "required": [
                                            "goto"
                                          ],
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "description": "Actions to take on failure",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to transition to on failure",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "failed",
                                              "x-examples": [
                                                "failed"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "onComplete": {
                                      "type": "object",
                                      "description": "Actions to take when the step completes",
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "object",
                          "description": "Display a link or modal to a user which contains instructions from a PDF",
                          "x-nter-step-component": "follow-pdf-instructions",
                          "required": [
                            "label",
                            "payload"
                          ],
                          "properties": {
                            "label": {
                              "x-examples": [
                                "Instruct user to follow steps outlined in Apple PDF"
                              ]
                            },
                            "options": {
                              "type": "object",
                              "required": [
                                "component",
                                "payload"
                              ],
                              "properties": {
                                "component": {
                                  "enum": [
                                    "follow-pds-instructions"
                                  ],
                                  "example": "follow-pdf-instructions",
                                  "x-examples": [
                                    "follow-pdf-instructions"
                                  ]
                                },
                                "payload": {
                                  "type": "object",
                                  "required": [
                                    "attachment_id"
                                  ],
                                  "properties": {
                                    "attachment_id": {
                                      "type": "string",
                                      "description": "UUID for the attachment",
                                      "format": "uuid",
                                      "example": "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7",
                                      "x-examples": [
                                        "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7"
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          },
                          "allOf": [
                            {
                              "type": "object",
                              "x-ui-hide": true,
                              "description": "A step which requires a user to complete",
                              "required": [
                                "type",
                                "options"
                              ],
                              "properties": {
                                "type": {
                                  "example": "user",
                                  "x-examples": [
                                    "user"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "component",
                                    "payload"
                                  ],
                                  "properties": {
                                    "component": {
                                      "type": "string",
                                      "description": "Name of the function to invoke",
                                      "example": "assignUnitsFromCustomerToProject",
                                      "x-examples": [
                                        "assignUnitsFromCustomerToProject"
                                      ]
                                    },
                                    "payload": {
                                      "type": "object"
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "required": [
                                    "type",
                                    "label",
                                    "goto"
                                  ],
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    },
                                    "label": {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to move to",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "complete",
                                      "x-examples": [
                                        "complete"
                                      ]
                                    },
                                    "goto-fail": {
                                      "type": "string",
                                      "description": "Step to transition too if this step cannot be completed",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "process-fail",
                                      "x-examples": [
                                        "process-fail"
                                      ]
                                    },
                                    "context": {
                                      "type": "array",
                                      "description": "Initial values to set on the context",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "key",
                                          "value"
                                        ],
                                        "properties": {
                                          "key": {
                                            "type": "string",
                                            "description": "The context key to set",
                                            "example": "$.fizz",
                                            "x-examples": [
                                              "$.fizz",
                                              "$.unit.status",
                                              "extract_fields"
                                            ]
                                          },
                                          "value": {
                                            "type": "string",
                                            "description": "Value to set",
                                            "example": "$.buzz",
                                            "x-examples": [
                                              "$.buzz",
                                              "Pending",
                                              true
                                            ]
                                          },
                                          "lock": {
                                            "type": "boolean",
                                            "description": "Prevents other steps from writing this value",
                                            "example": true
                                          },
                                          "ignore": {
                                            "type": "boolean",
                                            "description": "When trying to set a locked key, do not fail",
                                            "example": false
                                          }
                                        }
                                      }
                                    },
                                    "onError": {
                                      "type": "object",
                                      "description": "Action to take when step fails",
                                      "required": [
                                        "finally"
                                      ],
                                      "properties": {
                                        "retry": {
                                          "type": "integer",
                                          "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                          "minimum": 0,
                                          "maximum": 10,
                                          "example": 3,
                                          "default": 0
                                        },
                                        "finally": {
                                          "type": "object",
                                          "description": "What to do after all retries",
                                          "required": [
                                            "goto"
                                          ],
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "description": "Actions to take on failure",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to transition to on failure",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "failed",
                                              "x-examples": [
                                                "failed"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "onComplete": {
                                      "type": "object",
                                      "description": "Actions to take when the step completes",
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "object",
                          "description": "Ask the user to manually enter (or confirm) data for an entity",
                          "x-nter-step-component": "manual-data-entry",
                          "properties": {
                            "label": {
                              "x-examples": [
                                "Enter asset tag and confirm serial number"
                              ]
                            },
                            "options": {
                              "type": "object",
                              "required": [
                                "component",
                                "payload"
                              ],
                              "properties": {
                                "component": {
                                  "enum": [
                                    "manual-data-entry"
                                  ],
                                  "example": "manual-data-entry",
                                  "x-examples": [
                                    "manual-data-entry"
                                  ]
                                },
                                "payload": {
                                  "type": "object",
                                  "required": [
                                    "fields"
                                  ],
                                  "properties": {
                                    "fields": {
                                      "type": "array",
                                      "description": "Configuration for each field",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "input_type",
                                          "label",
                                          "required",
                                          "entity_field"
                                        ],
                                        "properties": {
                                          "input_type": {
                                            "type": "string",
                                            "description": "The type of input field to display",
                                            "enum": [
                                              "textbox",
                                              "input"
                                            ]
                                          },
                                          "label": {
                                            "type": "string",
                                            "description": "Label to display for the field",
                                            "example": "Asset Tag",
                                            "x-examples": [
                                              "Asset Tag"
                                            ]
                                          },
                                          "required": {
                                            "type": "boolean",
                                            "description": "Display the field as required input. Note: this is a helper function. It singles that the user is required to input data at this step. If the field is required on the entity, the user will be presented with a validation message",
                                            "example": true
                                          },
                                          "entity_field": {
                                            "type": "string",
                                            "description": "JSON Path to the field on the entity. If the path does not start with '$' then the entity on the context is assumed. Otherwise the data will be set on the context path",
                                            "example": "input_filter[?(@.key = 'asset-tag')]",
                                            "x-examples": [
                                              "input_filter[?(@.key = 'asset-tag')]"
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          },
                          "allOf": [
                            {
                              "type": "object",
                              "x-ui-hide": true,
                              "description": "A step which requires a user to complete",
                              "required": [
                                "type",
                                "options"
                              ],
                              "properties": {
                                "type": {
                                  "example": "user",
                                  "x-examples": [
                                    "user"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "component",
                                    "payload"
                                  ],
                                  "properties": {
                                    "component": {
                                      "type": "string",
                                      "description": "Name of the function to invoke",
                                      "example": "assignUnitsFromCustomerToProject",
                                      "x-examples": [
                                        "assignUnitsFromCustomerToProject"
                                      ]
                                    },
                                    "payload": {
                                      "type": "object"
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "required": [
                                    "type",
                                    "label",
                                    "goto"
                                  ],
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    },
                                    "label": {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to move to",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "complete",
                                      "x-examples": [
                                        "complete"
                                      ]
                                    },
                                    "goto-fail": {
                                      "type": "string",
                                      "description": "Step to transition too if this step cannot be completed",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "process-fail",
                                      "x-examples": [
                                        "process-fail"
                                      ]
                                    },
                                    "context": {
                                      "type": "array",
                                      "description": "Initial values to set on the context",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "key",
                                          "value"
                                        ],
                                        "properties": {
                                          "key": {
                                            "type": "string",
                                            "description": "The context key to set",
                                            "example": "$.fizz",
                                            "x-examples": [
                                              "$.fizz",
                                              "$.unit.status",
                                              "extract_fields"
                                            ]
                                          },
                                          "value": {
                                            "type": "string",
                                            "description": "Value to set",
                                            "example": "$.buzz",
                                            "x-examples": [
                                              "$.buzz",
                                              "Pending",
                                              true
                                            ]
                                          },
                                          "lock": {
                                            "type": "boolean",
                                            "description": "Prevents other steps from writing this value",
                                            "example": true
                                          },
                                          "ignore": {
                                            "type": "boolean",
                                            "description": "When trying to set a locked key, do not fail",
                                            "example": false
                                          }
                                        }
                                      }
                                    },
                                    "onError": {
                                      "type": "object",
                                      "description": "Action to take when step fails",
                                      "required": [
                                        "finally"
                                      ],
                                      "properties": {
                                        "retry": {
                                          "type": "integer",
                                          "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                          "minimum": 0,
                                          "maximum": 10,
                                          "example": 3,
                                          "default": 0
                                        },
                                        "finally": {
                                          "type": "object",
                                          "description": "What to do after all retries",
                                          "required": [
                                            "goto"
                                          ],
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "description": "Actions to take on failure",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to transition to on failure",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "failed",
                                              "x-examples": [
                                                "failed"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "onComplete": {
                                      "type": "object",
                                      "description": "Actions to take when the step completes",
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "object",
                          "description": "Ask the user to follow a list and check off boxes",
                          "x-nter-step-component": "task-list",
                          "properties": {
                            "label": {
                              "x-examples": [
                                "Enter asset tag and confirm serial number"
                              ]
                            },
                            "options": {
                              "type": "object",
                              "required": [
                                "component",
                                "payload"
                              ],
                              "properties": {
                                "component": {
                                  "enum": [
                                    "task-list"
                                  ],
                                  "example": "task-list",
                                  "x-examples": [
                                    "task-list"
                                  ]
                                },
                                "payload": {
                                  "type": "object",
                                  "required": [
                                    "items"
                                  ],
                                  "properties": {
                                    "is_qc": {
                                      "type": "boolean",
                                      "description": "Flags this list as a QC task list. This means that a different user can close the task to one previously on the context"
                                    },
                                    "items": {
                                      "type": "array",
                                      "description": "Configuration for each task list item",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "label",
                                          "help",
                                          "evaluated",
                                          "na_option"
                                        ],
                                        "properties": {
                                          "label": {
                                            "type": "string",
                                            "description": "Label to display for the field",
                                            "example": "Asset Tag placement",
                                            "x-examples": [
                                              "Asset Tag placement"
                                            ]
                                          },
                                          "slug": {
                                            "type": "string",
                                            "description": "Slug for the item (Auto-generated from the label)",
                                            "readOnly": true,
                                            "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$",
                                            "example": "asset-tag-placement",
                                            "x-examples": [
                                              "asset-tag-placement"
                                            ]
                                          },
                                          "help": {
                                            "type": "string",
                                            "description": "Message describing what is needed to be checked",
                                            "example": "Asset Tag attached to the unit in the correct position",
                                            "x-examples": [
                                              "Asset Tag attached to the unit in the correct position"
                                            ]
                                          },
                                          "evaluated": {
                                            "type": "boolean",
                                            "description": "When set to true, this will fail the step if the value for the item is false or N/A",
                                            "example": true
                                          },
                                          "na_field": {
                                            "type": "boolean",
                                            "description": "Allow the user to select the N/A option when checking off the list",
                                            "example": true
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          },
                          "allOf": [
                            {
                              "type": "object",
                              "x-ui-hide": true,
                              "description": "A step which requires a user to complete",
                              "required": [
                                "type",
                                "options"
                              ],
                              "properties": {
                                "type": {
                                  "example": "user",
                                  "x-examples": [
                                    "user"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "component",
                                    "payload"
                                  ],
                                  "properties": {
                                    "component": {
                                      "type": "string",
                                      "description": "Name of the function to invoke",
                                      "example": "assignUnitsFromCustomerToProject",
                                      "x-examples": [
                                        "assignUnitsFromCustomerToProject"
                                      ]
                                    },
                                    "payload": {
                                      "type": "object"
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "required": [
                                    "type",
                                    "label",
                                    "goto"
                                  ],
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    },
                                    "label": {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to move to",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "complete",
                                      "x-examples": [
                                        "complete"
                                      ]
                                    },
                                    "goto-fail": {
                                      "type": "string",
                                      "description": "Step to transition too if this step cannot be completed",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "process-fail",
                                      "x-examples": [
                                        "process-fail"
                                      ]
                                    },
                                    "context": {
                                      "type": "array",
                                      "description": "Initial values to set on the context",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "key",
                                          "value"
                                        ],
                                        "properties": {
                                          "key": {
                                            "type": "string",
                                            "description": "The context key to set",
                                            "example": "$.fizz",
                                            "x-examples": [
                                              "$.fizz",
                                              "$.unit.status",
                                              "extract_fields"
                                            ]
                                          },
                                          "value": {
                                            "type": "string",
                                            "description": "Value to set",
                                            "example": "$.buzz",
                                            "x-examples": [
                                              "$.buzz",
                                              "Pending",
                                              true
                                            ]
                                          },
                                          "lock": {
                                            "type": "boolean",
                                            "description": "Prevents other steps from writing this value",
                                            "example": true
                                          },
                                          "ignore": {
                                            "type": "boolean",
                                            "description": "When trying to set a locked key, do not fail",
                                            "example": false
                                          }
                                        }
                                      }
                                    },
                                    "onError": {
                                      "type": "object",
                                      "description": "Action to take when step fails",
                                      "required": [
                                        "finally"
                                      ],
                                      "properties": {
                                        "retry": {
                                          "type": "integer",
                                          "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                          "minimum": 0,
                                          "maximum": 10,
                                          "example": 3,
                                          "default": 0
                                        },
                                        "finally": {
                                          "type": "object",
                                          "description": "What to do after all retries",
                                          "required": [
                                            "goto"
                                          ],
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "description": "Actions to take on failure",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to transition to on failure",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "failed",
                                              "x-examples": [
                                                "failed"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "onComplete": {
                                      "type": "object",
                                      "description": "Actions to take when the step completes",
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "object",
                          "description": "Run the ACE-IOS application to provision iOS devices or ",
                          "properties": {
                            "type": {
                              "example": "machine",
                              "x-examples": [
                                "machine"
                              ]
                            },
                            "label": {
                              "x-examples": [
                                "Run Application"
                              ]
                            },
                            "options": {
                              "type": "object",
                              "required": [
                                "application",
                                "configuration"
                              ],
                              "properties": {
                                "configuration": {
                                  "type": "object",
                                  "description": "ACE Configuration options",
                                  "properties": {
                                    "pairing_cert": {
                                      "type": "string",
                                      "format": "base64",
                                      "description": "Contents of a *.crt file exported from Apple Configurator or MDM",
                                      "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                      "x-examples": [
                                        "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                      ],
                                      "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                    },
                                    "pairing_key": {
                                      "type": "string",
                                      "format": "base64",
                                      "description": "Contents of a *.der file exported from Apple Configurator or MDM",
                                      "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                      "x-examples": [
                                        "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                      ],
                                      "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                    },
                                    "restore_device": {
                                      "type": "boolean",
                                      "description": "Restore device to factory defaults"
                                    },
                                    "automated_enrollment": {
                                      "type": "boolean",
                                      "description": "Automatically enroll the device to MDM"
                                    },
                                    "mdm": {
                                      "type": "object",
                                      "format": "base64",
                                      "description": "The settings for the Customers MDM",
                                      "properties": {
                                        "vendor": {
                                          "type": "string",
                                          "description": "MDM vendor. Currently, supported values are AirWatch, JAMF, and Meraki.",
                                          "enum": [
                                            "AirWatch",
                                            "JAMF",
                                            "Meraki"
                                          ]
                                        },
                                        "console_url": {
                                          "type": "string",
                                          "format": "uri",
                                          "description": "Base URL for HTTP requests",
                                          "example": "http://jamf.zones.com",
                                          "x-examples": [
                                            "http://jamf.zones.com"
                                          ]
                                        },
                                        "user": {
                                          "type": "string",
                                          "description": "MDM User name",
                                          "example": "NterpriseBob",
                                          "x-examples": [
                                            "NterpriseBob"
                                          ]
                                        },
                                        "password": {
                                          "type": "string",
                                          "description": "MDM password"
                                        },
                                        "tenant_code": {
                                          "type": "string",
                                          "description": "MDM authentication key",
                                          "example": "nterprise",
                                          "x-examples": [
                                            "nterprise"
                                          ]
                                        },
                                        "set_asset_tag": {
                                          "type": "string",
                                          "description": "Sets the devices Asset tag based on a field from the unit",
                                          "example": "$._entity.input_filter[?(@.key = 'asset-tag')]",
                                          "x-examples": [
                                            "$._entity.input_filter[?(@.key = 'asset-tag')]"
                                          ]
                                        }
                                      }
                                    },
                                    "field_mappings": {
                                      "type": "array",
                                      "description": "List of fields to map to the device",
                                      "items": {
                                        "type": "object",
                                        "properties": {
                                          "from": {
                                            "type": "string",
                                            "description": "The field reported from ACE",
                                            "enum": [
                                              "serial_number",
                                              "name",
                                              "ecid",
                                              "udid",
                                              "configurator_serial",
                                              "ios",
                                              "model",
                                              "storage",
                                              "wifi_mac",
                                              "bt_mac",
                                              "ethernet_mac",
                                              "thundersync_serial",
                                              "iccid",
                                              "iccid2",
                                              "imei",
                                              "imei2",
                                              "missed_profiles",
                                              "missed_apps",
                                              "icon_list_regex",
                                              "icon_layout",
                                              "bat_capacity"
                                            ]
                                          },
                                          "to": {
                                            "type": "string",
                                            "description": "Field to set on the entity",
                                            "example": "$._entity.input_filter[?(@.key = 'serial-number')]",
                                            "x-examples": [
                                              "$._entity.input_filter[?(@.key = 'serial-number')]"
                                            ]
                                          }
                                        }
                                      }
                                    },
                                    "wait_for_apps": {
                                      "type": "array",
                                      "description": "A list of applications needed to be installed on the device. This will cause the extension to poll the device for installed applications. Once all the applications have been installed, this step can be completed",
                                      "items": {
                                        "type": "string",
                                        "format": "uri",
                                        "example": "com.apple.itunes",
                                        "x-examples": [
                                          "com.apple.itunes"
                                        ]
                                      }
                                    },
                                    "wait_for_battery_charge": {
                                      "type": "integer",
                                      "description": "The required battery percentage needed before this step can move on",
                                      "minimum": 0,
                                      "maximum": 100
                                    }
                                  }
                                }
                              }
                            }
                          },
                          "allOf": [
                            {
                              "type": "object",
                              "description": "Run an application extension",
                              "properties": {
                                "label": {
                                  "x-examples": [
                                    "Run Application"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "application",
                                    "configuration"
                                  ],
                                  "properties": {
                                    "application": {
                                      "type": "object",
                                      "required": [
                                        "application_id",
                                        "platforms"
                                      ],
                                      "properties": {
                                        "application_id": {
                                          "type": "string",
                                          "description": "Registered application ID",
                                          "example": "ace-ios",
                                          "x-examples": [
                                            "ace-ios"
                                          ]
                                        },
                                        "platforms": {
                                          "type": "array",
                                          "description": "Allowed platforms the application can run on",
                                          "items": {
                                            "type": "object",
                                            "required": [
                                              "platform",
                                              "arch"
                                            ],
                                            "properties": {
                                              "platform": {
                                                "type": "string",
                                                "description": "The platform (OS) the application can run on",
                                                "enum": [
                                                  "aix",
                                                  "darwin",
                                                  "freebsd",
                                                  "linux",
                                                  "openbsd",
                                                  "sunos",
                                                  "win32"
                                                ]
                                              },
                                              "arch": {
                                                "type": "string",
                                                "description": "The CPU architecture needed to run the application",
                                                "enum": [
                                                  "arm",
                                                  "arm64",
                                                  "ia32",
                                                  "mips",
                                                  "mipsel",
                                                  "ppc",
                                                  "ppc64",
                                                  "s390",
                                                  "s390x",
                                                  "x32",
                                                  "x64"
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "required": [
                                    "type",
                                    "label",
                                    "goto"
                                  ],
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    },
                                    "label": {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to move to",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "complete",
                                      "x-examples": [
                                        "complete"
                                      ]
                                    },
                                    "goto-fail": {
                                      "type": "string",
                                      "description": "Step to transition too if this step cannot be completed",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "process-fail",
                                      "x-examples": [
                                        "process-fail"
                                      ]
                                    },
                                    "context": {
                                      "type": "array",
                                      "description": "Initial values to set on the context",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "key",
                                          "value"
                                        ],
                                        "properties": {
                                          "key": {
                                            "type": "string",
                                            "description": "The context key to set",
                                            "example": "$.fizz",
                                            "x-examples": [
                                              "$.fizz",
                                              "$.unit.status",
                                              "extract_fields"
                                            ]
                                          },
                                          "value": {
                                            "type": "string",
                                            "description": "Value to set",
                                            "example": "$.buzz",
                                            "x-examples": [
                                              "$.buzz",
                                              "Pending",
                                              true
                                            ]
                                          },
                                          "lock": {
                                            "type": "boolean",
                                            "description": "Prevents other steps from writing this value",
                                            "example": true
                                          },
                                          "ignore": {
                                            "type": "boolean",
                                            "description": "When trying to set a locked key, do not fail",
                                            "example": false
                                          }
                                        }
                                      }
                                    },
                                    "onError": {
                                      "type": "object",
                                      "description": "Action to take when step fails",
                                      "required": [
                                        "finally"
                                      ],
                                      "properties": {
                                        "retry": {
                                          "type": "integer",
                                          "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                          "minimum": 0,
                                          "maximum": 10,
                                          "example": 3,
                                          "default": 0
                                        },
                                        "finally": {
                                          "type": "object",
                                          "description": "What to do after all retries",
                                          "required": [
                                            "goto"
                                          ],
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "description": "Actions to take on failure",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to transition to on failure",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "failed",
                                              "x-examples": [
                                                "failed"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "onComplete": {
                                      "type": "object",
                                      "description": "Actions to take when the step completes",
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "label": {
                              "example": "Is device ok?",
                              "x-examples": [
                                "Is device ok?"
                              ]
                            },
                            "type": {
                              "example": "choice",
                              "x-examples": [
                                "choice"
                              ]
                            },
                            "choices": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "required": [
                                  "goto"
                                ],
                                "maxProperties": 2,
                                "minProperties": 2,
                                "maximum": 20,
                                "properties": {
                                  "and": {
                                    "type": "array",
                                    "description": "All choices must be satisfied",
                                    "maximum": 5,
                                    "items": {
                                      "description": "A Step choice",
                                      "type": "object",
                                      "maxProperties": 2,
                                      "minProperties": 2,
                                      "required": [
                                        "variable"
                                      ],
                                      "properties": {
                                        "variable": {
                                          "type": "string",
                                          "description": "Context variable to check",
                                          "example": "$.parts.available",
                                          "x-examples": [
                                            "$.parts.available"
                                          ]
                                        },
                                        "greater_than_equals": {
                                          "type": "string",
                                          "description": "Value has to be greater than or equals to",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "less_than_equals": {
                                          "type": "string",
                                          "description": "Value has to be less than or equals to",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "greater_than": {
                                          "type": "string",
                                          "description": "Value has to be greater than",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "less_than": {
                                          "type": "string",
                                          "description": "Value has to be less than",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "equals": {
                                          "type": "string",
                                          "description": "Value has to equal",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "not_equals": {
                                          "type": "string",
                                          "description": "Value must not equal",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        }
                                      }
                                    }
                                  },
                                  "or": {
                                    "type": "array",
                                    "description": "Any of these choices must be satisfied",
                                    "maximum": 5,
                                    "items": {
                                      "description": "A Step choice",
                                      "type": "object",
                                      "maxProperties": 2,
                                      "minProperties": 2,
                                      "required": [
                                        "variable"
                                      ],
                                      "properties": {
                                        "variable": {
                                          "type": "string",
                                          "description": "Context variable to check",
                                          "example": "$.parts.available",
                                          "x-examples": [
                                            "$.parts.available"
                                          ]
                                        },
                                        "greater_than_equals": {
                                          "type": "string",
                                          "description": "Value has to be greater than or equals to",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "less_than_equals": {
                                          "type": "string",
                                          "description": "Value has to be less than or equals to",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "greater_than": {
                                          "type": "string",
                                          "description": "Value has to be greater than",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "less_than": {
                                          "type": "string",
                                          "description": "Value has to be less than",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "equals": {
                                          "type": "string",
                                          "description": "Value has to equal",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "not_equals": {
                                          "type": "string",
                                          "description": "Value must not equal",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        }
                                      }
                                    }
                                  },
                                  "not": {
                                    "type": "array",
                                    "description": "None of these choices must be satisfied",
                                    "maximum": 5,
                                    "items": {
                                      "description": "A Step choice",
                                      "type": "object",
                                      "maxProperties": 2,
                                      "minProperties": 2,
                                      "required": [
                                        "variable"
                                      ],
                                      "properties": {
                                        "variable": {
                                          "type": "string",
                                          "description": "Context variable to check",
                                          "example": "$.parts.available",
                                          "x-examples": [
                                            "$.parts.available"
                                          ]
                                        },
                                        "greater_than_equals": {
                                          "type": "string",
                                          "description": "Value has to be greater than or equals to",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "less_than_equals": {
                                          "type": "string",
                                          "description": "Value has to be less than or equals to",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "greater_than": {
                                          "type": "string",
                                          "description": "Value has to be greater than",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "less_than": {
                                          "type": "string",
                                          "description": "Value has to be less than",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "equals": {
                                          "type": "string",
                                          "description": "Value has to equal",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "not_equals": {
                                          "type": "string",
                                          "description": "Value must not equal",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        }
                                      }
                                    }
                                  },
                                  "goto": {
                                    "description": "Step to goto when condition is met",
                                    "allOf": [
                                      {
                                        "type": "string",
                                        "description": "Step to move to",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "complete",
                                        "x-examples": [
                                          "complete"
                                        ]
                                      }
                                    ]
                                  }
                                }
                              }
                            },
                            "goto": {
                              "description": "Default step to goto when no choice can be made"
                            }
                          },
                          "allOf": [
                            {
                              "type": "object",
                              "x-ui-hide": true,
                              "required": [
                                "type",
                                "label",
                                "goto"
                              ],
                              "properties": {
                                "type": {
                                  "type": "string",
                                  "description": "Type of workflow step",
                                  "enum": [
                                    "load",
                                    "choice",
                                    "function",
                                    "machine",
                                    "pass",
                                    "fail",
                                    "success",
                                    "user",
                                    "wait"
                                  ]
                                },
                                "label": {
                                  "type": "string",
                                  "description": "Label for the step",
                                  "example": "Find units",
                                  "x-examples": [
                                    "Find units"
                                  ]
                                },
                                "goto": {
                                  "type": "string",
                                  "description": "Step to move to",
                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                  "example": "complete",
                                  "x-examples": [
                                    "complete"
                                  ]
                                },
                                "goto-fail": {
                                  "type": "string",
                                  "description": "Step to transition too if this step cannot be completed",
                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                  "example": "process-fail",
                                  "x-examples": [
                                    "process-fail"
                                  ]
                                },
                                "context": {
                                  "type": "array",
                                  "description": "Initial values to set on the context",
                                  "items": {
                                    "type": "object",
                                    "required": [
                                      "key",
                                      "value"
                                    ],
                                    "properties": {
                                      "key": {
                                        "type": "string",
                                        "description": "The context key to set",
                                        "example": "$.fizz",
                                        "x-examples": [
                                          "$.fizz",
                                          "$.unit.status",
                                          "extract_fields"
                                        ]
                                      },
                                      "value": {
                                        "type": "string",
                                        "description": "Value to set",
                                        "example": "$.buzz",
                                        "x-examples": [
                                          "$.buzz",
                                          "Pending",
                                          true
                                        ]
                                      },
                                      "lock": {
                                        "type": "boolean",
                                        "description": "Prevents other steps from writing this value",
                                        "example": true
                                      },
                                      "ignore": {
                                        "type": "boolean",
                                        "description": "When trying to set a locked key, do not fail",
                                        "example": false
                                      }
                                    }
                                  }
                                },
                                "onError": {
                                  "type": "object",
                                  "description": "Action to take when step fails",
                                  "required": [
                                    "finally"
                                  ],
                                  "properties": {
                                    "retry": {
                                      "type": "integer",
                                      "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                      "minimum": 0,
                                      "maximum": 10,
                                      "example": 3,
                                      "default": 0
                                    },
                                    "finally": {
                                      "type": "object",
                                      "description": "What to do after all retries",
                                      "required": [
                                        "goto"
                                      ],
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "description": "Actions to take on failure",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        },
                                        "goto": {
                                          "type": "string",
                                          "description": "Step to transition to on failure",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "failed",
                                          "x-examples": [
                                            "failed"
                                          ]
                                        }
                                      }
                                    }
                                  }
                                },
                                "onComplete": {
                                  "type": "object",
                                  "description": "Actions to take when the step completes",
                                  "properties": {
                                    "actions": {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "The type of the action",
                                                "enum": [
                                                  "email"
                                                ]
                                              },
                                              "options": {
                                                "type": "object",
                                                "description": "settings for the action",
                                                "additionalProperties": {
                                                  "type": "string"
                                                },
                                                "x-examples": [
                                                  {
                                                    "to": "bob@example.com",
                                                    "from": "alice@example.com"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          ]
                        },
                        {
                          "type": "object",
                          "description": "Finial step which is marked as failed",
                          "properties": {
                            "label": {
                              "example": "Failed",
                              "x-examples": [
                                "Failed"
                              ],
                              "allOf": [
                                {
                                  "type": "string",
                                  "description": "Label for the step",
                                  "example": "Find units",
                                  "x-examples": [
                                    "Find units"
                                  ]
                                }
                              ]
                            },
                            "type": {
                              "example": "fail",
                              "x-examples": [
                                "fail"
                              ],
                              "allOf": [
                                {
                                  "type": "string",
                                  "description": "Type of workflow step",
                                  "enum": [
                                    "load",
                                    "choice",
                                    "function",
                                    "machine",
                                    "pass",
                                    "fail",
                                    "success",
                                    "user",
                                    "wait"
                                  ]
                                }
                              ]
                            },
                            "onComplete": {
                              "type": "object",
                              "description": "Actions to take when the step completes",
                              "properties": {
                                "actions": {
                                  "type": "array",
                                  "items": {
                                    "anyOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "The type of the action",
                                            "enum": [
                                              "email"
                                            ]
                                          },
                                          "options": {
                                            "type": "object",
                                            "description": "settings for the action",
                                            "additionalProperties": {
                                              "type": "string"
                                            },
                                            "x-examples": [
                                              {
                                                "to": "bob@example.com",
                                                "from": "alice@example.com"
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        },
                        {
                          "type": "object",
                          "description": "Allows executing actions with out performing any function",
                          "properties": {
                            "label": {
                              "example": "Send email to project manager",
                              "x-examples": [
                                "Send email to project manager"
                              ]
                            },
                            "type": {
                              "example": "pass",
                              "x-examples": [
                                "pass"
                              ],
                              "allOf": [
                                {
                                  "type": "string",
                                  "description": "Type of workflow step",
                                  "enum": [
                                    "load",
                                    "choice",
                                    "function",
                                    "machine",
                                    "pass",
                                    "fail",
                                    "success",
                                    "user",
                                    "wait"
                                  ]
                                }
                              ]
                            }
                          },
                          "allOf": [
                            {
                              "type": "object",
                              "x-ui-hide": true,
                              "required": [
                                "type",
                                "label",
                                "goto"
                              ],
                              "properties": {
                                "type": {
                                  "type": "string",
                                  "description": "Type of workflow step",
                                  "enum": [
                                    "load",
                                    "choice",
                                    "function",
                                    "machine",
                                    "pass",
                                    "fail",
                                    "success",
                                    "user",
                                    "wait"
                                  ]
                                },
                                "label": {
                                  "type": "string",
                                  "description": "Label for the step",
                                  "example": "Find units",
                                  "x-examples": [
                                    "Find units"
                                  ]
                                },
                                "goto": {
                                  "type": "string",
                                  "description": "Step to move to",
                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                  "example": "complete",
                                  "x-examples": [
                                    "complete"
                                  ]
                                },
                                "goto-fail": {
                                  "type": "string",
                                  "description": "Step to transition too if this step cannot be completed",
                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                  "example": "process-fail",
                                  "x-examples": [
                                    "process-fail"
                                  ]
                                },
                                "context": {
                                  "type": "array",
                                  "description": "Initial values to set on the context",
                                  "items": {
                                    "type": "object",
                                    "required": [
                                      "key",
                                      "value"
                                    ],
                                    "properties": {
                                      "key": {
                                        "type": "string",
                                        "description": "The context key to set",
                                        "example": "$.fizz",
                                        "x-examples": [
                                          "$.fizz",
                                          "$.unit.status",
                                          "extract_fields"
                                        ]
                                      },
                                      "value": {
                                        "type": "string",
                                        "description": "Value to set",
                                        "example": "$.buzz",
                                        "x-examples": [
                                          "$.buzz",
                                          "Pending",
                                          true
                                        ]
                                      },
                                      "lock": {
                                        "type": "boolean",
                                        "description": "Prevents other steps from writing this value",
                                        "example": true
                                      },
                                      "ignore": {
                                        "type": "boolean",
                                        "description": "When trying to set a locked key, do not fail",
                                        "example": false
                                      }
                                    }
                                  }
                                },
                                "onError": {
                                  "type": "object",
                                  "description": "Action to take when step fails",
                                  "required": [
                                    "finally"
                                  ],
                                  "properties": {
                                    "retry": {
                                      "type": "integer",
                                      "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                      "minimum": 0,
                                      "maximum": 10,
                                      "example": 3,
                                      "default": 0
                                    },
                                    "finally": {
                                      "type": "object",
                                      "description": "What to do after all retries",
                                      "required": [
                                        "goto"
                                      ],
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "description": "Actions to take on failure",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        },
                                        "goto": {
                                          "type": "string",
                                          "description": "Step to transition to on failure",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "failed",
                                          "x-examples": [
                                            "failed"
                                          ]
                                        }
                                      }
                                    }
                                  }
                                },
                                "onComplete": {
                                  "type": "object",
                                  "description": "Actions to take when the step completes",
                                  "properties": {
                                    "actions": {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "The type of the action",
                                                "enum": [
                                                  "email"
                                                ]
                                              },
                                              "options": {
                                                "type": "object",
                                                "description": "settings for the action",
                                                "additionalProperties": {
                                                  "type": "string"
                                                },
                                                "x-examples": [
                                                  {
                                                    "to": "bob@example.com",
                                                    "from": "alice@example.com"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          ]
                        },
                        {
                          "type": "object",
                          "description": "Finial step which is marked as completed successfully",
                          "properties": {
                            "label": {
                              "example": "Complete",
                              "x-examples": [
                                "Complete"
                              ],
                              "allOf": [
                                {
                                  "type": "string",
                                  "description": "Label for the step",
                                  "example": "Find units",
                                  "x-examples": [
                                    "Find units"
                                  ]
                                }
                              ]
                            },
                            "type": {
                              "example": "success",
                              "x-examples": [
                                "success"
                              ],
                              "allOf": [
                                {
                                  "type": "string",
                                  "description": "Type of workflow step",
                                  "enum": [
                                    "load",
                                    "choice",
                                    "function",
                                    "machine",
                                    "pass",
                                    "fail",
                                    "success",
                                    "user",
                                    "wait"
                                  ]
                                }
                              ]
                            },
                            "onComplete": {
                              "type": "object",
                              "description": "Actions to take when the step completes",
                              "properties": {
                                "actions": {
                                  "type": "array",
                                  "items": {
                                    "anyOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "The type of the action",
                                            "enum": [
                                              "email"
                                            ]
                                          },
                                          "options": {
                                            "type": "object",
                                            "description": "settings for the action",
                                            "additionalProperties": {
                                              "type": "string"
                                            },
                                            "x-examples": [
                                              {
                                                "to": "bob@example.com",
                                                "from": "alice@example.com"
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        },
                        {
                          "type": "object",
                          "description": "A step which run at certain times",
                          "required": [
                            "stop_at",
                            "time"
                          ],
                          "properties": {
                            "label": {
                              "example": "Wait for cable",
                              "x-examples": [
                                "Wait for cable"
                              ],
                              "allOf": [
                                {
                                  "type": "string",
                                  "description": "Label for the step",
                                  "example": "Find units",
                                  "x-examples": [
                                    "Find units"
                                  ]
                                }
                              ]
                            },
                            "type": {
                              "x-examples": [
                                "wait"
                              ],
                              "example": "wait"
                            },
                            "stop_at": {
                              "type": "integer",
                              "description": "Time in seconds to stop this task",
                              "maximum": 900,
                              "minimum": 1
                            },
                            "time": {
                              "type": "integer",
                              "description": "Time to wait before checking this step",
                              "example": 600,
                              "maximum": 900,
                              "minimum": 1
                            },
                            "listen_for": {
                              "type": "array",
                              "description": "List of events and conditions to listen for to trigger",
                              "items": {
                                "type": "object",
                                "required": [
                                  "event"
                                ],
                                "properties": {
                                  "event": {
                                    "type": "string",
                                    "description": "Name of the event to listen for",
                                    "allOf": [
                                      {
                                        "type": "string",
                                        "description": "Possible entity events",
                                        "enum": [
                                          "CON.attached",
                                          "CON.created",
                                          "CON.deleted",
                                          "CON.detached",
                                          "CON.removed",
                                          "CON.updated",
                                          "CUS.attached",
                                          "CUS.created",
                                          "CUS.deleted",
                                          "CUS.detached",
                                          "CUS.removed",
                                          "CUS.updated",
                                          "LOC.attached",
                                          "LOC.created",
                                          "LOC.deleted",
                                          "LOC.detached",
                                          "LOC.removed",
                                          "LOC.updated",
                                          "NOTE.attached",
                                          "NOTE.created",
                                          "NOTE.deleted",
                                          "NOTE.detached",
                                          "NOTE.removed",
                                          "NOTE.updated",
                                          "PART.attached",
                                          "PART.created",
                                          "PART.deleted",
                                          "PART.detached",
                                          "PART.removed",
                                          "PART.updated",
                                          "PGM.attached",
                                          "PGM.created",
                                          "PGM.deleted",
                                          "PGM.detached",
                                          "PGM.removed",
                                          "PGM.updated",
                                          "PRO.attached",
                                          "PRO.created",
                                          "PRO.deleted",
                                          "PRO.detached",
                                          "PRO.removed",
                                          "PRO.updated",
                                          "RES.attached",
                                          "RES.created",
                                          "RES.deleted",
                                          "RES.detached",
                                          "RES.removed",
                                          "RES.updated",
                                          "UNIT.attached",
                                          "UNIT.created",
                                          "UNIT.deleted",
                                          "UNIT.detached",
                                          "UNIT.removed",
                                          "UNIT.updated",
                                          "USER.attached",
                                          "USER.created",
                                          "USER.deleted",
                                          "USER.detached",
                                          "USER.removed",
                                          "USER.updated",
                                          "WKF.attached",
                                          "WKF.created",
                                          "WKF.deleted",
                                          "WKF.detached",
                                          "WKF.removed",
                                          "WKF.updated",
                                          "WOR.attached",
                                          "WOR.created",
                                          "WOR.deleted",
                                          "WOR.detached",
                                          "WOR.removed",
                                          "WOR.updated"
                                        ]
                                      }
                                    ]
                                  },
                                  "event_value": {
                                    "type": "object",
                                    "description": "The event conditions that have to be met",
                                    "allOf": [
                                      {
                                        "description": "A Step choice",
                                        "type": "object",
                                        "maxProperties": 2,
                                        "minProperties": 2,
                                        "required": [
                                          "variable"
                                        ],
                                        "properties": {
                                          "variable": {
                                            "type": "string",
                                            "description": "Context variable to check",
                                            "example": "$.parts.available",
                                            "x-examples": [
                                              "$.parts.available"
                                            ]
                                          },
                                          "greater_than_equals": {
                                            "type": "string",
                                            "description": "Value has to be greater than or equals to",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "less_than_equals": {
                                            "type": "string",
                                            "description": "Value has to be less than or equals to",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "greater_than": {
                                            "type": "string",
                                            "description": "Value has to be greater than",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "less_than": {
                                            "type": "string",
                                            "description": "Value has to be less than",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "equals": {
                                            "type": "string",
                                            "description": "Value has to equal",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "not_equals": {
                                            "type": "string",
                                            "description": "Value must not equal",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          },
                          "allOf": [
                            {
                              "type": "object",
                              "x-ui-hide": true,
                              "required": [
                                "type",
                                "label",
                                "goto"
                              ],
                              "properties": {
                                "type": {
                                  "type": "string",
                                  "description": "Type of workflow step",
                                  "enum": [
                                    "load",
                                    "choice",
                                    "function",
                                    "machine",
                                    "pass",
                                    "fail",
                                    "success",
                                    "user",
                                    "wait"
                                  ]
                                },
                                "label": {
                                  "type": "string",
                                  "description": "Label for the step",
                                  "example": "Find units",
                                  "x-examples": [
                                    "Find units"
                                  ]
                                },
                                "goto": {
                                  "type": "string",
                                  "description": "Step to move to",
                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                  "example": "complete",
                                  "x-examples": [
                                    "complete"
                                  ]
                                },
                                "goto-fail": {
                                  "type": "string",
                                  "description": "Step to transition too if this step cannot be completed",
                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                  "example": "process-fail",
                                  "x-examples": [
                                    "process-fail"
                                  ]
                                },
                                "context": {
                                  "type": "array",
                                  "description": "Initial values to set on the context",
                                  "items": {
                                    "type": "object",
                                    "required": [
                                      "key",
                                      "value"
                                    ],
                                    "properties": {
                                      "key": {
                                        "type": "string",
                                        "description": "The context key to set",
                                        "example": "$.fizz",
                                        "x-examples": [
                                          "$.fizz",
                                          "$.unit.status",
                                          "extract_fields"
                                        ]
                                      },
                                      "value": {
                                        "type": "string",
                                        "description": "Value to set",
                                        "example": "$.buzz",
                                        "x-examples": [
                                          "$.buzz",
                                          "Pending",
                                          true
                                        ]
                                      },
                                      "lock": {
                                        "type": "boolean",
                                        "description": "Prevents other steps from writing this value",
                                        "example": true
                                      },
                                      "ignore": {
                                        "type": "boolean",
                                        "description": "When trying to set a locked key, do not fail",
                                        "example": false
                                      }
                                    }
                                  }
                                },
                                "onError": {
                                  "type": "object",
                                  "description": "Action to take when step fails",
                                  "required": [
                                    "finally"
                                  ],
                                  "properties": {
                                    "retry": {
                                      "type": "integer",
                                      "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                      "minimum": 0,
                                      "maximum": 10,
                                      "example": 3,
                                      "default": 0
                                    },
                                    "finally": {
                                      "type": "object",
                                      "description": "What to do after all retries",
                                      "required": [
                                        "goto"
                                      ],
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "description": "Actions to take on failure",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        },
                                        "goto": {
                                          "type": "string",
                                          "description": "Step to transition to on failure",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "failed",
                                          "x-examples": [
                                            "failed"
                                          ]
                                        }
                                      }
                                    }
                                  }
                                },
                                "onComplete": {
                                  "type": "object",
                                  "description": "Actions to take when the step completes",
                                  "properties": {
                                    "actions": {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "The type of the action",
                                                "enum": [
                                                  "email"
                                                ]
                                              },
                                              "options": {
                                                "type": "object",
                                                "description": "settings for the action",
                                                "additionalProperties": {
                                                  "type": "string"
                                                },
                                                "x-examples": [
                                                  {
                                                    "to": "bob@example.com",
                                                    "from": "alice@example.com"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              },
              "additionalProperties": {
                "type": "object",
                "anyOf": [
                  {
                    "type": "object",
                    "description": "Close step",
                    "required": [
                      "step"
                    ],
                    "properties": {
                      "step": {
                        "type": "string",
                        "description": "Step to mark as complete",
                        "pattern": "^[a-z][a-z-]+[a-z]$",
                        "example": "complete",
                        "x-examples": [
                          "complete"
                        ]
                      }
                    },
                    "anyOf": [
                      {
                        "type": "object",
                        "description": "Require the user confirm an action. This is normally used when Niagara cannot automatically detect that a task or action has been performed.",
                        "x-nter-step-component": "confirm-action",
                        "properties": {
                          "label": {
                            "x-examples": [
                              "Confirm the device has powered off"
                            ]
                          },
                          "options": {
                            "type": "object",
                            "required": [
                              "component",
                              "payload"
                            ],
                            "properties": {
                              "component": {
                                "enum": [
                                  "confirm-action"
                                ],
                                "example": "confirm-action",
                                "x-examples": [
                                  "confirm-action"
                                ]
                              },
                              "payload": {
                                "type": "object",
                                "required": [
                                  "message"
                                ],
                                "properties": {
                                  "message": {
                                    "type": "string",
                                    "description": "The confirmation message to display to the user",
                                    "example": "Device powered off?",
                                    "x-examples": [
                                      "Device powered off?"
                                    ]
                                  },
                                  "negative_message": {
                                    "type": "string",
                                    "description": "An optional inverse message",
                                    "nullable": true,
                                    "example": "Device not functioning",
                                    "x-examples": [
                                      "Device not functioning"
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        },
                        "allOf": [
                          {
                            "type": "object",
                            "x-ui-hide": true,
                            "description": "A step which requires a user to complete",
                            "required": [
                              "type",
                              "options"
                            ],
                            "properties": {
                              "type": {
                                "example": "user",
                                "x-examples": [
                                  "user"
                                ]
                              },
                              "options": {
                                "type": "object",
                                "required": [
                                  "component",
                                  "payload"
                                ],
                                "properties": {
                                  "component": {
                                    "type": "string",
                                    "description": "Name of the function to invoke",
                                    "example": "assignUnitsFromCustomerToProject",
                                    "x-examples": [
                                      "assignUnitsFromCustomerToProject"
                                    ]
                                  },
                                  "payload": {
                                    "type": "object"
                                  }
                                }
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "required": [
                                  "type",
                                  "label",
                                  "goto"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "description": "Type of workflow step",
                                    "enum": [
                                      "load",
                                      "choice",
                                      "function",
                                      "machine",
                                      "pass",
                                      "fail",
                                      "success",
                                      "user",
                                      "wait"
                                    ]
                                  },
                                  "label": {
                                    "type": "string",
                                    "description": "Label for the step",
                                    "example": "Find units",
                                    "x-examples": [
                                      "Find units"
                                    ]
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to move to",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "complete",
                                    "x-examples": [
                                      "complete"
                                    ]
                                  },
                                  "goto-fail": {
                                    "type": "string",
                                    "description": "Step to transition too if this step cannot be completed",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "process-fail",
                                    "x-examples": [
                                      "process-fail"
                                    ]
                                  },
                                  "context": {
                                    "type": "array",
                                    "description": "Initial values to set on the context",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "key",
                                        "value"
                                      ],
                                      "properties": {
                                        "key": {
                                          "type": "string",
                                          "description": "The context key to set",
                                          "example": "$.fizz",
                                          "x-examples": [
                                            "$.fizz",
                                            "$.unit.status",
                                            "extract_fields"
                                          ]
                                        },
                                        "value": {
                                          "type": "string",
                                          "description": "Value to set",
                                          "example": "$.buzz",
                                          "x-examples": [
                                            "$.buzz",
                                            "Pending",
                                            true
                                          ]
                                        },
                                        "lock": {
                                          "type": "boolean",
                                          "description": "Prevents other steps from writing this value",
                                          "example": true
                                        },
                                        "ignore": {
                                          "type": "boolean",
                                          "description": "When trying to set a locked key, do not fail",
                                          "example": false
                                        }
                                      }
                                    }
                                  },
                                  "onError": {
                                    "type": "object",
                                    "description": "Action to take when step fails",
                                    "required": [
                                      "finally"
                                    ],
                                    "properties": {
                                      "retry": {
                                        "type": "integer",
                                        "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                        "minimum": 0,
                                        "maximum": 10,
                                        "example": 3,
                                        "default": 0
                                      },
                                      "finally": {
                                        "type": "object",
                                        "description": "What to do after all retries",
                                        "required": [
                                          "goto"
                                        ],
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "description": "Actions to take on failure",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to transition to on failure",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "failed",
                                            "x-examples": [
                                              "failed"
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "onComplete": {
                                    "type": "object",
                                    "description": "Actions to take when the step completes",
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "object",
                        "description": "Display a link or modal to a user which contains instructions from a PDF",
                        "x-nter-step-component": "follow-pdf-instructions",
                        "required": [
                          "label",
                          "payload"
                        ],
                        "properties": {
                          "label": {
                            "x-examples": [
                              "Instruct user to follow steps outlined in Apple PDF"
                            ]
                          },
                          "options": {
                            "type": "object",
                            "required": [
                              "component",
                              "payload"
                            ],
                            "properties": {
                              "component": {
                                "enum": [
                                  "follow-pds-instructions"
                                ],
                                "example": "follow-pdf-instructions",
                                "x-examples": [
                                  "follow-pdf-instructions"
                                ]
                              },
                              "payload": {
                                "type": "object",
                                "required": [
                                  "attachment_id"
                                ],
                                "properties": {
                                  "attachment_id": {
                                    "type": "string",
                                    "description": "UUID for the attachment",
                                    "format": "uuid",
                                    "example": "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7",
                                    "x-examples": [
                                      "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7"
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        },
                        "allOf": [
                          {
                            "type": "object",
                            "x-ui-hide": true,
                            "description": "A step which requires a user to complete",
                            "required": [
                              "type",
                              "options"
                            ],
                            "properties": {
                              "type": {
                                "example": "user",
                                "x-examples": [
                                  "user"
                                ]
                              },
                              "options": {
                                "type": "object",
                                "required": [
                                  "component",
                                  "payload"
                                ],
                                "properties": {
                                  "component": {
                                    "type": "string",
                                    "description": "Name of the function to invoke",
                                    "example": "assignUnitsFromCustomerToProject",
                                    "x-examples": [
                                      "assignUnitsFromCustomerToProject"
                                    ]
                                  },
                                  "payload": {
                                    "type": "object"
                                  }
                                }
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "required": [
                                  "type",
                                  "label",
                                  "goto"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "description": "Type of workflow step",
                                    "enum": [
                                      "load",
                                      "choice",
                                      "function",
                                      "machine",
                                      "pass",
                                      "fail",
                                      "success",
                                      "user",
                                      "wait"
                                    ]
                                  },
                                  "label": {
                                    "type": "string",
                                    "description": "Label for the step",
                                    "example": "Find units",
                                    "x-examples": [
                                      "Find units"
                                    ]
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to move to",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "complete",
                                    "x-examples": [
                                      "complete"
                                    ]
                                  },
                                  "goto-fail": {
                                    "type": "string",
                                    "description": "Step to transition too if this step cannot be completed",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "process-fail",
                                    "x-examples": [
                                      "process-fail"
                                    ]
                                  },
                                  "context": {
                                    "type": "array",
                                    "description": "Initial values to set on the context",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "key",
                                        "value"
                                      ],
                                      "properties": {
                                        "key": {
                                          "type": "string",
                                          "description": "The context key to set",
                                          "example": "$.fizz",
                                          "x-examples": [
                                            "$.fizz",
                                            "$.unit.status",
                                            "extract_fields"
                                          ]
                                        },
                                        "value": {
                                          "type": "string",
                                          "description": "Value to set",
                                          "example": "$.buzz",
                                          "x-examples": [
                                            "$.buzz",
                                            "Pending",
                                            true
                                          ]
                                        },
                                        "lock": {
                                          "type": "boolean",
                                          "description": "Prevents other steps from writing this value",
                                          "example": true
                                        },
                                        "ignore": {
                                          "type": "boolean",
                                          "description": "When trying to set a locked key, do not fail",
                                          "example": false
                                        }
                                      }
                                    }
                                  },
                                  "onError": {
                                    "type": "object",
                                    "description": "Action to take when step fails",
                                    "required": [
                                      "finally"
                                    ],
                                    "properties": {
                                      "retry": {
                                        "type": "integer",
                                        "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                        "minimum": 0,
                                        "maximum": 10,
                                        "example": 3,
                                        "default": 0
                                      },
                                      "finally": {
                                        "type": "object",
                                        "description": "What to do after all retries",
                                        "required": [
                                          "goto"
                                        ],
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "description": "Actions to take on failure",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to transition to on failure",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "failed",
                                            "x-examples": [
                                              "failed"
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "onComplete": {
                                    "type": "object",
                                    "description": "Actions to take when the step completes",
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "object",
                        "description": "Ask the user to manually enter (or confirm) data for an entity",
                        "x-nter-step-component": "manual-data-entry",
                        "properties": {
                          "label": {
                            "x-examples": [
                              "Enter asset tag and confirm serial number"
                            ]
                          },
                          "options": {
                            "type": "object",
                            "required": [
                              "component",
                              "payload"
                            ],
                            "properties": {
                              "component": {
                                "enum": [
                                  "manual-data-entry"
                                ],
                                "example": "manual-data-entry",
                                "x-examples": [
                                  "manual-data-entry"
                                ]
                              },
                              "payload": {
                                "type": "object",
                                "required": [
                                  "fields"
                                ],
                                "properties": {
                                  "fields": {
                                    "type": "array",
                                    "description": "Configuration for each field",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "input_type",
                                        "label",
                                        "required",
                                        "entity_field"
                                      ],
                                      "properties": {
                                        "input_type": {
                                          "type": "string",
                                          "description": "The type of input field to display",
                                          "enum": [
                                            "textbox",
                                            "input"
                                          ]
                                        },
                                        "label": {
                                          "type": "string",
                                          "description": "Label to display for the field",
                                          "example": "Asset Tag",
                                          "x-examples": [
                                            "Asset Tag"
                                          ]
                                        },
                                        "required": {
                                          "type": "boolean",
                                          "description": "Display the field as required input. Note: this is a helper function. It singles that the user is required to input data at this step. If the field is required on the entity, the user will be presented with a validation message",
                                          "example": true
                                        },
                                        "entity_field": {
                                          "type": "string",
                                          "description": "JSON Path to the field on the entity. If the path does not start with '$' then the entity on the context is assumed. Otherwise the data will be set on the context path",
                                          "example": "input_filter[?(@.key = 'asset-tag')]",
                                          "x-examples": [
                                            "input_filter[?(@.key = 'asset-tag')]"
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        },
                        "allOf": [
                          {
                            "type": "object",
                            "x-ui-hide": true,
                            "description": "A step which requires a user to complete",
                            "required": [
                              "type",
                              "options"
                            ],
                            "properties": {
                              "type": {
                                "example": "user",
                                "x-examples": [
                                  "user"
                                ]
                              },
                              "options": {
                                "type": "object",
                                "required": [
                                  "component",
                                  "payload"
                                ],
                                "properties": {
                                  "component": {
                                    "type": "string",
                                    "description": "Name of the function to invoke",
                                    "example": "assignUnitsFromCustomerToProject",
                                    "x-examples": [
                                      "assignUnitsFromCustomerToProject"
                                    ]
                                  },
                                  "payload": {
                                    "type": "object"
                                  }
                                }
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "required": [
                                  "type",
                                  "label",
                                  "goto"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "description": "Type of workflow step",
                                    "enum": [
                                      "load",
                                      "choice",
                                      "function",
                                      "machine",
                                      "pass",
                                      "fail",
                                      "success",
                                      "user",
                                      "wait"
                                    ]
                                  },
                                  "label": {
                                    "type": "string",
                                    "description": "Label for the step",
                                    "example": "Find units",
                                    "x-examples": [
                                      "Find units"
                                    ]
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to move to",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "complete",
                                    "x-examples": [
                                      "complete"
                                    ]
                                  },
                                  "goto-fail": {
                                    "type": "string",
                                    "description": "Step to transition too if this step cannot be completed",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "process-fail",
                                    "x-examples": [
                                      "process-fail"
                                    ]
                                  },
                                  "context": {
                                    "type": "array",
                                    "description": "Initial values to set on the context",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "key",
                                        "value"
                                      ],
                                      "properties": {
                                        "key": {
                                          "type": "string",
                                          "description": "The context key to set",
                                          "example": "$.fizz",
                                          "x-examples": [
                                            "$.fizz",
                                            "$.unit.status",
                                            "extract_fields"
                                          ]
                                        },
                                        "value": {
                                          "type": "string",
                                          "description": "Value to set",
                                          "example": "$.buzz",
                                          "x-examples": [
                                            "$.buzz",
                                            "Pending",
                                            true
                                          ]
                                        },
                                        "lock": {
                                          "type": "boolean",
                                          "description": "Prevents other steps from writing this value",
                                          "example": true
                                        },
                                        "ignore": {
                                          "type": "boolean",
                                          "description": "When trying to set a locked key, do not fail",
                                          "example": false
                                        }
                                      }
                                    }
                                  },
                                  "onError": {
                                    "type": "object",
                                    "description": "Action to take when step fails",
                                    "required": [
                                      "finally"
                                    ],
                                    "properties": {
                                      "retry": {
                                        "type": "integer",
                                        "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                        "minimum": 0,
                                        "maximum": 10,
                                        "example": 3,
                                        "default": 0
                                      },
                                      "finally": {
                                        "type": "object",
                                        "description": "What to do after all retries",
                                        "required": [
                                          "goto"
                                        ],
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "description": "Actions to take on failure",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to transition to on failure",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "failed",
                                            "x-examples": [
                                              "failed"
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "onComplete": {
                                    "type": "object",
                                    "description": "Actions to take when the step completes",
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "object",
                        "description": "Ask the user to follow a list and check off boxes",
                        "x-nter-step-component": "task-list",
                        "properties": {
                          "label": {
                            "x-examples": [
                              "Enter asset tag and confirm serial number"
                            ]
                          },
                          "options": {
                            "type": "object",
                            "required": [
                              "component",
                              "payload"
                            ],
                            "properties": {
                              "component": {
                                "enum": [
                                  "task-list"
                                ],
                                "example": "task-list",
                                "x-examples": [
                                  "task-list"
                                ]
                              },
                              "payload": {
                                "type": "object",
                                "required": [
                                  "items"
                                ],
                                "properties": {
                                  "is_qc": {
                                    "type": "boolean",
                                    "description": "Flags this list as a QC task list. This means that a different user can close the task to one previously on the context"
                                  },
                                  "items": {
                                    "type": "array",
                                    "description": "Configuration for each task list item",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "label",
                                        "help",
                                        "evaluated",
                                        "na_option"
                                      ],
                                      "properties": {
                                        "label": {
                                          "type": "string",
                                          "description": "Label to display for the field",
                                          "example": "Asset Tag placement",
                                          "x-examples": [
                                            "Asset Tag placement"
                                          ]
                                        },
                                        "slug": {
                                          "type": "string",
                                          "description": "Slug for the item (Auto-generated from the label)",
                                          "readOnly": true,
                                          "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$",
                                          "example": "asset-tag-placement",
                                          "x-examples": [
                                            "asset-tag-placement"
                                          ]
                                        },
                                        "help": {
                                          "type": "string",
                                          "description": "Message describing what is needed to be checked",
                                          "example": "Asset Tag attached to the unit in the correct position",
                                          "x-examples": [
                                            "Asset Tag attached to the unit in the correct position"
                                          ]
                                        },
                                        "evaluated": {
                                          "type": "boolean",
                                          "description": "When set to true, this will fail the step if the value for the item is false or N/A",
                                          "example": true
                                        },
                                        "na_field": {
                                          "type": "boolean",
                                          "description": "Allow the user to select the N/A option when checking off the list",
                                          "example": true
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        },
                        "allOf": [
                          {
                            "type": "object",
                            "x-ui-hide": true,
                            "description": "A step which requires a user to complete",
                            "required": [
                              "type",
                              "options"
                            ],
                            "properties": {
                              "type": {
                                "example": "user",
                                "x-examples": [
                                  "user"
                                ]
                              },
                              "options": {
                                "type": "object",
                                "required": [
                                  "component",
                                  "payload"
                                ],
                                "properties": {
                                  "component": {
                                    "type": "string",
                                    "description": "Name of the function to invoke",
                                    "example": "assignUnitsFromCustomerToProject",
                                    "x-examples": [
                                      "assignUnitsFromCustomerToProject"
                                    ]
                                  },
                                  "payload": {
                                    "type": "object"
                                  }
                                }
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "required": [
                                  "type",
                                  "label",
                                  "goto"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "description": "Type of workflow step",
                                    "enum": [
                                      "load",
                                      "choice",
                                      "function",
                                      "machine",
                                      "pass",
                                      "fail",
                                      "success",
                                      "user",
                                      "wait"
                                    ]
                                  },
                                  "label": {
                                    "type": "string",
                                    "description": "Label for the step",
                                    "example": "Find units",
                                    "x-examples": [
                                      "Find units"
                                    ]
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to move to",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "complete",
                                    "x-examples": [
                                      "complete"
                                    ]
                                  },
                                  "goto-fail": {
                                    "type": "string",
                                    "description": "Step to transition too if this step cannot be completed",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "process-fail",
                                    "x-examples": [
                                      "process-fail"
                                    ]
                                  },
                                  "context": {
                                    "type": "array",
                                    "description": "Initial values to set on the context",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "key",
                                        "value"
                                      ],
                                      "properties": {
                                        "key": {
                                          "type": "string",
                                          "description": "The context key to set",
                                          "example": "$.fizz",
                                          "x-examples": [
                                            "$.fizz",
                                            "$.unit.status",
                                            "extract_fields"
                                          ]
                                        },
                                        "value": {
                                          "type": "string",
                                          "description": "Value to set",
                                          "example": "$.buzz",
                                          "x-examples": [
                                            "$.buzz",
                                            "Pending",
                                            true
                                          ]
                                        },
                                        "lock": {
                                          "type": "boolean",
                                          "description": "Prevents other steps from writing this value",
                                          "example": true
                                        },
                                        "ignore": {
                                          "type": "boolean",
                                          "description": "When trying to set a locked key, do not fail",
                                          "example": false
                                        }
                                      }
                                    }
                                  },
                                  "onError": {
                                    "type": "object",
                                    "description": "Action to take when step fails",
                                    "required": [
                                      "finally"
                                    ],
                                    "properties": {
                                      "retry": {
                                        "type": "integer",
                                        "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                        "minimum": 0,
                                        "maximum": 10,
                                        "example": 3,
                                        "default": 0
                                      },
                                      "finally": {
                                        "type": "object",
                                        "description": "What to do after all retries",
                                        "required": [
                                          "goto"
                                        ],
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "description": "Actions to take on failure",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to transition to on failure",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "failed",
                                            "x-examples": [
                                              "failed"
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "onComplete": {
                                    "type": "object",
                                    "description": "Actions to take when the step completes",
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "object",
                        "description": "Run the ACE-IOS application to provision iOS devices or ",
                        "properties": {
                          "type": {
                            "example": "machine",
                            "x-examples": [
                              "machine"
                            ]
                          },
                          "label": {
                            "x-examples": [
                              "Run Application"
                            ]
                          },
                          "options": {
                            "type": "object",
                            "required": [
                              "application",
                              "configuration"
                            ],
                            "properties": {
                              "configuration": {
                                "type": "object",
                                "description": "ACE Configuration options",
                                "properties": {
                                  "pairing_cert": {
                                    "type": "string",
                                    "format": "base64",
                                    "description": "Contents of a *.crt file exported from Apple Configurator or MDM",
                                    "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                    "x-examples": [
                                      "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                    ],
                                    "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                  },
                                  "pairing_key": {
                                    "type": "string",
                                    "format": "base64",
                                    "description": "Contents of a *.der file exported from Apple Configurator or MDM",
                                    "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                    "x-examples": [
                                      "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                    ],
                                    "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                  },
                                  "restore_device": {
                                    "type": "boolean",
                                    "description": "Restore device to factory defaults"
                                  },
                                  "automated_enrollment": {
                                    "type": "boolean",
                                    "description": "Automatically enroll the device to MDM"
                                  },
                                  "mdm": {
                                    "type": "object",
                                    "format": "base64",
                                    "description": "The settings for the Customers MDM",
                                    "properties": {
                                      "vendor": {
                                        "type": "string",
                                        "description": "MDM vendor. Currently, supported values are AirWatch, JAMF, and Meraki.",
                                        "enum": [
                                          "AirWatch",
                                          "JAMF",
                                          "Meraki"
                                        ]
                                      },
                                      "console_url": {
                                        "type": "string",
                                        "format": "uri",
                                        "description": "Base URL for HTTP requests",
                                        "example": "http://jamf.zones.com",
                                        "x-examples": [
                                          "http://jamf.zones.com"
                                        ]
                                      },
                                      "user": {
                                        "type": "string",
                                        "description": "MDM User name",
                                        "example": "NterpriseBob",
                                        "x-examples": [
                                          "NterpriseBob"
                                        ]
                                      },
                                      "password": {
                                        "type": "string",
                                        "description": "MDM password"
                                      },
                                      "tenant_code": {
                                        "type": "string",
                                        "description": "MDM authentication key",
                                        "example": "nterprise",
                                        "x-examples": [
                                          "nterprise"
                                        ]
                                      },
                                      "set_asset_tag": {
                                        "type": "string",
                                        "description": "Sets the devices Asset tag based on a field from the unit",
                                        "example": "$._entity.input_filter[?(@.key = 'asset-tag')]",
                                        "x-examples": [
                                          "$._entity.input_filter[?(@.key = 'asset-tag')]"
                                        ]
                                      }
                                    }
                                  },
                                  "field_mappings": {
                                    "type": "array",
                                    "description": "List of fields to map to the device",
                                    "items": {
                                      "type": "object",
                                      "properties": {
                                        "from": {
                                          "type": "string",
                                          "description": "The field reported from ACE",
                                          "enum": [
                                            "serial_number",
                                            "name",
                                            "ecid",
                                            "udid",
                                            "configurator_serial",
                                            "ios",
                                            "model",
                                            "storage",
                                            "wifi_mac",
                                            "bt_mac",
                                            "ethernet_mac",
                                            "thundersync_serial",
                                            "iccid",
                                            "iccid2",
                                            "imei",
                                            "imei2",
                                            "missed_profiles",
                                            "missed_apps",
                                            "icon_list_regex",
                                            "icon_layout",
                                            "bat_capacity"
                                          ]
                                        },
                                        "to": {
                                          "type": "string",
                                          "description": "Field to set on the entity",
                                          "example": "$._entity.input_filter[?(@.key = 'serial-number')]",
                                          "x-examples": [
                                            "$._entity.input_filter[?(@.key = 'serial-number')]"
                                          ]
                                        }
                                      }
                                    }
                                  },
                                  "wait_for_apps": {
                                    "type": "array",
                                    "description": "A list of applications needed to be installed on the device. This will cause the extension to poll the device for installed applications. Once all the applications have been installed, this step can be completed",
                                    "items": {
                                      "type": "string",
                                      "format": "uri",
                                      "example": "com.apple.itunes",
                                      "x-examples": [
                                        "com.apple.itunes"
                                      ]
                                    }
                                  },
                                  "wait_for_battery_charge": {
                                    "type": "integer",
                                    "description": "The required battery percentage needed before this step can move on",
                                    "minimum": 0,
                                    "maximum": 100
                                  }
                                }
                              }
                            }
                          }
                        },
                        "allOf": [
                          {
                            "type": "object",
                            "description": "Run an application extension",
                            "properties": {
                              "label": {
                                "x-examples": [
                                  "Run Application"
                                ]
                              },
                              "options": {
                                "type": "object",
                                "required": [
                                  "application",
                                  "configuration"
                                ],
                                "properties": {
                                  "application": {
                                    "type": "object",
                                    "required": [
                                      "application_id",
                                      "platforms"
                                    ],
                                    "properties": {
                                      "application_id": {
                                        "type": "string",
                                        "description": "Registered application ID",
                                        "example": "ace-ios",
                                        "x-examples": [
                                          "ace-ios"
                                        ]
                                      },
                                      "platforms": {
                                        "type": "array",
                                        "description": "Allowed platforms the application can run on",
                                        "items": {
                                          "type": "object",
                                          "required": [
                                            "platform",
                                            "arch"
                                          ],
                                          "properties": {
                                            "platform": {
                                              "type": "string",
                                              "description": "The platform (OS) the application can run on",
                                              "enum": [
                                                "aix",
                                                "darwin",
                                                "freebsd",
                                                "linux",
                                                "openbsd",
                                                "sunos",
                                                "win32"
                                              ]
                                            },
                                            "arch": {
                                              "type": "string",
                                              "description": "The CPU architecture needed to run the application",
                                              "enum": [
                                                "arm",
                                                "arm64",
                                                "ia32",
                                                "mips",
                                                "mipsel",
                                                "ppc",
                                                "ppc64",
                                                "s390",
                                                "s390x",
                                                "x32",
                                                "x64"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "required": [
                                  "type",
                                  "label",
                                  "goto"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "description": "Type of workflow step",
                                    "enum": [
                                      "load",
                                      "choice",
                                      "function",
                                      "machine",
                                      "pass",
                                      "fail",
                                      "success",
                                      "user",
                                      "wait"
                                    ]
                                  },
                                  "label": {
                                    "type": "string",
                                    "description": "Label for the step",
                                    "example": "Find units",
                                    "x-examples": [
                                      "Find units"
                                    ]
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to move to",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "complete",
                                    "x-examples": [
                                      "complete"
                                    ]
                                  },
                                  "goto-fail": {
                                    "type": "string",
                                    "description": "Step to transition too if this step cannot be completed",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "process-fail",
                                    "x-examples": [
                                      "process-fail"
                                    ]
                                  },
                                  "context": {
                                    "type": "array",
                                    "description": "Initial values to set on the context",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "key",
                                        "value"
                                      ],
                                      "properties": {
                                        "key": {
                                          "type": "string",
                                          "description": "The context key to set",
                                          "example": "$.fizz",
                                          "x-examples": [
                                            "$.fizz",
                                            "$.unit.status",
                                            "extract_fields"
                                          ]
                                        },
                                        "value": {
                                          "type": "string",
                                          "description": "Value to set",
                                          "example": "$.buzz",
                                          "x-examples": [
                                            "$.buzz",
                                            "Pending",
                                            true
                                          ]
                                        },
                                        "lock": {
                                          "type": "boolean",
                                          "description": "Prevents other steps from writing this value",
                                          "example": true
                                        },
                                        "ignore": {
                                          "type": "boolean",
                                          "description": "When trying to set a locked key, do not fail",
                                          "example": false
                                        }
                                      }
                                    }
                                  },
                                  "onError": {
                                    "type": "object",
                                    "description": "Action to take when step fails",
                                    "required": [
                                      "finally"
                                    ],
                                    "properties": {
                                      "retry": {
                                        "type": "integer",
                                        "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                        "minimum": 0,
                                        "maximum": 10,
                                        "example": 3,
                                        "default": 0
                                      },
                                      "finally": {
                                        "type": "object",
                                        "description": "What to do after all retries",
                                        "required": [
                                          "goto"
                                        ],
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "description": "Actions to take on failure",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to transition to on failure",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "failed",
                                            "x-examples": [
                                              "failed"
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "onComplete": {
                                    "type": "object",
                                    "description": "Actions to take when the step completes",
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "object",
                        "properties": {
                          "label": {
                            "example": "Is device ok?",
                            "x-examples": [
                              "Is device ok?"
                            ]
                          },
                          "type": {
                            "example": "choice",
                            "x-examples": [
                              "choice"
                            ]
                          },
                          "choices": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "required": [
                                "goto"
                              ],
                              "maxProperties": 2,
                              "minProperties": 2,
                              "maximum": 20,
                              "properties": {
                                "and": {
                                  "type": "array",
                                  "description": "All choices must be satisfied",
                                  "maximum": 5,
                                  "items": {
                                    "description": "A Step choice",
                                    "type": "object",
                                    "maxProperties": 2,
                                    "minProperties": 2,
                                    "required": [
                                      "variable"
                                    ],
                                    "properties": {
                                      "variable": {
                                        "type": "string",
                                        "description": "Context variable to check",
                                        "example": "$.parts.available",
                                        "x-examples": [
                                          "$.parts.available"
                                        ]
                                      },
                                      "greater_than_equals": {
                                        "type": "string",
                                        "description": "Value has to be greater than or equals to",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "less_than_equals": {
                                        "type": "string",
                                        "description": "Value has to be less than or equals to",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "greater_than": {
                                        "type": "string",
                                        "description": "Value has to be greater than",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "less_than": {
                                        "type": "string",
                                        "description": "Value has to be less than",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "equals": {
                                        "type": "string",
                                        "description": "Value has to equal",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "not_equals": {
                                        "type": "string",
                                        "description": "Value must not equal",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      }
                                    }
                                  }
                                },
                                "or": {
                                  "type": "array",
                                  "description": "Any of these choices must be satisfied",
                                  "maximum": 5,
                                  "items": {
                                    "description": "A Step choice",
                                    "type": "object",
                                    "maxProperties": 2,
                                    "minProperties": 2,
                                    "required": [
                                      "variable"
                                    ],
                                    "properties": {
                                      "variable": {
                                        "type": "string",
                                        "description": "Context variable to check",
                                        "example": "$.parts.available",
                                        "x-examples": [
                                          "$.parts.available"
                                        ]
                                      },
                                      "greater_than_equals": {
                                        "type": "string",
                                        "description": "Value has to be greater than or equals to",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "less_than_equals": {
                                        "type": "string",
                                        "description": "Value has to be less than or equals to",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "greater_than": {
                                        "type": "string",
                                        "description": "Value has to be greater than",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "less_than": {
                                        "type": "string",
                                        "description": "Value has to be less than",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "equals": {
                                        "type": "string",
                                        "description": "Value has to equal",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "not_equals": {
                                        "type": "string",
                                        "description": "Value must not equal",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      }
                                    }
                                  }
                                },
                                "not": {
                                  "type": "array",
                                  "description": "None of these choices must be satisfied",
                                  "maximum": 5,
                                  "items": {
                                    "description": "A Step choice",
                                    "type": "object",
                                    "maxProperties": 2,
                                    "minProperties": 2,
                                    "required": [
                                      "variable"
                                    ],
                                    "properties": {
                                      "variable": {
                                        "type": "string",
                                        "description": "Context variable to check",
                                        "example": "$.parts.available",
                                        "x-examples": [
                                          "$.parts.available"
                                        ]
                                      },
                                      "greater_than_equals": {
                                        "type": "string",
                                        "description": "Value has to be greater than or equals to",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "less_than_equals": {
                                        "type": "string",
                                        "description": "Value has to be less than or equals to",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "greater_than": {
                                        "type": "string",
                                        "description": "Value has to be greater than",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "less_than": {
                                        "type": "string",
                                        "description": "Value has to be less than",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "equals": {
                                        "type": "string",
                                        "description": "Value has to equal",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "not_equals": {
                                        "type": "string",
                                        "description": "Value must not equal",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      }
                                    }
                                  }
                                },
                                "goto": {
                                  "description": "Step to goto when condition is met",
                                  "allOf": [
                                    {
                                      "type": "string",
                                      "description": "Step to move to",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "complete",
                                      "x-examples": [
                                        "complete"
                                      ]
                                    }
                                  ]
                                }
                              }
                            }
                          },
                          "goto": {
                            "description": "Default step to goto when no choice can be made"
                          }
                        },
                        "allOf": [
                          {
                            "type": "object",
                            "x-ui-hide": true,
                            "required": [
                              "type",
                              "label",
                              "goto"
                            ],
                            "properties": {
                              "type": {
                                "type": "string",
                                "description": "Type of workflow step",
                                "enum": [
                                  "load",
                                  "choice",
                                  "function",
                                  "machine",
                                  "pass",
                                  "fail",
                                  "success",
                                  "user",
                                  "wait"
                                ]
                              },
                              "label": {
                                "type": "string",
                                "description": "Label for the step",
                                "example": "Find units",
                                "x-examples": [
                                  "Find units"
                                ]
                              },
                              "goto": {
                                "type": "string",
                                "description": "Step to move to",
                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                "example": "complete",
                                "x-examples": [
                                  "complete"
                                ]
                              },
                              "goto-fail": {
                                "type": "string",
                                "description": "Step to transition too if this step cannot be completed",
                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                "example": "process-fail",
                                "x-examples": [
                                  "process-fail"
                                ]
                              },
                              "context": {
                                "type": "array",
                                "description": "Initial values to set on the context",
                                "items": {
                                  "type": "object",
                                  "required": [
                                    "key",
                                    "value"
                                  ],
                                  "properties": {
                                    "key": {
                                      "type": "string",
                                      "description": "The context key to set",
                                      "example": "$.fizz",
                                      "x-examples": [
                                        "$.fizz",
                                        "$.unit.status",
                                        "extract_fields"
                                      ]
                                    },
                                    "value": {
                                      "type": "string",
                                      "description": "Value to set",
                                      "example": "$.buzz",
                                      "x-examples": [
                                        "$.buzz",
                                        "Pending",
                                        true
                                      ]
                                    },
                                    "lock": {
                                      "type": "boolean",
                                      "description": "Prevents other steps from writing this value",
                                      "example": true
                                    },
                                    "ignore": {
                                      "type": "boolean",
                                      "description": "When trying to set a locked key, do not fail",
                                      "example": false
                                    }
                                  }
                                }
                              },
                              "onError": {
                                "type": "object",
                                "description": "Action to take when step fails",
                                "required": [
                                  "finally"
                                ],
                                "properties": {
                                  "retry": {
                                    "type": "integer",
                                    "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                    "minimum": 0,
                                    "maximum": 10,
                                    "example": 3,
                                    "default": 0
                                  },
                                  "finally": {
                                    "type": "object",
                                    "description": "What to do after all retries",
                                    "required": [
                                      "goto"
                                    ],
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "description": "Actions to take on failure",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      },
                                      "goto": {
                                        "type": "string",
                                        "description": "Step to transition to on failure",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "failed",
                                        "x-examples": [
                                          "failed"
                                        ]
                                      }
                                    }
                                  }
                                }
                              },
                              "onComplete": {
                                "type": "object",
                                "description": "Actions to take when the step completes",
                                "properties": {
                                  "actions": {
                                    "type": "array",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "The type of the action",
                                              "enum": [
                                                "email"
                                              ]
                                            },
                                            "options": {
                                              "type": "object",
                                              "description": "settings for the action",
                                              "additionalProperties": {
                                                "type": "string"
                                              },
                                              "x-examples": [
                                                {
                                                  "to": "bob@example.com",
                                                  "from": "alice@example.com"
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "object",
                        "description": "Finial step which is marked as failed",
                        "properties": {
                          "label": {
                            "example": "Failed",
                            "x-examples": [
                              "Failed"
                            ],
                            "allOf": [
                              {
                                "type": "string",
                                "description": "Label for the step",
                                "example": "Find units",
                                "x-examples": [
                                  "Find units"
                                ]
                              }
                            ]
                          },
                          "type": {
                            "example": "fail",
                            "x-examples": [
                              "fail"
                            ],
                            "allOf": [
                              {
                                "type": "string",
                                "description": "Type of workflow step",
                                "enum": [
                                  "load",
                                  "choice",
                                  "function",
                                  "machine",
                                  "pass",
                                  "fail",
                                  "success",
                                  "user",
                                  "wait"
                                ]
                              }
                            ]
                          },
                          "onComplete": {
                            "type": "object",
                            "description": "Actions to take when the step completes",
                            "properties": {
                              "actions": {
                                "type": "array",
                                "items": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "The type of the action",
                                          "enum": [
                                            "email"
                                          ]
                                        },
                                        "options": {
                                          "type": "object",
                                          "description": "settings for the action",
                                          "additionalProperties": {
                                            "type": "string"
                                          },
                                          "x-examples": [
                                            {
                                              "to": "bob@example.com",
                                              "from": "alice@example.com"
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          }
                        }
                      },
                      {
                        "type": "object",
                        "description": "Allows executing actions with out performing any function",
                        "properties": {
                          "label": {
                            "example": "Send email to project manager",
                            "x-examples": [
                              "Send email to project manager"
                            ]
                          },
                          "type": {
                            "example": "pass",
                            "x-examples": [
                              "pass"
                            ],
                            "allOf": [
                              {
                                "type": "string",
                                "description": "Type of workflow step",
                                "enum": [
                                  "load",
                                  "choice",
                                  "function",
                                  "machine",
                                  "pass",
                                  "fail",
                                  "success",
                                  "user",
                                  "wait"
                                ]
                              }
                            ]
                          }
                        },
                        "allOf": [
                          {
                            "type": "object",
                            "x-ui-hide": true,
                            "required": [
                              "type",
                              "label",
                              "goto"
                            ],
                            "properties": {
                              "type": {
                                "type": "string",
                                "description": "Type of workflow step",
                                "enum": [
                                  "load",
                                  "choice",
                                  "function",
                                  "machine",
                                  "pass",
                                  "fail",
                                  "success",
                                  "user",
                                  "wait"
                                ]
                              },
                              "label": {
                                "type": "string",
                                "description": "Label for the step",
                                "example": "Find units",
                                "x-examples": [
                                  "Find units"
                                ]
                              },
                              "goto": {
                                "type": "string",
                                "description": "Step to move to",
                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                "example": "complete",
                                "x-examples": [
                                  "complete"
                                ]
                              },
                              "goto-fail": {
                                "type": "string",
                                "description": "Step to transition too if this step cannot be completed",
                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                "example": "process-fail",
                                "x-examples": [
                                  "process-fail"
                                ]
                              },
                              "context": {
                                "type": "array",
                                "description": "Initial values to set on the context",
                                "items": {
                                  "type": "object",
                                  "required": [
                                    "key",
                                    "value"
                                  ],
                                  "properties": {
                                    "key": {
                                      "type": "string",
                                      "description": "The context key to set",
                                      "example": "$.fizz",
                                      "x-examples": [
                                        "$.fizz",
                                        "$.unit.status",
                                        "extract_fields"
                                      ]
                                    },
                                    "value": {
                                      "type": "string",
                                      "description": "Value to set",
                                      "example": "$.buzz",
                                      "x-examples": [
                                        "$.buzz",
                                        "Pending",
                                        true
                                      ]
                                    },
                                    "lock": {
                                      "type": "boolean",
                                      "description": "Prevents other steps from writing this value",
                                      "example": true
                                    },
                                    "ignore": {
                                      "type": "boolean",
                                      "description": "When trying to set a locked key, do not fail",
                                      "example": false
                                    }
                                  }
                                }
                              },
                              "onError": {
                                "type": "object",
                                "description": "Action to take when step fails",
                                "required": [
                                  "finally"
                                ],
                                "properties": {
                                  "retry": {
                                    "type": "integer",
                                    "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                    "minimum": 0,
                                    "maximum": 10,
                                    "example": 3,
                                    "default": 0
                                  },
                                  "finally": {
                                    "type": "object",
                                    "description": "What to do after all retries",
                                    "required": [
                                      "goto"
                                    ],
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "description": "Actions to take on failure",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      },
                                      "goto": {
                                        "type": "string",
                                        "description": "Step to transition to on failure",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "failed",
                                        "x-examples": [
                                          "failed"
                                        ]
                                      }
                                    }
                                  }
                                }
                              },
                              "onComplete": {
                                "type": "object",
                                "description": "Actions to take when the step completes",
                                "properties": {
                                  "actions": {
                                    "type": "array",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "The type of the action",
                                              "enum": [
                                                "email"
                                              ]
                                            },
                                            "options": {
                                              "type": "object",
                                              "description": "settings for the action",
                                              "additionalProperties": {
                                                "type": "string"
                                              },
                                              "x-examples": [
                                                {
                                                  "to": "bob@example.com",
                                                  "from": "alice@example.com"
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "object",
                        "description": "Finial step which is marked as completed successfully",
                        "properties": {
                          "label": {
                            "example": "Complete",
                            "x-examples": [
                              "Complete"
                            ],
                            "allOf": [
                              {
                                "type": "string",
                                "description": "Label for the step",
                                "example": "Find units",
                                "x-examples": [
                                  "Find units"
                                ]
                              }
                            ]
                          },
                          "type": {
                            "example": "success",
                            "x-examples": [
                              "success"
                            ],
                            "allOf": [
                              {
                                "type": "string",
                                "description": "Type of workflow step",
                                "enum": [
                                  "load",
                                  "choice",
                                  "function",
                                  "machine",
                                  "pass",
                                  "fail",
                                  "success",
                                  "user",
                                  "wait"
                                ]
                              }
                            ]
                          },
                          "onComplete": {
                            "type": "object",
                            "description": "Actions to take when the step completes",
                            "properties": {
                              "actions": {
                                "type": "array",
                                "items": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "The type of the action",
                                          "enum": [
                                            "email"
                                          ]
                                        },
                                        "options": {
                                          "type": "object",
                                          "description": "settings for the action",
                                          "additionalProperties": {
                                            "type": "string"
                                          },
                                          "x-examples": [
                                            {
                                              "to": "bob@example.com",
                                              "from": "alice@example.com"
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          }
                        }
                      },
                      {
                        "type": "object",
                        "description": "A step which run at certain times",
                        "required": [
                          "stop_at",
                          "time"
                        ],
                        "properties": {
                          "label": {
                            "example": "Wait for cable",
                            "x-examples": [
                              "Wait for cable"
                            ],
                            "allOf": [
                              {
                                "type": "string",
                                "description": "Label for the step",
                                "example": "Find units",
                                "x-examples": [
                                  "Find units"
                                ]
                              }
                            ]
                          },
                          "type": {
                            "x-examples": [
                              "wait"
                            ],
                            "example": "wait"
                          },
                          "stop_at": {
                            "type": "integer",
                            "description": "Time in seconds to stop this task",
                            "maximum": 900,
                            "minimum": 1
                          },
                          "time": {
                            "type": "integer",
                            "description": "Time to wait before checking this step",
                            "example": 600,
                            "maximum": 900,
                            "minimum": 1
                          },
                          "listen_for": {
                            "type": "array",
                            "description": "List of events and conditions to listen for to trigger",
                            "items": {
                              "type": "object",
                              "required": [
                                "event"
                              ],
                              "properties": {
                                "event": {
                                  "type": "string",
                                  "description": "Name of the event to listen for",
                                  "allOf": [
                                    {
                                      "type": "string",
                                      "description": "Possible entity events",
                                      "enum": [
                                        "CON.attached",
                                        "CON.created",
                                        "CON.deleted",
                                        "CON.detached",
                                        "CON.removed",
                                        "CON.updated",
                                        "CUS.attached",
                                        "CUS.created",
                                        "CUS.deleted",
                                        "CUS.detached",
                                        "CUS.removed",
                                        "CUS.updated",
                                        "LOC.attached",
                                        "LOC.created",
                                        "LOC.deleted",
                                        "LOC.detached",
                                        "LOC.removed",
                                        "LOC.updated",
                                        "NOTE.attached",
                                        "NOTE.created",
                                        "NOTE.deleted",
                                        "NOTE.detached",
                                        "NOTE.removed",
                                        "NOTE.updated",
                                        "PART.attached",
                                        "PART.created",
                                        "PART.deleted",
                                        "PART.detached",
                                        "PART.removed",
                                        "PART.updated",
                                        "PGM.attached",
                                        "PGM.created",
                                        "PGM.deleted",
                                        "PGM.detached",
                                        "PGM.removed",
                                        "PGM.updated",
                                        "PRO.attached",
                                        "PRO.created",
                                        "PRO.deleted",
                                        "PRO.detached",
                                        "PRO.removed",
                                        "PRO.updated",
                                        "RES.attached",
                                        "RES.created",
                                        "RES.deleted",
                                        "RES.detached",
                                        "RES.removed",
                                        "RES.updated",
                                        "UNIT.attached",
                                        "UNIT.created",
                                        "UNIT.deleted",
                                        "UNIT.detached",
                                        "UNIT.removed",
                                        "UNIT.updated",
                                        "USER.attached",
                                        "USER.created",
                                        "USER.deleted",
                                        "USER.detached",
                                        "USER.removed",
                                        "USER.updated",
                                        "WKF.attached",
                                        "WKF.created",
                                        "WKF.deleted",
                                        "WKF.detached",
                                        "WKF.removed",
                                        "WKF.updated",
                                        "WOR.attached",
                                        "WOR.created",
                                        "WOR.deleted",
                                        "WOR.detached",
                                        "WOR.removed",
                                        "WOR.updated"
                                      ]
                                    }
                                  ]
                                },
                                "event_value": {
                                  "type": "object",
                                  "description": "The event conditions that have to be met",
                                  "allOf": [
                                    {
                                      "description": "A Step choice",
                                      "type": "object",
                                      "maxProperties": 2,
                                      "minProperties": 2,
                                      "required": [
                                        "variable"
                                      ],
                                      "properties": {
                                        "variable": {
                                          "type": "string",
                                          "description": "Context variable to check",
                                          "example": "$.parts.available",
                                          "x-examples": [
                                            "$.parts.available"
                                          ]
                                        },
                                        "greater_than_equals": {
                                          "type": "string",
                                          "description": "Value has to be greater than or equals to",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "less_than_equals": {
                                          "type": "string",
                                          "description": "Value has to be less than or equals to",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "greater_than": {
                                          "type": "string",
                                          "description": "Value has to be greater than",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "less_than": {
                                          "type": "string",
                                          "description": "Value has to be less than",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "equals": {
                                          "type": "string",
                                          "description": "Value has to equal",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "not_equals": {
                                          "type": "string",
                                          "description": "Value must not equal",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          }
                        },
                        "allOf": [
                          {
                            "type": "object",
                            "x-ui-hide": true,
                            "required": [
                              "type",
                              "label",
                              "goto"
                            ],
                            "properties": {
                              "type": {
                                "type": "string",
                                "description": "Type of workflow step",
                                "enum": [
                                  "load",
                                  "choice",
                                  "function",
                                  "machine",
                                  "pass",
                                  "fail",
                                  "success",
                                  "user",
                                  "wait"
                                ]
                              },
                              "label": {
                                "type": "string",
                                "description": "Label for the step",
                                "example": "Find units",
                                "x-examples": [
                                  "Find units"
                                ]
                              },
                              "goto": {
                                "type": "string",
                                "description": "Step to move to",
                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                "example": "complete",
                                "x-examples": [
                                  "complete"
                                ]
                              },
                              "goto-fail": {
                                "type": "string",
                                "description": "Step to transition too if this step cannot be completed",
                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                "example": "process-fail",
                                "x-examples": [
                                  "process-fail"
                                ]
                              },
                              "context": {
                                "type": "array",
                                "description": "Initial values to set on the context",
                                "items": {
                                  "type": "object",
                                  "required": [
                                    "key",
                                    "value"
                                  ],
                                  "properties": {
                                    "key": {
                                      "type": "string",
                                      "description": "The context key to set",
                                      "example": "$.fizz",
                                      "x-examples": [
                                        "$.fizz",
                                        "$.unit.status",
                                        "extract_fields"
                                      ]
                                    },
                                    "value": {
                                      "type": "string",
                                      "description": "Value to set",
                                      "example": "$.buzz",
                                      "x-examples": [
                                        "$.buzz",
                                        "Pending",
                                        true
                                      ]
                                    },
                                    "lock": {
                                      "type": "boolean",
                                      "description": "Prevents other steps from writing this value",
                                      "example": true
                                    },
                                    "ignore": {
                                      "type": "boolean",
                                      "description": "When trying to set a locked key, do not fail",
                                      "example": false
                                    }
                                  }
                                }
                              },
                              "onError": {
                                "type": "object",
                                "description": "Action to take when step fails",
                                "required": [
                                  "finally"
                                ],
                                "properties": {
                                  "retry": {
                                    "type": "integer",
                                    "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                    "minimum": 0,
                                    "maximum": 10,
                                    "example": 3,
                                    "default": 0
                                  },
                                  "finally": {
                                    "type": "object",
                                    "description": "What to do after all retries",
                                    "required": [
                                      "goto"
                                    ],
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "description": "Actions to take on failure",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      },
                                      "goto": {
                                        "type": "string",
                                        "description": "Step to transition to on failure",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "failed",
                                        "x-examples": [
                                          "failed"
                                        ]
                                      }
                                    }
                                  }
                                }
                              },
                              "onComplete": {
                                "type": "object",
                                "description": "Actions to take when the step completes",
                                "properties": {
                                  "actions": {
                                    "type": "array",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "The type of the action",
                                              "enum": [
                                                "email"
                                              ]
                                            },
                                            "options": {
                                              "type": "object",
                                              "description": "settings for the action",
                                              "additionalProperties": {
                                                "type": "string"
                                              },
                                              "x-examples": [
                                                {
                                                  "to": "bob@example.com",
                                                  "from": "alice@example.com"
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            }
          },
          "allOf": [
            {
              "x-ui-hide": true,
              "type": "object",
              "description": "Common Properties to all entities",
              "required": [
                "label"
              ],
              "properties": {
                "label": {
                  "type": "string",
                  "description": "Label for the entity",
                  "example": "primary"
                },
                "slug": {
                  "type": "string",
                  "description": "Slug for the entity (Auto-generated from the label)",
                  "readOnly": true,
                  "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$"
                },
                "created": {
                  "description": "Date the entity was created",
                  "type": "string",
                  "format": "date-time",
                  "readOnly": true
                },
                "updated": {
                  "description": "Last date the entity was updated",
                  "type": "string",
                  "format": "date-time",
                  "readOnly": true
                }
              }
            }
          ],
          "example": {
            "steps": {
              "fail": {
                "step": "complete",
                "type": "user",
                "options": {
                  "component": "assignUnitsFromCustomerToProject",
                  "payload": {
                    "message": "Device powered off?",
                    "negative_message": "Device not functioning"
                  }
                },
                "label": "Find units",
                "goto": "complete",
                "goto-fail": "process-fail",
                "context": [
                  {
                    "key": "$.unit.status",
                    "value": "Pending",
                    "lock": true,
                    "ignore": true
                  }
                ],
                "onError": {
                  "finally": {
                    "goto": "failed",
                    "actions": [
                      {
                        "type": "email",
                        "options": {
                          "to": "bob@example.com",
                          "from": "alice@example.com"
                        }
                      }
                    ]
                  },
                  "retry": 8
                },
                "onComplete": {
                  "actions": [
                    {
                      "type": "email",
                      "options": {
                        "to": "bob@example.com",
                        "from": "alice@example.com"
                      }
                    },
                    {
                      "type": "email",
                      "options": {
                        "to": "bob@example.com",
                        "from": "alice@example.com"
                      }
                    },
                    {
                      "type": "email",
                      "options": {
                        "to": "bob@example.com",
                        "from": "alice@example.com"
                      }
                    }
                  ]
                }
              },
              "amet_b64$": {
                "step": "complete",
                "label": "Find units",
                "type": "success",
                "onComplete": {
                  "actions": [
                    {
                      "type": "email",
                      "options": {
                        "to": "bob@example.com",
                        "from": "alice@example.com"
                      }
                    }
                  ]
                }
              },
              "minim2__": {
                "step": "complete",
                "type": "pass",
                "label": "Find units",
                "goto": "complete",
                "goto-fail": "process-fail",
                "context": [
                  {
                    "key": "$.fizz",
                    "value": "$.buzz",
                    "lock": false,
                    "ignore": true
                  }
                ],
                "onError": {
                  "finally": {
                    "goto": "failed",
                    "actions": [
                      {
                        "type": "email",
                        "options": {
                          "to": "bob@example.com",
                          "from": "alice@example.com"
                        }
                      },
                      {
                        "type": "email",
                        "options": {
                          "to": "bob@example.com",
                          "from": "alice@example.com"
                        }
                      },
                      {
                        "type": "email",
                        "options": {
                          "to": "bob@example.com",
                          "from": "alice@example.com"
                        }
                      },
                      {
                        "type": "email",
                        "options": {
                          "to": "bob@example.com",
                          "from": "alice@example.com"
                        }
                      }
                    ]
                  },
                  "retry": 0
                },
                "onComplete": {
                  "actions": [
                    {
                      "type": "email",
                      "options": {
                        "to": "bob@example.com",
                        "from": "alice@example.com"
                      }
                    },
                    {
                      "type": "email",
                      "options": {
                        "to": "bob@example.com",
                        "from": "alice@example.com"
                      }
                    },
                    {
                      "type": "email",
                      "options": {
                        "to": "bob@example.com",
                        "from": "alice@example.com"
                      }
                    },
                    {
                      "type": "email",
                      "options": {
                        "to": "bob@example.com",
                        "from": "alice@example.com"
                      }
                    }
                  ]
                }
              }
            },
            "starts_at": "entry",
            "label": "MLTI iPad Assembly Assignment",
            "workflow_id": "e530652e-28e8-4f64-84af-e1cf0ff7c805",
            "applies_to": "customer",
            "slug": "mlti-ipad-assembly-assignment",
            "version": "1.0",
            "workflow_version": 7,
            "context": [
              {
                "key": "$.fizz",
                "value": "Pending",
                "lock": false,
                "ignore": true
              },
              {
                "key": "$.unit.status",
                "value": "true",
                "lock": false,
                "ignore": true
              },
              {
                "key": "$.unit.status",
                "value": "Pending",
                "lock": false,
                "ignore": true
              },
              {
                "key": "extract_fields",
                "value": "Pending",
                "lock": true,
                "ignore": false
              }
            ],
            "created": "1991-03-23T20:31:55.727Z",
            "updated": "1988-03-24T09:13:18.759Z"
          }
        }
      ],
      "example": "undefined"
    }
  ]
}
```

<h3 id="createworkflow-responses">Responses</h3>

|Status|Meaning|Description|Schema|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|A workflow response|Inline|
|400|[Bad Request](https://tools.ietf.org/html/rfc7231#section-6.5.1)|Bad Request|Inline|
|401|[Unauthorized](https://tools.ietf.org/html/rfc7235#section-3.1)|Unauthorized|Inline|
|403|[Forbidden](https://tools.ietf.org/html/rfc7231#section-6.5.3)|Forbidden|Inline|

<h3 id="createworkflow-responseschema">Response Schema</h3>

Status Code **200**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» _links|object|false|none|none|
|»» self|object|false|read-only|none|
|»»» href|string|false|none|none|

Status Code **400**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» title|any|false|none|none|
|» type|any|false|none|none|
|» status|any|false|none|none|
|» detail|any|false|none|none|

Status Code **401**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» title|any|false|none|none|
|» type|any|false|none|none|
|» status|any|false|none|none|
|» detail|any|false|none|none|

Status Code **403**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» title|any|false|none|none|
|» type|any|false|none|none|
|» status|any|false|none|none|
|» detail|any|false|none|none|

<aside class="success">
This operation does not require authentication
</aside>

## fetchWorkflowById

<a id="opIdfetchWorkflowById"></a>

`GET /work-flows/:workflow_id`

*Fetches a workflow by Id*

Fetch Workflow

<h3 id="fetchworkflowbyid-parameters">Parameters</h3>

|Name|In|Type|Required|Description|
|---|---|---|---|---|
|workflow_id|path|string|true|Id for the workflow|

> Example responses

> 200 Response

```json
{
  "type": "object",
  "allOf": [
    {
      "type": "object",
      "x-hal": true,
      "x-ui-hide": true,
      "properties": {
        "_links": {
          "type": "object",
          "properties": {
            "self": {
              "type": "object",
              "readOnly": true,
              "properties": {
                "href": {
                  "type": "string",
                  "example": "https://api.nterprise.com/work-flows/9f692b9f-958b-4f74-ba72-5878407bb60d"
                }
              }
            }
          }
        }
      },
      "allOf": [
        {
          "x-id": "#workflow",
          "x-nter-relation": "work-flows",
          "x-nter-model": "WorkFlow",
          "x-nter-callable": true,
          "type": "object",
          "description": "Workflow",
          "required": [
            "steps",
            "starts_at",
            "label",
            "workflow_id",
            "applies_to"
          ],
          "properties": {
            "workflow_id": {
              "type": "string",
              "description": "Customer identifier",
              "example": "e530652e-28e8-4f64-84af-e1cf0ff7c805",
              "x-examples": [
                "e530652e-28e8-4f64-84af-e1cf0ff7c805"
              ],
              "pattern": "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"
            },
            "label": {
              "type": "string",
              "example": "MLTI iPad Assembly Assignment",
              "x-examples": [
                "MLTI iPad Assembly Assignment"
              ],
              "description": "Label for the workflow"
            },
            "slug": {
              "type": "string",
              "description": "Auto-generated slug for the workflow",
              "example": "mlti-ipad-assembly-assignment",
              "x-examples": [
                "mlti-ipad-assembly-assignment"
              ]
            },
            "version": {
              "type": "string",
              "description": "Version of the workflow schema used",
              "enum": [
                "1.0"
              ],
              "example": "1.0"
            },
            "workflow_version": {
              "type": "integer",
              "format": "int32",
              "example": 7,
              "x-examples": [
                7
              ],
              "readOnly": true,
              "description": "Version number for the work flows (the number of times it has been changed"
            },
            "applies_to": {
              "type": "string",
              "description": "The entity type this work flow applies too",
              "enum": [
                "unit",
                "part",
                "program",
                "project",
                "customer",
                "contact"
              ],
              "example": "unit"
            },
            "starts_at": {
              "type": "string",
              "description": "Starting step",
              "example": "entry",
              "x-examples": [
                "entry"
              ]
            },
            "context": {
              "type": "array",
              "description": "Initial values to set on the context",
              "items": {
                "type": "object",
                "required": [
                  "key",
                  "value"
                ],
                "properties": {
                  "key": {
                    "type": "string",
                    "description": "The context key to set",
                    "example": "$.fizz",
                    "x-examples": [
                      "$.fizz",
                      "$.unit.status",
                      "extract_fields"
                    ]
                  },
                  "value": {
                    "type": "string",
                    "description": "Value to set",
                    "example": "$.buzz",
                    "x-examples": [
                      "$.buzz",
                      "Pending",
                      true
                    ]
                  },
                  "lock": {
                    "type": "boolean",
                    "description": "Prevents other steps from writing this value",
                    "example": true
                  },
                  "ignore": {
                    "type": "boolean",
                    "description": "When trying to set a locked key, do not fail",
                    "example": false
                  }
                }
              }
            },
            "steps": {
              "type": "object",
              "description": "Steps for the workflow",
              "x-patternProperties": {
                "(confirm|success|fail|manual|run-ace|follow)": {
                  "type": "object",
                  "allOf": [
                    {
                      "type": "object",
                      "description": "Close step",
                      "required": [
                        "step"
                      ],
                      "properties": {
                        "step": {
                          "type": "string",
                          "description": "Step to mark as complete",
                          "pattern": "^[a-z][a-z-]+[a-z]$",
                          "example": "complete",
                          "x-examples": [
                            "complete"
                          ]
                        }
                      },
                      "anyOf": [
                        {
                          "type": "object",
                          "description": "Require the user confirm an action. This is normally used when Niagara cannot automatically detect that a task or action has been performed.",
                          "x-nter-step-component": "confirm-action",
                          "properties": {
                            "label": {
                              "x-examples": [
                                "Confirm the device has powered off"
                              ]
                            },
                            "options": {
                              "type": "object",
                              "required": [
                                "component",
                                "payload"
                              ],
                              "properties": {
                                "component": {
                                  "enum": [
                                    "confirm-action"
                                  ],
                                  "example": "confirm-action",
                                  "x-examples": [
                                    "confirm-action"
                                  ]
                                },
                                "payload": {
                                  "type": "object",
                                  "required": [
                                    "message"
                                  ],
                                  "properties": {
                                    "message": {
                                      "type": "string",
                                      "description": "The confirmation message to display to the user",
                                      "example": "Device powered off?",
                                      "x-examples": [
                                        "Device powered off?"
                                      ]
                                    },
                                    "negative_message": {
                                      "type": "string",
                                      "description": "An optional inverse message",
                                      "nullable": true,
                                      "example": "Device not functioning",
                                      "x-examples": [
                                        "Device not functioning"
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          },
                          "allOf": [
                            {
                              "type": "object",
                              "x-ui-hide": true,
                              "description": "A step which requires a user to complete",
                              "required": [
                                "type",
                                "options"
                              ],
                              "properties": {
                                "type": {
                                  "example": "user",
                                  "x-examples": [
                                    "user"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "component",
                                    "payload"
                                  ],
                                  "properties": {
                                    "component": {
                                      "type": "string",
                                      "description": "Name of the function to invoke",
                                      "example": "assignUnitsFromCustomerToProject",
                                      "x-examples": [
                                        "assignUnitsFromCustomerToProject"
                                      ]
                                    },
                                    "payload": {
                                      "type": "object"
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "required": [
                                    "type",
                                    "label",
                                    "goto"
                                  ],
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    },
                                    "label": {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to move to",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "complete",
                                      "x-examples": [
                                        "complete"
                                      ]
                                    },
                                    "goto-fail": {
                                      "type": "string",
                                      "description": "Step to transition too if this step cannot be completed",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "process-fail",
                                      "x-examples": [
                                        "process-fail"
                                      ]
                                    },
                                    "context": {
                                      "type": "array",
                                      "description": "Initial values to set on the context",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "key",
                                          "value"
                                        ],
                                        "properties": {
                                          "key": {
                                            "type": "string",
                                            "description": "The context key to set",
                                            "example": "$.fizz",
                                            "x-examples": [
                                              "$.fizz",
                                              "$.unit.status",
                                              "extract_fields"
                                            ]
                                          },
                                          "value": {
                                            "type": "string",
                                            "description": "Value to set",
                                            "example": "$.buzz",
                                            "x-examples": [
                                              "$.buzz",
                                              "Pending",
                                              true
                                            ]
                                          },
                                          "lock": {
                                            "type": "boolean",
                                            "description": "Prevents other steps from writing this value",
                                            "example": true
                                          },
                                          "ignore": {
                                            "type": "boolean",
                                            "description": "When trying to set a locked key, do not fail",
                                            "example": false
                                          }
                                        }
                                      }
                                    },
                                    "onError": {
                                      "type": "object",
                                      "description": "Action to take when step fails",
                                      "required": [
                                        "finally"
                                      ],
                                      "properties": {
                                        "retry": {
                                          "type": "integer",
                                          "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                          "minimum": 0,
                                          "maximum": 10,
                                          "example": 3,
                                          "default": 0
                                        },
                                        "finally": {
                                          "type": "object",
                                          "description": "What to do after all retries",
                                          "required": [
                                            "goto"
                                          ],
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "description": "Actions to take on failure",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to transition to on failure",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "failed",
                                              "x-examples": [
                                                "failed"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "onComplete": {
                                      "type": "object",
                                      "description": "Actions to take when the step completes",
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "object",
                          "description": "Display a link or modal to a user which contains instructions from a PDF",
                          "x-nter-step-component": "follow-pdf-instructions",
                          "required": [
                            "label",
                            "payload"
                          ],
                          "properties": {
                            "label": {
                              "x-examples": [
                                "Instruct user to follow steps outlined in Apple PDF"
                              ]
                            },
                            "options": {
                              "type": "object",
                              "required": [
                                "component",
                                "payload"
                              ],
                              "properties": {
                                "component": {
                                  "enum": [
                                    "follow-pds-instructions"
                                  ],
                                  "example": "follow-pdf-instructions",
                                  "x-examples": [
                                    "follow-pdf-instructions"
                                  ]
                                },
                                "payload": {
                                  "type": "object",
                                  "required": [
                                    "attachment_id"
                                  ],
                                  "properties": {
                                    "attachment_id": {
                                      "type": "string",
                                      "description": "UUID for the attachment",
                                      "format": "uuid",
                                      "example": "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7",
                                      "x-examples": [
                                        "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7"
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          },
                          "allOf": [
                            {
                              "type": "object",
                              "x-ui-hide": true,
                              "description": "A step which requires a user to complete",
                              "required": [
                                "type",
                                "options"
                              ],
                              "properties": {
                                "type": {
                                  "example": "user",
                                  "x-examples": [
                                    "user"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "component",
                                    "payload"
                                  ],
                                  "properties": {
                                    "component": {
                                      "type": "string",
                                      "description": "Name of the function to invoke",
                                      "example": "assignUnitsFromCustomerToProject",
                                      "x-examples": [
                                        "assignUnitsFromCustomerToProject"
                                      ]
                                    },
                                    "payload": {
                                      "type": "object"
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "required": [
                                    "type",
                                    "label",
                                    "goto"
                                  ],
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    },
                                    "label": {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to move to",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "complete",
                                      "x-examples": [
                                        "complete"
                                      ]
                                    },
                                    "goto-fail": {
                                      "type": "string",
                                      "description": "Step to transition too if this step cannot be completed",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "process-fail",
                                      "x-examples": [
                                        "process-fail"
                                      ]
                                    },
                                    "context": {
                                      "type": "array",
                                      "description": "Initial values to set on the context",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "key",
                                          "value"
                                        ],
                                        "properties": {
                                          "key": {
                                            "type": "string",
                                            "description": "The context key to set",
                                            "example": "$.fizz",
                                            "x-examples": [
                                              "$.fizz",
                                              "$.unit.status",
                                              "extract_fields"
                                            ]
                                          },
                                          "value": {
                                            "type": "string",
                                            "description": "Value to set",
                                            "example": "$.buzz",
                                            "x-examples": [
                                              "$.buzz",
                                              "Pending",
                                              true
                                            ]
                                          },
                                          "lock": {
                                            "type": "boolean",
                                            "description": "Prevents other steps from writing this value",
                                            "example": true
                                          },
                                          "ignore": {
                                            "type": "boolean",
                                            "description": "When trying to set a locked key, do not fail",
                                            "example": false
                                          }
                                        }
                                      }
                                    },
                                    "onError": {
                                      "type": "object",
                                      "description": "Action to take when step fails",
                                      "required": [
                                        "finally"
                                      ],
                                      "properties": {
                                        "retry": {
                                          "type": "integer",
                                          "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                          "minimum": 0,
                                          "maximum": 10,
                                          "example": 3,
                                          "default": 0
                                        },
                                        "finally": {
                                          "type": "object",
                                          "description": "What to do after all retries",
                                          "required": [
                                            "goto"
                                          ],
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "description": "Actions to take on failure",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to transition to on failure",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "failed",
                                              "x-examples": [
                                                "failed"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "onComplete": {
                                      "type": "object",
                                      "description": "Actions to take when the step completes",
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "object",
                          "description": "Ask the user to manually enter (or confirm) data for an entity",
                          "x-nter-step-component": "manual-data-entry",
                          "properties": {
                            "label": {
                              "x-examples": [
                                "Enter asset tag and confirm serial number"
                              ]
                            },
                            "options": {
                              "type": "object",
                              "required": [
                                "component",
                                "payload"
                              ],
                              "properties": {
                                "component": {
                                  "enum": [
                                    "manual-data-entry"
                                  ],
                                  "example": "manual-data-entry",
                                  "x-examples": [
                                    "manual-data-entry"
                                  ]
                                },
                                "payload": {
                                  "type": "object",
                                  "required": [
                                    "fields"
                                  ],
                                  "properties": {
                                    "fields": {
                                      "type": "array",
                                      "description": "Configuration for each field",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "input_type",
                                          "label",
                                          "required",
                                          "entity_field"
                                        ],
                                        "properties": {
                                          "input_type": {
                                            "type": "string",
                                            "description": "The type of input field to display",
                                            "enum": [
                                              "textbox",
                                              "input"
                                            ]
                                          },
                                          "label": {
                                            "type": "string",
                                            "description": "Label to display for the field",
                                            "example": "Asset Tag",
                                            "x-examples": [
                                              "Asset Tag"
                                            ]
                                          },
                                          "required": {
                                            "type": "boolean",
                                            "description": "Display the field as required input. Note: this is a helper function. It singles that the user is required to input data at this step. If the field is required on the entity, the user will be presented with a validation message",
                                            "example": true
                                          },
                                          "entity_field": {
                                            "type": "string",
                                            "description": "JSON Path to the field on the entity. If the path does not start with '$' then the entity on the context is assumed. Otherwise the data will be set on the context path",
                                            "example": "input_filter[?(@.key = 'asset-tag')]",
                                            "x-examples": [
                                              "input_filter[?(@.key = 'asset-tag')]"
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          },
                          "allOf": [
                            {
                              "type": "object",
                              "x-ui-hide": true,
                              "description": "A step which requires a user to complete",
                              "required": [
                                "type",
                                "options"
                              ],
                              "properties": {
                                "type": {
                                  "example": "user",
                                  "x-examples": [
                                    "user"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "component",
                                    "payload"
                                  ],
                                  "properties": {
                                    "component": {
                                      "type": "string",
                                      "description": "Name of the function to invoke",
                                      "example": "assignUnitsFromCustomerToProject",
                                      "x-examples": [
                                        "assignUnitsFromCustomerToProject"
                                      ]
                                    },
                                    "payload": {
                                      "type": "object"
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "required": [
                                    "type",
                                    "label",
                                    "goto"
                                  ],
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    },
                                    "label": {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to move to",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "complete",
                                      "x-examples": [
                                        "complete"
                                      ]
                                    },
                                    "goto-fail": {
                                      "type": "string",
                                      "description": "Step to transition too if this step cannot be completed",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "process-fail",
                                      "x-examples": [
                                        "process-fail"
                                      ]
                                    },
                                    "context": {
                                      "type": "array",
                                      "description": "Initial values to set on the context",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "key",
                                          "value"
                                        ],
                                        "properties": {
                                          "key": {
                                            "type": "string",
                                            "description": "The context key to set",
                                            "example": "$.fizz",
                                            "x-examples": [
                                              "$.fizz",
                                              "$.unit.status",
                                              "extract_fields"
                                            ]
                                          },
                                          "value": {
                                            "type": "string",
                                            "description": "Value to set",
                                            "example": "$.buzz",
                                            "x-examples": [
                                              "$.buzz",
                                              "Pending",
                                              true
                                            ]
                                          },
                                          "lock": {
                                            "type": "boolean",
                                            "description": "Prevents other steps from writing this value",
                                            "example": true
                                          },
                                          "ignore": {
                                            "type": "boolean",
                                            "description": "When trying to set a locked key, do not fail",
                                            "example": false
                                          }
                                        }
                                      }
                                    },
                                    "onError": {
                                      "type": "object",
                                      "description": "Action to take when step fails",
                                      "required": [
                                        "finally"
                                      ],
                                      "properties": {
                                        "retry": {
                                          "type": "integer",
                                          "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                          "minimum": 0,
                                          "maximum": 10,
                                          "example": 3,
                                          "default": 0
                                        },
                                        "finally": {
                                          "type": "object",
                                          "description": "What to do after all retries",
                                          "required": [
                                            "goto"
                                          ],
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "description": "Actions to take on failure",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to transition to on failure",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "failed",
                                              "x-examples": [
                                                "failed"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "onComplete": {
                                      "type": "object",
                                      "description": "Actions to take when the step completes",
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "object",
                          "description": "Ask the user to follow a list and check off boxes",
                          "x-nter-step-component": "task-list",
                          "properties": {
                            "label": {
                              "x-examples": [
                                "Enter asset tag and confirm serial number"
                              ]
                            },
                            "options": {
                              "type": "object",
                              "required": [
                                "component",
                                "payload"
                              ],
                              "properties": {
                                "component": {
                                  "enum": [
                                    "task-list"
                                  ],
                                  "example": "task-list",
                                  "x-examples": [
                                    "task-list"
                                  ]
                                },
                                "payload": {
                                  "type": "object",
                                  "required": [
                                    "items"
                                  ],
                                  "properties": {
                                    "is_qc": {
                                      "type": "boolean",
                                      "description": "Flags this list as a QC task list. This means that a different user can close the task to one previously on the context"
                                    },
                                    "items": {
                                      "type": "array",
                                      "description": "Configuration for each task list item",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "label",
                                          "help",
                                          "evaluated",
                                          "na_option"
                                        ],
                                        "properties": {
                                          "label": {
                                            "type": "string",
                                            "description": "Label to display for the field",
                                            "example": "Asset Tag placement",
                                            "x-examples": [
                                              "Asset Tag placement"
                                            ]
                                          },
                                          "slug": {
                                            "type": "string",
                                            "description": "Slug for the item (Auto-generated from the label)",
                                            "readOnly": true,
                                            "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$",
                                            "example": "asset-tag-placement",
                                            "x-examples": [
                                              "asset-tag-placement"
                                            ]
                                          },
                                          "help": {
                                            "type": "string",
                                            "description": "Message describing what is needed to be checked",
                                            "example": "Asset Tag attached to the unit in the correct position",
                                            "x-examples": [
                                              "Asset Tag attached to the unit in the correct position"
                                            ]
                                          },
                                          "evaluated": {
                                            "type": "boolean",
                                            "description": "When set to true, this will fail the step if the value for the item is false or N/A",
                                            "example": true
                                          },
                                          "na_field": {
                                            "type": "boolean",
                                            "description": "Allow the user to select the N/A option when checking off the list",
                                            "example": true
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          },
                          "allOf": [
                            {
                              "type": "object",
                              "x-ui-hide": true,
                              "description": "A step which requires a user to complete",
                              "required": [
                                "type",
                                "options"
                              ],
                              "properties": {
                                "type": {
                                  "example": "user",
                                  "x-examples": [
                                    "user"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "component",
                                    "payload"
                                  ],
                                  "properties": {
                                    "component": {
                                      "type": "string",
                                      "description": "Name of the function to invoke",
                                      "example": "assignUnitsFromCustomerToProject",
                                      "x-examples": [
                                        "assignUnitsFromCustomerToProject"
                                      ]
                                    },
                                    "payload": {
                                      "type": "object"
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "required": [
                                    "type",
                                    "label",
                                    "goto"
                                  ],
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    },
                                    "label": {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to move to",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "complete",
                                      "x-examples": [
                                        "complete"
                                      ]
                                    },
                                    "goto-fail": {
                                      "type": "string",
                                      "description": "Step to transition too if this step cannot be completed",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "process-fail",
                                      "x-examples": [
                                        "process-fail"
                                      ]
                                    },
                                    "context": {
                                      "type": "array",
                                      "description": "Initial values to set on the context",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "key",
                                          "value"
                                        ],
                                        "properties": {
                                          "key": {
                                            "type": "string",
                                            "description": "The context key to set",
                                            "example": "$.fizz",
                                            "x-examples": [
                                              "$.fizz",
                                              "$.unit.status",
                                              "extract_fields"
                                            ]
                                          },
                                          "value": {
                                            "type": "string",
                                            "description": "Value to set",
                                            "example": "$.buzz",
                                            "x-examples": [
                                              "$.buzz",
                                              "Pending",
                                              true
                                            ]
                                          },
                                          "lock": {
                                            "type": "boolean",
                                            "description": "Prevents other steps from writing this value",
                                            "example": true
                                          },
                                          "ignore": {
                                            "type": "boolean",
                                            "description": "When trying to set a locked key, do not fail",
                                            "example": false
                                          }
                                        }
                                      }
                                    },
                                    "onError": {
                                      "type": "object",
                                      "description": "Action to take when step fails",
                                      "required": [
                                        "finally"
                                      ],
                                      "properties": {
                                        "retry": {
                                          "type": "integer",
                                          "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                          "minimum": 0,
                                          "maximum": 10,
                                          "example": 3,
                                          "default": 0
                                        },
                                        "finally": {
                                          "type": "object",
                                          "description": "What to do after all retries",
                                          "required": [
                                            "goto"
                                          ],
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "description": "Actions to take on failure",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to transition to on failure",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "failed",
                                              "x-examples": [
                                                "failed"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "onComplete": {
                                      "type": "object",
                                      "description": "Actions to take when the step completes",
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "object",
                          "description": "Run the ACE-IOS application to provision iOS devices or ",
                          "properties": {
                            "type": {
                              "example": "machine",
                              "x-examples": [
                                "machine"
                              ]
                            },
                            "label": {
                              "x-examples": [
                                "Run Application"
                              ]
                            },
                            "options": {
                              "type": "object",
                              "required": [
                                "application",
                                "configuration"
                              ],
                              "properties": {
                                "configuration": {
                                  "type": "object",
                                  "description": "ACE Configuration options",
                                  "properties": {
                                    "pairing_cert": {
                                      "type": "string",
                                      "format": "base64",
                                      "description": "Contents of a *.crt file exported from Apple Configurator or MDM",
                                      "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                      "x-examples": [
                                        "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                      ],
                                      "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                    },
                                    "pairing_key": {
                                      "type": "string",
                                      "format": "base64",
                                      "description": "Contents of a *.der file exported from Apple Configurator or MDM",
                                      "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                      "x-examples": [
                                        "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                      ],
                                      "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                    },
                                    "restore_device": {
                                      "type": "boolean",
                                      "description": "Restore device to factory defaults"
                                    },
                                    "automated_enrollment": {
                                      "type": "boolean",
                                      "description": "Automatically enroll the device to MDM"
                                    },
                                    "mdm": {
                                      "type": "object",
                                      "format": "base64",
                                      "description": "The settings for the Customers MDM",
                                      "properties": {
                                        "vendor": {
                                          "type": "string",
                                          "description": "MDM vendor. Currently, supported values are AirWatch, JAMF, and Meraki.",
                                          "enum": [
                                            "AirWatch",
                                            "JAMF",
                                            "Meraki"
                                          ]
                                        },
                                        "console_url": {
                                          "type": "string",
                                          "format": "uri",
                                          "description": "Base URL for HTTP requests",
                                          "example": "http://jamf.zones.com",
                                          "x-examples": [
                                            "http://jamf.zones.com"
                                          ]
                                        },
                                        "user": {
                                          "type": "string",
                                          "description": "MDM User name",
                                          "example": "NterpriseBob",
                                          "x-examples": [
                                            "NterpriseBob"
                                          ]
                                        },
                                        "password": {
                                          "type": "string",
                                          "description": "MDM password"
                                        },
                                        "tenant_code": {
                                          "type": "string",
                                          "description": "MDM authentication key",
                                          "example": "nterprise",
                                          "x-examples": [
                                            "nterprise"
                                          ]
                                        },
                                        "set_asset_tag": {
                                          "type": "string",
                                          "description": "Sets the devices Asset tag based on a field from the unit",
                                          "example": "$._entity.input_filter[?(@.key = 'asset-tag')]",
                                          "x-examples": [
                                            "$._entity.input_filter[?(@.key = 'asset-tag')]"
                                          ]
                                        }
                                      }
                                    },
                                    "field_mappings": {
                                      "type": "array",
                                      "description": "List of fields to map to the device",
                                      "items": {
                                        "type": "object",
                                        "properties": {
                                          "from": {
                                            "type": "string",
                                            "description": "The field reported from ACE",
                                            "enum": [
                                              "serial_number",
                                              "name",
                                              "ecid",
                                              "udid",
                                              "configurator_serial",
                                              "ios",
                                              "model",
                                              "storage",
                                              "wifi_mac",
                                              "bt_mac",
                                              "ethernet_mac",
                                              "thundersync_serial",
                                              "iccid",
                                              "iccid2",
                                              "imei",
                                              "imei2",
                                              "missed_profiles",
                                              "missed_apps",
                                              "icon_list_regex",
                                              "icon_layout",
                                              "bat_capacity"
                                            ]
                                          },
                                          "to": {
                                            "type": "string",
                                            "description": "Field to set on the entity",
                                            "example": "$._entity.input_filter[?(@.key = 'serial-number')]",
                                            "x-examples": [
                                              "$._entity.input_filter[?(@.key = 'serial-number')]"
                                            ]
                                          }
                                        }
                                      }
                                    },
                                    "wait_for_apps": {
                                      "type": "array",
                                      "description": "A list of applications needed to be installed on the device. This will cause the extension to poll the device for installed applications. Once all the applications have been installed, this step can be completed",
                                      "items": {
                                        "type": "string",
                                        "format": "uri",
                                        "example": "com.apple.itunes",
                                        "x-examples": [
                                          "com.apple.itunes"
                                        ]
                                      }
                                    },
                                    "wait_for_battery_charge": {
                                      "type": "integer",
                                      "description": "The required battery percentage needed before this step can move on",
                                      "minimum": 0,
                                      "maximum": 100
                                    }
                                  }
                                }
                              }
                            }
                          },
                          "allOf": [
                            {
                              "type": "object",
                              "description": "Run an application extension",
                              "properties": {
                                "label": {
                                  "x-examples": [
                                    "Run Application"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "application",
                                    "configuration"
                                  ],
                                  "properties": {
                                    "application": {
                                      "type": "object",
                                      "required": [
                                        "application_id",
                                        "platforms"
                                      ],
                                      "properties": {
                                        "application_id": {
                                          "type": "string",
                                          "description": "Registered application ID",
                                          "example": "ace-ios",
                                          "x-examples": [
                                            "ace-ios"
                                          ]
                                        },
                                        "platforms": {
                                          "type": "array",
                                          "description": "Allowed platforms the application can run on",
                                          "items": {
                                            "type": "object",
                                            "required": [
                                              "platform",
                                              "arch"
                                            ],
                                            "properties": {
                                              "platform": {
                                                "type": "string",
                                                "description": "The platform (OS) the application can run on",
                                                "enum": [
                                                  "aix",
                                                  "darwin",
                                                  "freebsd",
                                                  "linux",
                                                  "openbsd",
                                                  "sunos",
                                                  "win32"
                                                ]
                                              },
                                              "arch": {
                                                "type": "string",
                                                "description": "The CPU architecture needed to run the application",
                                                "enum": [
                                                  "arm",
                                                  "arm64",
                                                  "ia32",
                                                  "mips",
                                                  "mipsel",
                                                  "ppc",
                                                  "ppc64",
                                                  "s390",
                                                  "s390x",
                                                  "x32",
                                                  "x64"
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "required": [
                                    "type",
                                    "label",
                                    "goto"
                                  ],
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    },
                                    "label": {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to move to",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "complete",
                                      "x-examples": [
                                        "complete"
                                      ]
                                    },
                                    "goto-fail": {
                                      "type": "string",
                                      "description": "Step to transition too if this step cannot be completed",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "process-fail",
                                      "x-examples": [
                                        "process-fail"
                                      ]
                                    },
                                    "context": {
                                      "type": "array",
                                      "description": "Initial values to set on the context",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "key",
                                          "value"
                                        ],
                                        "properties": {
                                          "key": {
                                            "type": "string",
                                            "description": "The context key to set",
                                            "example": "$.fizz",
                                            "x-examples": [
                                              "$.fizz",
                                              "$.unit.status",
                                              "extract_fields"
                                            ]
                                          },
                                          "value": {
                                            "type": "string",
                                            "description": "Value to set",
                                            "example": "$.buzz",
                                            "x-examples": [
                                              "$.buzz",
                                              "Pending",
                                              true
                                            ]
                                          },
                                          "lock": {
                                            "type": "boolean",
                                            "description": "Prevents other steps from writing this value",
                                            "example": true
                                          },
                                          "ignore": {
                                            "type": "boolean",
                                            "description": "When trying to set a locked key, do not fail",
                                            "example": false
                                          }
                                        }
                                      }
                                    },
                                    "onError": {
                                      "type": "object",
                                      "description": "Action to take when step fails",
                                      "required": [
                                        "finally"
                                      ],
                                      "properties": {
                                        "retry": {
                                          "type": "integer",
                                          "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                          "minimum": 0,
                                          "maximum": 10,
                                          "example": 3,
                                          "default": 0
                                        },
                                        "finally": {
                                          "type": "object",
                                          "description": "What to do after all retries",
                                          "required": [
                                            "goto"
                                          ],
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "description": "Actions to take on failure",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to transition to on failure",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "failed",
                                              "x-examples": [
                                                "failed"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "onComplete": {
                                      "type": "object",
                                      "description": "Actions to take when the step completes",
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "label": {
                              "example": "Is device ok?",
                              "x-examples": [
                                "Is device ok?"
                              ]
                            },
                            "type": {
                              "example": "choice",
                              "x-examples": [
                                "choice"
                              ]
                            },
                            "choices": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "required": [
                                  "goto"
                                ],
                                "maxProperties": 2,
                                "minProperties": 2,
                                "maximum": 20,
                                "properties": {
                                  "and": {
                                    "type": "array",
                                    "description": "All choices must be satisfied",
                                    "maximum": 5,
                                    "items": {
                                      "description": "A Step choice",
                                      "type": "object",
                                      "maxProperties": 2,
                                      "minProperties": 2,
                                      "required": [
                                        "variable"
                                      ],
                                      "properties": {
                                        "variable": {
                                          "type": "string",
                                          "description": "Context variable to check",
                                          "example": "$.parts.available",
                                          "x-examples": [
                                            "$.parts.available"
                                          ]
                                        },
                                        "greater_than_equals": {
                                          "type": "string",
                                          "description": "Value has to be greater than or equals to",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "less_than_equals": {
                                          "type": "string",
                                          "description": "Value has to be less than or equals to",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "greater_than": {
                                          "type": "string",
                                          "description": "Value has to be greater than",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "less_than": {
                                          "type": "string",
                                          "description": "Value has to be less than",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "equals": {
                                          "type": "string",
                                          "description": "Value has to equal",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "not_equals": {
                                          "type": "string",
                                          "description": "Value must not equal",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        }
                                      }
                                    }
                                  },
                                  "or": {
                                    "type": "array",
                                    "description": "Any of these choices must be satisfied",
                                    "maximum": 5,
                                    "items": {
                                      "description": "A Step choice",
                                      "type": "object",
                                      "maxProperties": 2,
                                      "minProperties": 2,
                                      "required": [
                                        "variable"
                                      ],
                                      "properties": {
                                        "variable": {
                                          "type": "string",
                                          "description": "Context variable to check",
                                          "example": "$.parts.available",
                                          "x-examples": [
                                            "$.parts.available"
                                          ]
                                        },
                                        "greater_than_equals": {
                                          "type": "string",
                                          "description": "Value has to be greater than or equals to",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "less_than_equals": {
                                          "type": "string",
                                          "description": "Value has to be less than or equals to",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "greater_than": {
                                          "type": "string",
                                          "description": "Value has to be greater than",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "less_than": {
                                          "type": "string",
                                          "description": "Value has to be less than",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "equals": {
                                          "type": "string",
                                          "description": "Value has to equal",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "not_equals": {
                                          "type": "string",
                                          "description": "Value must not equal",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        }
                                      }
                                    }
                                  },
                                  "not": {
                                    "type": "array",
                                    "description": "None of these choices must be satisfied",
                                    "maximum": 5,
                                    "items": {
                                      "description": "A Step choice",
                                      "type": "object",
                                      "maxProperties": 2,
                                      "minProperties": 2,
                                      "required": [
                                        "variable"
                                      ],
                                      "properties": {
                                        "variable": {
                                          "type": "string",
                                          "description": "Context variable to check",
                                          "example": "$.parts.available",
                                          "x-examples": [
                                            "$.parts.available"
                                          ]
                                        },
                                        "greater_than_equals": {
                                          "type": "string",
                                          "description": "Value has to be greater than or equals to",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "less_than_equals": {
                                          "type": "string",
                                          "description": "Value has to be less than or equals to",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "greater_than": {
                                          "type": "string",
                                          "description": "Value has to be greater than",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "less_than": {
                                          "type": "string",
                                          "description": "Value has to be less than",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "equals": {
                                          "type": "string",
                                          "description": "Value has to equal",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "not_equals": {
                                          "type": "string",
                                          "description": "Value must not equal",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        }
                                      }
                                    }
                                  },
                                  "goto": {
                                    "description": "Step to goto when condition is met",
                                    "allOf": [
                                      {
                                        "type": "string",
                                        "description": "Step to move to",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "complete",
                                        "x-examples": [
                                          "complete"
                                        ]
                                      }
                                    ]
                                  }
                                }
                              }
                            },
                            "goto": {
                              "description": "Default step to goto when no choice can be made"
                            }
                          },
                          "allOf": [
                            {
                              "type": "object",
                              "x-ui-hide": true,
                              "required": [
                                "type",
                                "label",
                                "goto"
                              ],
                              "properties": {
                                "type": {
                                  "type": "string",
                                  "description": "Type of workflow step",
                                  "enum": [
                                    "load",
                                    "choice",
                                    "function",
                                    "machine",
                                    "pass",
                                    "fail",
                                    "success",
                                    "user",
                                    "wait"
                                  ]
                                },
                                "label": {
                                  "type": "string",
                                  "description": "Label for the step",
                                  "example": "Find units",
                                  "x-examples": [
                                    "Find units"
                                  ]
                                },
                                "goto": {
                                  "type": "string",
                                  "description": "Step to move to",
                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                  "example": "complete",
                                  "x-examples": [
                                    "complete"
                                  ]
                                },
                                "goto-fail": {
                                  "type": "string",
                                  "description": "Step to transition too if this step cannot be completed",
                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                  "example": "process-fail",
                                  "x-examples": [
                                    "process-fail"
                                  ]
                                },
                                "context": {
                                  "type": "array",
                                  "description": "Initial values to set on the context",
                                  "items": {
                                    "type": "object",
                                    "required": [
                                      "key",
                                      "value"
                                    ],
                                    "properties": {
                                      "key": {
                                        "type": "string",
                                        "description": "The context key to set",
                                        "example": "$.fizz",
                                        "x-examples": [
                                          "$.fizz",
                                          "$.unit.status",
                                          "extract_fields"
                                        ]
                                      },
                                      "value": {
                                        "type": "string",
                                        "description": "Value to set",
                                        "example": "$.buzz",
                                        "x-examples": [
                                          "$.buzz",
                                          "Pending",
                                          true
                                        ]
                                      },
                                      "lock": {
                                        "type": "boolean",
                                        "description": "Prevents other steps from writing this value",
                                        "example": true
                                      },
                                      "ignore": {
                                        "type": "boolean",
                                        "description": "When trying to set a locked key, do not fail",
                                        "example": false
                                      }
                                    }
                                  }
                                },
                                "onError": {
                                  "type": "object",
                                  "description": "Action to take when step fails",
                                  "required": [
                                    "finally"
                                  ],
                                  "properties": {
                                    "retry": {
                                      "type": "integer",
                                      "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                      "minimum": 0,
                                      "maximum": 10,
                                      "example": 3,
                                      "default": 0
                                    },
                                    "finally": {
                                      "type": "object",
                                      "description": "What to do after all retries",
                                      "required": [
                                        "goto"
                                      ],
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "description": "Actions to take on failure",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        },
                                        "goto": {
                                          "type": "string",
                                          "description": "Step to transition to on failure",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "failed",
                                          "x-examples": [
                                            "failed"
                                          ]
                                        }
                                      }
                                    }
                                  }
                                },
                                "onComplete": {
                                  "type": "object",
                                  "description": "Actions to take when the step completes",
                                  "properties": {
                                    "actions": {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "The type of the action",
                                                "enum": [
                                                  "email"
                                                ]
                                              },
                                              "options": {
                                                "type": "object",
                                                "description": "settings for the action",
                                                "additionalProperties": {
                                                  "type": "string"
                                                },
                                                "x-examples": [
                                                  {
                                                    "to": "bob@example.com",
                                                    "from": "alice@example.com"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          ]
                        },
                        {
                          "type": "object",
                          "description": "Finial step which is marked as failed",
                          "properties": {
                            "label": {
                              "example": "Failed",
                              "x-examples": [
                                "Failed"
                              ],
                              "allOf": [
                                {
                                  "type": "string",
                                  "description": "Label for the step",
                                  "example": "Find units",
                                  "x-examples": [
                                    "Find units"
                                  ]
                                }
                              ]
                            },
                            "type": {
                              "example": "fail",
                              "x-examples": [
                                "fail"
                              ],
                              "allOf": [
                                {
                                  "type": "string",
                                  "description": "Type of workflow step",
                                  "enum": [
                                    "load",
                                    "choice",
                                    "function",
                                    "machine",
                                    "pass",
                                    "fail",
                                    "success",
                                    "user",
                                    "wait"
                                  ]
                                }
                              ]
                            },
                            "onComplete": {
                              "type": "object",
                              "description": "Actions to take when the step completes",
                              "properties": {
                                "actions": {
                                  "type": "array",
                                  "items": {
                                    "anyOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "The type of the action",
                                            "enum": [
                                              "email"
                                            ]
                                          },
                                          "options": {
                                            "type": "object",
                                            "description": "settings for the action",
                                            "additionalProperties": {
                                              "type": "string"
                                            },
                                            "x-examples": [
                                              {
                                                "to": "bob@example.com",
                                                "from": "alice@example.com"
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        },
                        {
                          "type": "object",
                          "description": "Allows executing actions with out performing any function",
                          "properties": {
                            "label": {
                              "example": "Send email to project manager",
                              "x-examples": [
                                "Send email to project manager"
                              ]
                            },
                            "type": {
                              "example": "pass",
                              "x-examples": [
                                "pass"
                              ],
                              "allOf": [
                                {
                                  "type": "string",
                                  "description": "Type of workflow step",
                                  "enum": [
                                    "load",
                                    "choice",
                                    "function",
                                    "machine",
                                    "pass",
                                    "fail",
                                    "success",
                                    "user",
                                    "wait"
                                  ]
                                }
                              ]
                            }
                          },
                          "allOf": [
                            {
                              "type": "object",
                              "x-ui-hide": true,
                              "required": [
                                "type",
                                "label",
                                "goto"
                              ],
                              "properties": {
                                "type": {
                                  "type": "string",
                                  "description": "Type of workflow step",
                                  "enum": [
                                    "load",
                                    "choice",
                                    "function",
                                    "machine",
                                    "pass",
                                    "fail",
                                    "success",
                                    "user",
                                    "wait"
                                  ]
                                },
                                "label": {
                                  "type": "string",
                                  "description": "Label for the step",
                                  "example": "Find units",
                                  "x-examples": [
                                    "Find units"
                                  ]
                                },
                                "goto": {
                                  "type": "string",
                                  "description": "Step to move to",
                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                  "example": "complete",
                                  "x-examples": [
                                    "complete"
                                  ]
                                },
                                "goto-fail": {
                                  "type": "string",
                                  "description": "Step to transition too if this step cannot be completed",
                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                  "example": "process-fail",
                                  "x-examples": [
                                    "process-fail"
                                  ]
                                },
                                "context": {
                                  "type": "array",
                                  "description": "Initial values to set on the context",
                                  "items": {
                                    "type": "object",
                                    "required": [
                                      "key",
                                      "value"
                                    ],
                                    "properties": {
                                      "key": {
                                        "type": "string",
                                        "description": "The context key to set",
                                        "example": "$.fizz",
                                        "x-examples": [
                                          "$.fizz",
                                          "$.unit.status",
                                          "extract_fields"
                                        ]
                                      },
                                      "value": {
                                        "type": "string",
                                        "description": "Value to set",
                                        "example": "$.buzz",
                                        "x-examples": [
                                          "$.buzz",
                                          "Pending",
                                          true
                                        ]
                                      },
                                      "lock": {
                                        "type": "boolean",
                                        "description": "Prevents other steps from writing this value",
                                        "example": true
                                      },
                                      "ignore": {
                                        "type": "boolean",
                                        "description": "When trying to set a locked key, do not fail",
                                        "example": false
                                      }
                                    }
                                  }
                                },
                                "onError": {
                                  "type": "object",
                                  "description": "Action to take when step fails",
                                  "required": [
                                    "finally"
                                  ],
                                  "properties": {
                                    "retry": {
                                      "type": "integer",
                                      "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                      "minimum": 0,
                                      "maximum": 10,
                                      "example": 3,
                                      "default": 0
                                    },
                                    "finally": {
                                      "type": "object",
                                      "description": "What to do after all retries",
                                      "required": [
                                        "goto"
                                      ],
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "description": "Actions to take on failure",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        },
                                        "goto": {
                                          "type": "string",
                                          "description": "Step to transition to on failure",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "failed",
                                          "x-examples": [
                                            "failed"
                                          ]
                                        }
                                      }
                                    }
                                  }
                                },
                                "onComplete": {
                                  "type": "object",
                                  "description": "Actions to take when the step completes",
                                  "properties": {
                                    "actions": {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "The type of the action",
                                                "enum": [
                                                  "email"
                                                ]
                                              },
                                              "options": {
                                                "type": "object",
                                                "description": "settings for the action",
                                                "additionalProperties": {
                                                  "type": "string"
                                                },
                                                "x-examples": [
                                                  {
                                                    "to": "bob@example.com",
                                                    "from": "alice@example.com"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          ]
                        },
                        {
                          "type": "object",
                          "description": "Finial step which is marked as completed successfully",
                          "properties": {
                            "label": {
                              "example": "Complete",
                              "x-examples": [
                                "Complete"
                              ],
                              "allOf": [
                                {
                                  "type": "string",
                                  "description": "Label for the step",
                                  "example": "Find units",
                                  "x-examples": [
                                    "Find units"
                                  ]
                                }
                              ]
                            },
                            "type": {
                              "example": "success",
                              "x-examples": [
                                "success"
                              ],
                              "allOf": [
                                {
                                  "type": "string",
                                  "description": "Type of workflow step",
                                  "enum": [
                                    "load",
                                    "choice",
                                    "function",
                                    "machine",
                                    "pass",
                                    "fail",
                                    "success",
                                    "user",
                                    "wait"
                                  ]
                                }
                              ]
                            },
                            "onComplete": {
                              "type": "object",
                              "description": "Actions to take when the step completes",
                              "properties": {
                                "actions": {
                                  "type": "array",
                                  "items": {
                                    "anyOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "The type of the action",
                                            "enum": [
                                              "email"
                                            ]
                                          },
                                          "options": {
                                            "type": "object",
                                            "description": "settings for the action",
                                            "additionalProperties": {
                                              "type": "string"
                                            },
                                            "x-examples": [
                                              {
                                                "to": "bob@example.com",
                                                "from": "alice@example.com"
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        },
                        {
                          "type": "object",
                          "description": "A step which run at certain times",
                          "required": [
                            "stop_at",
                            "time"
                          ],
                          "properties": {
                            "label": {
                              "example": "Wait for cable",
                              "x-examples": [
                                "Wait for cable"
                              ],
                              "allOf": [
                                {
                                  "type": "string",
                                  "description": "Label for the step",
                                  "example": "Find units",
                                  "x-examples": [
                                    "Find units"
                                  ]
                                }
                              ]
                            },
                            "type": {
                              "x-examples": [
                                "wait"
                              ],
                              "example": "wait"
                            },
                            "stop_at": {
                              "type": "integer",
                              "description": "Time in seconds to stop this task",
                              "maximum": 900,
                              "minimum": 1
                            },
                            "time": {
                              "type": "integer",
                              "description": "Time to wait before checking this step",
                              "example": 600,
                              "maximum": 900,
                              "minimum": 1
                            },
                            "listen_for": {
                              "type": "array",
                              "description": "List of events and conditions to listen for to trigger",
                              "items": {
                                "type": "object",
                                "required": [
                                  "event"
                                ],
                                "properties": {
                                  "event": {
                                    "type": "string",
                                    "description": "Name of the event to listen for",
                                    "allOf": [
                                      {
                                        "type": "string",
                                        "description": "Possible entity events",
                                        "enum": [
                                          "CON.attached",
                                          "CON.created",
                                          "CON.deleted",
                                          "CON.detached",
                                          "CON.removed",
                                          "CON.updated",
                                          "CUS.attached",
                                          "CUS.created",
                                          "CUS.deleted",
                                          "CUS.detached",
                                          "CUS.removed",
                                          "CUS.updated",
                                          "LOC.attached",
                                          "LOC.created",
                                          "LOC.deleted",
                                          "LOC.detached",
                                          "LOC.removed",
                                          "LOC.updated",
                                          "NOTE.attached",
                                          "NOTE.created",
                                          "NOTE.deleted",
                                          "NOTE.detached",
                                          "NOTE.removed",
                                          "NOTE.updated",
                                          "PART.attached",
                                          "PART.created",
                                          "PART.deleted",
                                          "PART.detached",
                                          "PART.removed",
                                          "PART.updated",
                                          "PGM.attached",
                                          "PGM.created",
                                          "PGM.deleted",
                                          "PGM.detached",
                                          "PGM.removed",
                                          "PGM.updated",
                                          "PRO.attached",
                                          "PRO.created",
                                          "PRO.deleted",
                                          "PRO.detached",
                                          "PRO.removed",
                                          "PRO.updated",
                                          "RES.attached",
                                          "RES.created",
                                          "RES.deleted",
                                          "RES.detached",
                                          "RES.removed",
                                          "RES.updated",
                                          "UNIT.attached",
                                          "UNIT.created",
                                          "UNIT.deleted",
                                          "UNIT.detached",
                                          "UNIT.removed",
                                          "UNIT.updated",
                                          "USER.attached",
                                          "USER.created",
                                          "USER.deleted",
                                          "USER.detached",
                                          "USER.removed",
                                          "USER.updated",
                                          "WKF.attached",
                                          "WKF.created",
                                          "WKF.deleted",
                                          "WKF.detached",
                                          "WKF.removed",
                                          "WKF.updated",
                                          "WOR.attached",
                                          "WOR.created",
                                          "WOR.deleted",
                                          "WOR.detached",
                                          "WOR.removed",
                                          "WOR.updated"
                                        ]
                                      }
                                    ]
                                  },
                                  "event_value": {
                                    "type": "object",
                                    "description": "The event conditions that have to be met",
                                    "allOf": [
                                      {
                                        "description": "A Step choice",
                                        "type": "object",
                                        "maxProperties": 2,
                                        "minProperties": 2,
                                        "required": [
                                          "variable"
                                        ],
                                        "properties": {
                                          "variable": {
                                            "type": "string",
                                            "description": "Context variable to check",
                                            "example": "$.parts.available",
                                            "x-examples": [
                                              "$.parts.available"
                                            ]
                                          },
                                          "greater_than_equals": {
                                            "type": "string",
                                            "description": "Value has to be greater than or equals to",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "less_than_equals": {
                                            "type": "string",
                                            "description": "Value has to be less than or equals to",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "greater_than": {
                                            "type": "string",
                                            "description": "Value has to be greater than",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "less_than": {
                                            "type": "string",
                                            "description": "Value has to be less than",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "equals": {
                                            "type": "string",
                                            "description": "Value has to equal",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "not_equals": {
                                            "type": "string",
                                            "description": "Value must not equal",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          },
                          "allOf": [
                            {
                              "type": "object",
                              "x-ui-hide": true,
                              "required": [
                                "type",
                                "label",
                                "goto"
                              ],
                              "properties": {
                                "type": {
                                  "type": "string",
                                  "description": "Type of workflow step",
                                  "enum": [
                                    "load",
                                    "choice",
                                    "function",
                                    "machine",
                                    "pass",
                                    "fail",
                                    "success",
                                    "user",
                                    "wait"
                                  ]
                                },
                                "label": {
                                  "type": "string",
                                  "description": "Label for the step",
                                  "example": "Find units",
                                  "x-examples": [
                                    "Find units"
                                  ]
                                },
                                "goto": {
                                  "type": "string",
                                  "description": "Step to move to",
                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                  "example": "complete",
                                  "x-examples": [
                                    "complete"
                                  ]
                                },
                                "goto-fail": {
                                  "type": "string",
                                  "description": "Step to transition too if this step cannot be completed",
                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                  "example": "process-fail",
                                  "x-examples": [
                                    "process-fail"
                                  ]
                                },
                                "context": {
                                  "type": "array",
                                  "description": "Initial values to set on the context",
                                  "items": {
                                    "type": "object",
                                    "required": [
                                      "key",
                                      "value"
                                    ],
                                    "properties": {
                                      "key": {
                                        "type": "string",
                                        "description": "The context key to set",
                                        "example": "$.fizz",
                                        "x-examples": [
                                          "$.fizz",
                                          "$.unit.status",
                                          "extract_fields"
                                        ]
                                      },
                                      "value": {
                                        "type": "string",
                                        "description": "Value to set",
                                        "example": "$.buzz",
                                        "x-examples": [
                                          "$.buzz",
                                          "Pending",
                                          true
                                        ]
                                      },
                                      "lock": {
                                        "type": "boolean",
                                        "description": "Prevents other steps from writing this value",
                                        "example": true
                                      },
                                      "ignore": {
                                        "type": "boolean",
                                        "description": "When trying to set a locked key, do not fail",
                                        "example": false
                                      }
                                    }
                                  }
                                },
                                "onError": {
                                  "type": "object",
                                  "description": "Action to take when step fails",
                                  "required": [
                                    "finally"
                                  ],
                                  "properties": {
                                    "retry": {
                                      "type": "integer",
                                      "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                      "minimum": 0,
                                      "maximum": 10,
                                      "example": 3,
                                      "default": 0
                                    },
                                    "finally": {
                                      "type": "object",
                                      "description": "What to do after all retries",
                                      "required": [
                                        "goto"
                                      ],
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "description": "Actions to take on failure",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        },
                                        "goto": {
                                          "type": "string",
                                          "description": "Step to transition to on failure",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "failed",
                                          "x-examples": [
                                            "failed"
                                          ]
                                        }
                                      }
                                    }
                                  }
                                },
                                "onComplete": {
                                  "type": "object",
                                  "description": "Actions to take when the step completes",
                                  "properties": {
                                    "actions": {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "The type of the action",
                                                "enum": [
                                                  "email"
                                                ]
                                              },
                                              "options": {
                                                "type": "object",
                                                "description": "settings for the action",
                                                "additionalProperties": {
                                                  "type": "string"
                                                },
                                                "x-examples": [
                                                  {
                                                    "to": "bob@example.com",
                                                    "from": "alice@example.com"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              },
              "additionalProperties": {
                "type": "object",
                "anyOf": [
                  {
                    "type": "object",
                    "description": "Close step",
                    "required": [
                      "step"
                    ],
                    "properties": {
                      "step": {
                        "type": "string",
                        "description": "Step to mark as complete",
                        "pattern": "^[a-z][a-z-]+[a-z]$",
                        "example": "complete",
                        "x-examples": [
                          "complete"
                        ]
                      }
                    },
                    "anyOf": [
                      {
                        "type": "object",
                        "description": "Require the user confirm an action. This is normally used when Niagara cannot automatically detect that a task or action has been performed.",
                        "x-nter-step-component": "confirm-action",
                        "properties": {
                          "label": {
                            "x-examples": [
                              "Confirm the device has powered off"
                            ]
                          },
                          "options": {
                            "type": "object",
                            "required": [
                              "component",
                              "payload"
                            ],
                            "properties": {
                              "component": {
                                "enum": [
                                  "confirm-action"
                                ],
                                "example": "confirm-action",
                                "x-examples": [
                                  "confirm-action"
                                ]
                              },
                              "payload": {
                                "type": "object",
                                "required": [
                                  "message"
                                ],
                                "properties": {
                                  "message": {
                                    "type": "string",
                                    "description": "The confirmation message to display to the user",
                                    "example": "Device powered off?",
                                    "x-examples": [
                                      "Device powered off?"
                                    ]
                                  },
                                  "negative_message": {
                                    "type": "string",
                                    "description": "An optional inverse message",
                                    "nullable": true,
                                    "example": "Device not functioning",
                                    "x-examples": [
                                      "Device not functioning"
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        },
                        "allOf": [
                          {
                            "type": "object",
                            "x-ui-hide": true,
                            "description": "A step which requires a user to complete",
                            "required": [
                              "type",
                              "options"
                            ],
                            "properties": {
                              "type": {
                                "example": "user",
                                "x-examples": [
                                  "user"
                                ]
                              },
                              "options": {
                                "type": "object",
                                "required": [
                                  "component",
                                  "payload"
                                ],
                                "properties": {
                                  "component": {
                                    "type": "string",
                                    "description": "Name of the function to invoke",
                                    "example": "assignUnitsFromCustomerToProject",
                                    "x-examples": [
                                      "assignUnitsFromCustomerToProject"
                                    ]
                                  },
                                  "payload": {
                                    "type": "object"
                                  }
                                }
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "required": [
                                  "type",
                                  "label",
                                  "goto"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "description": "Type of workflow step",
                                    "enum": [
                                      "load",
                                      "choice",
                                      "function",
                                      "machine",
                                      "pass",
                                      "fail",
                                      "success",
                                      "user",
                                      "wait"
                                    ]
                                  },
                                  "label": {
                                    "type": "string",
                                    "description": "Label for the step",
                                    "example": "Find units",
                                    "x-examples": [
                                      "Find units"
                                    ]
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to move to",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "complete",
                                    "x-examples": [
                                      "complete"
                                    ]
                                  },
                                  "goto-fail": {
                                    "type": "string",
                                    "description": "Step to transition too if this step cannot be completed",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "process-fail",
                                    "x-examples": [
                                      "process-fail"
                                    ]
                                  },
                                  "context": {
                                    "type": "array",
                                    "description": "Initial values to set on the context",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "key",
                                        "value"
                                      ],
                                      "properties": {
                                        "key": {
                                          "type": "string",
                                          "description": "The context key to set",
                                          "example": "$.fizz",
                                          "x-examples": [
                                            "$.fizz",
                                            "$.unit.status",
                                            "extract_fields"
                                          ]
                                        },
                                        "value": {
                                          "type": "string",
                                          "description": "Value to set",
                                          "example": "$.buzz",
                                          "x-examples": [
                                            "$.buzz",
                                            "Pending",
                                            true
                                          ]
                                        },
                                        "lock": {
                                          "type": "boolean",
                                          "description": "Prevents other steps from writing this value",
                                          "example": true
                                        },
                                        "ignore": {
                                          "type": "boolean",
                                          "description": "When trying to set a locked key, do not fail",
                                          "example": false
                                        }
                                      }
                                    }
                                  },
                                  "onError": {
                                    "type": "object",
                                    "description": "Action to take when step fails",
                                    "required": [
                                      "finally"
                                    ],
                                    "properties": {
                                      "retry": {
                                        "type": "integer",
                                        "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                        "minimum": 0,
                                        "maximum": 10,
                                        "example": 3,
                                        "default": 0
                                      },
                                      "finally": {
                                        "type": "object",
                                        "description": "What to do after all retries",
                                        "required": [
                                          "goto"
                                        ],
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "description": "Actions to take on failure",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to transition to on failure",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "failed",
                                            "x-examples": [
                                              "failed"
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "onComplete": {
                                    "type": "object",
                                    "description": "Actions to take when the step completes",
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "object",
                        "description": "Display a link or modal to a user which contains instructions from a PDF",
                        "x-nter-step-component": "follow-pdf-instructions",
                        "required": [
                          "label",
                          "payload"
                        ],
                        "properties": {
                          "label": {
                            "x-examples": [
                              "Instruct user to follow steps outlined in Apple PDF"
                            ]
                          },
                          "options": {
                            "type": "object",
                            "required": [
                              "component",
                              "payload"
                            ],
                            "properties": {
                              "component": {
                                "enum": [
                                  "follow-pds-instructions"
                                ],
                                "example": "follow-pdf-instructions",
                                "x-examples": [
                                  "follow-pdf-instructions"
                                ]
                              },
                              "payload": {
                                "type": "object",
                                "required": [
                                  "attachment_id"
                                ],
                                "properties": {
                                  "attachment_id": {
                                    "type": "string",
                                    "description": "UUID for the attachment",
                                    "format": "uuid",
                                    "example": "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7",
                                    "x-examples": [
                                      "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7"
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        },
                        "allOf": [
                          {
                            "type": "object",
                            "x-ui-hide": true,
                            "description": "A step which requires a user to complete",
                            "required": [
                              "type",
                              "options"
                            ],
                            "properties": {
                              "type": {
                                "example": "user",
                                "x-examples": [
                                  "user"
                                ]
                              },
                              "options": {
                                "type": "object",
                                "required": [
                                  "component",
                                  "payload"
                                ],
                                "properties": {
                                  "component": {
                                    "type": "string",
                                    "description": "Name of the function to invoke",
                                    "example": "assignUnitsFromCustomerToProject",
                                    "x-examples": [
                                      "assignUnitsFromCustomerToProject"
                                    ]
                                  },
                                  "payload": {
                                    "type": "object"
                                  }
                                }
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "required": [
                                  "type",
                                  "label",
                                  "goto"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "description": "Type of workflow step",
                                    "enum": [
                                      "load",
                                      "choice",
                                      "function",
                                      "machine",
                                      "pass",
                                      "fail",
                                      "success",
                                      "user",
                                      "wait"
                                    ]
                                  },
                                  "label": {
                                    "type": "string",
                                    "description": "Label for the step",
                                    "example": "Find units",
                                    "x-examples": [
                                      "Find units"
                                    ]
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to move to",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "complete",
                                    "x-examples": [
                                      "complete"
                                    ]
                                  },
                                  "goto-fail": {
                                    "type": "string",
                                    "description": "Step to transition too if this step cannot be completed",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "process-fail",
                                    "x-examples": [
                                      "process-fail"
                                    ]
                                  },
                                  "context": {
                                    "type": "array",
                                    "description": "Initial values to set on the context",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "key",
                                        "value"
                                      ],
                                      "properties": {
                                        "key": {
                                          "type": "string",
                                          "description": "The context key to set",
                                          "example": "$.fizz",
                                          "x-examples": [
                                            "$.fizz",
                                            "$.unit.status",
                                            "extract_fields"
                                          ]
                                        },
                                        "value": {
                                          "type": "string",
                                          "description": "Value to set",
                                          "example": "$.buzz",
                                          "x-examples": [
                                            "$.buzz",
                                            "Pending",
                                            true
                                          ]
                                        },
                                        "lock": {
                                          "type": "boolean",
                                          "description": "Prevents other steps from writing this value",
                                          "example": true
                                        },
                                        "ignore": {
                                          "type": "boolean",
                                          "description": "When trying to set a locked key, do not fail",
                                          "example": false
                                        }
                                      }
                                    }
                                  },
                                  "onError": {
                                    "type": "object",
                                    "description": "Action to take when step fails",
                                    "required": [
                                      "finally"
                                    ],
                                    "properties": {
                                      "retry": {
                                        "type": "integer",
                                        "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                        "minimum": 0,
                                        "maximum": 10,
                                        "example": 3,
                                        "default": 0
                                      },
                                      "finally": {
                                        "type": "object",
                                        "description": "What to do after all retries",
                                        "required": [
                                          "goto"
                                        ],
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "description": "Actions to take on failure",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to transition to on failure",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "failed",
                                            "x-examples": [
                                              "failed"
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "onComplete": {
                                    "type": "object",
                                    "description": "Actions to take when the step completes",
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "object",
                        "description": "Ask the user to manually enter (or confirm) data for an entity",
                        "x-nter-step-component": "manual-data-entry",
                        "properties": {
                          "label": {
                            "x-examples": [
                              "Enter asset tag and confirm serial number"
                            ]
                          },
                          "options": {
                            "type": "object",
                            "required": [
                              "component",
                              "payload"
                            ],
                            "properties": {
                              "component": {
                                "enum": [
                                  "manual-data-entry"
                                ],
                                "example": "manual-data-entry",
                                "x-examples": [
                                  "manual-data-entry"
                                ]
                              },
                              "payload": {
                                "type": "object",
                                "required": [
                                  "fields"
                                ],
                                "properties": {
                                  "fields": {
                                    "type": "array",
                                    "description": "Configuration for each field",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "input_type",
                                        "label",
                                        "required",
                                        "entity_field"
                                      ],
                                      "properties": {
                                        "input_type": {
                                          "type": "string",
                                          "description": "The type of input field to display",
                                          "enum": [
                                            "textbox",
                                            "input"
                                          ]
                                        },
                                        "label": {
                                          "type": "string",
                                          "description": "Label to display for the field",
                                          "example": "Asset Tag",
                                          "x-examples": [
                                            "Asset Tag"
                                          ]
                                        },
                                        "required": {
                                          "type": "boolean",
                                          "description": "Display the field as required input. Note: this is a helper function. It singles that the user is required to input data at this step. If the field is required on the entity, the user will be presented with a validation message",
                                          "example": true
                                        },
                                        "entity_field": {
                                          "type": "string",
                                          "description": "JSON Path to the field on the entity. If the path does not start with '$' then the entity on the context is assumed. Otherwise the data will be set on the context path",
                                          "example": "input_filter[?(@.key = 'asset-tag')]",
                                          "x-examples": [
                                            "input_filter[?(@.key = 'asset-tag')]"
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        },
                        "allOf": [
                          {
                            "type": "object",
                            "x-ui-hide": true,
                            "description": "A step which requires a user to complete",
                            "required": [
                              "type",
                              "options"
                            ],
                            "properties": {
                              "type": {
                                "example": "user",
                                "x-examples": [
                                  "user"
                                ]
                              },
                              "options": {
                                "type": "object",
                                "required": [
                                  "component",
                                  "payload"
                                ],
                                "properties": {
                                  "component": {
                                    "type": "string",
                                    "description": "Name of the function to invoke",
                                    "example": "assignUnitsFromCustomerToProject",
                                    "x-examples": [
                                      "assignUnitsFromCustomerToProject"
                                    ]
                                  },
                                  "payload": {
                                    "type": "object"
                                  }
                                }
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "required": [
                                  "type",
                                  "label",
                                  "goto"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "description": "Type of workflow step",
                                    "enum": [
                                      "load",
                                      "choice",
                                      "function",
                                      "machine",
                                      "pass",
                                      "fail",
                                      "success",
                                      "user",
                                      "wait"
                                    ]
                                  },
                                  "label": {
                                    "type": "string",
                                    "description": "Label for the step",
                                    "example": "Find units",
                                    "x-examples": [
                                      "Find units"
                                    ]
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to move to",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "complete",
                                    "x-examples": [
                                      "complete"
                                    ]
                                  },
                                  "goto-fail": {
                                    "type": "string",
                                    "description": "Step to transition too if this step cannot be completed",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "process-fail",
                                    "x-examples": [
                                      "process-fail"
                                    ]
                                  },
                                  "context": {
                                    "type": "array",
                                    "description": "Initial values to set on the context",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "key",
                                        "value"
                                      ],
                                      "properties": {
                                        "key": {
                                          "type": "string",
                                          "description": "The context key to set",
                                          "example": "$.fizz",
                                          "x-examples": [
                                            "$.fizz",
                                            "$.unit.status",
                                            "extract_fields"
                                          ]
                                        },
                                        "value": {
                                          "type": "string",
                                          "description": "Value to set",
                                          "example": "$.buzz",
                                          "x-examples": [
                                            "$.buzz",
                                            "Pending",
                                            true
                                          ]
                                        },
                                        "lock": {
                                          "type": "boolean",
                                          "description": "Prevents other steps from writing this value",
                                          "example": true
                                        },
                                        "ignore": {
                                          "type": "boolean",
                                          "description": "When trying to set a locked key, do not fail",
                                          "example": false
                                        }
                                      }
                                    }
                                  },
                                  "onError": {
                                    "type": "object",
                                    "description": "Action to take when step fails",
                                    "required": [
                                      "finally"
                                    ],
                                    "properties": {
                                      "retry": {
                                        "type": "integer",
                                        "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                        "minimum": 0,
                                        "maximum": 10,
                                        "example": 3,
                                        "default": 0
                                      },
                                      "finally": {
                                        "type": "object",
                                        "description": "What to do after all retries",
                                        "required": [
                                          "goto"
                                        ],
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "description": "Actions to take on failure",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to transition to on failure",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "failed",
                                            "x-examples": [
                                              "failed"
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "onComplete": {
                                    "type": "object",
                                    "description": "Actions to take when the step completes",
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "object",
                        "description": "Ask the user to follow a list and check off boxes",
                        "x-nter-step-component": "task-list",
                        "properties": {
                          "label": {
                            "x-examples": [
                              "Enter asset tag and confirm serial number"
                            ]
                          },
                          "options": {
                            "type": "object",
                            "required": [
                              "component",
                              "payload"
                            ],
                            "properties": {
                              "component": {
                                "enum": [
                                  "task-list"
                                ],
                                "example": "task-list",
                                "x-examples": [
                                  "task-list"
                                ]
                              },
                              "payload": {
                                "type": "object",
                                "required": [
                                  "items"
                                ],
                                "properties": {
                                  "is_qc": {
                                    "type": "boolean",
                                    "description": "Flags this list as a QC task list. This means that a different user can close the task to one previously on the context"
                                  },
                                  "items": {
                                    "type": "array",
                                    "description": "Configuration for each task list item",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "label",
                                        "help",
                                        "evaluated",
                                        "na_option"
                                      ],
                                      "properties": {
                                        "label": {
                                          "type": "string",
                                          "description": "Label to display for the field",
                                          "example": "Asset Tag placement",
                                          "x-examples": [
                                            "Asset Tag placement"
                                          ]
                                        },
                                        "slug": {
                                          "type": "string",
                                          "description": "Slug for the item (Auto-generated from the label)",
                                          "readOnly": true,
                                          "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$",
                                          "example": "asset-tag-placement",
                                          "x-examples": [
                                            "asset-tag-placement"
                                          ]
                                        },
                                        "help": {
                                          "type": "string",
                                          "description": "Message describing what is needed to be checked",
                                          "example": "Asset Tag attached to the unit in the correct position",
                                          "x-examples": [
                                            "Asset Tag attached to the unit in the correct position"
                                          ]
                                        },
                                        "evaluated": {
                                          "type": "boolean",
                                          "description": "When set to true, this will fail the step if the value for the item is false or N/A",
                                          "example": true
                                        },
                                        "na_field": {
                                          "type": "boolean",
                                          "description": "Allow the user to select the N/A option when checking off the list",
                                          "example": true
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        },
                        "allOf": [
                          {
                            "type": "object",
                            "x-ui-hide": true,
                            "description": "A step which requires a user to complete",
                            "required": [
                              "type",
                              "options"
                            ],
                            "properties": {
                              "type": {
                                "example": "user",
                                "x-examples": [
                                  "user"
                                ]
                              },
                              "options": {
                                "type": "object",
                                "required": [
                                  "component",
                                  "payload"
                                ],
                                "properties": {
                                  "component": {
                                    "type": "string",
                                    "description": "Name of the function to invoke",
                                    "example": "assignUnitsFromCustomerToProject",
                                    "x-examples": [
                                      "assignUnitsFromCustomerToProject"
                                    ]
                                  },
                                  "payload": {
                                    "type": "object"
                                  }
                                }
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "required": [
                                  "type",
                                  "label",
                                  "goto"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "description": "Type of workflow step",
                                    "enum": [
                                      "load",
                                      "choice",
                                      "function",
                                      "machine",
                                      "pass",
                                      "fail",
                                      "success",
                                      "user",
                                      "wait"
                                    ]
                                  },
                                  "label": {
                                    "type": "string",
                                    "description": "Label for the step",
                                    "example": "Find units",
                                    "x-examples": [
                                      "Find units"
                                    ]
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to move to",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "complete",
                                    "x-examples": [
                                      "complete"
                                    ]
                                  },
                                  "goto-fail": {
                                    "type": "string",
                                    "description": "Step to transition too if this step cannot be completed",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "process-fail",
                                    "x-examples": [
                                      "process-fail"
                                    ]
                                  },
                                  "context": {
                                    "type": "array",
                                    "description": "Initial values to set on the context",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "key",
                                        "value"
                                      ],
                                      "properties": {
                                        "key": {
                                          "type": "string",
                                          "description": "The context key to set",
                                          "example": "$.fizz",
                                          "x-examples": [
                                            "$.fizz",
                                            "$.unit.status",
                                            "extract_fields"
                                          ]
                                        },
                                        "value": {
                                          "type": "string",
                                          "description": "Value to set",
                                          "example": "$.buzz",
                                          "x-examples": [
                                            "$.buzz",
                                            "Pending",
                                            true
                                          ]
                                        },
                                        "lock": {
                                          "type": "boolean",
                                          "description": "Prevents other steps from writing this value",
                                          "example": true
                                        },
                                        "ignore": {
                                          "type": "boolean",
                                          "description": "When trying to set a locked key, do not fail",
                                          "example": false
                                        }
                                      }
                                    }
                                  },
                                  "onError": {
                                    "type": "object",
                                    "description": "Action to take when step fails",
                                    "required": [
                                      "finally"
                                    ],
                                    "properties": {
                                      "retry": {
                                        "type": "integer",
                                        "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                        "minimum": 0,
                                        "maximum": 10,
                                        "example": 3,
                                        "default": 0
                                      },
                                      "finally": {
                                        "type": "object",
                                        "description": "What to do after all retries",
                                        "required": [
                                          "goto"
                                        ],
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "description": "Actions to take on failure",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to transition to on failure",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "failed",
                                            "x-examples": [
                                              "failed"
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "onComplete": {
                                    "type": "object",
                                    "description": "Actions to take when the step completes",
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "object",
                        "description": "Run the ACE-IOS application to provision iOS devices or ",
                        "properties": {
                          "type": {
                            "example": "machine",
                            "x-examples": [
                              "machine"
                            ]
                          },
                          "label": {
                            "x-examples": [
                              "Run Application"
                            ]
                          },
                          "options": {
                            "type": "object",
                            "required": [
                              "application",
                              "configuration"
                            ],
                            "properties": {
                              "configuration": {
                                "type": "object",
                                "description": "ACE Configuration options",
                                "properties": {
                                  "pairing_cert": {
                                    "type": "string",
                                    "format": "base64",
                                    "description": "Contents of a *.crt file exported from Apple Configurator or MDM",
                                    "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                    "x-examples": [
                                      "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                    ],
                                    "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                  },
                                  "pairing_key": {
                                    "type": "string",
                                    "format": "base64",
                                    "description": "Contents of a *.der file exported from Apple Configurator or MDM",
                                    "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                    "x-examples": [
                                      "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                    ],
                                    "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                  },
                                  "restore_device": {
                                    "type": "boolean",
                                    "description": "Restore device to factory defaults"
                                  },
                                  "automated_enrollment": {
                                    "type": "boolean",
                                    "description": "Automatically enroll the device to MDM"
                                  },
                                  "mdm": {
                                    "type": "object",
                                    "format": "base64",
                                    "description": "The settings for the Customers MDM",
                                    "properties": {
                                      "vendor": {
                                        "type": "string",
                                        "description": "MDM vendor. Currently, supported values are AirWatch, JAMF, and Meraki.",
                                        "enum": [
                                          "AirWatch",
                                          "JAMF",
                                          "Meraki"
                                        ]
                                      },
                                      "console_url": {
                                        "type": "string",
                                        "format": "uri",
                                        "description": "Base URL for HTTP requests",
                                        "example": "http://jamf.zones.com",
                                        "x-examples": [
                                          "http://jamf.zones.com"
                                        ]
                                      },
                                      "user": {
                                        "type": "string",
                                        "description": "MDM User name",
                                        "example": "NterpriseBob",
                                        "x-examples": [
                                          "NterpriseBob"
                                        ]
                                      },
                                      "password": {
                                        "type": "string",
                                        "description": "MDM password"
                                      },
                                      "tenant_code": {
                                        "type": "string",
                                        "description": "MDM authentication key",
                                        "example": "nterprise",
                                        "x-examples": [
                                          "nterprise"
                                        ]
                                      },
                                      "set_asset_tag": {
                                        "type": "string",
                                        "description": "Sets the devices Asset tag based on a field from the unit",
                                        "example": "$._entity.input_filter[?(@.key = 'asset-tag')]",
                                        "x-examples": [
                                          "$._entity.input_filter[?(@.key = 'asset-tag')]"
                                        ]
                                      }
                                    }
                                  },
                                  "field_mappings": {
                                    "type": "array",
                                    "description": "List of fields to map to the device",
                                    "items": {
                                      "type": "object",
                                      "properties": {
                                        "from": {
                                          "type": "string",
                                          "description": "The field reported from ACE",
                                          "enum": [
                                            "serial_number",
                                            "name",
                                            "ecid",
                                            "udid",
                                            "configurator_serial",
                                            "ios",
                                            "model",
                                            "storage",
                                            "wifi_mac",
                                            "bt_mac",
                                            "ethernet_mac",
                                            "thundersync_serial",
                                            "iccid",
                                            "iccid2",
                                            "imei",
                                            "imei2",
                                            "missed_profiles",
                                            "missed_apps",
                                            "icon_list_regex",
                                            "icon_layout",
                                            "bat_capacity"
                                          ]
                                        },
                                        "to": {
                                          "type": "string",
                                          "description": "Field to set on the entity",
                                          "example": "$._entity.input_filter[?(@.key = 'serial-number')]",
                                          "x-examples": [
                                            "$._entity.input_filter[?(@.key = 'serial-number')]"
                                          ]
                                        }
                                      }
                                    }
                                  },
                                  "wait_for_apps": {
                                    "type": "array",
                                    "description": "A list of applications needed to be installed on the device. This will cause the extension to poll the device for installed applications. Once all the applications have been installed, this step can be completed",
                                    "items": {
                                      "type": "string",
                                      "format": "uri",
                                      "example": "com.apple.itunes",
                                      "x-examples": [
                                        "com.apple.itunes"
                                      ]
                                    }
                                  },
                                  "wait_for_battery_charge": {
                                    "type": "integer",
                                    "description": "The required battery percentage needed before this step can move on",
                                    "minimum": 0,
                                    "maximum": 100
                                  }
                                }
                              }
                            }
                          }
                        },
                        "allOf": [
                          {
                            "type": "object",
                            "description": "Run an application extension",
                            "properties": {
                              "label": {
                                "x-examples": [
                                  "Run Application"
                                ]
                              },
                              "options": {
                                "type": "object",
                                "required": [
                                  "application",
                                  "configuration"
                                ],
                                "properties": {
                                  "application": {
                                    "type": "object",
                                    "required": [
                                      "application_id",
                                      "platforms"
                                    ],
                                    "properties": {
                                      "application_id": {
                                        "type": "string",
                                        "description": "Registered application ID",
                                        "example": "ace-ios",
                                        "x-examples": [
                                          "ace-ios"
                                        ]
                                      },
                                      "platforms": {
                                        "type": "array",
                                        "description": "Allowed platforms the application can run on",
                                        "items": {
                                          "type": "object",
                                          "required": [
                                            "platform",
                                            "arch"
                                          ],
                                          "properties": {
                                            "platform": {
                                              "type": "string",
                                              "description": "The platform (OS) the application can run on",
                                              "enum": [
                                                "aix",
                                                "darwin",
                                                "freebsd",
                                                "linux",
                                                "openbsd",
                                                "sunos",
                                                "win32"
                                              ]
                                            },
                                            "arch": {
                                              "type": "string",
                                              "description": "The CPU architecture needed to run the application",
                                              "enum": [
                                                "arm",
                                                "arm64",
                                                "ia32",
                                                "mips",
                                                "mipsel",
                                                "ppc",
                                                "ppc64",
                                                "s390",
                                                "s390x",
                                                "x32",
                                                "x64"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "required": [
                                  "type",
                                  "label",
                                  "goto"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "description": "Type of workflow step",
                                    "enum": [
                                      "load",
                                      "choice",
                                      "function",
                                      "machine",
                                      "pass",
                                      "fail",
                                      "success",
                                      "user",
                                      "wait"
                                    ]
                                  },
                                  "label": {
                                    "type": "string",
                                    "description": "Label for the step",
                                    "example": "Find units",
                                    "x-examples": [
                                      "Find units"
                                    ]
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to move to",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "complete",
                                    "x-examples": [
                                      "complete"
                                    ]
                                  },
                                  "goto-fail": {
                                    "type": "string",
                                    "description": "Step to transition too if this step cannot be completed",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "process-fail",
                                    "x-examples": [
                                      "process-fail"
                                    ]
                                  },
                                  "context": {
                                    "type": "array",
                                    "description": "Initial values to set on the context",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "key",
                                        "value"
                                      ],
                                      "properties": {
                                        "key": {
                                          "type": "string",
                                          "description": "The context key to set",
                                          "example": "$.fizz",
                                          "x-examples": [
                                            "$.fizz",
                                            "$.unit.status",
                                            "extract_fields"
                                          ]
                                        },
                                        "value": {
                                          "type": "string",
                                          "description": "Value to set",
                                          "example": "$.buzz",
                                          "x-examples": [
                                            "$.buzz",
                                            "Pending",
                                            true
                                          ]
                                        },
                                        "lock": {
                                          "type": "boolean",
                                          "description": "Prevents other steps from writing this value",
                                          "example": true
                                        },
                                        "ignore": {
                                          "type": "boolean",
                                          "description": "When trying to set a locked key, do not fail",
                                          "example": false
                                        }
                                      }
                                    }
                                  },
                                  "onError": {
                                    "type": "object",
                                    "description": "Action to take when step fails",
                                    "required": [
                                      "finally"
                                    ],
                                    "properties": {
                                      "retry": {
                                        "type": "integer",
                                        "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                        "minimum": 0,
                                        "maximum": 10,
                                        "example": 3,
                                        "default": 0
                                      },
                                      "finally": {
                                        "type": "object",
                                        "description": "What to do after all retries",
                                        "required": [
                                          "goto"
                                        ],
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "description": "Actions to take on failure",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to transition to on failure",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "failed",
                                            "x-examples": [
                                              "failed"
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "onComplete": {
                                    "type": "object",
                                    "description": "Actions to take when the step completes",
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "object",
                        "properties": {
                          "label": {
                            "example": "Is device ok?",
                            "x-examples": [
                              "Is device ok?"
                            ]
                          },
                          "type": {
                            "example": "choice",
                            "x-examples": [
                              "choice"
                            ]
                          },
                          "choices": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "required": [
                                "goto"
                              ],
                              "maxProperties": 2,
                              "minProperties": 2,
                              "maximum": 20,
                              "properties": {
                                "and": {
                                  "type": "array",
                                  "description": "All choices must be satisfied",
                                  "maximum": 5,
                                  "items": {
                                    "description": "A Step choice",
                                    "type": "object",
                                    "maxProperties": 2,
                                    "minProperties": 2,
                                    "required": [
                                      "variable"
                                    ],
                                    "properties": {
                                      "variable": {
                                        "type": "string",
                                        "description": "Context variable to check",
                                        "example": "$.parts.available",
                                        "x-examples": [
                                          "$.parts.available"
                                        ]
                                      },
                                      "greater_than_equals": {
                                        "type": "string",
                                        "description": "Value has to be greater than or equals to",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "less_than_equals": {
                                        "type": "string",
                                        "description": "Value has to be less than or equals to",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "greater_than": {
                                        "type": "string",
                                        "description": "Value has to be greater than",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "less_than": {
                                        "type": "string",
                                        "description": "Value has to be less than",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "equals": {
                                        "type": "string",
                                        "description": "Value has to equal",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "not_equals": {
                                        "type": "string",
                                        "description": "Value must not equal",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      }
                                    }
                                  }
                                },
                                "or": {
                                  "type": "array",
                                  "description": "Any of these choices must be satisfied",
                                  "maximum": 5,
                                  "items": {
                                    "description": "A Step choice",
                                    "type": "object",
                                    "maxProperties": 2,
                                    "minProperties": 2,
                                    "required": [
                                      "variable"
                                    ],
                                    "properties": {
                                      "variable": {
                                        "type": "string",
                                        "description": "Context variable to check",
                                        "example": "$.parts.available",
                                        "x-examples": [
                                          "$.parts.available"
                                        ]
                                      },
                                      "greater_than_equals": {
                                        "type": "string",
                                        "description": "Value has to be greater than or equals to",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "less_than_equals": {
                                        "type": "string",
                                        "description": "Value has to be less than or equals to",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "greater_than": {
                                        "type": "string",
                                        "description": "Value has to be greater than",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "less_than": {
                                        "type": "string",
                                        "description": "Value has to be less than",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "equals": {
                                        "type": "string",
                                        "description": "Value has to equal",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "not_equals": {
                                        "type": "string",
                                        "description": "Value must not equal",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      }
                                    }
                                  }
                                },
                                "not": {
                                  "type": "array",
                                  "description": "None of these choices must be satisfied",
                                  "maximum": 5,
                                  "items": {
                                    "description": "A Step choice",
                                    "type": "object",
                                    "maxProperties": 2,
                                    "minProperties": 2,
                                    "required": [
                                      "variable"
                                    ],
                                    "properties": {
                                      "variable": {
                                        "type": "string",
                                        "description": "Context variable to check",
                                        "example": "$.parts.available",
                                        "x-examples": [
                                          "$.parts.available"
                                        ]
                                      },
                                      "greater_than_equals": {
                                        "type": "string",
                                        "description": "Value has to be greater than or equals to",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "less_than_equals": {
                                        "type": "string",
                                        "description": "Value has to be less than or equals to",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "greater_than": {
                                        "type": "string",
                                        "description": "Value has to be greater than",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "less_than": {
                                        "type": "string",
                                        "description": "Value has to be less than",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "equals": {
                                        "type": "string",
                                        "description": "Value has to equal",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "not_equals": {
                                        "type": "string",
                                        "description": "Value must not equal",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      }
                                    }
                                  }
                                },
                                "goto": {
                                  "description": "Step to goto when condition is met",
                                  "allOf": [
                                    {
                                      "type": "string",
                                      "description": "Step to move to",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "complete",
                                      "x-examples": [
                                        "complete"
                                      ]
                                    }
                                  ]
                                }
                              }
                            }
                          },
                          "goto": {
                            "description": "Default step to goto when no choice can be made"
                          }
                        },
                        "allOf": [
                          {
                            "type": "object",
                            "x-ui-hide": true,
                            "required": [
                              "type",
                              "label",
                              "goto"
                            ],
                            "properties": {
                              "type": {
                                "type": "string",
                                "description": "Type of workflow step",
                                "enum": [
                                  "load",
                                  "choice",
                                  "function",
                                  "machine",
                                  "pass",
                                  "fail",
                                  "success",
                                  "user",
                                  "wait"
                                ]
                              },
                              "label": {
                                "type": "string",
                                "description": "Label for the step",
                                "example": "Find units",
                                "x-examples": [
                                  "Find units"
                                ]
                              },
                              "goto": {
                                "type": "string",
                                "description": "Step to move to",
                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                "example": "complete",
                                "x-examples": [
                                  "complete"
                                ]
                              },
                              "goto-fail": {
                                "type": "string",
                                "description": "Step to transition too if this step cannot be completed",
                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                "example": "process-fail",
                                "x-examples": [
                                  "process-fail"
                                ]
                              },
                              "context": {
                                "type": "array",
                                "description": "Initial values to set on the context",
                                "items": {
                                  "type": "object",
                                  "required": [
                                    "key",
                                    "value"
                                  ],
                                  "properties": {
                                    "key": {
                                      "type": "string",
                                      "description": "The context key to set",
                                      "example": "$.fizz",
                                      "x-examples": [
                                        "$.fizz",
                                        "$.unit.status",
                                        "extract_fields"
                                      ]
                                    },
                                    "value": {
                                      "type": "string",
                                      "description": "Value to set",
                                      "example": "$.buzz",
                                      "x-examples": [
                                        "$.buzz",
                                        "Pending",
                                        true
                                      ]
                                    },
                                    "lock": {
                                      "type": "boolean",
                                      "description": "Prevents other steps from writing this value",
                                      "example": true
                                    },
                                    "ignore": {
                                      "type": "boolean",
                                      "description": "When trying to set a locked key, do not fail",
                                      "example": false
                                    }
                                  }
                                }
                              },
                              "onError": {
                                "type": "object",
                                "description": "Action to take when step fails",
                                "required": [
                                  "finally"
                                ],
                                "properties": {
                                  "retry": {
                                    "type": "integer",
                                    "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                    "minimum": 0,
                                    "maximum": 10,
                                    "example": 3,
                                    "default": 0
                                  },
                                  "finally": {
                                    "type": "object",
                                    "description": "What to do after all retries",
                                    "required": [
                                      "goto"
                                    ],
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "description": "Actions to take on failure",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      },
                                      "goto": {
                                        "type": "string",
                                        "description": "Step to transition to on failure",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "failed",
                                        "x-examples": [
                                          "failed"
                                        ]
                                      }
                                    }
                                  }
                                }
                              },
                              "onComplete": {
                                "type": "object",
                                "description": "Actions to take when the step completes",
                                "properties": {
                                  "actions": {
                                    "type": "array",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "The type of the action",
                                              "enum": [
                                                "email"
                                              ]
                                            },
                                            "options": {
                                              "type": "object",
                                              "description": "settings for the action",
                                              "additionalProperties": {
                                                "type": "string"
                                              },
                                              "x-examples": [
                                                {
                                                  "to": "bob@example.com",
                                                  "from": "alice@example.com"
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "object",
                        "description": "Finial step which is marked as failed",
                        "properties": {
                          "label": {
                            "example": "Failed",
                            "x-examples": [
                              "Failed"
                            ],
                            "allOf": [
                              {
                                "type": "string",
                                "description": "Label for the step",
                                "example": "Find units",
                                "x-examples": [
                                  "Find units"
                                ]
                              }
                            ]
                          },
                          "type": {
                            "example": "fail",
                            "x-examples": [
                              "fail"
                            ],
                            "allOf": [
                              {
                                "type": "string",
                                "description": "Type of workflow step",
                                "enum": [
                                  "load",
                                  "choice",
                                  "function",
                                  "machine",
                                  "pass",
                                  "fail",
                                  "success",
                                  "user",
                                  "wait"
                                ]
                              }
                            ]
                          },
                          "onComplete": {
                            "type": "object",
                            "description": "Actions to take when the step completes",
                            "properties": {
                              "actions": {
                                "type": "array",
                                "items": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "The type of the action",
                                          "enum": [
                                            "email"
                                          ]
                                        },
                                        "options": {
                                          "type": "object",
                                          "description": "settings for the action",
                                          "additionalProperties": {
                                            "type": "string"
                                          },
                                          "x-examples": [
                                            {
                                              "to": "bob@example.com",
                                              "from": "alice@example.com"
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          }
                        }
                      },
                      {
                        "type": "object",
                        "description": "Allows executing actions with out performing any function",
                        "properties": {
                          "label": {
                            "example": "Send email to project manager",
                            "x-examples": [
                              "Send email to project manager"
                            ]
                          },
                          "type": {
                            "example": "pass",
                            "x-examples": [
                              "pass"
                            ],
                            "allOf": [
                              {
                                "type": "string",
                                "description": "Type of workflow step",
                                "enum": [
                                  "load",
                                  "choice",
                                  "function",
                                  "machine",
                                  "pass",
                                  "fail",
                                  "success",
                                  "user",
                                  "wait"
                                ]
                              }
                            ]
                          }
                        },
                        "allOf": [
                          {
                            "type": "object",
                            "x-ui-hide": true,
                            "required": [
                              "type",
                              "label",
                              "goto"
                            ],
                            "properties": {
                              "type": {
                                "type": "string",
                                "description": "Type of workflow step",
                                "enum": [
                                  "load",
                                  "choice",
                                  "function",
                                  "machine",
                                  "pass",
                                  "fail",
                                  "success",
                                  "user",
                                  "wait"
                                ]
                              },
                              "label": {
                                "type": "string",
                                "description": "Label for the step",
                                "example": "Find units",
                                "x-examples": [
                                  "Find units"
                                ]
                              },
                              "goto": {
                                "type": "string",
                                "description": "Step to move to",
                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                "example": "complete",
                                "x-examples": [
                                  "complete"
                                ]
                              },
                              "goto-fail": {
                                "type": "string",
                                "description": "Step to transition too if this step cannot be completed",
                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                "example": "process-fail",
                                "x-examples": [
                                  "process-fail"
                                ]
                              },
                              "context": {
                                "type": "array",
                                "description": "Initial values to set on the context",
                                "items": {
                                  "type": "object",
                                  "required": [
                                    "key",
                                    "value"
                                  ],
                                  "properties": {
                                    "key": {
                                      "type": "string",
                                      "description": "The context key to set",
                                      "example": "$.fizz",
                                      "x-examples": [
                                        "$.fizz",
                                        "$.unit.status",
                                        "extract_fields"
                                      ]
                                    },
                                    "value": {
                                      "type": "string",
                                      "description": "Value to set",
                                      "example": "$.buzz",
                                      "x-examples": [
                                        "$.buzz",
                                        "Pending",
                                        true
                                      ]
                                    },
                                    "lock": {
                                      "type": "boolean",
                                      "description": "Prevents other steps from writing this value",
                                      "example": true
                                    },
                                    "ignore": {
                                      "type": "boolean",
                                      "description": "When trying to set a locked key, do not fail",
                                      "example": false
                                    }
                                  }
                                }
                              },
                              "onError": {
                                "type": "object",
                                "description": "Action to take when step fails",
                                "required": [
                                  "finally"
                                ],
                                "properties": {
                                  "retry": {
                                    "type": "integer",
                                    "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                    "minimum": 0,
                                    "maximum": 10,
                                    "example": 3,
                                    "default": 0
                                  },
                                  "finally": {
                                    "type": "object",
                                    "description": "What to do after all retries",
                                    "required": [
                                      "goto"
                                    ],
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "description": "Actions to take on failure",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      },
                                      "goto": {
                                        "type": "string",
                                        "description": "Step to transition to on failure",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "failed",
                                        "x-examples": [
                                          "failed"
                                        ]
                                      }
                                    }
                                  }
                                }
                              },
                              "onComplete": {
                                "type": "object",
                                "description": "Actions to take when the step completes",
                                "properties": {
                                  "actions": {
                                    "type": "array",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "The type of the action",
                                              "enum": [
                                                "email"
                                              ]
                                            },
                                            "options": {
                                              "type": "object",
                                              "description": "settings for the action",
                                              "additionalProperties": {
                                                "type": "string"
                                              },
                                              "x-examples": [
                                                {
                                                  "to": "bob@example.com",
                                                  "from": "alice@example.com"
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "object",
                        "description": "Finial step which is marked as completed successfully",
                        "properties": {
                          "label": {
                            "example": "Complete",
                            "x-examples": [
                              "Complete"
                            ],
                            "allOf": [
                              {
                                "type": "string",
                                "description": "Label for the step",
                                "example": "Find units",
                                "x-examples": [
                                  "Find units"
                                ]
                              }
                            ]
                          },
                          "type": {
                            "example": "success",
                            "x-examples": [
                              "success"
                            ],
                            "allOf": [
                              {
                                "type": "string",
                                "description": "Type of workflow step",
                                "enum": [
                                  "load",
                                  "choice",
                                  "function",
                                  "machine",
                                  "pass",
                                  "fail",
                                  "success",
                                  "user",
                                  "wait"
                                ]
                              }
                            ]
                          },
                          "onComplete": {
                            "type": "object",
                            "description": "Actions to take when the step completes",
                            "properties": {
                              "actions": {
                                "type": "array",
                                "items": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "The type of the action",
                                          "enum": [
                                            "email"
                                          ]
                                        },
                                        "options": {
                                          "type": "object",
                                          "description": "settings for the action",
                                          "additionalProperties": {
                                            "type": "string"
                                          },
                                          "x-examples": [
                                            {
                                              "to": "bob@example.com",
                                              "from": "alice@example.com"
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          }
                        }
                      },
                      {
                        "type": "object",
                        "description": "A step which run at certain times",
                        "required": [
                          "stop_at",
                          "time"
                        ],
                        "properties": {
                          "label": {
                            "example": "Wait for cable",
                            "x-examples": [
                              "Wait for cable"
                            ],
                            "allOf": [
                              {
                                "type": "string",
                                "description": "Label for the step",
                                "example": "Find units",
                                "x-examples": [
                                  "Find units"
                                ]
                              }
                            ]
                          },
                          "type": {
                            "x-examples": [
                              "wait"
                            ],
                            "example": "wait"
                          },
                          "stop_at": {
                            "type": "integer",
                            "description": "Time in seconds to stop this task",
                            "maximum": 900,
                            "minimum": 1
                          },
                          "time": {
                            "type": "integer",
                            "description": "Time to wait before checking this step",
                            "example": 600,
                            "maximum": 900,
                            "minimum": 1
                          },
                          "listen_for": {
                            "type": "array",
                            "description": "List of events and conditions to listen for to trigger",
                            "items": {
                              "type": "object",
                              "required": [
                                "event"
                              ],
                              "properties": {
                                "event": {
                                  "type": "string",
                                  "description": "Name of the event to listen for",
                                  "allOf": [
                                    {
                                      "type": "string",
                                      "description": "Possible entity events",
                                      "enum": [
                                        "CON.attached",
                                        "CON.created",
                                        "CON.deleted",
                                        "CON.detached",
                                        "CON.removed",
                                        "CON.updated",
                                        "CUS.attached",
                                        "CUS.created",
                                        "CUS.deleted",
                                        "CUS.detached",
                                        "CUS.removed",
                                        "CUS.updated",
                                        "LOC.attached",
                                        "LOC.created",
                                        "LOC.deleted",
                                        "LOC.detached",
                                        "LOC.removed",
                                        "LOC.updated",
                                        "NOTE.attached",
                                        "NOTE.created",
                                        "NOTE.deleted",
                                        "NOTE.detached",
                                        "NOTE.removed",
                                        "NOTE.updated",
                                        "PART.attached",
                                        "PART.created",
                                        "PART.deleted",
                                        "PART.detached",
                                        "PART.removed",
                                        "PART.updated",
                                        "PGM.attached",
                                        "PGM.created",
                                        "PGM.deleted",
                                        "PGM.detached",
                                        "PGM.removed",
                                        "PGM.updated",
                                        "PRO.attached",
                                        "PRO.created",
                                        "PRO.deleted",
                                        "PRO.detached",
                                        "PRO.removed",
                                        "PRO.updated",
                                        "RES.attached",
                                        "RES.created",
                                        "RES.deleted",
                                        "RES.detached",
                                        "RES.removed",
                                        "RES.updated",
                                        "UNIT.attached",
                                        "UNIT.created",
                                        "UNIT.deleted",
                                        "UNIT.detached",
                                        "UNIT.removed",
                                        "UNIT.updated",
                                        "USER.attached",
                                        "USER.created",
                                        "USER.deleted",
                                        "USER.detached",
                                        "USER.removed",
                                        "USER.updated",
                                        "WKF.attached",
                                        "WKF.created",
                                        "WKF.deleted",
                                        "WKF.detached",
                                        "WKF.removed",
                                        "WKF.updated",
                                        "WOR.attached",
                                        "WOR.created",
                                        "WOR.deleted",
                                        "WOR.detached",
                                        "WOR.removed",
                                        "WOR.updated"
                                      ]
                                    }
                                  ]
                                },
                                "event_value": {
                                  "type": "object",
                                  "description": "The event conditions that have to be met",
                                  "allOf": [
                                    {
                                      "description": "A Step choice",
                                      "type": "object",
                                      "maxProperties": 2,
                                      "minProperties": 2,
                                      "required": [
                                        "variable"
                                      ],
                                      "properties": {
                                        "variable": {
                                          "type": "string",
                                          "description": "Context variable to check",
                                          "example": "$.parts.available",
                                          "x-examples": [
                                            "$.parts.available"
                                          ]
                                        },
                                        "greater_than_equals": {
                                          "type": "string",
                                          "description": "Value has to be greater than or equals to",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "less_than_equals": {
                                          "type": "string",
                                          "description": "Value has to be less than or equals to",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "greater_than": {
                                          "type": "string",
                                          "description": "Value has to be greater than",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "less_than": {
                                          "type": "string",
                                          "description": "Value has to be less than",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "equals": {
                                          "type": "string",
                                          "description": "Value has to equal",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "not_equals": {
                                          "type": "string",
                                          "description": "Value must not equal",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          }
                        },
                        "allOf": [
                          {
                            "type": "object",
                            "x-ui-hide": true,
                            "required": [
                              "type",
                              "label",
                              "goto"
                            ],
                            "properties": {
                              "type": {
                                "type": "string",
                                "description": "Type of workflow step",
                                "enum": [
                                  "load",
                                  "choice",
                                  "function",
                                  "machine",
                                  "pass",
                                  "fail",
                                  "success",
                                  "user",
                                  "wait"
                                ]
                              },
                              "label": {
                                "type": "string",
                                "description": "Label for the step",
                                "example": "Find units",
                                "x-examples": [
                                  "Find units"
                                ]
                              },
                              "goto": {
                                "type": "string",
                                "description": "Step to move to",
                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                "example": "complete",
                                "x-examples": [
                                  "complete"
                                ]
                              },
                              "goto-fail": {
                                "type": "string",
                                "description": "Step to transition too if this step cannot be completed",
                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                "example": "process-fail",
                                "x-examples": [
                                  "process-fail"
                                ]
                              },
                              "context": {
                                "type": "array",
                                "description": "Initial values to set on the context",
                                "items": {
                                  "type": "object",
                                  "required": [
                                    "key",
                                    "value"
                                  ],
                                  "properties": {
                                    "key": {
                                      "type": "string",
                                      "description": "The context key to set",
                                      "example": "$.fizz",
                                      "x-examples": [
                                        "$.fizz",
                                        "$.unit.status",
                                        "extract_fields"
                                      ]
                                    },
                                    "value": {
                                      "type": "string",
                                      "description": "Value to set",
                                      "example": "$.buzz",
                                      "x-examples": [
                                        "$.buzz",
                                        "Pending",
                                        true
                                      ]
                                    },
                                    "lock": {
                                      "type": "boolean",
                                      "description": "Prevents other steps from writing this value",
                                      "example": true
                                    },
                                    "ignore": {
                                      "type": "boolean",
                                      "description": "When trying to set a locked key, do not fail",
                                      "example": false
                                    }
                                  }
                                }
                              },
                              "onError": {
                                "type": "object",
                                "description": "Action to take when step fails",
                                "required": [
                                  "finally"
                                ],
                                "properties": {
                                  "retry": {
                                    "type": "integer",
                                    "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                    "minimum": 0,
                                    "maximum": 10,
                                    "example": 3,
                                    "default": 0
                                  },
                                  "finally": {
                                    "type": "object",
                                    "description": "What to do after all retries",
                                    "required": [
                                      "goto"
                                    ],
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "description": "Actions to take on failure",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      },
                                      "goto": {
                                        "type": "string",
                                        "description": "Step to transition to on failure",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "failed",
                                        "x-examples": [
                                          "failed"
                                        ]
                                      }
                                    }
                                  }
                                }
                              },
                              "onComplete": {
                                "type": "object",
                                "description": "Actions to take when the step completes",
                                "properties": {
                                  "actions": {
                                    "type": "array",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "The type of the action",
                                              "enum": [
                                                "email"
                                              ]
                                            },
                                            "options": {
                                              "type": "object",
                                              "description": "settings for the action",
                                              "additionalProperties": {
                                                "type": "string"
                                              },
                                              "x-examples": [
                                                {
                                                  "to": "bob@example.com",
                                                  "from": "alice@example.com"
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            }
          },
          "allOf": [
            {
              "x-ui-hide": true,
              "type": "object",
              "description": "Common Properties to all entities",
              "required": [
                "label"
              ],
              "properties": {
                "label": {
                  "type": "string",
                  "description": "Label for the entity",
                  "example": "primary"
                },
                "slug": {
                  "type": "string",
                  "description": "Slug for the entity (Auto-generated from the label)",
                  "readOnly": true,
                  "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$"
                },
                "created": {
                  "description": "Date the entity was created",
                  "type": "string",
                  "format": "date-time",
                  "readOnly": true
                },
                "updated": {
                  "description": "Last date the entity was updated",
                  "type": "string",
                  "format": "date-time",
                  "readOnly": true
                }
              }
            }
          ],
          "example": {
            "steps": {
              "fail": {
                "step": "complete",
                "type": "user",
                "options": {
                  "component": "assignUnitsFromCustomerToProject",
                  "payload": {
                    "message": "Device powered off?",
                    "negative_message": "Device not functioning"
                  }
                },
                "label": "Find units",
                "goto": "complete",
                "goto-fail": "process-fail",
                "context": [
                  {
                    "key": "$.unit.status",
                    "value": "Pending",
                    "lock": true,
                    "ignore": true
                  }
                ],
                "onError": {
                  "finally": {
                    "goto": "failed",
                    "actions": [
                      {
                        "type": "email",
                        "options": {
                          "to": "bob@example.com",
                          "from": "alice@example.com"
                        }
                      }
                    ]
                  },
                  "retry": 8
                },
                "onComplete": {
                  "actions": [
                    {
                      "type": "email",
                      "options": {
                        "to": "bob@example.com",
                        "from": "alice@example.com"
                      }
                    },
                    {
                      "type": "email",
                      "options": {
                        "to": "bob@example.com",
                        "from": "alice@example.com"
                      }
                    },
                    {
                      "type": "email",
                      "options": {
                        "to": "bob@example.com",
                        "from": "alice@example.com"
                      }
                    }
                  ]
                }
              },
              "amet_b64$": {
                "step": "complete",
                "label": "Find units",
                "type": "success",
                "onComplete": {
                  "actions": [
                    {
                      "type": "email",
                      "options": {
                        "to": "bob@example.com",
                        "from": "alice@example.com"
                      }
                    }
                  ]
                }
              },
              "minim2__": {
                "step": "complete",
                "type": "pass",
                "label": "Find units",
                "goto": "complete",
                "goto-fail": "process-fail",
                "context": [
                  {
                    "key": "$.fizz",
                    "value": "$.buzz",
                    "lock": false,
                    "ignore": true
                  }
                ],
                "onError": {
                  "finally": {
                    "goto": "failed",
                    "actions": [
                      {
                        "type": "email",
                        "options": {
                          "to": "bob@example.com",
                          "from": "alice@example.com"
                        }
                      },
                      {
                        "type": "email",
                        "options": {
                          "to": "bob@example.com",
                          "from": "alice@example.com"
                        }
                      },
                      {
                        "type": "email",
                        "options": {
                          "to": "bob@example.com",
                          "from": "alice@example.com"
                        }
                      },
                      {
                        "type": "email",
                        "options": {
                          "to": "bob@example.com",
                          "from": "alice@example.com"
                        }
                      }
                    ]
                  },
                  "retry": 0
                },
                "onComplete": {
                  "actions": [
                    {
                      "type": "email",
                      "options": {
                        "to": "bob@example.com",
                        "from": "alice@example.com"
                      }
                    },
                    {
                      "type": "email",
                      "options": {
                        "to": "bob@example.com",
                        "from": "alice@example.com"
                      }
                    },
                    {
                      "type": "email",
                      "options": {
                        "to": "bob@example.com",
                        "from": "alice@example.com"
                      }
                    },
                    {
                      "type": "email",
                      "options": {
                        "to": "bob@example.com",
                        "from": "alice@example.com"
                      }
                    }
                  ]
                }
              }
            },
            "starts_at": "entry",
            "label": "MLTI iPad Assembly Assignment",
            "workflow_id": "e530652e-28e8-4f64-84af-e1cf0ff7c805",
            "applies_to": "customer",
            "slug": "mlti-ipad-assembly-assignment",
            "version": "1.0",
            "workflow_version": 7,
            "context": [
              {
                "key": "$.fizz",
                "value": "Pending",
                "lock": false,
                "ignore": true
              },
              {
                "key": "$.unit.status",
                "value": "true",
                "lock": false,
                "ignore": true
              },
              {
                "key": "$.unit.status",
                "value": "Pending",
                "lock": false,
                "ignore": true
              },
              {
                "key": "extract_fields",
                "value": "Pending",
                "lock": true,
                "ignore": false
              }
            ],
            "created": "1991-03-23T20:31:55.727Z",
            "updated": "1988-03-24T09:13:18.759Z"
          }
        }
      ],
      "example": "undefined"
    }
  ]
}
```

<h3 id="fetchworkflowbyid-responses">Responses</h3>

|Status|Meaning|Description|Schema|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|A workflow response|Inline|
|401|[Unauthorized](https://tools.ietf.org/html/rfc7235#section-3.1)|Unauthorized|Inline|
|403|[Forbidden](https://tools.ietf.org/html/rfc7231#section-6.5.3)|Forbidden|Inline|
|404|[Not Found](https://tools.ietf.org/html/rfc7231#section-6.5.4)|Resource not found|Inline|

<h3 id="fetchworkflowbyid-responseschema">Response Schema</h3>

Status Code **200**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» _links|object|false|none|none|
|»» self|object|false|read-only|none|
|»»» href|string|false|none|none|

Status Code **401**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» title|any|false|none|none|
|» type|any|false|none|none|
|» status|any|false|none|none|
|» detail|any|false|none|none|

Status Code **403**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» title|any|false|none|none|
|» type|any|false|none|none|
|» status|any|false|none|none|
|» detail|any|false|none|none|

Status Code **404**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» title|any|false|none|none|
|» type|any|false|none|none|
|» status|any|false|none|none|
|» detail|any|false|none|none|

<aside class="success">
This operation does not require authentication
</aside>

## updateWorkflow

<a id="opIdupdateWorkflow"></a>

`PUT /work-flows/:workflow_id`

> Body parameter

```json
{
  "type": "object",
  "required": [
    "label",
    "steps",
    "workflow_version",
    "applies_to",
    "starts_at"
  ],
  "properties": {
    "label": {
      "type": "string",
      "example": "MLTI iPad Assembly Assignment",
      "x-examples": [
        "MLTI iPad Assembly Assignment"
      ],
      "description": "Label for the workflow"
    },
    "workflow_version": {
      "type": "integer",
      "format": "int32",
      "example": 7,
      "x-examples": [
        7
      ],
      "readOnly": true,
      "description": "Version number for the work flows (the number of times it has been changed"
    },
    "applies_to": {
      "type": "string",
      "description": "The entity type this work flow applies too",
      "enum": [
        "unit",
        "part",
        "program",
        "project",
        "customer",
        "contact"
      ],
      "example": "unit"
    },
    "starts_at": {
      "type": "string",
      "description": "Starting step",
      "example": "entry",
      "x-examples": [
        "entry"
      ]
    },
    "context": {
      "type": "array",
      "description": "Initial values to set on the context",
      "items": {
        "type": "object",
        "required": [
          "key",
          "value"
        ],
        "properties": {
          "key": {
            "type": "string",
            "description": "The context key to set",
            "example": "$.fizz",
            "x-examples": [
              "$.fizz",
              "$.unit.status",
              "extract_fields"
            ]
          },
          "value": {
            "type": "string",
            "description": "Value to set",
            "example": "$.buzz",
            "x-examples": [
              "$.buzz",
              "Pending",
              true
            ]
          },
          "lock": {
            "type": "boolean",
            "description": "Prevents other steps from writing this value",
            "example": true
          },
          "ignore": {
            "type": "boolean",
            "description": "When trying to set a locked key, do not fail",
            "example": false
          }
        }
      }
    },
    "steps": {
      "type": "object",
      "description": "Steps for the workflow",
      "x-patternProperties": {
        "(confirm|success|fail|manual|run-ace|follow)": {
          "type": "object",
          "allOf": [
            {
              "type": "object",
              "description": "Close step",
              "required": [
                "step"
              ],
              "properties": {
                "step": {
                  "type": "string",
                  "description": "Step to mark as complete",
                  "pattern": "^[a-z][a-z-]+[a-z]$",
                  "example": "complete",
                  "x-examples": [
                    "complete"
                  ]
                }
              },
              "anyOf": [
                {
                  "type": "object",
                  "description": "Require the user confirm an action. This is normally used when Niagara cannot automatically detect that a task or action has been performed.",
                  "x-nter-step-component": "confirm-action",
                  "properties": {
                    "label": {
                      "x-examples": [
                        "Confirm the device has powered off"
                      ]
                    },
                    "options": {
                      "type": "object",
                      "required": [
                        "component",
                        "payload"
                      ],
                      "properties": {
                        "component": {
                          "enum": [
                            "confirm-action"
                          ],
                          "example": "confirm-action",
                          "x-examples": [
                            "confirm-action"
                          ]
                        },
                        "payload": {
                          "type": "object",
                          "required": [
                            "message"
                          ],
                          "properties": {
                            "message": {
                              "type": "string",
                              "description": "The confirmation message to display to the user",
                              "example": "Device powered off?",
                              "x-examples": [
                                "Device powered off?"
                              ]
                            },
                            "negative_message": {
                              "type": "string",
                              "description": "An optional inverse message",
                              "nullable": true,
                              "example": "Device not functioning",
                              "x-examples": [
                                "Device not functioning"
                              ]
                            }
                          }
                        }
                      }
                    }
                  },
                  "allOf": [
                    {
                      "type": "object",
                      "x-ui-hide": true,
                      "description": "A step which requires a user to complete",
                      "required": [
                        "type",
                        "options"
                      ],
                      "properties": {
                        "type": {
                          "example": "user",
                          "x-examples": [
                            "user"
                          ]
                        },
                        "options": {
                          "type": "object",
                          "required": [
                            "component",
                            "payload"
                          ],
                          "properties": {
                            "component": {
                              "type": "string",
                              "description": "Name of the function to invoke",
                              "example": "assignUnitsFromCustomerToProject",
                              "x-examples": [
                                "assignUnitsFromCustomerToProject"
                              ]
                            },
                            "payload": {
                              "type": "object"
                            }
                          }
                        }
                      },
                      "allOf": [
                        {
                          "type": "object",
                          "x-ui-hide": true,
                          "required": [
                            "type",
                            "label",
                            "goto"
                          ],
                          "properties": {
                            "type": {
                              "type": "string",
                              "description": "Type of workflow step",
                              "enum": [
                                "load",
                                "choice",
                                "function",
                                "machine",
                                "pass",
                                "fail",
                                "success",
                                "user",
                                "wait"
                              ]
                            },
                            "label": {
                              "type": "string",
                              "description": "Label for the step",
                              "example": "Find units",
                              "x-examples": [
                                "Find units"
                              ]
                            },
                            "goto": {
                              "type": "string",
                              "description": "Step to move to",
                              "pattern": "^[a-z][a-z-]+[a-z]$",
                              "example": "complete",
                              "x-examples": [
                                "complete"
                              ]
                            },
                            "goto-fail": {
                              "type": "string",
                              "description": "Step to transition too if this step cannot be completed",
                              "pattern": "^[a-z][a-z-]+[a-z]$",
                              "example": "process-fail",
                              "x-examples": [
                                "process-fail"
                              ]
                            },
                            "context": {
                              "type": "array",
                              "description": "Initial values to set on the context",
                              "items": {
                                "type": "object",
                                "required": [
                                  "key",
                                  "value"
                                ],
                                "properties": {
                                  "key": {
                                    "type": "string",
                                    "description": "The context key to set",
                                    "example": "$.fizz",
                                    "x-examples": [
                                      "$.fizz",
                                      "$.unit.status",
                                      "extract_fields"
                                    ]
                                  },
                                  "value": {
                                    "type": "string",
                                    "description": "Value to set",
                                    "example": "$.buzz",
                                    "x-examples": [
                                      "$.buzz",
                                      "Pending",
                                      true
                                    ]
                                  },
                                  "lock": {
                                    "type": "boolean",
                                    "description": "Prevents other steps from writing this value",
                                    "example": true
                                  },
                                  "ignore": {
                                    "type": "boolean",
                                    "description": "When trying to set a locked key, do not fail",
                                    "example": false
                                  }
                                }
                              }
                            },
                            "onError": {
                              "type": "object",
                              "description": "Action to take when step fails",
                              "required": [
                                "finally"
                              ],
                              "properties": {
                                "retry": {
                                  "type": "integer",
                                  "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                  "minimum": 0,
                                  "maximum": 10,
                                  "example": 3,
                                  "default": 0
                                },
                                "finally": {
                                  "type": "object",
                                  "description": "What to do after all retries",
                                  "required": [
                                    "goto"
                                  ],
                                  "properties": {
                                    "actions": {
                                      "type": "array",
                                      "description": "Actions to take on failure",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "The type of the action",
                                                "enum": [
                                                  "email"
                                                ]
                                              },
                                              "options": {
                                                "type": "object",
                                                "description": "settings for the action",
                                                "additionalProperties": {
                                                  "type": "string"
                                                },
                                                "x-examples": [
                                                  {
                                                    "to": "bob@example.com",
                                                    "from": "alice@example.com"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to transition to on failure",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "failed",
                                      "x-examples": [
                                        "failed"
                                      ]
                                    }
                                  }
                                }
                              }
                            },
                            "onComplete": {
                              "type": "object",
                              "description": "Actions to take when the step completes",
                              "properties": {
                                "actions": {
                                  "type": "array",
                                  "items": {
                                    "anyOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "The type of the action",
                                            "enum": [
                                              "email"
                                            ]
                                          },
                                          "options": {
                                            "type": "object",
                                            "description": "settings for the action",
                                            "additionalProperties": {
                                              "type": "string"
                                            },
                                            "x-examples": [
                                              {
                                                "to": "bob@example.com",
                                                "from": "alice@example.com"
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "object",
                  "description": "Display a link or modal to a user which contains instructions from a PDF",
                  "x-nter-step-component": "follow-pdf-instructions",
                  "required": [
                    "label",
                    "payload"
                  ],
                  "properties": {
                    "label": {
                      "x-examples": [
                        "Instruct user to follow steps outlined in Apple PDF"
                      ]
                    },
                    "options": {
                      "type": "object",
                      "required": [
                        "component",
                        "payload"
                      ],
                      "properties": {
                        "component": {
                          "enum": [
                            "follow-pds-instructions"
                          ],
                          "example": "follow-pdf-instructions",
                          "x-examples": [
                            "follow-pdf-instructions"
                          ]
                        },
                        "payload": {
                          "type": "object",
                          "required": [
                            "attachment_id"
                          ],
                          "properties": {
                            "attachment_id": {
                              "type": "string",
                              "description": "UUID for the attachment",
                              "format": "uuid",
                              "example": "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7",
                              "x-examples": [
                                "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7"
                              ]
                            }
                          }
                        }
                      }
                    }
                  },
                  "allOf": [
                    {
                      "type": "object",
                      "x-ui-hide": true,
                      "description": "A step which requires a user to complete",
                      "required": [
                        "type",
                        "options"
                      ],
                      "properties": {
                        "type": {
                          "example": "user",
                          "x-examples": [
                            "user"
                          ]
                        },
                        "options": {
                          "type": "object",
                          "required": [
                            "component",
                            "payload"
                          ],
                          "properties": {
                            "component": {
                              "type": "string",
                              "description": "Name of the function to invoke",
                              "example": "assignUnitsFromCustomerToProject",
                              "x-examples": [
                                "assignUnitsFromCustomerToProject"
                              ]
                            },
                            "payload": {
                              "type": "object"
                            }
                          }
                        }
                      },
                      "allOf": [
                        {
                          "type": "object",
                          "x-ui-hide": true,
                          "required": [
                            "type",
                            "label",
                            "goto"
                          ],
                          "properties": {
                            "type": {
                              "type": "string",
                              "description": "Type of workflow step",
                              "enum": [
                                "load",
                                "choice",
                                "function",
                                "machine",
                                "pass",
                                "fail",
                                "success",
                                "user",
                                "wait"
                              ]
                            },
                            "label": {
                              "type": "string",
                              "description": "Label for the step",
                              "example": "Find units",
                              "x-examples": [
                                "Find units"
                              ]
                            },
                            "goto": {
                              "type": "string",
                              "description": "Step to move to",
                              "pattern": "^[a-z][a-z-]+[a-z]$",
                              "example": "complete",
                              "x-examples": [
                                "complete"
                              ]
                            },
                            "goto-fail": {
                              "type": "string",
                              "description": "Step to transition too if this step cannot be completed",
                              "pattern": "^[a-z][a-z-]+[a-z]$",
                              "example": "process-fail",
                              "x-examples": [
                                "process-fail"
                              ]
                            },
                            "context": {
                              "type": "array",
                              "description": "Initial values to set on the context",
                              "items": {
                                "type": "object",
                                "required": [
                                  "key",
                                  "value"
                                ],
                                "properties": {
                                  "key": {
                                    "type": "string",
                                    "description": "The context key to set",
                                    "example": "$.fizz",
                                    "x-examples": [
                                      "$.fizz",
                                      "$.unit.status",
                                      "extract_fields"
                                    ]
                                  },
                                  "value": {
                                    "type": "string",
                                    "description": "Value to set",
                                    "example": "$.buzz",
                                    "x-examples": [
                                      "$.buzz",
                                      "Pending",
                                      true
                                    ]
                                  },
                                  "lock": {
                                    "type": "boolean",
                                    "description": "Prevents other steps from writing this value",
                                    "example": true
                                  },
                                  "ignore": {
                                    "type": "boolean",
                                    "description": "When trying to set a locked key, do not fail",
                                    "example": false
                                  }
                                }
                              }
                            },
                            "onError": {
                              "type": "object",
                              "description": "Action to take when step fails",
                              "required": [
                                "finally"
                              ],
                              "properties": {
                                "retry": {
                                  "type": "integer",
                                  "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                  "minimum": 0,
                                  "maximum": 10,
                                  "example": 3,
                                  "default": 0
                                },
                                "finally": {
                                  "type": "object",
                                  "description": "What to do after all retries",
                                  "required": [
                                    "goto"
                                  ],
                                  "properties": {
                                    "actions": {
                                      "type": "array",
                                      "description": "Actions to take on failure",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "The type of the action",
                                                "enum": [
                                                  "email"
                                                ]
                                              },
                                              "options": {
                                                "type": "object",
                                                "description": "settings for the action",
                                                "additionalProperties": {
                                                  "type": "string"
                                                },
                                                "x-examples": [
                                                  {
                                                    "to": "bob@example.com",
                                                    "from": "alice@example.com"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to transition to on failure",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "failed",
                                      "x-examples": [
                                        "failed"
                                      ]
                                    }
                                  }
                                }
                              }
                            },
                            "onComplete": {
                              "type": "object",
                              "description": "Actions to take when the step completes",
                              "properties": {
                                "actions": {
                                  "type": "array",
                                  "items": {
                                    "anyOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "The type of the action",
                                            "enum": [
                                              "email"
                                            ]
                                          },
                                          "options": {
                                            "type": "object",
                                            "description": "settings for the action",
                                            "additionalProperties": {
                                              "type": "string"
                                            },
                                            "x-examples": [
                                              {
                                                "to": "bob@example.com",
                                                "from": "alice@example.com"
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "object",
                  "description": "Ask the user to manually enter (or confirm) data for an entity",
                  "x-nter-step-component": "manual-data-entry",
                  "properties": {
                    "label": {
                      "x-examples": [
                        "Enter asset tag and confirm serial number"
                      ]
                    },
                    "options": {
                      "type": "object",
                      "required": [
                        "component",
                        "payload"
                      ],
                      "properties": {
                        "component": {
                          "enum": [
                            "manual-data-entry"
                          ],
                          "example": "manual-data-entry",
                          "x-examples": [
                            "manual-data-entry"
                          ]
                        },
                        "payload": {
                          "type": "object",
                          "required": [
                            "fields"
                          ],
                          "properties": {
                            "fields": {
                              "type": "array",
                              "description": "Configuration for each field",
                              "items": {
                                "type": "object",
                                "required": [
                                  "input_type",
                                  "label",
                                  "required",
                                  "entity_field"
                                ],
                                "properties": {
                                  "input_type": {
                                    "type": "string",
                                    "description": "The type of input field to display",
                                    "enum": [
                                      "textbox",
                                      "input"
                                    ]
                                  },
                                  "label": {
                                    "type": "string",
                                    "description": "Label to display for the field",
                                    "example": "Asset Tag",
                                    "x-examples": [
                                      "Asset Tag"
                                    ]
                                  },
                                  "required": {
                                    "type": "boolean",
                                    "description": "Display the field as required input. Note: this is a helper function. It singles that the user is required to input data at this step. If the field is required on the entity, the user will be presented with a validation message",
                                    "example": true
                                  },
                                  "entity_field": {
                                    "type": "string",
                                    "description": "JSON Path to the field on the entity. If the path does not start with '$' then the entity on the context is assumed. Otherwise the data will be set on the context path",
                                    "example": "input_filter[?(@.key = 'asset-tag')]",
                                    "x-examples": [
                                      "input_filter[?(@.key = 'asset-tag')]"
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  },
                  "allOf": [
                    {
                      "type": "object",
                      "x-ui-hide": true,
                      "description": "A step which requires a user to complete",
                      "required": [
                        "type",
                        "options"
                      ],
                      "properties": {
                        "type": {
                          "example": "user",
                          "x-examples": [
                            "user"
                          ]
                        },
                        "options": {
                          "type": "object",
                          "required": [
                            "component",
                            "payload"
                          ],
                          "properties": {
                            "component": {
                              "type": "string",
                              "description": "Name of the function to invoke",
                              "example": "assignUnitsFromCustomerToProject",
                              "x-examples": [
                                "assignUnitsFromCustomerToProject"
                              ]
                            },
                            "payload": {
                              "type": "object"
                            }
                          }
                        }
                      },
                      "allOf": [
                        {
                          "type": "object",
                          "x-ui-hide": true,
                          "required": [
                            "type",
                            "label",
                            "goto"
                          ],
                          "properties": {
                            "type": {
                              "type": "string",
                              "description": "Type of workflow step",
                              "enum": [
                                "load",
                                "choice",
                                "function",
                                "machine",
                                "pass",
                                "fail",
                                "success",
                                "user",
                                "wait"
                              ]
                            },
                            "label": {
                              "type": "string",
                              "description": "Label for the step",
                              "example": "Find units",
                              "x-examples": [
                                "Find units"
                              ]
                            },
                            "goto": {
                              "type": "string",
                              "description": "Step to move to",
                              "pattern": "^[a-z][a-z-]+[a-z]$",
                              "example": "complete",
                              "x-examples": [
                                "complete"
                              ]
                            },
                            "goto-fail": {
                              "type": "string",
                              "description": "Step to transition too if this step cannot be completed",
                              "pattern": "^[a-z][a-z-]+[a-z]$",
                              "example": "process-fail",
                              "x-examples": [
                                "process-fail"
                              ]
                            },
                            "context": {
                              "type": "array",
                              "description": "Initial values to set on the context",
                              "items": {
                                "type": "object",
                                "required": [
                                  "key",
                                  "value"
                                ],
                                "properties": {
                                  "key": {
                                    "type": "string",
                                    "description": "The context key to set",
                                    "example": "$.fizz",
                                    "x-examples": [
                                      "$.fizz",
                                      "$.unit.status",
                                      "extract_fields"
                                    ]
                                  },
                                  "value": {
                                    "type": "string",
                                    "description": "Value to set",
                                    "example": "$.buzz",
                                    "x-examples": [
                                      "$.buzz",
                                      "Pending",
                                      true
                                    ]
                                  },
                                  "lock": {
                                    "type": "boolean",
                                    "description": "Prevents other steps from writing this value",
                                    "example": true
                                  },
                                  "ignore": {
                                    "type": "boolean",
                                    "description": "When trying to set a locked key, do not fail",
                                    "example": false
                                  }
                                }
                              }
                            },
                            "onError": {
                              "type": "object",
                              "description": "Action to take when step fails",
                              "required": [
                                "finally"
                              ],
                              "properties": {
                                "retry": {
                                  "type": "integer",
                                  "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                  "minimum": 0,
                                  "maximum": 10,
                                  "example": 3,
                                  "default": 0
                                },
                                "finally": {
                                  "type": "object",
                                  "description": "What to do after all retries",
                                  "required": [
                                    "goto"
                                  ],
                                  "properties": {
                                    "actions": {
                                      "type": "array",
                                      "description": "Actions to take on failure",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "The type of the action",
                                                "enum": [
                                                  "email"
                                                ]
                                              },
                                              "options": {
                                                "type": "object",
                                                "description": "settings for the action",
                                                "additionalProperties": {
                                                  "type": "string"
                                                },
                                                "x-examples": [
                                                  {
                                                    "to": "bob@example.com",
                                                    "from": "alice@example.com"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to transition to on failure",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "failed",
                                      "x-examples": [
                                        "failed"
                                      ]
                                    }
                                  }
                                }
                              }
                            },
                            "onComplete": {
                              "type": "object",
                              "description": "Actions to take when the step completes",
                              "properties": {
                                "actions": {
                                  "type": "array",
                                  "items": {
                                    "anyOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "The type of the action",
                                            "enum": [
                                              "email"
                                            ]
                                          },
                                          "options": {
                                            "type": "object",
                                            "description": "settings for the action",
                                            "additionalProperties": {
                                              "type": "string"
                                            },
                                            "x-examples": [
                                              {
                                                "to": "bob@example.com",
                                                "from": "alice@example.com"
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "object",
                  "description": "Ask the user to follow a list and check off boxes",
                  "x-nter-step-component": "task-list",
                  "properties": {
                    "label": {
                      "x-examples": [
                        "Enter asset tag and confirm serial number"
                      ]
                    },
                    "options": {
                      "type": "object",
                      "required": [
                        "component",
                        "payload"
                      ],
                      "properties": {
                        "component": {
                          "enum": [
                            "task-list"
                          ],
                          "example": "task-list",
                          "x-examples": [
                            "task-list"
                          ]
                        },
                        "payload": {
                          "type": "object",
                          "required": [
                            "items"
                          ],
                          "properties": {
                            "is_qc": {
                              "type": "boolean",
                              "description": "Flags this list as a QC task list. This means that a different user can close the task to one previously on the context"
                            },
                            "items": {
                              "type": "array",
                              "description": "Configuration for each task list item",
                              "items": {
                                "type": "object",
                                "required": [
                                  "label",
                                  "help",
                                  "evaluated",
                                  "na_option"
                                ],
                                "properties": {
                                  "label": {
                                    "type": "string",
                                    "description": "Label to display for the field",
                                    "example": "Asset Tag placement",
                                    "x-examples": [
                                      "Asset Tag placement"
                                    ]
                                  },
                                  "slug": {
                                    "type": "string",
                                    "description": "Slug for the item (Auto-generated from the label)",
                                    "readOnly": true,
                                    "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$",
                                    "example": "asset-tag-placement",
                                    "x-examples": [
                                      "asset-tag-placement"
                                    ]
                                  },
                                  "help": {
                                    "type": "string",
                                    "description": "Message describing what is needed to be checked",
                                    "example": "Asset Tag attached to the unit in the correct position",
                                    "x-examples": [
                                      "Asset Tag attached to the unit in the correct position"
                                    ]
                                  },
                                  "evaluated": {
                                    "type": "boolean",
                                    "description": "When set to true, this will fail the step if the value for the item is false or N/A",
                                    "example": true
                                  },
                                  "na_field": {
                                    "type": "boolean",
                                    "description": "Allow the user to select the N/A option when checking off the list",
                                    "example": true
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  },
                  "allOf": [
                    {
                      "type": "object",
                      "x-ui-hide": true,
                      "description": "A step which requires a user to complete",
                      "required": [
                        "type",
                        "options"
                      ],
                      "properties": {
                        "type": {
                          "example": "user",
                          "x-examples": [
                            "user"
                          ]
                        },
                        "options": {
                          "type": "object",
                          "required": [
                            "component",
                            "payload"
                          ],
                          "properties": {
                            "component": {
                              "type": "string",
                              "description": "Name of the function to invoke",
                              "example": "assignUnitsFromCustomerToProject",
                              "x-examples": [
                                "assignUnitsFromCustomerToProject"
                              ]
                            },
                            "payload": {
                              "type": "object"
                            }
                          }
                        }
                      },
                      "allOf": [
                        {
                          "type": "object",
                          "x-ui-hide": true,
                          "required": [
                            "type",
                            "label",
                            "goto"
                          ],
                          "properties": {
                            "type": {
                              "type": "string",
                              "description": "Type of workflow step",
                              "enum": [
                                "load",
                                "choice",
                                "function",
                                "machine",
                                "pass",
                                "fail",
                                "success",
                                "user",
                                "wait"
                              ]
                            },
                            "label": {
                              "type": "string",
                              "description": "Label for the step",
                              "example": "Find units",
                              "x-examples": [
                                "Find units"
                              ]
                            },
                            "goto": {
                              "type": "string",
                              "description": "Step to move to",
                              "pattern": "^[a-z][a-z-]+[a-z]$",
                              "example": "complete",
                              "x-examples": [
                                "complete"
                              ]
                            },
                            "goto-fail": {
                              "type": "string",
                              "description": "Step to transition too if this step cannot be completed",
                              "pattern": "^[a-z][a-z-]+[a-z]$",
                              "example": "process-fail",
                              "x-examples": [
                                "process-fail"
                              ]
                            },
                            "context": {
                              "type": "array",
                              "description": "Initial values to set on the context",
                              "items": {
                                "type": "object",
                                "required": [
                                  "key",
                                  "value"
                                ],
                                "properties": {
                                  "key": {
                                    "type": "string",
                                    "description": "The context key to set",
                                    "example": "$.fizz",
                                    "x-examples": [
                                      "$.fizz",
                                      "$.unit.status",
                                      "extract_fields"
                                    ]
                                  },
                                  "value": {
                                    "type": "string",
                                    "description": "Value to set",
                                    "example": "$.buzz",
                                    "x-examples": [
                                      "$.buzz",
                                      "Pending",
                                      true
                                    ]
                                  },
                                  "lock": {
                                    "type": "boolean",
                                    "description": "Prevents other steps from writing this value",
                                    "example": true
                                  },
                                  "ignore": {
                                    "type": "boolean",
                                    "description": "When trying to set a locked key, do not fail",
                                    "example": false
                                  }
                                }
                              }
                            },
                            "onError": {
                              "type": "object",
                              "description": "Action to take when step fails",
                              "required": [
                                "finally"
                              ],
                              "properties": {
                                "retry": {
                                  "type": "integer",
                                  "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                  "minimum": 0,
                                  "maximum": 10,
                                  "example": 3,
                                  "default": 0
                                },
                                "finally": {
                                  "type": "object",
                                  "description": "What to do after all retries",
                                  "required": [
                                    "goto"
                                  ],
                                  "properties": {
                                    "actions": {
                                      "type": "array",
                                      "description": "Actions to take on failure",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "The type of the action",
                                                "enum": [
                                                  "email"
                                                ]
                                              },
                                              "options": {
                                                "type": "object",
                                                "description": "settings for the action",
                                                "additionalProperties": {
                                                  "type": "string"
                                                },
                                                "x-examples": [
                                                  {
                                                    "to": "bob@example.com",
                                                    "from": "alice@example.com"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to transition to on failure",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "failed",
                                      "x-examples": [
                                        "failed"
                                      ]
                                    }
                                  }
                                }
                              }
                            },
                            "onComplete": {
                              "type": "object",
                              "description": "Actions to take when the step completes",
                              "properties": {
                                "actions": {
                                  "type": "array",
                                  "items": {
                                    "anyOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "The type of the action",
                                            "enum": [
                                              "email"
                                            ]
                                          },
                                          "options": {
                                            "type": "object",
                                            "description": "settings for the action",
                                            "additionalProperties": {
                                              "type": "string"
                                            },
                                            "x-examples": [
                                              {
                                                "to": "bob@example.com",
                                                "from": "alice@example.com"
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "object",
                  "description": "Run the ACE-IOS application to provision iOS devices or ",
                  "properties": {
                    "type": {
                      "example": "machine",
                      "x-examples": [
                        "machine"
                      ]
                    },
                    "label": {
                      "x-examples": [
                        "Run Application"
                      ]
                    },
                    "options": {
                      "type": "object",
                      "required": [
                        "application",
                        "configuration"
                      ],
                      "properties": {
                        "configuration": {
                          "type": "object",
                          "description": "ACE Configuration options",
                          "properties": {
                            "pairing_cert": {
                              "type": "string",
                              "format": "base64",
                              "description": "Contents of a *.crt file exported from Apple Configurator or MDM",
                              "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                              "x-examples": [
                                "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                              ],
                              "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                            },
                            "pairing_key": {
                              "type": "string",
                              "format": "base64",
                              "description": "Contents of a *.der file exported from Apple Configurator or MDM",
                              "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                              "x-examples": [
                                "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                              ],
                              "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                            },
                            "restore_device": {
                              "type": "boolean",
                              "description": "Restore device to factory defaults"
                            },
                            "automated_enrollment": {
                              "type": "boolean",
                              "description": "Automatically enroll the device to MDM"
                            },
                            "mdm": {
                              "type": "object",
                              "format": "base64",
                              "description": "The settings for the Customers MDM",
                              "properties": {
                                "vendor": {
                                  "type": "string",
                                  "description": "MDM vendor. Currently, supported values are AirWatch, JAMF, and Meraki.",
                                  "enum": [
                                    "AirWatch",
                                    "JAMF",
                                    "Meraki"
                                  ]
                                },
                                "console_url": {
                                  "type": "string",
                                  "format": "uri",
                                  "description": "Base URL for HTTP requests",
                                  "example": "http://jamf.zones.com",
                                  "x-examples": [
                                    "http://jamf.zones.com"
                                  ]
                                },
                                "user": {
                                  "type": "string",
                                  "description": "MDM User name",
                                  "example": "NterpriseBob",
                                  "x-examples": [
                                    "NterpriseBob"
                                  ]
                                },
                                "password": {
                                  "type": "string",
                                  "description": "MDM password"
                                },
                                "tenant_code": {
                                  "type": "string",
                                  "description": "MDM authentication key",
                                  "example": "nterprise",
                                  "x-examples": [
                                    "nterprise"
                                  ]
                                },
                                "set_asset_tag": {
                                  "type": "string",
                                  "description": "Sets the devices Asset tag based on a field from the unit",
                                  "example": "$._entity.input_filter[?(@.key = 'asset-tag')]",
                                  "x-examples": [
                                    "$._entity.input_filter[?(@.key = 'asset-tag')]"
                                  ]
                                }
                              }
                            },
                            "field_mappings": {
                              "type": "array",
                              "description": "List of fields to map to the device",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "from": {
                                    "type": "string",
                                    "description": "The field reported from ACE",
                                    "enum": [
                                      "serial_number",
                                      "name",
                                      "ecid",
                                      "udid",
                                      "configurator_serial",
                                      "ios",
                                      "model",
                                      "storage",
                                      "wifi_mac",
                                      "bt_mac",
                                      "ethernet_mac",
                                      "thundersync_serial",
                                      "iccid",
                                      "iccid2",
                                      "imei",
                                      "imei2",
                                      "missed_profiles",
                                      "missed_apps",
                                      "icon_list_regex",
                                      "icon_layout",
                                      "bat_capacity"
                                    ]
                                  },
                                  "to": {
                                    "type": "string",
                                    "description": "Field to set on the entity",
                                    "example": "$._entity.input_filter[?(@.key = 'serial-number')]",
                                    "x-examples": [
                                      "$._entity.input_filter[?(@.key = 'serial-number')]"
                                    ]
                                  }
                                }
                              }
                            },
                            "wait_for_apps": {
                              "type": "array",
                              "description": "A list of applications needed to be installed on the device. This will cause the extension to poll the device for installed applications. Once all the applications have been installed, this step can be completed",
                              "items": {
                                "type": "string",
                                "format": "uri",
                                "example": "com.apple.itunes",
                                "x-examples": [
                                  "com.apple.itunes"
                                ]
                              }
                            },
                            "wait_for_battery_charge": {
                              "type": "integer",
                              "description": "The required battery percentage needed before this step can move on",
                              "minimum": 0,
                              "maximum": 100
                            }
                          }
                        }
                      }
                    }
                  },
                  "allOf": [
                    {
                      "type": "object",
                      "description": "Run an application extension",
                      "properties": {
                        "label": {
                          "x-examples": [
                            "Run Application"
                          ]
                        },
                        "options": {
                          "type": "object",
                          "required": [
                            "application",
                            "configuration"
                          ],
                          "properties": {
                            "application": {
                              "type": "object",
                              "required": [
                                "application_id",
                                "platforms"
                              ],
                              "properties": {
                                "application_id": {
                                  "type": "string",
                                  "description": "Registered application ID",
                                  "example": "ace-ios",
                                  "x-examples": [
                                    "ace-ios"
                                  ]
                                },
                                "platforms": {
                                  "type": "array",
                                  "description": "Allowed platforms the application can run on",
                                  "items": {
                                    "type": "object",
                                    "required": [
                                      "platform",
                                      "arch"
                                    ],
                                    "properties": {
                                      "platform": {
                                        "type": "string",
                                        "description": "The platform (OS) the application can run on",
                                        "enum": [
                                          "aix",
                                          "darwin",
                                          "freebsd",
                                          "linux",
                                          "openbsd",
                                          "sunos",
                                          "win32"
                                        ]
                                      },
                                      "arch": {
                                        "type": "string",
                                        "description": "The CPU architecture needed to run the application",
                                        "enum": [
                                          "arm",
                                          "arm64",
                                          "ia32",
                                          "mips",
                                          "mipsel",
                                          "ppc",
                                          "ppc64",
                                          "s390",
                                          "s390x",
                                          "x32",
                                          "x64"
                                        ]
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      },
                      "allOf": [
                        {
                          "type": "object",
                          "x-ui-hide": true,
                          "required": [
                            "type",
                            "label",
                            "goto"
                          ],
                          "properties": {
                            "type": {
                              "type": "string",
                              "description": "Type of workflow step",
                              "enum": [
                                "load",
                                "choice",
                                "function",
                                "machine",
                                "pass",
                                "fail",
                                "success",
                                "user",
                                "wait"
                              ]
                            },
                            "label": {
                              "type": "string",
                              "description": "Label for the step",
                              "example": "Find units",
                              "x-examples": [
                                "Find units"
                              ]
                            },
                            "goto": {
                              "type": "string",
                              "description": "Step to move to",
                              "pattern": "^[a-z][a-z-]+[a-z]$",
                              "example": "complete",
                              "x-examples": [
                                "complete"
                              ]
                            },
                            "goto-fail": {
                              "type": "string",
                              "description": "Step to transition too if this step cannot be completed",
                              "pattern": "^[a-z][a-z-]+[a-z]$",
                              "example": "process-fail",
                              "x-examples": [
                                "process-fail"
                              ]
                            },
                            "context": {
                              "type": "array",
                              "description": "Initial values to set on the context",
                              "items": {
                                "type": "object",
                                "required": [
                                  "key",
                                  "value"
                                ],
                                "properties": {
                                  "key": {
                                    "type": "string",
                                    "description": "The context key to set",
                                    "example": "$.fizz",
                                    "x-examples": [
                                      "$.fizz",
                                      "$.unit.status",
                                      "extract_fields"
                                    ]
                                  },
                                  "value": {
                                    "type": "string",
                                    "description": "Value to set",
                                    "example": "$.buzz",
                                    "x-examples": [
                                      "$.buzz",
                                      "Pending",
                                      true
                                    ]
                                  },
                                  "lock": {
                                    "type": "boolean",
                                    "description": "Prevents other steps from writing this value",
                                    "example": true
                                  },
                                  "ignore": {
                                    "type": "boolean",
                                    "description": "When trying to set a locked key, do not fail",
                                    "example": false
                                  }
                                }
                              }
                            },
                            "onError": {
                              "type": "object",
                              "description": "Action to take when step fails",
                              "required": [
                                "finally"
                              ],
                              "properties": {
                                "retry": {
                                  "type": "integer",
                                  "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                  "minimum": 0,
                                  "maximum": 10,
                                  "example": 3,
                                  "default": 0
                                },
                                "finally": {
                                  "type": "object",
                                  "description": "What to do after all retries",
                                  "required": [
                                    "goto"
                                  ],
                                  "properties": {
                                    "actions": {
                                      "type": "array",
                                      "description": "Actions to take on failure",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "The type of the action",
                                                "enum": [
                                                  "email"
                                                ]
                                              },
                                              "options": {
                                                "type": "object",
                                                "description": "settings for the action",
                                                "additionalProperties": {
                                                  "type": "string"
                                                },
                                                "x-examples": [
                                                  {
                                                    "to": "bob@example.com",
                                                    "from": "alice@example.com"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to transition to on failure",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "failed",
                                      "x-examples": [
                                        "failed"
                                      ]
                                    }
                                  }
                                }
                              }
                            },
                            "onComplete": {
                              "type": "object",
                              "description": "Actions to take when the step completes",
                              "properties": {
                                "actions": {
                                  "type": "array",
                                  "items": {
                                    "anyOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "The type of the action",
                                            "enum": [
                                              "email"
                                            ]
                                          },
                                          "options": {
                                            "type": "object",
                                            "description": "settings for the action",
                                            "additionalProperties": {
                                              "type": "string"
                                            },
                                            "x-examples": [
                                              {
                                                "to": "bob@example.com",
                                                "from": "alice@example.com"
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "object",
                  "properties": {
                    "label": {
                      "example": "Is device ok?",
                      "x-examples": [
                        "Is device ok?"
                      ]
                    },
                    "type": {
                      "example": "choice",
                      "x-examples": [
                        "choice"
                      ]
                    },
                    "choices": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "required": [
                          "goto"
                        ],
                        "maxProperties": 2,
                        "minProperties": 2,
                        "maximum": 20,
                        "properties": {
                          "and": {
                            "type": "array",
                            "description": "All choices must be satisfied",
                            "maximum": 5,
                            "items": {
                              "description": "A Step choice",
                              "type": "object",
                              "maxProperties": 2,
                              "minProperties": 2,
                              "required": [
                                "variable"
                              ],
                              "properties": {
                                "variable": {
                                  "type": "string",
                                  "description": "Context variable to check",
                                  "example": "$.parts.available",
                                  "x-examples": [
                                    "$.parts.available"
                                  ]
                                },
                                "greater_than_equals": {
                                  "type": "string",
                                  "description": "Value has to be greater than or equals to",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "less_than_equals": {
                                  "type": "string",
                                  "description": "Value has to be less than or equals to",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "greater_than": {
                                  "type": "string",
                                  "description": "Value has to be greater than",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "less_than": {
                                  "type": "string",
                                  "description": "Value has to be less than",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "equals": {
                                  "type": "string",
                                  "description": "Value has to equal",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "not_equals": {
                                  "type": "string",
                                  "description": "Value must not equal",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                }
                              }
                            }
                          },
                          "or": {
                            "type": "array",
                            "description": "Any of these choices must be satisfied",
                            "maximum": 5,
                            "items": {
                              "description": "A Step choice",
                              "type": "object",
                              "maxProperties": 2,
                              "minProperties": 2,
                              "required": [
                                "variable"
                              ],
                              "properties": {
                                "variable": {
                                  "type": "string",
                                  "description": "Context variable to check",
                                  "example": "$.parts.available",
                                  "x-examples": [
                                    "$.parts.available"
                                  ]
                                },
                                "greater_than_equals": {
                                  "type": "string",
                                  "description": "Value has to be greater than or equals to",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "less_than_equals": {
                                  "type": "string",
                                  "description": "Value has to be less than or equals to",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "greater_than": {
                                  "type": "string",
                                  "description": "Value has to be greater than",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "less_than": {
                                  "type": "string",
                                  "description": "Value has to be less than",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "equals": {
                                  "type": "string",
                                  "description": "Value has to equal",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "not_equals": {
                                  "type": "string",
                                  "description": "Value must not equal",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                }
                              }
                            }
                          },
                          "not": {
                            "type": "array",
                            "description": "None of these choices must be satisfied",
                            "maximum": 5,
                            "items": {
                              "description": "A Step choice",
                              "type": "object",
                              "maxProperties": 2,
                              "minProperties": 2,
                              "required": [
                                "variable"
                              ],
                              "properties": {
                                "variable": {
                                  "type": "string",
                                  "description": "Context variable to check",
                                  "example": "$.parts.available",
                                  "x-examples": [
                                    "$.parts.available"
                                  ]
                                },
                                "greater_than_equals": {
                                  "type": "string",
                                  "description": "Value has to be greater than or equals to",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "less_than_equals": {
                                  "type": "string",
                                  "description": "Value has to be less than or equals to",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "greater_than": {
                                  "type": "string",
                                  "description": "Value has to be greater than",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "less_than": {
                                  "type": "string",
                                  "description": "Value has to be less than",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "equals": {
                                  "type": "string",
                                  "description": "Value has to equal",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "not_equals": {
                                  "type": "string",
                                  "description": "Value must not equal",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                }
                              }
                            }
                          },
                          "goto": {
                            "description": "Step to goto when condition is met",
                            "allOf": [
                              {
                                "type": "string",
                                "description": "Step to move to",
                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                "example": "complete",
                                "x-examples": [
                                  "complete"
                                ]
                              }
                            ]
                          }
                        }
                      }
                    },
                    "goto": {
                      "description": "Default step to goto when no choice can be made"
                    }
                  },
                  "allOf": [
                    {
                      "type": "object",
                      "x-ui-hide": true,
                      "required": [
                        "type",
                        "label",
                        "goto"
                      ],
                      "properties": {
                        "type": {
                          "type": "string",
                          "description": "Type of workflow step",
                          "enum": [
                            "load",
                            "choice",
                            "function",
                            "machine",
                            "pass",
                            "fail",
                            "success",
                            "user",
                            "wait"
                          ]
                        },
                        "label": {
                          "type": "string",
                          "description": "Label for the step",
                          "example": "Find units",
                          "x-examples": [
                            "Find units"
                          ]
                        },
                        "goto": {
                          "type": "string",
                          "description": "Step to move to",
                          "pattern": "^[a-z][a-z-]+[a-z]$",
                          "example": "complete",
                          "x-examples": [
                            "complete"
                          ]
                        },
                        "goto-fail": {
                          "type": "string",
                          "description": "Step to transition too if this step cannot be completed",
                          "pattern": "^[a-z][a-z-]+[a-z]$",
                          "example": "process-fail",
                          "x-examples": [
                            "process-fail"
                          ]
                        },
                        "context": {
                          "type": "array",
                          "description": "Initial values to set on the context",
                          "items": {
                            "type": "object",
                            "required": [
                              "key",
                              "value"
                            ],
                            "properties": {
                              "key": {
                                "type": "string",
                                "description": "The context key to set",
                                "example": "$.fizz",
                                "x-examples": [
                                  "$.fizz",
                                  "$.unit.status",
                                  "extract_fields"
                                ]
                              },
                              "value": {
                                "type": "string",
                                "description": "Value to set",
                                "example": "$.buzz",
                                "x-examples": [
                                  "$.buzz",
                                  "Pending",
                                  true
                                ]
                              },
                              "lock": {
                                "type": "boolean",
                                "description": "Prevents other steps from writing this value",
                                "example": true
                              },
                              "ignore": {
                                "type": "boolean",
                                "description": "When trying to set a locked key, do not fail",
                                "example": false
                              }
                            }
                          }
                        },
                        "onError": {
                          "type": "object",
                          "description": "Action to take when step fails",
                          "required": [
                            "finally"
                          ],
                          "properties": {
                            "retry": {
                              "type": "integer",
                              "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                              "minimum": 0,
                              "maximum": 10,
                              "example": 3,
                              "default": 0
                            },
                            "finally": {
                              "type": "object",
                              "description": "What to do after all retries",
                              "required": [
                                "goto"
                              ],
                              "properties": {
                                "actions": {
                                  "type": "array",
                                  "description": "Actions to take on failure",
                                  "items": {
                                    "anyOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "The type of the action",
                                            "enum": [
                                              "email"
                                            ]
                                          },
                                          "options": {
                                            "type": "object",
                                            "description": "settings for the action",
                                            "additionalProperties": {
                                              "type": "string"
                                            },
                                            "x-examples": [
                                              {
                                                "to": "bob@example.com",
                                                "from": "alice@example.com"
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "goto": {
                                  "type": "string",
                                  "description": "Step to transition to on failure",
                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                  "example": "failed",
                                  "x-examples": [
                                    "failed"
                                  ]
                                }
                              }
                            }
                          }
                        },
                        "onComplete": {
                          "type": "object",
                          "description": "Actions to take when the step completes",
                          "properties": {
                            "actions": {
                              "type": "array",
                              "items": {
                                "anyOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "type": {
                                        "type": "string",
                                        "description": "The type of the action",
                                        "enum": [
                                          "email"
                                        ]
                                      },
                                      "options": {
                                        "type": "object",
                                        "description": "settings for the action",
                                        "additionalProperties": {
                                          "type": "string"
                                        },
                                        "x-examples": [
                                          {
                                            "to": "bob@example.com",
                                            "from": "alice@example.com"
                                          }
                                        ]
                                      }
                                    }
                                  }
                                ]
                              }
                            }
                          }
                        }
                      }
                    }
                  ]
                },
                {
                  "type": "object",
                  "description": "Finial step which is marked as failed",
                  "properties": {
                    "label": {
                      "example": "Failed",
                      "x-examples": [
                        "Failed"
                      ],
                      "allOf": [
                        {
                          "type": "string",
                          "description": "Label for the step",
                          "example": "Find units",
                          "x-examples": [
                            "Find units"
                          ]
                        }
                      ]
                    },
                    "type": {
                      "example": "fail",
                      "x-examples": [
                        "fail"
                      ],
                      "allOf": [
                        {
                          "type": "string",
                          "description": "Type of workflow step",
                          "enum": [
                            "load",
                            "choice",
                            "function",
                            "machine",
                            "pass",
                            "fail",
                            "success",
                            "user",
                            "wait"
                          ]
                        }
                      ]
                    },
                    "onComplete": {
                      "type": "object",
                      "description": "Actions to take when the step completes",
                      "properties": {
                        "actions": {
                          "type": "array",
                          "items": {
                            "anyOf": [
                              {
                                "type": "object",
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "description": "The type of the action",
                                    "enum": [
                                      "email"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "description": "settings for the action",
                                    "additionalProperties": {
                                      "type": "string"
                                    },
                                    "x-examples": [
                                      {
                                        "to": "bob@example.com",
                                        "from": "alice@example.com"
                                      }
                                    ]
                                  }
                                }
                              }
                            ]
                          }
                        }
                      }
                    }
                  }
                },
                {
                  "type": "object",
                  "description": "Allows executing actions with out performing any function",
                  "properties": {
                    "label": {
                      "example": "Send email to project manager",
                      "x-examples": [
                        "Send email to project manager"
                      ]
                    },
                    "type": {
                      "example": "pass",
                      "x-examples": [
                        "pass"
                      ],
                      "allOf": [
                        {
                          "type": "string",
                          "description": "Type of workflow step",
                          "enum": [
                            "load",
                            "choice",
                            "function",
                            "machine",
                            "pass",
                            "fail",
                            "success",
                            "user",
                            "wait"
                          ]
                        }
                      ]
                    }
                  },
                  "allOf": [
                    {
                      "type": "object",
                      "x-ui-hide": true,
                      "required": [
                        "type",
                        "label",
                        "goto"
                      ],
                      "properties": {
                        "type": {
                          "type": "string",
                          "description": "Type of workflow step",
                          "enum": [
                            "load",
                            "choice",
                            "function",
                            "machine",
                            "pass",
                            "fail",
                            "success",
                            "user",
                            "wait"
                          ]
                        },
                        "label": {
                          "type": "string",
                          "description": "Label for the step",
                          "example": "Find units",
                          "x-examples": [
                            "Find units"
                          ]
                        },
                        "goto": {
                          "type": "string",
                          "description": "Step to move to",
                          "pattern": "^[a-z][a-z-]+[a-z]$",
                          "example": "complete",
                          "x-examples": [
                            "complete"
                          ]
                        },
                        "goto-fail": {
                          "type": "string",
                          "description": "Step to transition too if this step cannot be completed",
                          "pattern": "^[a-z][a-z-]+[a-z]$",
                          "example": "process-fail",
                          "x-examples": [
                            "process-fail"
                          ]
                        },
                        "context": {
                          "type": "array",
                          "description": "Initial values to set on the context",
                          "items": {
                            "type": "object",
                            "required": [
                              "key",
                              "value"
                            ],
                            "properties": {
                              "key": {
                                "type": "string",
                                "description": "The context key to set",
                                "example": "$.fizz",
                                "x-examples": [
                                  "$.fizz",
                                  "$.unit.status",
                                  "extract_fields"
                                ]
                              },
                              "value": {
                                "type": "string",
                                "description": "Value to set",
                                "example": "$.buzz",
                                "x-examples": [
                                  "$.buzz",
                                  "Pending",
                                  true
                                ]
                              },
                              "lock": {
                                "type": "boolean",
                                "description": "Prevents other steps from writing this value",
                                "example": true
                              },
                              "ignore": {
                                "type": "boolean",
                                "description": "When trying to set a locked key, do not fail",
                                "example": false
                              }
                            }
                          }
                        },
                        "onError": {
                          "type": "object",
                          "description": "Action to take when step fails",
                          "required": [
                            "finally"
                          ],
                          "properties": {
                            "retry": {
                              "type": "integer",
                              "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                              "minimum": 0,
                              "maximum": 10,
                              "example": 3,
                              "default": 0
                            },
                            "finally": {
                              "type": "object",
                              "description": "What to do after all retries",
                              "required": [
                                "goto"
                              ],
                              "properties": {
                                "actions": {
                                  "type": "array",
                                  "description": "Actions to take on failure",
                                  "items": {
                                    "anyOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "The type of the action",
                                            "enum": [
                                              "email"
                                            ]
                                          },
                                          "options": {
                                            "type": "object",
                                            "description": "settings for the action",
                                            "additionalProperties": {
                                              "type": "string"
                                            },
                                            "x-examples": [
                                              {
                                                "to": "bob@example.com",
                                                "from": "alice@example.com"
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "goto": {
                                  "type": "string",
                                  "description": "Step to transition to on failure",
                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                  "example": "failed",
                                  "x-examples": [
                                    "failed"
                                  ]
                                }
                              }
                            }
                          }
                        },
                        "onComplete": {
                          "type": "object",
                          "description": "Actions to take when the step completes",
                          "properties": {
                            "actions": {
                              "type": "array",
                              "items": {
                                "anyOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "type": {
                                        "type": "string",
                                        "description": "The type of the action",
                                        "enum": [
                                          "email"
                                        ]
                                      },
                                      "options": {
                                        "type": "object",
                                        "description": "settings for the action",
                                        "additionalProperties": {
                                          "type": "string"
                                        },
                                        "x-examples": [
                                          {
                                            "to": "bob@example.com",
                                            "from": "alice@example.com"
                                          }
                                        ]
                                      }
                                    }
                                  }
                                ]
                              }
                            }
                          }
                        }
                      }
                    }
                  ]
                },
                {
                  "type": "object",
                  "description": "Finial step which is marked as completed successfully",
                  "properties": {
                    "label": {
                      "example": "Complete",
                      "x-examples": [
                        "Complete"
                      ],
                      "allOf": [
                        {
                          "type": "string",
                          "description": "Label for the step",
                          "example": "Find units",
                          "x-examples": [
                            "Find units"
                          ]
                        }
                      ]
                    },
                    "type": {
                      "example": "success",
                      "x-examples": [
                        "success"
                      ],
                      "allOf": [
                        {
                          "type": "string",
                          "description": "Type of workflow step",
                          "enum": [
                            "load",
                            "choice",
                            "function",
                            "machine",
                            "pass",
                            "fail",
                            "success",
                            "user",
                            "wait"
                          ]
                        }
                      ]
                    },
                    "onComplete": {
                      "type": "object",
                      "description": "Actions to take when the step completes",
                      "properties": {
                        "actions": {
                          "type": "array",
                          "items": {
                            "anyOf": [
                              {
                                "type": "object",
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "description": "The type of the action",
                                    "enum": [
                                      "email"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "description": "settings for the action",
                                    "additionalProperties": {
                                      "type": "string"
                                    },
                                    "x-examples": [
                                      {
                                        "to": "bob@example.com",
                                        "from": "alice@example.com"
                                      }
                                    ]
                                  }
                                }
                              }
                            ]
                          }
                        }
                      }
                    }
                  }
                },
                {
                  "type": "object",
                  "description": "A step which run at certain times",
                  "required": [
                    "stop_at",
                    "time"
                  ],
                  "properties": {
                    "label": {
                      "example": "Wait for cable",
                      "x-examples": [
                        "Wait for cable"
                      ],
                      "allOf": [
                        {
                          "type": "string",
                          "description": "Label for the step",
                          "example": "Find units",
                          "x-examples": [
                            "Find units"
                          ]
                        }
                      ]
                    },
                    "type": {
                      "x-examples": [
                        "wait"
                      ],
                      "example": "wait"
                    },
                    "stop_at": {
                      "type": "integer",
                      "description": "Time in seconds to stop this task",
                      "maximum": 900,
                      "minimum": 1
                    },
                    "time": {
                      "type": "integer",
                      "description": "Time to wait before checking this step",
                      "example": 600,
                      "maximum": 900,
                      "minimum": 1
                    },
                    "listen_for": {
                      "type": "array",
                      "description": "List of events and conditions to listen for to trigger",
                      "items": {
                        "type": "object",
                        "required": [
                          "event"
                        ],
                        "properties": {
                          "event": {
                            "type": "string",
                            "description": "Name of the event to listen for",
                            "allOf": [
                              {
                                "type": "string",
                                "description": "Possible entity events",
                                "enum": [
                                  "CON.attached",
                                  "CON.created",
                                  "CON.deleted",
                                  "CON.detached",
                                  "CON.removed",
                                  "CON.updated",
                                  "CUS.attached",
                                  "CUS.created",
                                  "CUS.deleted",
                                  "CUS.detached",
                                  "CUS.removed",
                                  "CUS.updated",
                                  "LOC.attached",
                                  "LOC.created",
                                  "LOC.deleted",
                                  "LOC.detached",
                                  "LOC.removed",
                                  "LOC.updated",
                                  "NOTE.attached",
                                  "NOTE.created",
                                  "NOTE.deleted",
                                  "NOTE.detached",
                                  "NOTE.removed",
                                  "NOTE.updated",
                                  "PART.attached",
                                  "PART.created",
                                  "PART.deleted",
                                  "PART.detached",
                                  "PART.removed",
                                  "PART.updated",
                                  "PGM.attached",
                                  "PGM.created",
                                  "PGM.deleted",
                                  "PGM.detached",
                                  "PGM.removed",
                                  "PGM.updated",
                                  "PRO.attached",
                                  "PRO.created",
                                  "PRO.deleted",
                                  "PRO.detached",
                                  "PRO.removed",
                                  "PRO.updated",
                                  "RES.attached",
                                  "RES.created",
                                  "RES.deleted",
                                  "RES.detached",
                                  "RES.removed",
                                  "RES.updated",
                                  "UNIT.attached",
                                  "UNIT.created",
                                  "UNIT.deleted",
                                  "UNIT.detached",
                                  "UNIT.removed",
                                  "UNIT.updated",
                                  "USER.attached",
                                  "USER.created",
                                  "USER.deleted",
                                  "USER.detached",
                                  "USER.removed",
                                  "USER.updated",
                                  "WKF.attached",
                                  "WKF.created",
                                  "WKF.deleted",
                                  "WKF.detached",
                                  "WKF.removed",
                                  "WKF.updated",
                                  "WOR.attached",
                                  "WOR.created",
                                  "WOR.deleted",
                                  "WOR.detached",
                                  "WOR.removed",
                                  "WOR.updated"
                                ]
                              }
                            ]
                          },
                          "event_value": {
                            "type": "object",
                            "description": "The event conditions that have to be met",
                            "allOf": [
                              {
                                "description": "A Step choice",
                                "type": "object",
                                "maxProperties": 2,
                                "minProperties": 2,
                                "required": [
                                  "variable"
                                ],
                                "properties": {
                                  "variable": {
                                    "type": "string",
                                    "description": "Context variable to check",
                                    "example": "$.parts.available",
                                    "x-examples": [
                                      "$.parts.available"
                                    ]
                                  },
                                  "greater_than_equals": {
                                    "type": "string",
                                    "description": "Value has to be greater than or equals to",
                                    "example": "42",
                                    "x-examples": [
                                      "42"
                                    ]
                                  },
                                  "less_than_equals": {
                                    "type": "string",
                                    "description": "Value has to be less than or equals to",
                                    "example": "42",
                                    "x-examples": [
                                      "42"
                                    ]
                                  },
                                  "greater_than": {
                                    "type": "string",
                                    "description": "Value has to be greater than",
                                    "example": "42",
                                    "x-examples": [
                                      "42"
                                    ]
                                  },
                                  "less_than": {
                                    "type": "string",
                                    "description": "Value has to be less than",
                                    "example": "42",
                                    "x-examples": [
                                      "42"
                                    ]
                                  },
                                  "equals": {
                                    "type": "string",
                                    "description": "Value has to equal",
                                    "example": "42",
                                    "x-examples": [
                                      "42"
                                    ]
                                  },
                                  "not_equals": {
                                    "type": "string",
                                    "description": "Value must not equal",
                                    "example": "42",
                                    "x-examples": [
                                      "42"
                                    ]
                                  }
                                }
                              }
                            ]
                          }
                        }
                      }
                    }
                  },
                  "allOf": [
                    {
                      "type": "object",
                      "x-ui-hide": true,
                      "required": [
                        "type",
                        "label",
                        "goto"
                      ],
                      "properties": {
                        "type": {
                          "type": "string",
                          "description": "Type of workflow step",
                          "enum": [
                            "load",
                            "choice",
                            "function",
                            "machine",
                            "pass",
                            "fail",
                            "success",
                            "user",
                            "wait"
                          ]
                        },
                        "label": {
                          "type": "string",
                          "description": "Label for the step",
                          "example": "Find units",
                          "x-examples": [
                            "Find units"
                          ]
                        },
                        "goto": {
                          "type": "string",
                          "description": "Step to move to",
                          "pattern": "^[a-z][a-z-]+[a-z]$",
                          "example": "complete",
                          "x-examples": [
                            "complete"
                          ]
                        },
                        "goto-fail": {
                          "type": "string",
                          "description": "Step to transition too if this step cannot be completed",
                          "pattern": "^[a-z][a-z-]+[a-z]$",
                          "example": "process-fail",
                          "x-examples": [
                            "process-fail"
                          ]
                        },
                        "context": {
                          "type": "array",
                          "description": "Initial values to set on the context",
                          "items": {
                            "type": "object",
                            "required": [
                              "key",
                              "value"
                            ],
                            "properties": {
                              "key": {
                                "type": "string",
                                "description": "The context key to set",
                                "example": "$.fizz",
                                "x-examples": [
                                  "$.fizz",
                                  "$.unit.status",
                                  "extract_fields"
                                ]
                              },
                              "value": {
                                "type": "string",
                                "description": "Value to set",
                                "example": "$.buzz",
                                "x-examples": [
                                  "$.buzz",
                                  "Pending",
                                  true
                                ]
                              },
                              "lock": {
                                "type": "boolean",
                                "description": "Prevents other steps from writing this value",
                                "example": true
                              },
                              "ignore": {
                                "type": "boolean",
                                "description": "When trying to set a locked key, do not fail",
                                "example": false
                              }
                            }
                          }
                        },
                        "onError": {
                          "type": "object",
                          "description": "Action to take when step fails",
                          "required": [
                            "finally"
                          ],
                          "properties": {
                            "retry": {
                              "type": "integer",
                              "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                              "minimum": 0,
                              "maximum": 10,
                              "example": 3,
                              "default": 0
                            },
                            "finally": {
                              "type": "object",
                              "description": "What to do after all retries",
                              "required": [
                                "goto"
                              ],
                              "properties": {
                                "actions": {
                                  "type": "array",
                                  "description": "Actions to take on failure",
                                  "items": {
                                    "anyOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "The type of the action",
                                            "enum": [
                                              "email"
                                            ]
                                          },
                                          "options": {
                                            "type": "object",
                                            "description": "settings for the action",
                                            "additionalProperties": {
                                              "type": "string"
                                            },
                                            "x-examples": [
                                              {
                                                "to": "bob@example.com",
                                                "from": "alice@example.com"
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                },
                                "goto": {
                                  "type": "string",
                                  "description": "Step to transition to on failure",
                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                  "example": "failed",
                                  "x-examples": [
                                    "failed"
                                  ]
                                }
                              }
                            }
                          }
                        },
                        "onComplete": {
                          "type": "object",
                          "description": "Actions to take when the step completes",
                          "properties": {
                            "actions": {
                              "type": "array",
                              "items": {
                                "anyOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "type": {
                                        "type": "string",
                                        "description": "The type of the action",
                                        "enum": [
                                          "email"
                                        ]
                                      },
                                      "options": {
                                        "type": "object",
                                        "description": "settings for the action",
                                        "additionalProperties": {
                                          "type": "string"
                                        },
                                        "x-examples": [
                                          {
                                            "to": "bob@example.com",
                                            "from": "alice@example.com"
                                          }
                                        ]
                                      }
                                    }
                                  }
                                ]
                              }
                            }
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            }
          ]
        }
      },
      "additionalProperties": {
        "type": "object",
        "anyOf": [
          {
            "type": "object",
            "description": "Close step",
            "required": [
              "step"
            ],
            "properties": {
              "step": {
                "type": "string",
                "description": "Step to mark as complete",
                "pattern": "^[a-z][a-z-]+[a-z]$",
                "example": "complete",
                "x-examples": [
                  "complete"
                ]
              }
            },
            "anyOf": [
              {
                "type": "object",
                "description": "Require the user confirm an action. This is normally used when Niagara cannot automatically detect that a task or action has been performed.",
                "x-nter-step-component": "confirm-action",
                "properties": {
                  "label": {
                    "x-examples": [
                      "Confirm the device has powered off"
                    ]
                  },
                  "options": {
                    "type": "object",
                    "required": [
                      "component",
                      "payload"
                    ],
                    "properties": {
                      "component": {
                        "enum": [
                          "confirm-action"
                        ],
                        "example": "confirm-action",
                        "x-examples": [
                          "confirm-action"
                        ]
                      },
                      "payload": {
                        "type": "object",
                        "required": [
                          "message"
                        ],
                        "properties": {
                          "message": {
                            "type": "string",
                            "description": "The confirmation message to display to the user",
                            "example": "Device powered off?",
                            "x-examples": [
                              "Device powered off?"
                            ]
                          },
                          "negative_message": {
                            "type": "string",
                            "description": "An optional inverse message",
                            "nullable": true,
                            "example": "Device not functioning",
                            "x-examples": [
                              "Device not functioning"
                            ]
                          }
                        }
                      }
                    }
                  }
                },
                "allOf": [
                  {
                    "type": "object",
                    "x-ui-hide": true,
                    "description": "A step which requires a user to complete",
                    "required": [
                      "type",
                      "options"
                    ],
                    "properties": {
                      "type": {
                        "example": "user",
                        "x-examples": [
                          "user"
                        ]
                      },
                      "options": {
                        "type": "object",
                        "required": [
                          "component",
                          "payload"
                        ],
                        "properties": {
                          "component": {
                            "type": "string",
                            "description": "Name of the function to invoke",
                            "example": "assignUnitsFromCustomerToProject",
                            "x-examples": [
                              "assignUnitsFromCustomerToProject"
                            ]
                          },
                          "payload": {
                            "type": "object"
                          }
                        }
                      }
                    },
                    "allOf": [
                      {
                        "type": "object",
                        "x-ui-hide": true,
                        "required": [
                          "type",
                          "label",
                          "goto"
                        ],
                        "properties": {
                          "type": {
                            "type": "string",
                            "description": "Type of workflow step",
                            "enum": [
                              "load",
                              "choice",
                              "function",
                              "machine",
                              "pass",
                              "fail",
                              "success",
                              "user",
                              "wait"
                            ]
                          },
                          "label": {
                            "type": "string",
                            "description": "Label for the step",
                            "example": "Find units",
                            "x-examples": [
                              "Find units"
                            ]
                          },
                          "goto": {
                            "type": "string",
                            "description": "Step to move to",
                            "pattern": "^[a-z][a-z-]+[a-z]$",
                            "example": "complete",
                            "x-examples": [
                              "complete"
                            ]
                          },
                          "goto-fail": {
                            "type": "string",
                            "description": "Step to transition too if this step cannot be completed",
                            "pattern": "^[a-z][a-z-]+[a-z]$",
                            "example": "process-fail",
                            "x-examples": [
                              "process-fail"
                            ]
                          },
                          "context": {
                            "type": "array",
                            "description": "Initial values to set on the context",
                            "items": {
                              "type": "object",
                              "required": [
                                "key",
                                "value"
                              ],
                              "properties": {
                                "key": {
                                  "type": "string",
                                  "description": "The context key to set",
                                  "example": "$.fizz",
                                  "x-examples": [
                                    "$.fizz",
                                    "$.unit.status",
                                    "extract_fields"
                                  ]
                                },
                                "value": {
                                  "type": "string",
                                  "description": "Value to set",
                                  "example": "$.buzz",
                                  "x-examples": [
                                    "$.buzz",
                                    "Pending",
                                    true
                                  ]
                                },
                                "lock": {
                                  "type": "boolean",
                                  "description": "Prevents other steps from writing this value",
                                  "example": true
                                },
                                "ignore": {
                                  "type": "boolean",
                                  "description": "When trying to set a locked key, do not fail",
                                  "example": false
                                }
                              }
                            }
                          },
                          "onError": {
                            "type": "object",
                            "description": "Action to take when step fails",
                            "required": [
                              "finally"
                            ],
                            "properties": {
                              "retry": {
                                "type": "integer",
                                "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                "minimum": 0,
                                "maximum": 10,
                                "example": 3,
                                "default": 0
                              },
                              "finally": {
                                "type": "object",
                                "description": "What to do after all retries",
                                "required": [
                                  "goto"
                                ],
                                "properties": {
                                  "actions": {
                                    "type": "array",
                                    "description": "Actions to take on failure",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "The type of the action",
                                              "enum": [
                                                "email"
                                              ]
                                            },
                                            "options": {
                                              "type": "object",
                                              "description": "settings for the action",
                                              "additionalProperties": {
                                                "type": "string"
                                              },
                                              "x-examples": [
                                                {
                                                  "to": "bob@example.com",
                                                  "from": "alice@example.com"
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to transition to on failure",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "failed",
                                    "x-examples": [
                                      "failed"
                                    ]
                                  }
                                }
                              }
                            }
                          },
                          "onComplete": {
                            "type": "object",
                            "description": "Actions to take when the step completes",
                            "properties": {
                              "actions": {
                                "type": "array",
                                "items": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "The type of the action",
                                          "enum": [
                                            "email"
                                          ]
                                        },
                                        "options": {
                                          "type": "object",
                                          "description": "settings for the action",
                                          "additionalProperties": {
                                            "type": "string"
                                          },
                                          "x-examples": [
                                            {
                                              "to": "bob@example.com",
                                              "from": "alice@example.com"
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              },
              {
                "type": "object",
                "description": "Display a link or modal to a user which contains instructions from a PDF",
                "x-nter-step-component": "follow-pdf-instructions",
                "required": [
                  "label",
                  "payload"
                ],
                "properties": {
                  "label": {
                    "x-examples": [
                      "Instruct user to follow steps outlined in Apple PDF"
                    ]
                  },
                  "options": {
                    "type": "object",
                    "required": [
                      "component",
                      "payload"
                    ],
                    "properties": {
                      "component": {
                        "enum": [
                          "follow-pds-instructions"
                        ],
                        "example": "follow-pdf-instructions",
                        "x-examples": [
                          "follow-pdf-instructions"
                        ]
                      },
                      "payload": {
                        "type": "object",
                        "required": [
                          "attachment_id"
                        ],
                        "properties": {
                          "attachment_id": {
                            "type": "string",
                            "description": "UUID for the attachment",
                            "format": "uuid",
                            "example": "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7",
                            "x-examples": [
                              "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7"
                            ]
                          }
                        }
                      }
                    }
                  }
                },
                "allOf": [
                  {
                    "type": "object",
                    "x-ui-hide": true,
                    "description": "A step which requires a user to complete",
                    "required": [
                      "type",
                      "options"
                    ],
                    "properties": {
                      "type": {
                        "example": "user",
                        "x-examples": [
                          "user"
                        ]
                      },
                      "options": {
                        "type": "object",
                        "required": [
                          "component",
                          "payload"
                        ],
                        "properties": {
                          "component": {
                            "type": "string",
                            "description": "Name of the function to invoke",
                            "example": "assignUnitsFromCustomerToProject",
                            "x-examples": [
                              "assignUnitsFromCustomerToProject"
                            ]
                          },
                          "payload": {
                            "type": "object"
                          }
                        }
                      }
                    },
                    "allOf": [
                      {
                        "type": "object",
                        "x-ui-hide": true,
                        "required": [
                          "type",
                          "label",
                          "goto"
                        ],
                        "properties": {
                          "type": {
                            "type": "string",
                            "description": "Type of workflow step",
                            "enum": [
                              "load",
                              "choice",
                              "function",
                              "machine",
                              "pass",
                              "fail",
                              "success",
                              "user",
                              "wait"
                            ]
                          },
                          "label": {
                            "type": "string",
                            "description": "Label for the step",
                            "example": "Find units",
                            "x-examples": [
                              "Find units"
                            ]
                          },
                          "goto": {
                            "type": "string",
                            "description": "Step to move to",
                            "pattern": "^[a-z][a-z-]+[a-z]$",
                            "example": "complete",
                            "x-examples": [
                              "complete"
                            ]
                          },
                          "goto-fail": {
                            "type": "string",
                            "description": "Step to transition too if this step cannot be completed",
                            "pattern": "^[a-z][a-z-]+[a-z]$",
                            "example": "process-fail",
                            "x-examples": [
                              "process-fail"
                            ]
                          },
                          "context": {
                            "type": "array",
                            "description": "Initial values to set on the context",
                            "items": {
                              "type": "object",
                              "required": [
                                "key",
                                "value"
                              ],
                              "properties": {
                                "key": {
                                  "type": "string",
                                  "description": "The context key to set",
                                  "example": "$.fizz",
                                  "x-examples": [
                                    "$.fizz",
                                    "$.unit.status",
                                    "extract_fields"
                                  ]
                                },
                                "value": {
                                  "type": "string",
                                  "description": "Value to set",
                                  "example": "$.buzz",
                                  "x-examples": [
                                    "$.buzz",
                                    "Pending",
                                    true
                                  ]
                                },
                                "lock": {
                                  "type": "boolean",
                                  "description": "Prevents other steps from writing this value",
                                  "example": true
                                },
                                "ignore": {
                                  "type": "boolean",
                                  "description": "When trying to set a locked key, do not fail",
                                  "example": false
                                }
                              }
                            }
                          },
                          "onError": {
                            "type": "object",
                            "description": "Action to take when step fails",
                            "required": [
                              "finally"
                            ],
                            "properties": {
                              "retry": {
                                "type": "integer",
                                "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                "minimum": 0,
                                "maximum": 10,
                                "example": 3,
                                "default": 0
                              },
                              "finally": {
                                "type": "object",
                                "description": "What to do after all retries",
                                "required": [
                                  "goto"
                                ],
                                "properties": {
                                  "actions": {
                                    "type": "array",
                                    "description": "Actions to take on failure",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "The type of the action",
                                              "enum": [
                                                "email"
                                              ]
                                            },
                                            "options": {
                                              "type": "object",
                                              "description": "settings for the action",
                                              "additionalProperties": {
                                                "type": "string"
                                              },
                                              "x-examples": [
                                                {
                                                  "to": "bob@example.com",
                                                  "from": "alice@example.com"
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to transition to on failure",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "failed",
                                    "x-examples": [
                                      "failed"
                                    ]
                                  }
                                }
                              }
                            }
                          },
                          "onComplete": {
                            "type": "object",
                            "description": "Actions to take when the step completes",
                            "properties": {
                              "actions": {
                                "type": "array",
                                "items": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "The type of the action",
                                          "enum": [
                                            "email"
                                          ]
                                        },
                                        "options": {
                                          "type": "object",
                                          "description": "settings for the action",
                                          "additionalProperties": {
                                            "type": "string"
                                          },
                                          "x-examples": [
                                            {
                                              "to": "bob@example.com",
                                              "from": "alice@example.com"
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              },
              {
                "type": "object",
                "description": "Ask the user to manually enter (or confirm) data for an entity",
                "x-nter-step-component": "manual-data-entry",
                "properties": {
                  "label": {
                    "x-examples": [
                      "Enter asset tag and confirm serial number"
                    ]
                  },
                  "options": {
                    "type": "object",
                    "required": [
                      "component",
                      "payload"
                    ],
                    "properties": {
                      "component": {
                        "enum": [
                          "manual-data-entry"
                        ],
                        "example": "manual-data-entry",
                        "x-examples": [
                          "manual-data-entry"
                        ]
                      },
                      "payload": {
                        "type": "object",
                        "required": [
                          "fields"
                        ],
                        "properties": {
                          "fields": {
                            "type": "array",
                            "description": "Configuration for each field",
                            "items": {
                              "type": "object",
                              "required": [
                                "input_type",
                                "label",
                                "required",
                                "entity_field"
                              ],
                              "properties": {
                                "input_type": {
                                  "type": "string",
                                  "description": "The type of input field to display",
                                  "enum": [
                                    "textbox",
                                    "input"
                                  ]
                                },
                                "label": {
                                  "type": "string",
                                  "description": "Label to display for the field",
                                  "example": "Asset Tag",
                                  "x-examples": [
                                    "Asset Tag"
                                  ]
                                },
                                "required": {
                                  "type": "boolean",
                                  "description": "Display the field as required input. Note: this is a helper function. It singles that the user is required to input data at this step. If the field is required on the entity, the user will be presented with a validation message",
                                  "example": true
                                },
                                "entity_field": {
                                  "type": "string",
                                  "description": "JSON Path to the field on the entity. If the path does not start with '$' then the entity on the context is assumed. Otherwise the data will be set on the context path",
                                  "example": "input_filter[?(@.key = 'asset-tag')]",
                                  "x-examples": [
                                    "input_filter[?(@.key = 'asset-tag')]"
                                  ]
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "allOf": [
                  {
                    "type": "object",
                    "x-ui-hide": true,
                    "description": "A step which requires a user to complete",
                    "required": [
                      "type",
                      "options"
                    ],
                    "properties": {
                      "type": {
                        "example": "user",
                        "x-examples": [
                          "user"
                        ]
                      },
                      "options": {
                        "type": "object",
                        "required": [
                          "component",
                          "payload"
                        ],
                        "properties": {
                          "component": {
                            "type": "string",
                            "description": "Name of the function to invoke",
                            "example": "assignUnitsFromCustomerToProject",
                            "x-examples": [
                              "assignUnitsFromCustomerToProject"
                            ]
                          },
                          "payload": {
                            "type": "object"
                          }
                        }
                      }
                    },
                    "allOf": [
                      {
                        "type": "object",
                        "x-ui-hide": true,
                        "required": [
                          "type",
                          "label",
                          "goto"
                        ],
                        "properties": {
                          "type": {
                            "type": "string",
                            "description": "Type of workflow step",
                            "enum": [
                              "load",
                              "choice",
                              "function",
                              "machine",
                              "pass",
                              "fail",
                              "success",
                              "user",
                              "wait"
                            ]
                          },
                          "label": {
                            "type": "string",
                            "description": "Label for the step",
                            "example": "Find units",
                            "x-examples": [
                              "Find units"
                            ]
                          },
                          "goto": {
                            "type": "string",
                            "description": "Step to move to",
                            "pattern": "^[a-z][a-z-]+[a-z]$",
                            "example": "complete",
                            "x-examples": [
                              "complete"
                            ]
                          },
                          "goto-fail": {
                            "type": "string",
                            "description": "Step to transition too if this step cannot be completed",
                            "pattern": "^[a-z][a-z-]+[a-z]$",
                            "example": "process-fail",
                            "x-examples": [
                              "process-fail"
                            ]
                          },
                          "context": {
                            "type": "array",
                            "description": "Initial values to set on the context",
                            "items": {
                              "type": "object",
                              "required": [
                                "key",
                                "value"
                              ],
                              "properties": {
                                "key": {
                                  "type": "string",
                                  "description": "The context key to set",
                                  "example": "$.fizz",
                                  "x-examples": [
                                    "$.fizz",
                                    "$.unit.status",
                                    "extract_fields"
                                  ]
                                },
                                "value": {
                                  "type": "string",
                                  "description": "Value to set",
                                  "example": "$.buzz",
                                  "x-examples": [
                                    "$.buzz",
                                    "Pending",
                                    true
                                  ]
                                },
                                "lock": {
                                  "type": "boolean",
                                  "description": "Prevents other steps from writing this value",
                                  "example": true
                                },
                                "ignore": {
                                  "type": "boolean",
                                  "description": "When trying to set a locked key, do not fail",
                                  "example": false
                                }
                              }
                            }
                          },
                          "onError": {
                            "type": "object",
                            "description": "Action to take when step fails",
                            "required": [
                              "finally"
                            ],
                            "properties": {
                              "retry": {
                                "type": "integer",
                                "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                "minimum": 0,
                                "maximum": 10,
                                "example": 3,
                                "default": 0
                              },
                              "finally": {
                                "type": "object",
                                "description": "What to do after all retries",
                                "required": [
                                  "goto"
                                ],
                                "properties": {
                                  "actions": {
                                    "type": "array",
                                    "description": "Actions to take on failure",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "The type of the action",
                                              "enum": [
                                                "email"
                                              ]
                                            },
                                            "options": {
                                              "type": "object",
                                              "description": "settings for the action",
                                              "additionalProperties": {
                                                "type": "string"
                                              },
                                              "x-examples": [
                                                {
                                                  "to": "bob@example.com",
                                                  "from": "alice@example.com"
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to transition to on failure",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "failed",
                                    "x-examples": [
                                      "failed"
                                    ]
                                  }
                                }
                              }
                            }
                          },
                          "onComplete": {
                            "type": "object",
                            "description": "Actions to take when the step completes",
                            "properties": {
                              "actions": {
                                "type": "array",
                                "items": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "The type of the action",
                                          "enum": [
                                            "email"
                                          ]
                                        },
                                        "options": {
                                          "type": "object",
                                          "description": "settings for the action",
                                          "additionalProperties": {
                                            "type": "string"
                                          },
                                          "x-examples": [
                                            {
                                              "to": "bob@example.com",
                                              "from": "alice@example.com"
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              },
              {
                "type": "object",
                "description": "Ask the user to follow a list and check off boxes",
                "x-nter-step-component": "task-list",
                "properties": {
                  "label": {
                    "x-examples": [
                      "Enter asset tag and confirm serial number"
                    ]
                  },
                  "options": {
                    "type": "object",
                    "required": [
                      "component",
                      "payload"
                    ],
                    "properties": {
                      "component": {
                        "enum": [
                          "task-list"
                        ],
                        "example": "task-list",
                        "x-examples": [
                          "task-list"
                        ]
                      },
                      "payload": {
                        "type": "object",
                        "required": [
                          "items"
                        ],
                        "properties": {
                          "is_qc": {
                            "type": "boolean",
                            "description": "Flags this list as a QC task list. This means that a different user can close the task to one previously on the context"
                          },
                          "items": {
                            "type": "array",
                            "description": "Configuration for each task list item",
                            "items": {
                              "type": "object",
                              "required": [
                                "label",
                                "help",
                                "evaluated",
                                "na_option"
                              ],
                              "properties": {
                                "label": {
                                  "type": "string",
                                  "description": "Label to display for the field",
                                  "example": "Asset Tag placement",
                                  "x-examples": [
                                    "Asset Tag placement"
                                  ]
                                },
                                "slug": {
                                  "type": "string",
                                  "description": "Slug for the item (Auto-generated from the label)",
                                  "readOnly": true,
                                  "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$",
                                  "example": "asset-tag-placement",
                                  "x-examples": [
                                    "asset-tag-placement"
                                  ]
                                },
                                "help": {
                                  "type": "string",
                                  "description": "Message describing what is needed to be checked",
                                  "example": "Asset Tag attached to the unit in the correct position",
                                  "x-examples": [
                                    "Asset Tag attached to the unit in the correct position"
                                  ]
                                },
                                "evaluated": {
                                  "type": "boolean",
                                  "description": "When set to true, this will fail the step if the value for the item is false or N/A",
                                  "example": true
                                },
                                "na_field": {
                                  "type": "boolean",
                                  "description": "Allow the user to select the N/A option when checking off the list",
                                  "example": true
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "allOf": [
                  {
                    "type": "object",
                    "x-ui-hide": true,
                    "description": "A step which requires a user to complete",
                    "required": [
                      "type",
                      "options"
                    ],
                    "properties": {
                      "type": {
                        "example": "user",
                        "x-examples": [
                          "user"
                        ]
                      },
                      "options": {
                        "type": "object",
                        "required": [
                          "component",
                          "payload"
                        ],
                        "properties": {
                          "component": {
                            "type": "string",
                            "description": "Name of the function to invoke",
                            "example": "assignUnitsFromCustomerToProject",
                            "x-examples": [
                              "assignUnitsFromCustomerToProject"
                            ]
                          },
                          "payload": {
                            "type": "object"
                          }
                        }
                      }
                    },
                    "allOf": [
                      {
                        "type": "object",
                        "x-ui-hide": true,
                        "required": [
                          "type",
                          "label",
                          "goto"
                        ],
                        "properties": {
                          "type": {
                            "type": "string",
                            "description": "Type of workflow step",
                            "enum": [
                              "load",
                              "choice",
                              "function",
                              "machine",
                              "pass",
                              "fail",
                              "success",
                              "user",
                              "wait"
                            ]
                          },
                          "label": {
                            "type": "string",
                            "description": "Label for the step",
                            "example": "Find units",
                            "x-examples": [
                              "Find units"
                            ]
                          },
                          "goto": {
                            "type": "string",
                            "description": "Step to move to",
                            "pattern": "^[a-z][a-z-]+[a-z]$",
                            "example": "complete",
                            "x-examples": [
                              "complete"
                            ]
                          },
                          "goto-fail": {
                            "type": "string",
                            "description": "Step to transition too if this step cannot be completed",
                            "pattern": "^[a-z][a-z-]+[a-z]$",
                            "example": "process-fail",
                            "x-examples": [
                              "process-fail"
                            ]
                          },
                          "context": {
                            "type": "array",
                            "description": "Initial values to set on the context",
                            "items": {
                              "type": "object",
                              "required": [
                                "key",
                                "value"
                              ],
                              "properties": {
                                "key": {
                                  "type": "string",
                                  "description": "The context key to set",
                                  "example": "$.fizz",
                                  "x-examples": [
                                    "$.fizz",
                                    "$.unit.status",
                                    "extract_fields"
                                  ]
                                },
                                "value": {
                                  "type": "string",
                                  "description": "Value to set",
                                  "example": "$.buzz",
                                  "x-examples": [
                                    "$.buzz",
                                    "Pending",
                                    true
                                  ]
                                },
                                "lock": {
                                  "type": "boolean",
                                  "description": "Prevents other steps from writing this value",
                                  "example": true
                                },
                                "ignore": {
                                  "type": "boolean",
                                  "description": "When trying to set a locked key, do not fail",
                                  "example": false
                                }
                              }
                            }
                          },
                          "onError": {
                            "type": "object",
                            "description": "Action to take when step fails",
                            "required": [
                              "finally"
                            ],
                            "properties": {
                              "retry": {
                                "type": "integer",
                                "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                "minimum": 0,
                                "maximum": 10,
                                "example": 3,
                                "default": 0
                              },
                              "finally": {
                                "type": "object",
                                "description": "What to do after all retries",
                                "required": [
                                  "goto"
                                ],
                                "properties": {
                                  "actions": {
                                    "type": "array",
                                    "description": "Actions to take on failure",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "The type of the action",
                                              "enum": [
                                                "email"
                                              ]
                                            },
                                            "options": {
                                              "type": "object",
                                              "description": "settings for the action",
                                              "additionalProperties": {
                                                "type": "string"
                                              },
                                              "x-examples": [
                                                {
                                                  "to": "bob@example.com",
                                                  "from": "alice@example.com"
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to transition to on failure",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "failed",
                                    "x-examples": [
                                      "failed"
                                    ]
                                  }
                                }
                              }
                            }
                          },
                          "onComplete": {
                            "type": "object",
                            "description": "Actions to take when the step completes",
                            "properties": {
                              "actions": {
                                "type": "array",
                                "items": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "The type of the action",
                                          "enum": [
                                            "email"
                                          ]
                                        },
                                        "options": {
                                          "type": "object",
                                          "description": "settings for the action",
                                          "additionalProperties": {
                                            "type": "string"
                                          },
                                          "x-examples": [
                                            {
                                              "to": "bob@example.com",
                                              "from": "alice@example.com"
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              },
              {
                "type": "object",
                "description": "Run the ACE-IOS application to provision iOS devices or ",
                "properties": {
                  "type": {
                    "example": "machine",
                    "x-examples": [
                      "machine"
                    ]
                  },
                  "label": {
                    "x-examples": [
                      "Run Application"
                    ]
                  },
                  "options": {
                    "type": "object",
                    "required": [
                      "application",
                      "configuration"
                    ],
                    "properties": {
                      "configuration": {
                        "type": "object",
                        "description": "ACE Configuration options",
                        "properties": {
                          "pairing_cert": {
                            "type": "string",
                            "format": "base64",
                            "description": "Contents of a *.crt file exported from Apple Configurator or MDM",
                            "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                            "x-examples": [
                              "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                            ],
                            "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                          },
                          "pairing_key": {
                            "type": "string",
                            "format": "base64",
                            "description": "Contents of a *.der file exported from Apple Configurator or MDM",
                            "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                            "x-examples": [
                              "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                            ],
                            "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                          },
                          "restore_device": {
                            "type": "boolean",
                            "description": "Restore device to factory defaults"
                          },
                          "automated_enrollment": {
                            "type": "boolean",
                            "description": "Automatically enroll the device to MDM"
                          },
                          "mdm": {
                            "type": "object",
                            "format": "base64",
                            "description": "The settings for the Customers MDM",
                            "properties": {
                              "vendor": {
                                "type": "string",
                                "description": "MDM vendor. Currently, supported values are AirWatch, JAMF, and Meraki.",
                                "enum": [
                                  "AirWatch",
                                  "JAMF",
                                  "Meraki"
                                ]
                              },
                              "console_url": {
                                "type": "string",
                                "format": "uri",
                                "description": "Base URL for HTTP requests",
                                "example": "http://jamf.zones.com",
                                "x-examples": [
                                  "http://jamf.zones.com"
                                ]
                              },
                              "user": {
                                "type": "string",
                                "description": "MDM User name",
                                "example": "NterpriseBob",
                                "x-examples": [
                                  "NterpriseBob"
                                ]
                              },
                              "password": {
                                "type": "string",
                                "description": "MDM password"
                              },
                              "tenant_code": {
                                "type": "string",
                                "description": "MDM authentication key",
                                "example": "nterprise",
                                "x-examples": [
                                  "nterprise"
                                ]
                              },
                              "set_asset_tag": {
                                "type": "string",
                                "description": "Sets the devices Asset tag based on a field from the unit",
                                "example": "$._entity.input_filter[?(@.key = 'asset-tag')]",
                                "x-examples": [
                                  "$._entity.input_filter[?(@.key = 'asset-tag')]"
                                ]
                              }
                            }
                          },
                          "field_mappings": {
                            "type": "array",
                            "description": "List of fields to map to the device",
                            "items": {
                              "type": "object",
                              "properties": {
                                "from": {
                                  "type": "string",
                                  "description": "The field reported from ACE",
                                  "enum": [
                                    "serial_number",
                                    "name",
                                    "ecid",
                                    "udid",
                                    "configurator_serial",
                                    "ios",
                                    "model",
                                    "storage",
                                    "wifi_mac",
                                    "bt_mac",
                                    "ethernet_mac",
                                    "thundersync_serial",
                                    "iccid",
                                    "iccid2",
                                    "imei",
                                    "imei2",
                                    "missed_profiles",
                                    "missed_apps",
                                    "icon_list_regex",
                                    "icon_layout",
                                    "bat_capacity"
                                  ]
                                },
                                "to": {
                                  "type": "string",
                                  "description": "Field to set on the entity",
                                  "example": "$._entity.input_filter[?(@.key = 'serial-number')]",
                                  "x-examples": [
                                    "$._entity.input_filter[?(@.key = 'serial-number')]"
                                  ]
                                }
                              }
                            }
                          },
                          "wait_for_apps": {
                            "type": "array",
                            "description": "A list of applications needed to be installed on the device. This will cause the extension to poll the device for installed applications. Once all the applications have been installed, this step can be completed",
                            "items": {
                              "type": "string",
                              "format": "uri",
                              "example": "com.apple.itunes",
                              "x-examples": [
                                "com.apple.itunes"
                              ]
                            }
                          },
                          "wait_for_battery_charge": {
                            "type": "integer",
                            "description": "The required battery percentage needed before this step can move on",
                            "minimum": 0,
                            "maximum": 100
                          }
                        }
                      }
                    }
                  }
                },
                "allOf": [
                  {
                    "type": "object",
                    "description": "Run an application extension",
                    "properties": {
                      "label": {
                        "x-examples": [
                          "Run Application"
                        ]
                      },
                      "options": {
                        "type": "object",
                        "required": [
                          "application",
                          "configuration"
                        ],
                        "properties": {
                          "application": {
                            "type": "object",
                            "required": [
                              "application_id",
                              "platforms"
                            ],
                            "properties": {
                              "application_id": {
                                "type": "string",
                                "description": "Registered application ID",
                                "example": "ace-ios",
                                "x-examples": [
                                  "ace-ios"
                                ]
                              },
                              "platforms": {
                                "type": "array",
                                "description": "Allowed platforms the application can run on",
                                "items": {
                                  "type": "object",
                                  "required": [
                                    "platform",
                                    "arch"
                                  ],
                                  "properties": {
                                    "platform": {
                                      "type": "string",
                                      "description": "The platform (OS) the application can run on",
                                      "enum": [
                                        "aix",
                                        "darwin",
                                        "freebsd",
                                        "linux",
                                        "openbsd",
                                        "sunos",
                                        "win32"
                                      ]
                                    },
                                    "arch": {
                                      "type": "string",
                                      "description": "The CPU architecture needed to run the application",
                                      "enum": [
                                        "arm",
                                        "arm64",
                                        "ia32",
                                        "mips",
                                        "mipsel",
                                        "ppc",
                                        "ppc64",
                                        "s390",
                                        "s390x",
                                        "x32",
                                        "x64"
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    },
                    "allOf": [
                      {
                        "type": "object",
                        "x-ui-hide": true,
                        "required": [
                          "type",
                          "label",
                          "goto"
                        ],
                        "properties": {
                          "type": {
                            "type": "string",
                            "description": "Type of workflow step",
                            "enum": [
                              "load",
                              "choice",
                              "function",
                              "machine",
                              "pass",
                              "fail",
                              "success",
                              "user",
                              "wait"
                            ]
                          },
                          "label": {
                            "type": "string",
                            "description": "Label for the step",
                            "example": "Find units",
                            "x-examples": [
                              "Find units"
                            ]
                          },
                          "goto": {
                            "type": "string",
                            "description": "Step to move to",
                            "pattern": "^[a-z][a-z-]+[a-z]$",
                            "example": "complete",
                            "x-examples": [
                              "complete"
                            ]
                          },
                          "goto-fail": {
                            "type": "string",
                            "description": "Step to transition too if this step cannot be completed",
                            "pattern": "^[a-z][a-z-]+[a-z]$",
                            "example": "process-fail",
                            "x-examples": [
                              "process-fail"
                            ]
                          },
                          "context": {
                            "type": "array",
                            "description": "Initial values to set on the context",
                            "items": {
                              "type": "object",
                              "required": [
                                "key",
                                "value"
                              ],
                              "properties": {
                                "key": {
                                  "type": "string",
                                  "description": "The context key to set",
                                  "example": "$.fizz",
                                  "x-examples": [
                                    "$.fizz",
                                    "$.unit.status",
                                    "extract_fields"
                                  ]
                                },
                                "value": {
                                  "type": "string",
                                  "description": "Value to set",
                                  "example": "$.buzz",
                                  "x-examples": [
                                    "$.buzz",
                                    "Pending",
                                    true
                                  ]
                                },
                                "lock": {
                                  "type": "boolean",
                                  "description": "Prevents other steps from writing this value",
                                  "example": true
                                },
                                "ignore": {
                                  "type": "boolean",
                                  "description": "When trying to set a locked key, do not fail",
                                  "example": false
                                }
                              }
                            }
                          },
                          "onError": {
                            "type": "object",
                            "description": "Action to take when step fails",
                            "required": [
                              "finally"
                            ],
                            "properties": {
                              "retry": {
                                "type": "integer",
                                "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                "minimum": 0,
                                "maximum": 10,
                                "example": 3,
                                "default": 0
                              },
                              "finally": {
                                "type": "object",
                                "description": "What to do after all retries",
                                "required": [
                                  "goto"
                                ],
                                "properties": {
                                  "actions": {
                                    "type": "array",
                                    "description": "Actions to take on failure",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "The type of the action",
                                              "enum": [
                                                "email"
                                              ]
                                            },
                                            "options": {
                                              "type": "object",
                                              "description": "settings for the action",
                                              "additionalProperties": {
                                                "type": "string"
                                              },
                                              "x-examples": [
                                                {
                                                  "to": "bob@example.com",
                                                  "from": "alice@example.com"
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to transition to on failure",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "failed",
                                    "x-examples": [
                                      "failed"
                                    ]
                                  }
                                }
                              }
                            }
                          },
                          "onComplete": {
                            "type": "object",
                            "description": "Actions to take when the step completes",
                            "properties": {
                              "actions": {
                                "type": "array",
                                "items": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "The type of the action",
                                          "enum": [
                                            "email"
                                          ]
                                        },
                                        "options": {
                                          "type": "object",
                                          "description": "settings for the action",
                                          "additionalProperties": {
                                            "type": "string"
                                          },
                                          "x-examples": [
                                            {
                                              "to": "bob@example.com",
                                              "from": "alice@example.com"
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              },
              {
                "type": "object",
                "properties": {
                  "label": {
                    "example": "Is device ok?",
                    "x-examples": [
                      "Is device ok?"
                    ]
                  },
                  "type": {
                    "example": "choice",
                    "x-examples": [
                      "choice"
                    ]
                  },
                  "choices": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "required": [
                        "goto"
                      ],
                      "maxProperties": 2,
                      "minProperties": 2,
                      "maximum": 20,
                      "properties": {
                        "and": {
                          "type": "array",
                          "description": "All choices must be satisfied",
                          "maximum": 5,
                          "items": {
                            "description": "A Step choice",
                            "type": "object",
                            "maxProperties": 2,
                            "minProperties": 2,
                            "required": [
                              "variable"
                            ],
                            "properties": {
                              "variable": {
                                "type": "string",
                                "description": "Context variable to check",
                                "example": "$.parts.available",
                                "x-examples": [
                                  "$.parts.available"
                                ]
                              },
                              "greater_than_equals": {
                                "type": "string",
                                "description": "Value has to be greater than or equals to",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "less_than_equals": {
                                "type": "string",
                                "description": "Value has to be less than or equals to",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "greater_than": {
                                "type": "string",
                                "description": "Value has to be greater than",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "less_than": {
                                "type": "string",
                                "description": "Value has to be less than",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "equals": {
                                "type": "string",
                                "description": "Value has to equal",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "not_equals": {
                                "type": "string",
                                "description": "Value must not equal",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              }
                            }
                          }
                        },
                        "or": {
                          "type": "array",
                          "description": "Any of these choices must be satisfied",
                          "maximum": 5,
                          "items": {
                            "description": "A Step choice",
                            "type": "object",
                            "maxProperties": 2,
                            "minProperties": 2,
                            "required": [
                              "variable"
                            ],
                            "properties": {
                              "variable": {
                                "type": "string",
                                "description": "Context variable to check",
                                "example": "$.parts.available",
                                "x-examples": [
                                  "$.parts.available"
                                ]
                              },
                              "greater_than_equals": {
                                "type": "string",
                                "description": "Value has to be greater than or equals to",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "less_than_equals": {
                                "type": "string",
                                "description": "Value has to be less than or equals to",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "greater_than": {
                                "type": "string",
                                "description": "Value has to be greater than",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "less_than": {
                                "type": "string",
                                "description": "Value has to be less than",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "equals": {
                                "type": "string",
                                "description": "Value has to equal",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "not_equals": {
                                "type": "string",
                                "description": "Value must not equal",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              }
                            }
                          }
                        },
                        "not": {
                          "type": "array",
                          "description": "None of these choices must be satisfied",
                          "maximum": 5,
                          "items": {
                            "description": "A Step choice",
                            "type": "object",
                            "maxProperties": 2,
                            "minProperties": 2,
                            "required": [
                              "variable"
                            ],
                            "properties": {
                              "variable": {
                                "type": "string",
                                "description": "Context variable to check",
                                "example": "$.parts.available",
                                "x-examples": [
                                  "$.parts.available"
                                ]
                              },
                              "greater_than_equals": {
                                "type": "string",
                                "description": "Value has to be greater than or equals to",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "less_than_equals": {
                                "type": "string",
                                "description": "Value has to be less than or equals to",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "greater_than": {
                                "type": "string",
                                "description": "Value has to be greater than",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "less_than": {
                                "type": "string",
                                "description": "Value has to be less than",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "equals": {
                                "type": "string",
                                "description": "Value has to equal",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              },
                              "not_equals": {
                                "type": "string",
                                "description": "Value must not equal",
                                "example": "42",
                                "x-examples": [
                                  "42"
                                ]
                              }
                            }
                          }
                        },
                        "goto": {
                          "description": "Step to goto when condition is met",
                          "allOf": [
                            {
                              "type": "string",
                              "description": "Step to move to",
                              "pattern": "^[a-z][a-z-]+[a-z]$",
                              "example": "complete",
                              "x-examples": [
                                "complete"
                              ]
                            }
                          ]
                        }
                      }
                    }
                  },
                  "goto": {
                    "description": "Default step to goto when no choice can be made"
                  }
                },
                "allOf": [
                  {
                    "type": "object",
                    "x-ui-hide": true,
                    "required": [
                      "type",
                      "label",
                      "goto"
                    ],
                    "properties": {
                      "type": {
                        "type": "string",
                        "description": "Type of workflow step",
                        "enum": [
                          "load",
                          "choice",
                          "function",
                          "machine",
                          "pass",
                          "fail",
                          "success",
                          "user",
                          "wait"
                        ]
                      },
                      "label": {
                        "type": "string",
                        "description": "Label for the step",
                        "example": "Find units",
                        "x-examples": [
                          "Find units"
                        ]
                      },
                      "goto": {
                        "type": "string",
                        "description": "Step to move to",
                        "pattern": "^[a-z][a-z-]+[a-z]$",
                        "example": "complete",
                        "x-examples": [
                          "complete"
                        ]
                      },
                      "goto-fail": {
                        "type": "string",
                        "description": "Step to transition too if this step cannot be completed",
                        "pattern": "^[a-z][a-z-]+[a-z]$",
                        "example": "process-fail",
                        "x-examples": [
                          "process-fail"
                        ]
                      },
                      "context": {
                        "type": "array",
                        "description": "Initial values to set on the context",
                        "items": {
                          "type": "object",
                          "required": [
                            "key",
                            "value"
                          ],
                          "properties": {
                            "key": {
                              "type": "string",
                              "description": "The context key to set",
                              "example": "$.fizz",
                              "x-examples": [
                                "$.fizz",
                                "$.unit.status",
                                "extract_fields"
                              ]
                            },
                            "value": {
                              "type": "string",
                              "description": "Value to set",
                              "example": "$.buzz",
                              "x-examples": [
                                "$.buzz",
                                "Pending",
                                true
                              ]
                            },
                            "lock": {
                              "type": "boolean",
                              "description": "Prevents other steps from writing this value",
                              "example": true
                            },
                            "ignore": {
                              "type": "boolean",
                              "description": "When trying to set a locked key, do not fail",
                              "example": false
                            }
                          }
                        }
                      },
                      "onError": {
                        "type": "object",
                        "description": "Action to take when step fails",
                        "required": [
                          "finally"
                        ],
                        "properties": {
                          "retry": {
                            "type": "integer",
                            "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                            "minimum": 0,
                            "maximum": 10,
                            "example": 3,
                            "default": 0
                          },
                          "finally": {
                            "type": "object",
                            "description": "What to do after all retries",
                            "required": [
                              "goto"
                            ],
                            "properties": {
                              "actions": {
                                "type": "array",
                                "description": "Actions to take on failure",
                                "items": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "The type of the action",
                                          "enum": [
                                            "email"
                                          ]
                                        },
                                        "options": {
                                          "type": "object",
                                          "description": "settings for the action",
                                          "additionalProperties": {
                                            "type": "string"
                                          },
                                          "x-examples": [
                                            {
                                              "to": "bob@example.com",
                                              "from": "alice@example.com"
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              },
                              "goto": {
                                "type": "string",
                                "description": "Step to transition to on failure",
                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                "example": "failed",
                                "x-examples": [
                                  "failed"
                                ]
                              }
                            }
                          }
                        }
                      },
                      "onComplete": {
                        "type": "object",
                        "description": "Actions to take when the step completes",
                        "properties": {
                          "actions": {
                            "type": "array",
                            "items": {
                              "anyOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "The type of the action",
                                      "enum": [
                                        "email"
                                      ]
                                    },
                                    "options": {
                                      "type": "object",
                                      "description": "settings for the action",
                                      "additionalProperties": {
                                        "type": "string"
                                      },
                                      "x-examples": [
                                        {
                                          "to": "bob@example.com",
                                          "from": "alice@example.com"
                                        }
                                      ]
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        }
                      }
                    }
                  }
                ]
              },
              {
                "type": "object",
                "description": "Finial step which is marked as failed",
                "properties": {
                  "label": {
                    "example": "Failed",
                    "x-examples": [
                      "Failed"
                    ],
                    "allOf": [
                      {
                        "type": "string",
                        "description": "Label for the step",
                        "example": "Find units",
                        "x-examples": [
                          "Find units"
                        ]
                      }
                    ]
                  },
                  "type": {
                    "example": "fail",
                    "x-examples": [
                      "fail"
                    ],
                    "allOf": [
                      {
                        "type": "string",
                        "description": "Type of workflow step",
                        "enum": [
                          "load",
                          "choice",
                          "function",
                          "machine",
                          "pass",
                          "fail",
                          "success",
                          "user",
                          "wait"
                        ]
                      }
                    ]
                  },
                  "onComplete": {
                    "type": "object",
                    "description": "Actions to take when the step completes",
                    "properties": {
                      "actions": {
                        "type": "array",
                        "items": {
                          "anyOf": [
                            {
                              "type": "object",
                              "properties": {
                                "type": {
                                  "type": "string",
                                  "description": "The type of the action",
                                  "enum": [
                                    "email"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "description": "settings for the action",
                                  "additionalProperties": {
                                    "type": "string"
                                  },
                                  "x-examples": [
                                    {
                                      "to": "bob@example.com",
                                      "from": "alice@example.com"
                                    }
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      }
                    }
                  }
                }
              },
              {
                "type": "object",
                "description": "Allows executing actions with out performing any function",
                "properties": {
                  "label": {
                    "example": "Send email to project manager",
                    "x-examples": [
                      "Send email to project manager"
                    ]
                  },
                  "type": {
                    "example": "pass",
                    "x-examples": [
                      "pass"
                    ],
                    "allOf": [
                      {
                        "type": "string",
                        "description": "Type of workflow step",
                        "enum": [
                          "load",
                          "choice",
                          "function",
                          "machine",
                          "pass",
                          "fail",
                          "success",
                          "user",
                          "wait"
                        ]
                      }
                    ]
                  }
                },
                "allOf": [
                  {
                    "type": "object",
                    "x-ui-hide": true,
                    "required": [
                      "type",
                      "label",
                      "goto"
                    ],
                    "properties": {
                      "type": {
                        "type": "string",
                        "description": "Type of workflow step",
                        "enum": [
                          "load",
                          "choice",
                          "function",
                          "machine",
                          "pass",
                          "fail",
                          "success",
                          "user",
                          "wait"
                        ]
                      },
                      "label": {
                        "type": "string",
                        "description": "Label for the step",
                        "example": "Find units",
                        "x-examples": [
                          "Find units"
                        ]
                      },
                      "goto": {
                        "type": "string",
                        "description": "Step to move to",
                        "pattern": "^[a-z][a-z-]+[a-z]$",
                        "example": "complete",
                        "x-examples": [
                          "complete"
                        ]
                      },
                      "goto-fail": {
                        "type": "string",
                        "description": "Step to transition too if this step cannot be completed",
                        "pattern": "^[a-z][a-z-]+[a-z]$",
                        "example": "process-fail",
                        "x-examples": [
                          "process-fail"
                        ]
                      },
                      "context": {
                        "type": "array",
                        "description": "Initial values to set on the context",
                        "items": {
                          "type": "object",
                          "required": [
                            "key",
                            "value"
                          ],
                          "properties": {
                            "key": {
                              "type": "string",
                              "description": "The context key to set",
                              "example": "$.fizz",
                              "x-examples": [
                                "$.fizz",
                                "$.unit.status",
                                "extract_fields"
                              ]
                            },
                            "value": {
                              "type": "string",
                              "description": "Value to set",
                              "example": "$.buzz",
                              "x-examples": [
                                "$.buzz",
                                "Pending",
                                true
                              ]
                            },
                            "lock": {
                              "type": "boolean",
                              "description": "Prevents other steps from writing this value",
                              "example": true
                            },
                            "ignore": {
                              "type": "boolean",
                              "description": "When trying to set a locked key, do not fail",
                              "example": false
                            }
                          }
                        }
                      },
                      "onError": {
                        "type": "object",
                        "description": "Action to take when step fails",
                        "required": [
                          "finally"
                        ],
                        "properties": {
                          "retry": {
                            "type": "integer",
                            "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                            "minimum": 0,
                            "maximum": 10,
                            "example": 3,
                            "default": 0
                          },
                          "finally": {
                            "type": "object",
                            "description": "What to do after all retries",
                            "required": [
                              "goto"
                            ],
                            "properties": {
                              "actions": {
                                "type": "array",
                                "description": "Actions to take on failure",
                                "items": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "The type of the action",
                                          "enum": [
                                            "email"
                                          ]
                                        },
                                        "options": {
                                          "type": "object",
                                          "description": "settings for the action",
                                          "additionalProperties": {
                                            "type": "string"
                                          },
                                          "x-examples": [
                                            {
                                              "to": "bob@example.com",
                                              "from": "alice@example.com"
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              },
                              "goto": {
                                "type": "string",
                                "description": "Step to transition to on failure",
                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                "example": "failed",
                                "x-examples": [
                                  "failed"
                                ]
                              }
                            }
                          }
                        }
                      },
                      "onComplete": {
                        "type": "object",
                        "description": "Actions to take when the step completes",
                        "properties": {
                          "actions": {
                            "type": "array",
                            "items": {
                              "anyOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "The type of the action",
                                      "enum": [
                                        "email"
                                      ]
                                    },
                                    "options": {
                                      "type": "object",
                                      "description": "settings for the action",
                                      "additionalProperties": {
                                        "type": "string"
                                      },
                                      "x-examples": [
                                        {
                                          "to": "bob@example.com",
                                          "from": "alice@example.com"
                                        }
                                      ]
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        }
                      }
                    }
                  }
                ]
              },
              {
                "type": "object",
                "description": "Finial step which is marked as completed successfully",
                "properties": {
                  "label": {
                    "example": "Complete",
                    "x-examples": [
                      "Complete"
                    ],
                    "allOf": [
                      {
                        "type": "string",
                        "description": "Label for the step",
                        "example": "Find units",
                        "x-examples": [
                          "Find units"
                        ]
                      }
                    ]
                  },
                  "type": {
                    "example": "success",
                    "x-examples": [
                      "success"
                    ],
                    "allOf": [
                      {
                        "type": "string",
                        "description": "Type of workflow step",
                        "enum": [
                          "load",
                          "choice",
                          "function",
                          "machine",
                          "pass",
                          "fail",
                          "success",
                          "user",
                          "wait"
                        ]
                      }
                    ]
                  },
                  "onComplete": {
                    "type": "object",
                    "description": "Actions to take when the step completes",
                    "properties": {
                      "actions": {
                        "type": "array",
                        "items": {
                          "anyOf": [
                            {
                              "type": "object",
                              "properties": {
                                "type": {
                                  "type": "string",
                                  "description": "The type of the action",
                                  "enum": [
                                    "email"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "description": "settings for the action",
                                  "additionalProperties": {
                                    "type": "string"
                                  },
                                  "x-examples": [
                                    {
                                      "to": "bob@example.com",
                                      "from": "alice@example.com"
                                    }
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      }
                    }
                  }
                }
              },
              {
                "type": "object",
                "description": "A step which run at certain times",
                "required": [
                  "stop_at",
                  "time"
                ],
                "properties": {
                  "label": {
                    "example": "Wait for cable",
                    "x-examples": [
                      "Wait for cable"
                    ],
                    "allOf": [
                      {
                        "type": "string",
                        "description": "Label for the step",
                        "example": "Find units",
                        "x-examples": [
                          "Find units"
                        ]
                      }
                    ]
                  },
                  "type": {
                    "x-examples": [
                      "wait"
                    ],
                    "example": "wait"
                  },
                  "stop_at": {
                    "type": "integer",
                    "description": "Time in seconds to stop this task",
                    "maximum": 900,
                    "minimum": 1
                  },
                  "time": {
                    "type": "integer",
                    "description": "Time to wait before checking this step",
                    "example": 600,
                    "maximum": 900,
                    "minimum": 1
                  },
                  "listen_for": {
                    "type": "array",
                    "description": "List of events and conditions to listen for to trigger",
                    "items": {
                      "type": "object",
                      "required": [
                        "event"
                      ],
                      "properties": {
                        "event": {
                          "type": "string",
                          "description": "Name of the event to listen for",
                          "allOf": [
                            {
                              "type": "string",
                              "description": "Possible entity events",
                              "enum": [
                                "CON.attached",
                                "CON.created",
                                "CON.deleted",
                                "CON.detached",
                                "CON.removed",
                                "CON.updated",
                                "CUS.attached",
                                "CUS.created",
                                "CUS.deleted",
                                "CUS.detached",
                                "CUS.removed",
                                "CUS.updated",
                                "LOC.attached",
                                "LOC.created",
                                "LOC.deleted",
                                "LOC.detached",
                                "LOC.removed",
                                "LOC.updated",
                                "NOTE.attached",
                                "NOTE.created",
                                "NOTE.deleted",
                                "NOTE.detached",
                                "NOTE.removed",
                                "NOTE.updated",
                                "PART.attached",
                                "PART.created",
                                "PART.deleted",
                                "PART.detached",
                                "PART.removed",
                                "PART.updated",
                                "PGM.attached",
                                "PGM.created",
                                "PGM.deleted",
                                "PGM.detached",
                                "PGM.removed",
                                "PGM.updated",
                                "PRO.attached",
                                "PRO.created",
                                "PRO.deleted",
                                "PRO.detached",
                                "PRO.removed",
                                "PRO.updated",
                                "RES.attached",
                                "RES.created",
                                "RES.deleted",
                                "RES.detached",
                                "RES.removed",
                                "RES.updated",
                                "UNIT.attached",
                                "UNIT.created",
                                "UNIT.deleted",
                                "UNIT.detached",
                                "UNIT.removed",
                                "UNIT.updated",
                                "USER.attached",
                                "USER.created",
                                "USER.deleted",
                                "USER.detached",
                                "USER.removed",
                                "USER.updated",
                                "WKF.attached",
                                "WKF.created",
                                "WKF.deleted",
                                "WKF.detached",
                                "WKF.removed",
                                "WKF.updated",
                                "WOR.attached",
                                "WOR.created",
                                "WOR.deleted",
                                "WOR.detached",
                                "WOR.removed",
                                "WOR.updated"
                              ]
                            }
                          ]
                        },
                        "event_value": {
                          "type": "object",
                          "description": "The event conditions that have to be met",
                          "allOf": [
                            {
                              "description": "A Step choice",
                              "type": "object",
                              "maxProperties": 2,
                              "minProperties": 2,
                              "required": [
                                "variable"
                              ],
                              "properties": {
                                "variable": {
                                  "type": "string",
                                  "description": "Context variable to check",
                                  "example": "$.parts.available",
                                  "x-examples": [
                                    "$.parts.available"
                                  ]
                                },
                                "greater_than_equals": {
                                  "type": "string",
                                  "description": "Value has to be greater than or equals to",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "less_than_equals": {
                                  "type": "string",
                                  "description": "Value has to be less than or equals to",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "greater_than": {
                                  "type": "string",
                                  "description": "Value has to be greater than",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "less_than": {
                                  "type": "string",
                                  "description": "Value has to be less than",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "equals": {
                                  "type": "string",
                                  "description": "Value has to equal",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                },
                                "not_equals": {
                                  "type": "string",
                                  "description": "Value must not equal",
                                  "example": "42",
                                  "x-examples": [
                                    "42"
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      }
                    }
                  }
                },
                "allOf": [
                  {
                    "type": "object",
                    "x-ui-hide": true,
                    "required": [
                      "type",
                      "label",
                      "goto"
                    ],
                    "properties": {
                      "type": {
                        "type": "string",
                        "description": "Type of workflow step",
                        "enum": [
                          "load",
                          "choice",
                          "function",
                          "machine",
                          "pass",
                          "fail",
                          "success",
                          "user",
                          "wait"
                        ]
                      },
                      "label": {
                        "type": "string",
                        "description": "Label for the step",
                        "example": "Find units",
                        "x-examples": [
                          "Find units"
                        ]
                      },
                      "goto": {
                        "type": "string",
                        "description": "Step to move to",
                        "pattern": "^[a-z][a-z-]+[a-z]$",
                        "example": "complete",
                        "x-examples": [
                          "complete"
                        ]
                      },
                      "goto-fail": {
                        "type": "string",
                        "description": "Step to transition too if this step cannot be completed",
                        "pattern": "^[a-z][a-z-]+[a-z]$",
                        "example": "process-fail",
                        "x-examples": [
                          "process-fail"
                        ]
                      },
                      "context": {
                        "type": "array",
                        "description": "Initial values to set on the context",
                        "items": {
                          "type": "object",
                          "required": [
                            "key",
                            "value"
                          ],
                          "properties": {
                            "key": {
                              "type": "string",
                              "description": "The context key to set",
                              "example": "$.fizz",
                              "x-examples": [
                                "$.fizz",
                                "$.unit.status",
                                "extract_fields"
                              ]
                            },
                            "value": {
                              "type": "string",
                              "description": "Value to set",
                              "example": "$.buzz",
                              "x-examples": [
                                "$.buzz",
                                "Pending",
                                true
                              ]
                            },
                            "lock": {
                              "type": "boolean",
                              "description": "Prevents other steps from writing this value",
                              "example": true
                            },
                            "ignore": {
                              "type": "boolean",
                              "description": "When trying to set a locked key, do not fail",
                              "example": false
                            }
                          }
                        }
                      },
                      "onError": {
                        "type": "object",
                        "description": "Action to take when step fails",
                        "required": [
                          "finally"
                        ],
                        "properties": {
                          "retry": {
                            "type": "integer",
                            "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                            "minimum": 0,
                            "maximum": 10,
                            "example": 3,
                            "default": 0
                          },
                          "finally": {
                            "type": "object",
                            "description": "What to do after all retries",
                            "required": [
                              "goto"
                            ],
                            "properties": {
                              "actions": {
                                "type": "array",
                                "description": "Actions to take on failure",
                                "items": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "The type of the action",
                                          "enum": [
                                            "email"
                                          ]
                                        },
                                        "options": {
                                          "type": "object",
                                          "description": "settings for the action",
                                          "additionalProperties": {
                                            "type": "string"
                                          },
                                          "x-examples": [
                                            {
                                              "to": "bob@example.com",
                                              "from": "alice@example.com"
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              },
                              "goto": {
                                "type": "string",
                                "description": "Step to transition to on failure",
                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                "example": "failed",
                                "x-examples": [
                                  "failed"
                                ]
                              }
                            }
                          }
                        }
                      },
                      "onComplete": {
                        "type": "object",
                        "description": "Actions to take when the step completes",
                        "properties": {
                          "actions": {
                            "type": "array",
                            "items": {
                              "anyOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "The type of the action",
                                      "enum": [
                                        "email"
                                      ]
                                    },
                                    "options": {
                                      "type": "object",
                                      "description": "settings for the action",
                                      "additionalProperties": {
                                        "type": "string"
                                      },
                                      "x-examples": [
                                        {
                                          "to": "bob@example.com",
                                          "from": "alice@example.com"
                                        }
                                      ]
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        }
                      }
                    }
                  }
                ]
              }
            ]
          }
        ]
      }
    }
  }
}
```

<h3 id="updateworkflow-parameters">Parameters</h3>

|Name|In|Type|Required|Description|
|---|---|---|---|---|
|workflow_id|path|string|true|Id for the workflow|
|label|body|string|true|Label for the workflow|
|workflow_version|body|integer(int32)|true|Version number for the work flows (the number of times it has been changed|
|applies_to|body|string|true|The entity type this work flow applies too|
|starts_at|body|string|true|Starting step|
|context|body|[object]|false|Initial values to set on the context|
|» key|body|string|true|The context key to set|
|» value|body|string|true|Value to set|
|» lock|body|boolean|false|Prevents other steps from writing this value|
|» ignore|body|boolean|false|When trying to set a locked key, do not fail|
|steps|body|object|true|Steps for the workflow|
|» **additionalProperties**|body|object|false|Close step|
|»» step|body|string|true|Step to mark as complete|

#### Enumerated Values

|Parameter|Value|
|---|---|
|applies_to|unit|
|applies_to|part|
|applies_to|program|
|applies_to|project|
|applies_to|customer|
|applies_to|contact|

> Example responses

> 200 Response

```json
{
  "type": "object",
  "allOf": [
    {
      "type": "object",
      "x-hal": true,
      "x-ui-hide": true,
      "properties": {
        "_links": {
          "type": "object",
          "properties": {
            "self": {
              "type": "object",
              "readOnly": true,
              "properties": {
                "href": {
                  "type": "string",
                  "example": "https://api.nterprise.com/work-flows/9f692b9f-958b-4f74-ba72-5878407bb60d"
                }
              }
            }
          }
        }
      },
      "allOf": [
        {
          "x-id": "#workflow",
          "x-nter-relation": "work-flows",
          "x-nter-model": "WorkFlow",
          "x-nter-callable": true,
          "type": "object",
          "description": "Workflow",
          "required": [
            "steps",
            "starts_at",
            "label",
            "workflow_id",
            "applies_to"
          ],
          "properties": {
            "workflow_id": {
              "type": "string",
              "description": "Customer identifier",
              "example": "e530652e-28e8-4f64-84af-e1cf0ff7c805",
              "x-examples": [
                "e530652e-28e8-4f64-84af-e1cf0ff7c805"
              ],
              "pattern": "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"
            },
            "label": {
              "type": "string",
              "example": "MLTI iPad Assembly Assignment",
              "x-examples": [
                "MLTI iPad Assembly Assignment"
              ],
              "description": "Label for the workflow"
            },
            "slug": {
              "type": "string",
              "description": "Auto-generated slug for the workflow",
              "example": "mlti-ipad-assembly-assignment",
              "x-examples": [
                "mlti-ipad-assembly-assignment"
              ]
            },
            "version": {
              "type": "string",
              "description": "Version of the workflow schema used",
              "enum": [
                "1.0"
              ],
              "example": "1.0"
            },
            "workflow_version": {
              "type": "integer",
              "format": "int32",
              "example": 7,
              "x-examples": [
                7
              ],
              "readOnly": true,
              "description": "Version number for the work flows (the number of times it has been changed"
            },
            "applies_to": {
              "type": "string",
              "description": "The entity type this work flow applies too",
              "enum": [
                "unit",
                "part",
                "program",
                "project",
                "customer",
                "contact"
              ],
              "example": "unit"
            },
            "starts_at": {
              "type": "string",
              "description": "Starting step",
              "example": "entry",
              "x-examples": [
                "entry"
              ]
            },
            "context": {
              "type": "array",
              "description": "Initial values to set on the context",
              "items": {
                "type": "object",
                "required": [
                  "key",
                  "value"
                ],
                "properties": {
                  "key": {
                    "type": "string",
                    "description": "The context key to set",
                    "example": "$.fizz",
                    "x-examples": [
                      "$.fizz",
                      "$.unit.status",
                      "extract_fields"
                    ]
                  },
                  "value": {
                    "type": "string",
                    "description": "Value to set",
                    "example": "$.buzz",
                    "x-examples": [
                      "$.buzz",
                      "Pending",
                      true
                    ]
                  },
                  "lock": {
                    "type": "boolean",
                    "description": "Prevents other steps from writing this value",
                    "example": true
                  },
                  "ignore": {
                    "type": "boolean",
                    "description": "When trying to set a locked key, do not fail",
                    "example": false
                  }
                }
              }
            },
            "steps": {
              "type": "object",
              "description": "Steps for the workflow",
              "x-patternProperties": {
                "(confirm|success|fail|manual|run-ace|follow)": {
                  "type": "object",
                  "allOf": [
                    {
                      "type": "object",
                      "description": "Close step",
                      "required": [
                        "step"
                      ],
                      "properties": {
                        "step": {
                          "type": "string",
                          "description": "Step to mark as complete",
                          "pattern": "^[a-z][a-z-]+[a-z]$",
                          "example": "complete",
                          "x-examples": [
                            "complete"
                          ]
                        }
                      },
                      "anyOf": [
                        {
                          "type": "object",
                          "description": "Require the user confirm an action. This is normally used when Niagara cannot automatically detect that a task or action has been performed.",
                          "x-nter-step-component": "confirm-action",
                          "properties": {
                            "label": {
                              "x-examples": [
                                "Confirm the device has powered off"
                              ]
                            },
                            "options": {
                              "type": "object",
                              "required": [
                                "component",
                                "payload"
                              ],
                              "properties": {
                                "component": {
                                  "enum": [
                                    "confirm-action"
                                  ],
                                  "example": "confirm-action",
                                  "x-examples": [
                                    "confirm-action"
                                  ]
                                },
                                "payload": {
                                  "type": "object",
                                  "required": [
                                    "message"
                                  ],
                                  "properties": {
                                    "message": {
                                      "type": "string",
                                      "description": "The confirmation message to display to the user",
                                      "example": "Device powered off?",
                                      "x-examples": [
                                        "Device powered off?"
                                      ]
                                    },
                                    "negative_message": {
                                      "type": "string",
                                      "description": "An optional inverse message",
                                      "nullable": true,
                                      "example": "Device not functioning",
                                      "x-examples": [
                                        "Device not functioning"
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          },
                          "allOf": [
                            {
                              "type": "object",
                              "x-ui-hide": true,
                              "description": "A step which requires a user to complete",
                              "required": [
                                "type",
                                "options"
                              ],
                              "properties": {
                                "type": {
                                  "example": "user",
                                  "x-examples": [
                                    "user"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "component",
                                    "payload"
                                  ],
                                  "properties": {
                                    "component": {
                                      "type": "string",
                                      "description": "Name of the function to invoke",
                                      "example": "assignUnitsFromCustomerToProject",
                                      "x-examples": [
                                        "assignUnitsFromCustomerToProject"
                                      ]
                                    },
                                    "payload": {
                                      "type": "object"
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "required": [
                                    "type",
                                    "label",
                                    "goto"
                                  ],
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    },
                                    "label": {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to move to",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "complete",
                                      "x-examples": [
                                        "complete"
                                      ]
                                    },
                                    "goto-fail": {
                                      "type": "string",
                                      "description": "Step to transition too if this step cannot be completed",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "process-fail",
                                      "x-examples": [
                                        "process-fail"
                                      ]
                                    },
                                    "context": {
                                      "type": "array",
                                      "description": "Initial values to set on the context",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "key",
                                          "value"
                                        ],
                                        "properties": {
                                          "key": {
                                            "type": "string",
                                            "description": "The context key to set",
                                            "example": "$.fizz",
                                            "x-examples": [
                                              "$.fizz",
                                              "$.unit.status",
                                              "extract_fields"
                                            ]
                                          },
                                          "value": {
                                            "type": "string",
                                            "description": "Value to set",
                                            "example": "$.buzz",
                                            "x-examples": [
                                              "$.buzz",
                                              "Pending",
                                              true
                                            ]
                                          },
                                          "lock": {
                                            "type": "boolean",
                                            "description": "Prevents other steps from writing this value",
                                            "example": true
                                          },
                                          "ignore": {
                                            "type": "boolean",
                                            "description": "When trying to set a locked key, do not fail",
                                            "example": false
                                          }
                                        }
                                      }
                                    },
                                    "onError": {
                                      "type": "object",
                                      "description": "Action to take when step fails",
                                      "required": [
                                        "finally"
                                      ],
                                      "properties": {
                                        "retry": {
                                          "type": "integer",
                                          "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                          "minimum": 0,
                                          "maximum": 10,
                                          "example": 3,
                                          "default": 0
                                        },
                                        "finally": {
                                          "type": "object",
                                          "description": "What to do after all retries",
                                          "required": [
                                            "goto"
                                          ],
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "description": "Actions to take on failure",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to transition to on failure",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "failed",
                                              "x-examples": [
                                                "failed"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "onComplete": {
                                      "type": "object",
                                      "description": "Actions to take when the step completes",
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "object",
                          "description": "Display a link or modal to a user which contains instructions from a PDF",
                          "x-nter-step-component": "follow-pdf-instructions",
                          "required": [
                            "label",
                            "payload"
                          ],
                          "properties": {
                            "label": {
                              "x-examples": [
                                "Instruct user to follow steps outlined in Apple PDF"
                              ]
                            },
                            "options": {
                              "type": "object",
                              "required": [
                                "component",
                                "payload"
                              ],
                              "properties": {
                                "component": {
                                  "enum": [
                                    "follow-pds-instructions"
                                  ],
                                  "example": "follow-pdf-instructions",
                                  "x-examples": [
                                    "follow-pdf-instructions"
                                  ]
                                },
                                "payload": {
                                  "type": "object",
                                  "required": [
                                    "attachment_id"
                                  ],
                                  "properties": {
                                    "attachment_id": {
                                      "type": "string",
                                      "description": "UUID for the attachment",
                                      "format": "uuid",
                                      "example": "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7",
                                      "x-examples": [
                                        "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7"
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          },
                          "allOf": [
                            {
                              "type": "object",
                              "x-ui-hide": true,
                              "description": "A step which requires a user to complete",
                              "required": [
                                "type",
                                "options"
                              ],
                              "properties": {
                                "type": {
                                  "example": "user",
                                  "x-examples": [
                                    "user"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "component",
                                    "payload"
                                  ],
                                  "properties": {
                                    "component": {
                                      "type": "string",
                                      "description": "Name of the function to invoke",
                                      "example": "assignUnitsFromCustomerToProject",
                                      "x-examples": [
                                        "assignUnitsFromCustomerToProject"
                                      ]
                                    },
                                    "payload": {
                                      "type": "object"
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "required": [
                                    "type",
                                    "label",
                                    "goto"
                                  ],
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    },
                                    "label": {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to move to",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "complete",
                                      "x-examples": [
                                        "complete"
                                      ]
                                    },
                                    "goto-fail": {
                                      "type": "string",
                                      "description": "Step to transition too if this step cannot be completed",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "process-fail",
                                      "x-examples": [
                                        "process-fail"
                                      ]
                                    },
                                    "context": {
                                      "type": "array",
                                      "description": "Initial values to set on the context",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "key",
                                          "value"
                                        ],
                                        "properties": {
                                          "key": {
                                            "type": "string",
                                            "description": "The context key to set",
                                            "example": "$.fizz",
                                            "x-examples": [
                                              "$.fizz",
                                              "$.unit.status",
                                              "extract_fields"
                                            ]
                                          },
                                          "value": {
                                            "type": "string",
                                            "description": "Value to set",
                                            "example": "$.buzz",
                                            "x-examples": [
                                              "$.buzz",
                                              "Pending",
                                              true
                                            ]
                                          },
                                          "lock": {
                                            "type": "boolean",
                                            "description": "Prevents other steps from writing this value",
                                            "example": true
                                          },
                                          "ignore": {
                                            "type": "boolean",
                                            "description": "When trying to set a locked key, do not fail",
                                            "example": false
                                          }
                                        }
                                      }
                                    },
                                    "onError": {
                                      "type": "object",
                                      "description": "Action to take when step fails",
                                      "required": [
                                        "finally"
                                      ],
                                      "properties": {
                                        "retry": {
                                          "type": "integer",
                                          "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                          "minimum": 0,
                                          "maximum": 10,
                                          "example": 3,
                                          "default": 0
                                        },
                                        "finally": {
                                          "type": "object",
                                          "description": "What to do after all retries",
                                          "required": [
                                            "goto"
                                          ],
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "description": "Actions to take on failure",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to transition to on failure",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "failed",
                                              "x-examples": [
                                                "failed"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "onComplete": {
                                      "type": "object",
                                      "description": "Actions to take when the step completes",
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "object",
                          "description": "Ask the user to manually enter (or confirm) data for an entity",
                          "x-nter-step-component": "manual-data-entry",
                          "properties": {
                            "label": {
                              "x-examples": [
                                "Enter asset tag and confirm serial number"
                              ]
                            },
                            "options": {
                              "type": "object",
                              "required": [
                                "component",
                                "payload"
                              ],
                              "properties": {
                                "component": {
                                  "enum": [
                                    "manual-data-entry"
                                  ],
                                  "example": "manual-data-entry",
                                  "x-examples": [
                                    "manual-data-entry"
                                  ]
                                },
                                "payload": {
                                  "type": "object",
                                  "required": [
                                    "fields"
                                  ],
                                  "properties": {
                                    "fields": {
                                      "type": "array",
                                      "description": "Configuration for each field",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "input_type",
                                          "label",
                                          "required",
                                          "entity_field"
                                        ],
                                        "properties": {
                                          "input_type": {
                                            "type": "string",
                                            "description": "The type of input field to display",
                                            "enum": [
                                              "textbox",
                                              "input"
                                            ]
                                          },
                                          "label": {
                                            "type": "string",
                                            "description": "Label to display for the field",
                                            "example": "Asset Tag",
                                            "x-examples": [
                                              "Asset Tag"
                                            ]
                                          },
                                          "required": {
                                            "type": "boolean",
                                            "description": "Display the field as required input. Note: this is a helper function. It singles that the user is required to input data at this step. If the field is required on the entity, the user will be presented with a validation message",
                                            "example": true
                                          },
                                          "entity_field": {
                                            "type": "string",
                                            "description": "JSON Path to the field on the entity. If the path does not start with '$' then the entity on the context is assumed. Otherwise the data will be set on the context path",
                                            "example": "input_filter[?(@.key = 'asset-tag')]",
                                            "x-examples": [
                                              "input_filter[?(@.key = 'asset-tag')]"
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          },
                          "allOf": [
                            {
                              "type": "object",
                              "x-ui-hide": true,
                              "description": "A step which requires a user to complete",
                              "required": [
                                "type",
                                "options"
                              ],
                              "properties": {
                                "type": {
                                  "example": "user",
                                  "x-examples": [
                                    "user"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "component",
                                    "payload"
                                  ],
                                  "properties": {
                                    "component": {
                                      "type": "string",
                                      "description": "Name of the function to invoke",
                                      "example": "assignUnitsFromCustomerToProject",
                                      "x-examples": [
                                        "assignUnitsFromCustomerToProject"
                                      ]
                                    },
                                    "payload": {
                                      "type": "object"
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "required": [
                                    "type",
                                    "label",
                                    "goto"
                                  ],
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    },
                                    "label": {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to move to",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "complete",
                                      "x-examples": [
                                        "complete"
                                      ]
                                    },
                                    "goto-fail": {
                                      "type": "string",
                                      "description": "Step to transition too if this step cannot be completed",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "process-fail",
                                      "x-examples": [
                                        "process-fail"
                                      ]
                                    },
                                    "context": {
                                      "type": "array",
                                      "description": "Initial values to set on the context",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "key",
                                          "value"
                                        ],
                                        "properties": {
                                          "key": {
                                            "type": "string",
                                            "description": "The context key to set",
                                            "example": "$.fizz",
                                            "x-examples": [
                                              "$.fizz",
                                              "$.unit.status",
                                              "extract_fields"
                                            ]
                                          },
                                          "value": {
                                            "type": "string",
                                            "description": "Value to set",
                                            "example": "$.buzz",
                                            "x-examples": [
                                              "$.buzz",
                                              "Pending",
                                              true
                                            ]
                                          },
                                          "lock": {
                                            "type": "boolean",
                                            "description": "Prevents other steps from writing this value",
                                            "example": true
                                          },
                                          "ignore": {
                                            "type": "boolean",
                                            "description": "When trying to set a locked key, do not fail",
                                            "example": false
                                          }
                                        }
                                      }
                                    },
                                    "onError": {
                                      "type": "object",
                                      "description": "Action to take when step fails",
                                      "required": [
                                        "finally"
                                      ],
                                      "properties": {
                                        "retry": {
                                          "type": "integer",
                                          "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                          "minimum": 0,
                                          "maximum": 10,
                                          "example": 3,
                                          "default": 0
                                        },
                                        "finally": {
                                          "type": "object",
                                          "description": "What to do after all retries",
                                          "required": [
                                            "goto"
                                          ],
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "description": "Actions to take on failure",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to transition to on failure",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "failed",
                                              "x-examples": [
                                                "failed"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "onComplete": {
                                      "type": "object",
                                      "description": "Actions to take when the step completes",
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "object",
                          "description": "Ask the user to follow a list and check off boxes",
                          "x-nter-step-component": "task-list",
                          "properties": {
                            "label": {
                              "x-examples": [
                                "Enter asset tag and confirm serial number"
                              ]
                            },
                            "options": {
                              "type": "object",
                              "required": [
                                "component",
                                "payload"
                              ],
                              "properties": {
                                "component": {
                                  "enum": [
                                    "task-list"
                                  ],
                                  "example": "task-list",
                                  "x-examples": [
                                    "task-list"
                                  ]
                                },
                                "payload": {
                                  "type": "object",
                                  "required": [
                                    "items"
                                  ],
                                  "properties": {
                                    "is_qc": {
                                      "type": "boolean",
                                      "description": "Flags this list as a QC task list. This means that a different user can close the task to one previously on the context"
                                    },
                                    "items": {
                                      "type": "array",
                                      "description": "Configuration for each task list item",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "label",
                                          "help",
                                          "evaluated",
                                          "na_option"
                                        ],
                                        "properties": {
                                          "label": {
                                            "type": "string",
                                            "description": "Label to display for the field",
                                            "example": "Asset Tag placement",
                                            "x-examples": [
                                              "Asset Tag placement"
                                            ]
                                          },
                                          "slug": {
                                            "type": "string",
                                            "description": "Slug for the item (Auto-generated from the label)",
                                            "readOnly": true,
                                            "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$",
                                            "example": "asset-tag-placement",
                                            "x-examples": [
                                              "asset-tag-placement"
                                            ]
                                          },
                                          "help": {
                                            "type": "string",
                                            "description": "Message describing what is needed to be checked",
                                            "example": "Asset Tag attached to the unit in the correct position",
                                            "x-examples": [
                                              "Asset Tag attached to the unit in the correct position"
                                            ]
                                          },
                                          "evaluated": {
                                            "type": "boolean",
                                            "description": "When set to true, this will fail the step if the value for the item is false or N/A",
                                            "example": true
                                          },
                                          "na_field": {
                                            "type": "boolean",
                                            "description": "Allow the user to select the N/A option when checking off the list",
                                            "example": true
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          },
                          "allOf": [
                            {
                              "type": "object",
                              "x-ui-hide": true,
                              "description": "A step which requires a user to complete",
                              "required": [
                                "type",
                                "options"
                              ],
                              "properties": {
                                "type": {
                                  "example": "user",
                                  "x-examples": [
                                    "user"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "component",
                                    "payload"
                                  ],
                                  "properties": {
                                    "component": {
                                      "type": "string",
                                      "description": "Name of the function to invoke",
                                      "example": "assignUnitsFromCustomerToProject",
                                      "x-examples": [
                                        "assignUnitsFromCustomerToProject"
                                      ]
                                    },
                                    "payload": {
                                      "type": "object"
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "required": [
                                    "type",
                                    "label",
                                    "goto"
                                  ],
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    },
                                    "label": {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to move to",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "complete",
                                      "x-examples": [
                                        "complete"
                                      ]
                                    },
                                    "goto-fail": {
                                      "type": "string",
                                      "description": "Step to transition too if this step cannot be completed",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "process-fail",
                                      "x-examples": [
                                        "process-fail"
                                      ]
                                    },
                                    "context": {
                                      "type": "array",
                                      "description": "Initial values to set on the context",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "key",
                                          "value"
                                        ],
                                        "properties": {
                                          "key": {
                                            "type": "string",
                                            "description": "The context key to set",
                                            "example": "$.fizz",
                                            "x-examples": [
                                              "$.fizz",
                                              "$.unit.status",
                                              "extract_fields"
                                            ]
                                          },
                                          "value": {
                                            "type": "string",
                                            "description": "Value to set",
                                            "example": "$.buzz",
                                            "x-examples": [
                                              "$.buzz",
                                              "Pending",
                                              true
                                            ]
                                          },
                                          "lock": {
                                            "type": "boolean",
                                            "description": "Prevents other steps from writing this value",
                                            "example": true
                                          },
                                          "ignore": {
                                            "type": "boolean",
                                            "description": "When trying to set a locked key, do not fail",
                                            "example": false
                                          }
                                        }
                                      }
                                    },
                                    "onError": {
                                      "type": "object",
                                      "description": "Action to take when step fails",
                                      "required": [
                                        "finally"
                                      ],
                                      "properties": {
                                        "retry": {
                                          "type": "integer",
                                          "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                          "minimum": 0,
                                          "maximum": 10,
                                          "example": 3,
                                          "default": 0
                                        },
                                        "finally": {
                                          "type": "object",
                                          "description": "What to do after all retries",
                                          "required": [
                                            "goto"
                                          ],
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "description": "Actions to take on failure",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to transition to on failure",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "failed",
                                              "x-examples": [
                                                "failed"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "onComplete": {
                                      "type": "object",
                                      "description": "Actions to take when the step completes",
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "object",
                          "description": "Run the ACE-IOS application to provision iOS devices or ",
                          "properties": {
                            "type": {
                              "example": "machine",
                              "x-examples": [
                                "machine"
                              ]
                            },
                            "label": {
                              "x-examples": [
                                "Run Application"
                              ]
                            },
                            "options": {
                              "type": "object",
                              "required": [
                                "application",
                                "configuration"
                              ],
                              "properties": {
                                "configuration": {
                                  "type": "object",
                                  "description": "ACE Configuration options",
                                  "properties": {
                                    "pairing_cert": {
                                      "type": "string",
                                      "format": "base64",
                                      "description": "Contents of a *.crt file exported from Apple Configurator or MDM",
                                      "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                      "x-examples": [
                                        "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                      ],
                                      "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                    },
                                    "pairing_key": {
                                      "type": "string",
                                      "format": "base64",
                                      "description": "Contents of a *.der file exported from Apple Configurator or MDM",
                                      "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                      "x-examples": [
                                        "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                      ],
                                      "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                    },
                                    "restore_device": {
                                      "type": "boolean",
                                      "description": "Restore device to factory defaults"
                                    },
                                    "automated_enrollment": {
                                      "type": "boolean",
                                      "description": "Automatically enroll the device to MDM"
                                    },
                                    "mdm": {
                                      "type": "object",
                                      "format": "base64",
                                      "description": "The settings for the Customers MDM",
                                      "properties": {
                                        "vendor": {
                                          "type": "string",
                                          "description": "MDM vendor. Currently, supported values are AirWatch, JAMF, and Meraki.",
                                          "enum": [
                                            "AirWatch",
                                            "JAMF",
                                            "Meraki"
                                          ]
                                        },
                                        "console_url": {
                                          "type": "string",
                                          "format": "uri",
                                          "description": "Base URL for HTTP requests",
                                          "example": "http://jamf.zones.com",
                                          "x-examples": [
                                            "http://jamf.zones.com"
                                          ]
                                        },
                                        "user": {
                                          "type": "string",
                                          "description": "MDM User name",
                                          "example": "NterpriseBob",
                                          "x-examples": [
                                            "NterpriseBob"
                                          ]
                                        },
                                        "password": {
                                          "type": "string",
                                          "description": "MDM password"
                                        },
                                        "tenant_code": {
                                          "type": "string",
                                          "description": "MDM authentication key",
                                          "example": "nterprise",
                                          "x-examples": [
                                            "nterprise"
                                          ]
                                        },
                                        "set_asset_tag": {
                                          "type": "string",
                                          "description": "Sets the devices Asset tag based on a field from the unit",
                                          "example": "$._entity.input_filter[?(@.key = 'asset-tag')]",
                                          "x-examples": [
                                            "$._entity.input_filter[?(@.key = 'asset-tag')]"
                                          ]
                                        }
                                      }
                                    },
                                    "field_mappings": {
                                      "type": "array",
                                      "description": "List of fields to map to the device",
                                      "items": {
                                        "type": "object",
                                        "properties": {
                                          "from": {
                                            "type": "string",
                                            "description": "The field reported from ACE",
                                            "enum": [
                                              "serial_number",
                                              "name",
                                              "ecid",
                                              "udid",
                                              "configurator_serial",
                                              "ios",
                                              "model",
                                              "storage",
                                              "wifi_mac",
                                              "bt_mac",
                                              "ethernet_mac",
                                              "thundersync_serial",
                                              "iccid",
                                              "iccid2",
                                              "imei",
                                              "imei2",
                                              "missed_profiles",
                                              "missed_apps",
                                              "icon_list_regex",
                                              "icon_layout",
                                              "bat_capacity"
                                            ]
                                          },
                                          "to": {
                                            "type": "string",
                                            "description": "Field to set on the entity",
                                            "example": "$._entity.input_filter[?(@.key = 'serial-number')]",
                                            "x-examples": [
                                              "$._entity.input_filter[?(@.key = 'serial-number')]"
                                            ]
                                          }
                                        }
                                      }
                                    },
                                    "wait_for_apps": {
                                      "type": "array",
                                      "description": "A list of applications needed to be installed on the device. This will cause the extension to poll the device for installed applications. Once all the applications have been installed, this step can be completed",
                                      "items": {
                                        "type": "string",
                                        "format": "uri",
                                        "example": "com.apple.itunes",
                                        "x-examples": [
                                          "com.apple.itunes"
                                        ]
                                      }
                                    },
                                    "wait_for_battery_charge": {
                                      "type": "integer",
                                      "description": "The required battery percentage needed before this step can move on",
                                      "minimum": 0,
                                      "maximum": 100
                                    }
                                  }
                                }
                              }
                            }
                          },
                          "allOf": [
                            {
                              "type": "object",
                              "description": "Run an application extension",
                              "properties": {
                                "label": {
                                  "x-examples": [
                                    "Run Application"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "application",
                                    "configuration"
                                  ],
                                  "properties": {
                                    "application": {
                                      "type": "object",
                                      "required": [
                                        "application_id",
                                        "platforms"
                                      ],
                                      "properties": {
                                        "application_id": {
                                          "type": "string",
                                          "description": "Registered application ID",
                                          "example": "ace-ios",
                                          "x-examples": [
                                            "ace-ios"
                                          ]
                                        },
                                        "platforms": {
                                          "type": "array",
                                          "description": "Allowed platforms the application can run on",
                                          "items": {
                                            "type": "object",
                                            "required": [
                                              "platform",
                                              "arch"
                                            ],
                                            "properties": {
                                              "platform": {
                                                "type": "string",
                                                "description": "The platform (OS) the application can run on",
                                                "enum": [
                                                  "aix",
                                                  "darwin",
                                                  "freebsd",
                                                  "linux",
                                                  "openbsd",
                                                  "sunos",
                                                  "win32"
                                                ]
                                              },
                                              "arch": {
                                                "type": "string",
                                                "description": "The CPU architecture needed to run the application",
                                                "enum": [
                                                  "arm",
                                                  "arm64",
                                                  "ia32",
                                                  "mips",
                                                  "mipsel",
                                                  "ppc",
                                                  "ppc64",
                                                  "s390",
                                                  "s390x",
                                                  "x32",
                                                  "x64"
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "required": [
                                    "type",
                                    "label",
                                    "goto"
                                  ],
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    },
                                    "label": {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to move to",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "complete",
                                      "x-examples": [
                                        "complete"
                                      ]
                                    },
                                    "goto-fail": {
                                      "type": "string",
                                      "description": "Step to transition too if this step cannot be completed",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "process-fail",
                                      "x-examples": [
                                        "process-fail"
                                      ]
                                    },
                                    "context": {
                                      "type": "array",
                                      "description": "Initial values to set on the context",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "key",
                                          "value"
                                        ],
                                        "properties": {
                                          "key": {
                                            "type": "string",
                                            "description": "The context key to set",
                                            "example": "$.fizz",
                                            "x-examples": [
                                              "$.fizz",
                                              "$.unit.status",
                                              "extract_fields"
                                            ]
                                          },
                                          "value": {
                                            "type": "string",
                                            "description": "Value to set",
                                            "example": "$.buzz",
                                            "x-examples": [
                                              "$.buzz",
                                              "Pending",
                                              true
                                            ]
                                          },
                                          "lock": {
                                            "type": "boolean",
                                            "description": "Prevents other steps from writing this value",
                                            "example": true
                                          },
                                          "ignore": {
                                            "type": "boolean",
                                            "description": "When trying to set a locked key, do not fail",
                                            "example": false
                                          }
                                        }
                                      }
                                    },
                                    "onError": {
                                      "type": "object",
                                      "description": "Action to take when step fails",
                                      "required": [
                                        "finally"
                                      ],
                                      "properties": {
                                        "retry": {
                                          "type": "integer",
                                          "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                          "minimum": 0,
                                          "maximum": 10,
                                          "example": 3,
                                          "default": 0
                                        },
                                        "finally": {
                                          "type": "object",
                                          "description": "What to do after all retries",
                                          "required": [
                                            "goto"
                                          ],
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "description": "Actions to take on failure",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to transition to on failure",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "failed",
                                              "x-examples": [
                                                "failed"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "onComplete": {
                                      "type": "object",
                                      "description": "Actions to take when the step completes",
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "object",
                          "properties": {
                            "label": {
                              "example": "Is device ok?",
                              "x-examples": [
                                "Is device ok?"
                              ]
                            },
                            "type": {
                              "example": "choice",
                              "x-examples": [
                                "choice"
                              ]
                            },
                            "choices": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "required": [
                                  "goto"
                                ],
                                "maxProperties": 2,
                                "minProperties": 2,
                                "maximum": 20,
                                "properties": {
                                  "and": {
                                    "type": "array",
                                    "description": "All choices must be satisfied",
                                    "maximum": 5,
                                    "items": {
                                      "description": "A Step choice",
                                      "type": "object",
                                      "maxProperties": 2,
                                      "minProperties": 2,
                                      "required": [
                                        "variable"
                                      ],
                                      "properties": {
                                        "variable": {
                                          "type": "string",
                                          "description": "Context variable to check",
                                          "example": "$.parts.available",
                                          "x-examples": [
                                            "$.parts.available"
                                          ]
                                        },
                                        "greater_than_equals": {
                                          "type": "string",
                                          "description": "Value has to be greater than or equals to",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "less_than_equals": {
                                          "type": "string",
                                          "description": "Value has to be less than or equals to",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "greater_than": {
                                          "type": "string",
                                          "description": "Value has to be greater than",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "less_than": {
                                          "type": "string",
                                          "description": "Value has to be less than",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "equals": {
                                          "type": "string",
                                          "description": "Value has to equal",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "not_equals": {
                                          "type": "string",
                                          "description": "Value must not equal",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        }
                                      }
                                    }
                                  },
                                  "or": {
                                    "type": "array",
                                    "description": "Any of these choices must be satisfied",
                                    "maximum": 5,
                                    "items": {
                                      "description": "A Step choice",
                                      "type": "object",
                                      "maxProperties": 2,
                                      "minProperties": 2,
                                      "required": [
                                        "variable"
                                      ],
                                      "properties": {
                                        "variable": {
                                          "type": "string",
                                          "description": "Context variable to check",
                                          "example": "$.parts.available",
                                          "x-examples": [
                                            "$.parts.available"
                                          ]
                                        },
                                        "greater_than_equals": {
                                          "type": "string",
                                          "description": "Value has to be greater than or equals to",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "less_than_equals": {
                                          "type": "string",
                                          "description": "Value has to be less than or equals to",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "greater_than": {
                                          "type": "string",
                                          "description": "Value has to be greater than",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "less_than": {
                                          "type": "string",
                                          "description": "Value has to be less than",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "equals": {
                                          "type": "string",
                                          "description": "Value has to equal",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "not_equals": {
                                          "type": "string",
                                          "description": "Value must not equal",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        }
                                      }
                                    }
                                  },
                                  "not": {
                                    "type": "array",
                                    "description": "None of these choices must be satisfied",
                                    "maximum": 5,
                                    "items": {
                                      "description": "A Step choice",
                                      "type": "object",
                                      "maxProperties": 2,
                                      "minProperties": 2,
                                      "required": [
                                        "variable"
                                      ],
                                      "properties": {
                                        "variable": {
                                          "type": "string",
                                          "description": "Context variable to check",
                                          "example": "$.parts.available",
                                          "x-examples": [
                                            "$.parts.available"
                                          ]
                                        },
                                        "greater_than_equals": {
                                          "type": "string",
                                          "description": "Value has to be greater than or equals to",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "less_than_equals": {
                                          "type": "string",
                                          "description": "Value has to be less than or equals to",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "greater_than": {
                                          "type": "string",
                                          "description": "Value has to be greater than",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "less_than": {
                                          "type": "string",
                                          "description": "Value has to be less than",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "equals": {
                                          "type": "string",
                                          "description": "Value has to equal",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "not_equals": {
                                          "type": "string",
                                          "description": "Value must not equal",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        }
                                      }
                                    }
                                  },
                                  "goto": {
                                    "description": "Step to goto when condition is met",
                                    "allOf": [
                                      {
                                        "type": "string",
                                        "description": "Step to move to",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "complete",
                                        "x-examples": [
                                          "complete"
                                        ]
                                      }
                                    ]
                                  }
                                }
                              }
                            },
                            "goto": {
                              "description": "Default step to goto when no choice can be made"
                            }
                          },
                          "allOf": [
                            {
                              "type": "object",
                              "x-ui-hide": true,
                              "required": [
                                "type",
                                "label",
                                "goto"
                              ],
                              "properties": {
                                "type": {
                                  "type": "string",
                                  "description": "Type of workflow step",
                                  "enum": [
                                    "load",
                                    "choice",
                                    "function",
                                    "machine",
                                    "pass",
                                    "fail",
                                    "success",
                                    "user",
                                    "wait"
                                  ]
                                },
                                "label": {
                                  "type": "string",
                                  "description": "Label for the step",
                                  "example": "Find units",
                                  "x-examples": [
                                    "Find units"
                                  ]
                                },
                                "goto": {
                                  "type": "string",
                                  "description": "Step to move to",
                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                  "example": "complete",
                                  "x-examples": [
                                    "complete"
                                  ]
                                },
                                "goto-fail": {
                                  "type": "string",
                                  "description": "Step to transition too if this step cannot be completed",
                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                  "example": "process-fail",
                                  "x-examples": [
                                    "process-fail"
                                  ]
                                },
                                "context": {
                                  "type": "array",
                                  "description": "Initial values to set on the context",
                                  "items": {
                                    "type": "object",
                                    "required": [
                                      "key",
                                      "value"
                                    ],
                                    "properties": {
                                      "key": {
                                        "type": "string",
                                        "description": "The context key to set",
                                        "example": "$.fizz",
                                        "x-examples": [
                                          "$.fizz",
                                          "$.unit.status",
                                          "extract_fields"
                                        ]
                                      },
                                      "value": {
                                        "type": "string",
                                        "description": "Value to set",
                                        "example": "$.buzz",
                                        "x-examples": [
                                          "$.buzz",
                                          "Pending",
                                          true
                                        ]
                                      },
                                      "lock": {
                                        "type": "boolean",
                                        "description": "Prevents other steps from writing this value",
                                        "example": true
                                      },
                                      "ignore": {
                                        "type": "boolean",
                                        "description": "When trying to set a locked key, do not fail",
                                        "example": false
                                      }
                                    }
                                  }
                                },
                                "onError": {
                                  "type": "object",
                                  "description": "Action to take when step fails",
                                  "required": [
                                    "finally"
                                  ],
                                  "properties": {
                                    "retry": {
                                      "type": "integer",
                                      "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                      "minimum": 0,
                                      "maximum": 10,
                                      "example": 3,
                                      "default": 0
                                    },
                                    "finally": {
                                      "type": "object",
                                      "description": "What to do after all retries",
                                      "required": [
                                        "goto"
                                      ],
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "description": "Actions to take on failure",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        },
                                        "goto": {
                                          "type": "string",
                                          "description": "Step to transition to on failure",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "failed",
                                          "x-examples": [
                                            "failed"
                                          ]
                                        }
                                      }
                                    }
                                  }
                                },
                                "onComplete": {
                                  "type": "object",
                                  "description": "Actions to take when the step completes",
                                  "properties": {
                                    "actions": {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "The type of the action",
                                                "enum": [
                                                  "email"
                                                ]
                                              },
                                              "options": {
                                                "type": "object",
                                                "description": "settings for the action",
                                                "additionalProperties": {
                                                  "type": "string"
                                                },
                                                "x-examples": [
                                                  {
                                                    "to": "bob@example.com",
                                                    "from": "alice@example.com"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          ]
                        },
                        {
                          "type": "object",
                          "description": "Finial step which is marked as failed",
                          "properties": {
                            "label": {
                              "example": "Failed",
                              "x-examples": [
                                "Failed"
                              ],
                              "allOf": [
                                {
                                  "type": "string",
                                  "description": "Label for the step",
                                  "example": "Find units",
                                  "x-examples": [
                                    "Find units"
                                  ]
                                }
                              ]
                            },
                            "type": {
                              "example": "fail",
                              "x-examples": [
                                "fail"
                              ],
                              "allOf": [
                                {
                                  "type": "string",
                                  "description": "Type of workflow step",
                                  "enum": [
                                    "load",
                                    "choice",
                                    "function",
                                    "machine",
                                    "pass",
                                    "fail",
                                    "success",
                                    "user",
                                    "wait"
                                  ]
                                }
                              ]
                            },
                            "onComplete": {
                              "type": "object",
                              "description": "Actions to take when the step completes",
                              "properties": {
                                "actions": {
                                  "type": "array",
                                  "items": {
                                    "anyOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "The type of the action",
                                            "enum": [
                                              "email"
                                            ]
                                          },
                                          "options": {
                                            "type": "object",
                                            "description": "settings for the action",
                                            "additionalProperties": {
                                              "type": "string"
                                            },
                                            "x-examples": [
                                              {
                                                "to": "bob@example.com",
                                                "from": "alice@example.com"
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        },
                        {
                          "type": "object",
                          "description": "Allows executing actions with out performing any function",
                          "properties": {
                            "label": {
                              "example": "Send email to project manager",
                              "x-examples": [
                                "Send email to project manager"
                              ]
                            },
                            "type": {
                              "example": "pass",
                              "x-examples": [
                                "pass"
                              ],
                              "allOf": [
                                {
                                  "type": "string",
                                  "description": "Type of workflow step",
                                  "enum": [
                                    "load",
                                    "choice",
                                    "function",
                                    "machine",
                                    "pass",
                                    "fail",
                                    "success",
                                    "user",
                                    "wait"
                                  ]
                                }
                              ]
                            }
                          },
                          "allOf": [
                            {
                              "type": "object",
                              "x-ui-hide": true,
                              "required": [
                                "type",
                                "label",
                                "goto"
                              ],
                              "properties": {
                                "type": {
                                  "type": "string",
                                  "description": "Type of workflow step",
                                  "enum": [
                                    "load",
                                    "choice",
                                    "function",
                                    "machine",
                                    "pass",
                                    "fail",
                                    "success",
                                    "user",
                                    "wait"
                                  ]
                                },
                                "label": {
                                  "type": "string",
                                  "description": "Label for the step",
                                  "example": "Find units",
                                  "x-examples": [
                                    "Find units"
                                  ]
                                },
                                "goto": {
                                  "type": "string",
                                  "description": "Step to move to",
                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                  "example": "complete",
                                  "x-examples": [
                                    "complete"
                                  ]
                                },
                                "goto-fail": {
                                  "type": "string",
                                  "description": "Step to transition too if this step cannot be completed",
                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                  "example": "process-fail",
                                  "x-examples": [
                                    "process-fail"
                                  ]
                                },
                                "context": {
                                  "type": "array",
                                  "description": "Initial values to set on the context",
                                  "items": {
                                    "type": "object",
                                    "required": [
                                      "key",
                                      "value"
                                    ],
                                    "properties": {
                                      "key": {
                                        "type": "string",
                                        "description": "The context key to set",
                                        "example": "$.fizz",
                                        "x-examples": [
                                          "$.fizz",
                                          "$.unit.status",
                                          "extract_fields"
                                        ]
                                      },
                                      "value": {
                                        "type": "string",
                                        "description": "Value to set",
                                        "example": "$.buzz",
                                        "x-examples": [
                                          "$.buzz",
                                          "Pending",
                                          true
                                        ]
                                      },
                                      "lock": {
                                        "type": "boolean",
                                        "description": "Prevents other steps from writing this value",
                                        "example": true
                                      },
                                      "ignore": {
                                        "type": "boolean",
                                        "description": "When trying to set a locked key, do not fail",
                                        "example": false
                                      }
                                    }
                                  }
                                },
                                "onError": {
                                  "type": "object",
                                  "description": "Action to take when step fails",
                                  "required": [
                                    "finally"
                                  ],
                                  "properties": {
                                    "retry": {
                                      "type": "integer",
                                      "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                      "minimum": 0,
                                      "maximum": 10,
                                      "example": 3,
                                      "default": 0
                                    },
                                    "finally": {
                                      "type": "object",
                                      "description": "What to do after all retries",
                                      "required": [
                                        "goto"
                                      ],
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "description": "Actions to take on failure",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        },
                                        "goto": {
                                          "type": "string",
                                          "description": "Step to transition to on failure",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "failed",
                                          "x-examples": [
                                            "failed"
                                          ]
                                        }
                                      }
                                    }
                                  }
                                },
                                "onComplete": {
                                  "type": "object",
                                  "description": "Actions to take when the step completes",
                                  "properties": {
                                    "actions": {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "The type of the action",
                                                "enum": [
                                                  "email"
                                                ]
                                              },
                                              "options": {
                                                "type": "object",
                                                "description": "settings for the action",
                                                "additionalProperties": {
                                                  "type": "string"
                                                },
                                                "x-examples": [
                                                  {
                                                    "to": "bob@example.com",
                                                    "from": "alice@example.com"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          ]
                        },
                        {
                          "type": "object",
                          "description": "Finial step which is marked as completed successfully",
                          "properties": {
                            "label": {
                              "example": "Complete",
                              "x-examples": [
                                "Complete"
                              ],
                              "allOf": [
                                {
                                  "type": "string",
                                  "description": "Label for the step",
                                  "example": "Find units",
                                  "x-examples": [
                                    "Find units"
                                  ]
                                }
                              ]
                            },
                            "type": {
                              "example": "success",
                              "x-examples": [
                                "success"
                              ],
                              "allOf": [
                                {
                                  "type": "string",
                                  "description": "Type of workflow step",
                                  "enum": [
                                    "load",
                                    "choice",
                                    "function",
                                    "machine",
                                    "pass",
                                    "fail",
                                    "success",
                                    "user",
                                    "wait"
                                  ]
                                }
                              ]
                            },
                            "onComplete": {
                              "type": "object",
                              "description": "Actions to take when the step completes",
                              "properties": {
                                "actions": {
                                  "type": "array",
                                  "items": {
                                    "anyOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "The type of the action",
                                            "enum": [
                                              "email"
                                            ]
                                          },
                                          "options": {
                                            "type": "object",
                                            "description": "settings for the action",
                                            "additionalProperties": {
                                              "type": "string"
                                            },
                                            "x-examples": [
                                              {
                                                "to": "bob@example.com",
                                                "from": "alice@example.com"
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        },
                        {
                          "type": "object",
                          "description": "A step which run at certain times",
                          "required": [
                            "stop_at",
                            "time"
                          ],
                          "properties": {
                            "label": {
                              "example": "Wait for cable",
                              "x-examples": [
                                "Wait for cable"
                              ],
                              "allOf": [
                                {
                                  "type": "string",
                                  "description": "Label for the step",
                                  "example": "Find units",
                                  "x-examples": [
                                    "Find units"
                                  ]
                                }
                              ]
                            },
                            "type": {
                              "x-examples": [
                                "wait"
                              ],
                              "example": "wait"
                            },
                            "stop_at": {
                              "type": "integer",
                              "description": "Time in seconds to stop this task",
                              "maximum": 900,
                              "minimum": 1
                            },
                            "time": {
                              "type": "integer",
                              "description": "Time to wait before checking this step",
                              "example": 600,
                              "maximum": 900,
                              "minimum": 1
                            },
                            "listen_for": {
                              "type": "array",
                              "description": "List of events and conditions to listen for to trigger",
                              "items": {
                                "type": "object",
                                "required": [
                                  "event"
                                ],
                                "properties": {
                                  "event": {
                                    "type": "string",
                                    "description": "Name of the event to listen for",
                                    "allOf": [
                                      {
                                        "type": "string",
                                        "description": "Possible entity events",
                                        "enum": [
                                          "CON.attached",
                                          "CON.created",
                                          "CON.deleted",
                                          "CON.detached",
                                          "CON.removed",
                                          "CON.updated",
                                          "CUS.attached",
                                          "CUS.created",
                                          "CUS.deleted",
                                          "CUS.detached",
                                          "CUS.removed",
                                          "CUS.updated",
                                          "LOC.attached",
                                          "LOC.created",
                                          "LOC.deleted",
                                          "LOC.detached",
                                          "LOC.removed",
                                          "LOC.updated",
                                          "NOTE.attached",
                                          "NOTE.created",
                                          "NOTE.deleted",
                                          "NOTE.detached",
                                          "NOTE.removed",
                                          "NOTE.updated",
                                          "PART.attached",
                                          "PART.created",
                                          "PART.deleted",
                                          "PART.detached",
                                          "PART.removed",
                                          "PART.updated",
                                          "PGM.attached",
                                          "PGM.created",
                                          "PGM.deleted",
                                          "PGM.detached",
                                          "PGM.removed",
                                          "PGM.updated",
                                          "PRO.attached",
                                          "PRO.created",
                                          "PRO.deleted",
                                          "PRO.detached",
                                          "PRO.removed",
                                          "PRO.updated",
                                          "RES.attached",
                                          "RES.created",
                                          "RES.deleted",
                                          "RES.detached",
                                          "RES.removed",
                                          "RES.updated",
                                          "UNIT.attached",
                                          "UNIT.created",
                                          "UNIT.deleted",
                                          "UNIT.detached",
                                          "UNIT.removed",
                                          "UNIT.updated",
                                          "USER.attached",
                                          "USER.created",
                                          "USER.deleted",
                                          "USER.detached",
                                          "USER.removed",
                                          "USER.updated",
                                          "WKF.attached",
                                          "WKF.created",
                                          "WKF.deleted",
                                          "WKF.detached",
                                          "WKF.removed",
                                          "WKF.updated",
                                          "WOR.attached",
                                          "WOR.created",
                                          "WOR.deleted",
                                          "WOR.detached",
                                          "WOR.removed",
                                          "WOR.updated"
                                        ]
                                      }
                                    ]
                                  },
                                  "event_value": {
                                    "type": "object",
                                    "description": "The event conditions that have to be met",
                                    "allOf": [
                                      {
                                        "description": "A Step choice",
                                        "type": "object",
                                        "maxProperties": 2,
                                        "minProperties": 2,
                                        "required": [
                                          "variable"
                                        ],
                                        "properties": {
                                          "variable": {
                                            "type": "string",
                                            "description": "Context variable to check",
                                            "example": "$.parts.available",
                                            "x-examples": [
                                              "$.parts.available"
                                            ]
                                          },
                                          "greater_than_equals": {
                                            "type": "string",
                                            "description": "Value has to be greater than or equals to",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "less_than_equals": {
                                            "type": "string",
                                            "description": "Value has to be less than or equals to",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "greater_than": {
                                            "type": "string",
                                            "description": "Value has to be greater than",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "less_than": {
                                            "type": "string",
                                            "description": "Value has to be less than",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "equals": {
                                            "type": "string",
                                            "description": "Value has to equal",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "not_equals": {
                                            "type": "string",
                                            "description": "Value must not equal",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          },
                          "allOf": [
                            {
                              "type": "object",
                              "x-ui-hide": true,
                              "required": [
                                "type",
                                "label",
                                "goto"
                              ],
                              "properties": {
                                "type": {
                                  "type": "string",
                                  "description": "Type of workflow step",
                                  "enum": [
                                    "load",
                                    "choice",
                                    "function",
                                    "machine",
                                    "pass",
                                    "fail",
                                    "success",
                                    "user",
                                    "wait"
                                  ]
                                },
                                "label": {
                                  "type": "string",
                                  "description": "Label for the step",
                                  "example": "Find units",
                                  "x-examples": [
                                    "Find units"
                                  ]
                                },
                                "goto": {
                                  "type": "string",
                                  "description": "Step to move to",
                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                  "example": "complete",
                                  "x-examples": [
                                    "complete"
                                  ]
                                },
                                "goto-fail": {
                                  "type": "string",
                                  "description": "Step to transition too if this step cannot be completed",
                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                  "example": "process-fail",
                                  "x-examples": [
                                    "process-fail"
                                  ]
                                },
                                "context": {
                                  "type": "array",
                                  "description": "Initial values to set on the context",
                                  "items": {
                                    "type": "object",
                                    "required": [
                                      "key",
                                      "value"
                                    ],
                                    "properties": {
                                      "key": {
                                        "type": "string",
                                        "description": "The context key to set",
                                        "example": "$.fizz",
                                        "x-examples": [
                                          "$.fizz",
                                          "$.unit.status",
                                          "extract_fields"
                                        ]
                                      },
                                      "value": {
                                        "type": "string",
                                        "description": "Value to set",
                                        "example": "$.buzz",
                                        "x-examples": [
                                          "$.buzz",
                                          "Pending",
                                          true
                                        ]
                                      },
                                      "lock": {
                                        "type": "boolean",
                                        "description": "Prevents other steps from writing this value",
                                        "example": true
                                      },
                                      "ignore": {
                                        "type": "boolean",
                                        "description": "When trying to set a locked key, do not fail",
                                        "example": false
                                      }
                                    }
                                  }
                                },
                                "onError": {
                                  "type": "object",
                                  "description": "Action to take when step fails",
                                  "required": [
                                    "finally"
                                  ],
                                  "properties": {
                                    "retry": {
                                      "type": "integer",
                                      "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                      "minimum": 0,
                                      "maximum": 10,
                                      "example": 3,
                                      "default": 0
                                    },
                                    "finally": {
                                      "type": "object",
                                      "description": "What to do after all retries",
                                      "required": [
                                        "goto"
                                      ],
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "description": "Actions to take on failure",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        },
                                        "goto": {
                                          "type": "string",
                                          "description": "Step to transition to on failure",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "failed",
                                          "x-examples": [
                                            "failed"
                                          ]
                                        }
                                      }
                                    }
                                  }
                                },
                                "onComplete": {
                                  "type": "object",
                                  "description": "Actions to take when the step completes",
                                  "properties": {
                                    "actions": {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "The type of the action",
                                                "enum": [
                                                  "email"
                                                ]
                                              },
                                              "options": {
                                                "type": "object",
                                                "description": "settings for the action",
                                                "additionalProperties": {
                                                  "type": "string"
                                                },
                                                "x-examples": [
                                                  {
                                                    "to": "bob@example.com",
                                                    "from": "alice@example.com"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              },
              "additionalProperties": {
                "type": "object",
                "anyOf": [
                  {
                    "type": "object",
                    "description": "Close step",
                    "required": [
                      "step"
                    ],
                    "properties": {
                      "step": {
                        "type": "string",
                        "description": "Step to mark as complete",
                        "pattern": "^[a-z][a-z-]+[a-z]$",
                        "example": "complete",
                        "x-examples": [
                          "complete"
                        ]
                      }
                    },
                    "anyOf": [
                      {
                        "type": "object",
                        "description": "Require the user confirm an action. This is normally used when Niagara cannot automatically detect that a task or action has been performed.",
                        "x-nter-step-component": "confirm-action",
                        "properties": {
                          "label": {
                            "x-examples": [
                              "Confirm the device has powered off"
                            ]
                          },
                          "options": {
                            "type": "object",
                            "required": [
                              "component",
                              "payload"
                            ],
                            "properties": {
                              "component": {
                                "enum": [
                                  "confirm-action"
                                ],
                                "example": "confirm-action",
                                "x-examples": [
                                  "confirm-action"
                                ]
                              },
                              "payload": {
                                "type": "object",
                                "required": [
                                  "message"
                                ],
                                "properties": {
                                  "message": {
                                    "type": "string",
                                    "description": "The confirmation message to display to the user",
                                    "example": "Device powered off?",
                                    "x-examples": [
                                      "Device powered off?"
                                    ]
                                  },
                                  "negative_message": {
                                    "type": "string",
                                    "description": "An optional inverse message",
                                    "nullable": true,
                                    "example": "Device not functioning",
                                    "x-examples": [
                                      "Device not functioning"
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        },
                        "allOf": [
                          {
                            "type": "object",
                            "x-ui-hide": true,
                            "description": "A step which requires a user to complete",
                            "required": [
                              "type",
                              "options"
                            ],
                            "properties": {
                              "type": {
                                "example": "user",
                                "x-examples": [
                                  "user"
                                ]
                              },
                              "options": {
                                "type": "object",
                                "required": [
                                  "component",
                                  "payload"
                                ],
                                "properties": {
                                  "component": {
                                    "type": "string",
                                    "description": "Name of the function to invoke",
                                    "example": "assignUnitsFromCustomerToProject",
                                    "x-examples": [
                                      "assignUnitsFromCustomerToProject"
                                    ]
                                  },
                                  "payload": {
                                    "type": "object"
                                  }
                                }
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "required": [
                                  "type",
                                  "label",
                                  "goto"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "description": "Type of workflow step",
                                    "enum": [
                                      "load",
                                      "choice",
                                      "function",
                                      "machine",
                                      "pass",
                                      "fail",
                                      "success",
                                      "user",
                                      "wait"
                                    ]
                                  },
                                  "label": {
                                    "type": "string",
                                    "description": "Label for the step",
                                    "example": "Find units",
                                    "x-examples": [
                                      "Find units"
                                    ]
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to move to",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "complete",
                                    "x-examples": [
                                      "complete"
                                    ]
                                  },
                                  "goto-fail": {
                                    "type": "string",
                                    "description": "Step to transition too if this step cannot be completed",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "process-fail",
                                    "x-examples": [
                                      "process-fail"
                                    ]
                                  },
                                  "context": {
                                    "type": "array",
                                    "description": "Initial values to set on the context",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "key",
                                        "value"
                                      ],
                                      "properties": {
                                        "key": {
                                          "type": "string",
                                          "description": "The context key to set",
                                          "example": "$.fizz",
                                          "x-examples": [
                                            "$.fizz",
                                            "$.unit.status",
                                            "extract_fields"
                                          ]
                                        },
                                        "value": {
                                          "type": "string",
                                          "description": "Value to set",
                                          "example": "$.buzz",
                                          "x-examples": [
                                            "$.buzz",
                                            "Pending",
                                            true
                                          ]
                                        },
                                        "lock": {
                                          "type": "boolean",
                                          "description": "Prevents other steps from writing this value",
                                          "example": true
                                        },
                                        "ignore": {
                                          "type": "boolean",
                                          "description": "When trying to set a locked key, do not fail",
                                          "example": false
                                        }
                                      }
                                    }
                                  },
                                  "onError": {
                                    "type": "object",
                                    "description": "Action to take when step fails",
                                    "required": [
                                      "finally"
                                    ],
                                    "properties": {
                                      "retry": {
                                        "type": "integer",
                                        "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                        "minimum": 0,
                                        "maximum": 10,
                                        "example": 3,
                                        "default": 0
                                      },
                                      "finally": {
                                        "type": "object",
                                        "description": "What to do after all retries",
                                        "required": [
                                          "goto"
                                        ],
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "description": "Actions to take on failure",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to transition to on failure",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "failed",
                                            "x-examples": [
                                              "failed"
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "onComplete": {
                                    "type": "object",
                                    "description": "Actions to take when the step completes",
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "object",
                        "description": "Display a link or modal to a user which contains instructions from a PDF",
                        "x-nter-step-component": "follow-pdf-instructions",
                        "required": [
                          "label",
                          "payload"
                        ],
                        "properties": {
                          "label": {
                            "x-examples": [
                              "Instruct user to follow steps outlined in Apple PDF"
                            ]
                          },
                          "options": {
                            "type": "object",
                            "required": [
                              "component",
                              "payload"
                            ],
                            "properties": {
                              "component": {
                                "enum": [
                                  "follow-pds-instructions"
                                ],
                                "example": "follow-pdf-instructions",
                                "x-examples": [
                                  "follow-pdf-instructions"
                                ]
                              },
                              "payload": {
                                "type": "object",
                                "required": [
                                  "attachment_id"
                                ],
                                "properties": {
                                  "attachment_id": {
                                    "type": "string",
                                    "description": "UUID for the attachment",
                                    "format": "uuid",
                                    "example": "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7",
                                    "x-examples": [
                                      "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7"
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        },
                        "allOf": [
                          {
                            "type": "object",
                            "x-ui-hide": true,
                            "description": "A step which requires a user to complete",
                            "required": [
                              "type",
                              "options"
                            ],
                            "properties": {
                              "type": {
                                "example": "user",
                                "x-examples": [
                                  "user"
                                ]
                              },
                              "options": {
                                "type": "object",
                                "required": [
                                  "component",
                                  "payload"
                                ],
                                "properties": {
                                  "component": {
                                    "type": "string",
                                    "description": "Name of the function to invoke",
                                    "example": "assignUnitsFromCustomerToProject",
                                    "x-examples": [
                                      "assignUnitsFromCustomerToProject"
                                    ]
                                  },
                                  "payload": {
                                    "type": "object"
                                  }
                                }
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "required": [
                                  "type",
                                  "label",
                                  "goto"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "description": "Type of workflow step",
                                    "enum": [
                                      "load",
                                      "choice",
                                      "function",
                                      "machine",
                                      "pass",
                                      "fail",
                                      "success",
                                      "user",
                                      "wait"
                                    ]
                                  },
                                  "label": {
                                    "type": "string",
                                    "description": "Label for the step",
                                    "example": "Find units",
                                    "x-examples": [
                                      "Find units"
                                    ]
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to move to",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "complete",
                                    "x-examples": [
                                      "complete"
                                    ]
                                  },
                                  "goto-fail": {
                                    "type": "string",
                                    "description": "Step to transition too if this step cannot be completed",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "process-fail",
                                    "x-examples": [
                                      "process-fail"
                                    ]
                                  },
                                  "context": {
                                    "type": "array",
                                    "description": "Initial values to set on the context",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "key",
                                        "value"
                                      ],
                                      "properties": {
                                        "key": {
                                          "type": "string",
                                          "description": "The context key to set",
                                          "example": "$.fizz",
                                          "x-examples": [
                                            "$.fizz",
                                            "$.unit.status",
                                            "extract_fields"
                                          ]
                                        },
                                        "value": {
                                          "type": "string",
                                          "description": "Value to set",
                                          "example": "$.buzz",
                                          "x-examples": [
                                            "$.buzz",
                                            "Pending",
                                            true
                                          ]
                                        },
                                        "lock": {
                                          "type": "boolean",
                                          "description": "Prevents other steps from writing this value",
                                          "example": true
                                        },
                                        "ignore": {
                                          "type": "boolean",
                                          "description": "When trying to set a locked key, do not fail",
                                          "example": false
                                        }
                                      }
                                    }
                                  },
                                  "onError": {
                                    "type": "object",
                                    "description": "Action to take when step fails",
                                    "required": [
                                      "finally"
                                    ],
                                    "properties": {
                                      "retry": {
                                        "type": "integer",
                                        "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                        "minimum": 0,
                                        "maximum": 10,
                                        "example": 3,
                                        "default": 0
                                      },
                                      "finally": {
                                        "type": "object",
                                        "description": "What to do after all retries",
                                        "required": [
                                          "goto"
                                        ],
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "description": "Actions to take on failure",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to transition to on failure",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "failed",
                                            "x-examples": [
                                              "failed"
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "onComplete": {
                                    "type": "object",
                                    "description": "Actions to take when the step completes",
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "object",
                        "description": "Ask the user to manually enter (or confirm) data for an entity",
                        "x-nter-step-component": "manual-data-entry",
                        "properties": {
                          "label": {
                            "x-examples": [
                              "Enter asset tag and confirm serial number"
                            ]
                          },
                          "options": {
                            "type": "object",
                            "required": [
                              "component",
                              "payload"
                            ],
                            "properties": {
                              "component": {
                                "enum": [
                                  "manual-data-entry"
                                ],
                                "example": "manual-data-entry",
                                "x-examples": [
                                  "manual-data-entry"
                                ]
                              },
                              "payload": {
                                "type": "object",
                                "required": [
                                  "fields"
                                ],
                                "properties": {
                                  "fields": {
                                    "type": "array",
                                    "description": "Configuration for each field",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "input_type",
                                        "label",
                                        "required",
                                        "entity_field"
                                      ],
                                      "properties": {
                                        "input_type": {
                                          "type": "string",
                                          "description": "The type of input field to display",
                                          "enum": [
                                            "textbox",
                                            "input"
                                          ]
                                        },
                                        "label": {
                                          "type": "string",
                                          "description": "Label to display for the field",
                                          "example": "Asset Tag",
                                          "x-examples": [
                                            "Asset Tag"
                                          ]
                                        },
                                        "required": {
                                          "type": "boolean",
                                          "description": "Display the field as required input. Note: this is a helper function. It singles that the user is required to input data at this step. If the field is required on the entity, the user will be presented with a validation message",
                                          "example": true
                                        },
                                        "entity_field": {
                                          "type": "string",
                                          "description": "JSON Path to the field on the entity. If the path does not start with '$' then the entity on the context is assumed. Otherwise the data will be set on the context path",
                                          "example": "input_filter[?(@.key = 'asset-tag')]",
                                          "x-examples": [
                                            "input_filter[?(@.key = 'asset-tag')]"
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        },
                        "allOf": [
                          {
                            "type": "object",
                            "x-ui-hide": true,
                            "description": "A step which requires a user to complete",
                            "required": [
                              "type",
                              "options"
                            ],
                            "properties": {
                              "type": {
                                "example": "user",
                                "x-examples": [
                                  "user"
                                ]
                              },
                              "options": {
                                "type": "object",
                                "required": [
                                  "component",
                                  "payload"
                                ],
                                "properties": {
                                  "component": {
                                    "type": "string",
                                    "description": "Name of the function to invoke",
                                    "example": "assignUnitsFromCustomerToProject",
                                    "x-examples": [
                                      "assignUnitsFromCustomerToProject"
                                    ]
                                  },
                                  "payload": {
                                    "type": "object"
                                  }
                                }
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "required": [
                                  "type",
                                  "label",
                                  "goto"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "description": "Type of workflow step",
                                    "enum": [
                                      "load",
                                      "choice",
                                      "function",
                                      "machine",
                                      "pass",
                                      "fail",
                                      "success",
                                      "user",
                                      "wait"
                                    ]
                                  },
                                  "label": {
                                    "type": "string",
                                    "description": "Label for the step",
                                    "example": "Find units",
                                    "x-examples": [
                                      "Find units"
                                    ]
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to move to",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "complete",
                                    "x-examples": [
                                      "complete"
                                    ]
                                  },
                                  "goto-fail": {
                                    "type": "string",
                                    "description": "Step to transition too if this step cannot be completed",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "process-fail",
                                    "x-examples": [
                                      "process-fail"
                                    ]
                                  },
                                  "context": {
                                    "type": "array",
                                    "description": "Initial values to set on the context",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "key",
                                        "value"
                                      ],
                                      "properties": {
                                        "key": {
                                          "type": "string",
                                          "description": "The context key to set",
                                          "example": "$.fizz",
                                          "x-examples": [
                                            "$.fizz",
                                            "$.unit.status",
                                            "extract_fields"
                                          ]
                                        },
                                        "value": {
                                          "type": "string",
                                          "description": "Value to set",
                                          "example": "$.buzz",
                                          "x-examples": [
                                            "$.buzz",
                                            "Pending",
                                            true
                                          ]
                                        },
                                        "lock": {
                                          "type": "boolean",
                                          "description": "Prevents other steps from writing this value",
                                          "example": true
                                        },
                                        "ignore": {
                                          "type": "boolean",
                                          "description": "When trying to set a locked key, do not fail",
                                          "example": false
                                        }
                                      }
                                    }
                                  },
                                  "onError": {
                                    "type": "object",
                                    "description": "Action to take when step fails",
                                    "required": [
                                      "finally"
                                    ],
                                    "properties": {
                                      "retry": {
                                        "type": "integer",
                                        "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                        "minimum": 0,
                                        "maximum": 10,
                                        "example": 3,
                                        "default": 0
                                      },
                                      "finally": {
                                        "type": "object",
                                        "description": "What to do after all retries",
                                        "required": [
                                          "goto"
                                        ],
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "description": "Actions to take on failure",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to transition to on failure",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "failed",
                                            "x-examples": [
                                              "failed"
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "onComplete": {
                                    "type": "object",
                                    "description": "Actions to take when the step completes",
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "object",
                        "description": "Ask the user to follow a list and check off boxes",
                        "x-nter-step-component": "task-list",
                        "properties": {
                          "label": {
                            "x-examples": [
                              "Enter asset tag and confirm serial number"
                            ]
                          },
                          "options": {
                            "type": "object",
                            "required": [
                              "component",
                              "payload"
                            ],
                            "properties": {
                              "component": {
                                "enum": [
                                  "task-list"
                                ],
                                "example": "task-list",
                                "x-examples": [
                                  "task-list"
                                ]
                              },
                              "payload": {
                                "type": "object",
                                "required": [
                                  "items"
                                ],
                                "properties": {
                                  "is_qc": {
                                    "type": "boolean",
                                    "description": "Flags this list as a QC task list. This means that a different user can close the task to one previously on the context"
                                  },
                                  "items": {
                                    "type": "array",
                                    "description": "Configuration for each task list item",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "label",
                                        "help",
                                        "evaluated",
                                        "na_option"
                                      ],
                                      "properties": {
                                        "label": {
                                          "type": "string",
                                          "description": "Label to display for the field",
                                          "example": "Asset Tag placement",
                                          "x-examples": [
                                            "Asset Tag placement"
                                          ]
                                        },
                                        "slug": {
                                          "type": "string",
                                          "description": "Slug for the item (Auto-generated from the label)",
                                          "readOnly": true,
                                          "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$",
                                          "example": "asset-tag-placement",
                                          "x-examples": [
                                            "asset-tag-placement"
                                          ]
                                        },
                                        "help": {
                                          "type": "string",
                                          "description": "Message describing what is needed to be checked",
                                          "example": "Asset Tag attached to the unit in the correct position",
                                          "x-examples": [
                                            "Asset Tag attached to the unit in the correct position"
                                          ]
                                        },
                                        "evaluated": {
                                          "type": "boolean",
                                          "description": "When set to true, this will fail the step if the value for the item is false or N/A",
                                          "example": true
                                        },
                                        "na_field": {
                                          "type": "boolean",
                                          "description": "Allow the user to select the N/A option when checking off the list",
                                          "example": true
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        },
                        "allOf": [
                          {
                            "type": "object",
                            "x-ui-hide": true,
                            "description": "A step which requires a user to complete",
                            "required": [
                              "type",
                              "options"
                            ],
                            "properties": {
                              "type": {
                                "example": "user",
                                "x-examples": [
                                  "user"
                                ]
                              },
                              "options": {
                                "type": "object",
                                "required": [
                                  "component",
                                  "payload"
                                ],
                                "properties": {
                                  "component": {
                                    "type": "string",
                                    "description": "Name of the function to invoke",
                                    "example": "assignUnitsFromCustomerToProject",
                                    "x-examples": [
                                      "assignUnitsFromCustomerToProject"
                                    ]
                                  },
                                  "payload": {
                                    "type": "object"
                                  }
                                }
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "required": [
                                  "type",
                                  "label",
                                  "goto"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "description": "Type of workflow step",
                                    "enum": [
                                      "load",
                                      "choice",
                                      "function",
                                      "machine",
                                      "pass",
                                      "fail",
                                      "success",
                                      "user",
                                      "wait"
                                    ]
                                  },
                                  "label": {
                                    "type": "string",
                                    "description": "Label for the step",
                                    "example": "Find units",
                                    "x-examples": [
                                      "Find units"
                                    ]
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to move to",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "complete",
                                    "x-examples": [
                                      "complete"
                                    ]
                                  },
                                  "goto-fail": {
                                    "type": "string",
                                    "description": "Step to transition too if this step cannot be completed",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "process-fail",
                                    "x-examples": [
                                      "process-fail"
                                    ]
                                  },
                                  "context": {
                                    "type": "array",
                                    "description": "Initial values to set on the context",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "key",
                                        "value"
                                      ],
                                      "properties": {
                                        "key": {
                                          "type": "string",
                                          "description": "The context key to set",
                                          "example": "$.fizz",
                                          "x-examples": [
                                            "$.fizz",
                                            "$.unit.status",
                                            "extract_fields"
                                          ]
                                        },
                                        "value": {
                                          "type": "string",
                                          "description": "Value to set",
                                          "example": "$.buzz",
                                          "x-examples": [
                                            "$.buzz",
                                            "Pending",
                                            true
                                          ]
                                        },
                                        "lock": {
                                          "type": "boolean",
                                          "description": "Prevents other steps from writing this value",
                                          "example": true
                                        },
                                        "ignore": {
                                          "type": "boolean",
                                          "description": "When trying to set a locked key, do not fail",
                                          "example": false
                                        }
                                      }
                                    }
                                  },
                                  "onError": {
                                    "type": "object",
                                    "description": "Action to take when step fails",
                                    "required": [
                                      "finally"
                                    ],
                                    "properties": {
                                      "retry": {
                                        "type": "integer",
                                        "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                        "minimum": 0,
                                        "maximum": 10,
                                        "example": 3,
                                        "default": 0
                                      },
                                      "finally": {
                                        "type": "object",
                                        "description": "What to do after all retries",
                                        "required": [
                                          "goto"
                                        ],
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "description": "Actions to take on failure",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to transition to on failure",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "failed",
                                            "x-examples": [
                                              "failed"
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "onComplete": {
                                    "type": "object",
                                    "description": "Actions to take when the step completes",
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "object",
                        "description": "Run the ACE-IOS application to provision iOS devices or ",
                        "properties": {
                          "type": {
                            "example": "machine",
                            "x-examples": [
                              "machine"
                            ]
                          },
                          "label": {
                            "x-examples": [
                              "Run Application"
                            ]
                          },
                          "options": {
                            "type": "object",
                            "required": [
                              "application",
                              "configuration"
                            ],
                            "properties": {
                              "configuration": {
                                "type": "object",
                                "description": "ACE Configuration options",
                                "properties": {
                                  "pairing_cert": {
                                    "type": "string",
                                    "format": "base64",
                                    "description": "Contents of a *.crt file exported from Apple Configurator or MDM",
                                    "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                    "x-examples": [
                                      "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                    ],
                                    "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                  },
                                  "pairing_key": {
                                    "type": "string",
                                    "format": "base64",
                                    "description": "Contents of a *.der file exported from Apple Configurator or MDM",
                                    "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                    "x-examples": [
                                      "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                    ],
                                    "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                  },
                                  "restore_device": {
                                    "type": "boolean",
                                    "description": "Restore device to factory defaults"
                                  },
                                  "automated_enrollment": {
                                    "type": "boolean",
                                    "description": "Automatically enroll the device to MDM"
                                  },
                                  "mdm": {
                                    "type": "object",
                                    "format": "base64",
                                    "description": "The settings for the Customers MDM",
                                    "properties": {
                                      "vendor": {
                                        "type": "string",
                                        "description": "MDM vendor. Currently, supported values are AirWatch, JAMF, and Meraki.",
                                        "enum": [
                                          "AirWatch",
                                          "JAMF",
                                          "Meraki"
                                        ]
                                      },
                                      "console_url": {
                                        "type": "string",
                                        "format": "uri",
                                        "description": "Base URL for HTTP requests",
                                        "example": "http://jamf.zones.com",
                                        "x-examples": [
                                          "http://jamf.zones.com"
                                        ]
                                      },
                                      "user": {
                                        "type": "string",
                                        "description": "MDM User name",
                                        "example": "NterpriseBob",
                                        "x-examples": [
                                          "NterpriseBob"
                                        ]
                                      },
                                      "password": {
                                        "type": "string",
                                        "description": "MDM password"
                                      },
                                      "tenant_code": {
                                        "type": "string",
                                        "description": "MDM authentication key",
                                        "example": "nterprise",
                                        "x-examples": [
                                          "nterprise"
                                        ]
                                      },
                                      "set_asset_tag": {
                                        "type": "string",
                                        "description": "Sets the devices Asset tag based on a field from the unit",
                                        "example": "$._entity.input_filter[?(@.key = 'asset-tag')]",
                                        "x-examples": [
                                          "$._entity.input_filter[?(@.key = 'asset-tag')]"
                                        ]
                                      }
                                    }
                                  },
                                  "field_mappings": {
                                    "type": "array",
                                    "description": "List of fields to map to the device",
                                    "items": {
                                      "type": "object",
                                      "properties": {
                                        "from": {
                                          "type": "string",
                                          "description": "The field reported from ACE",
                                          "enum": [
                                            "serial_number",
                                            "name",
                                            "ecid",
                                            "udid",
                                            "configurator_serial",
                                            "ios",
                                            "model",
                                            "storage",
                                            "wifi_mac",
                                            "bt_mac",
                                            "ethernet_mac",
                                            "thundersync_serial",
                                            "iccid",
                                            "iccid2",
                                            "imei",
                                            "imei2",
                                            "missed_profiles",
                                            "missed_apps",
                                            "icon_list_regex",
                                            "icon_layout",
                                            "bat_capacity"
                                          ]
                                        },
                                        "to": {
                                          "type": "string",
                                          "description": "Field to set on the entity",
                                          "example": "$._entity.input_filter[?(@.key = 'serial-number')]",
                                          "x-examples": [
                                            "$._entity.input_filter[?(@.key = 'serial-number')]"
                                          ]
                                        }
                                      }
                                    }
                                  },
                                  "wait_for_apps": {
                                    "type": "array",
                                    "description": "A list of applications needed to be installed on the device. This will cause the extension to poll the device for installed applications. Once all the applications have been installed, this step can be completed",
                                    "items": {
                                      "type": "string",
                                      "format": "uri",
                                      "example": "com.apple.itunes",
                                      "x-examples": [
                                        "com.apple.itunes"
                                      ]
                                    }
                                  },
                                  "wait_for_battery_charge": {
                                    "type": "integer",
                                    "description": "The required battery percentage needed before this step can move on",
                                    "minimum": 0,
                                    "maximum": 100
                                  }
                                }
                              }
                            }
                          }
                        },
                        "allOf": [
                          {
                            "type": "object",
                            "description": "Run an application extension",
                            "properties": {
                              "label": {
                                "x-examples": [
                                  "Run Application"
                                ]
                              },
                              "options": {
                                "type": "object",
                                "required": [
                                  "application",
                                  "configuration"
                                ],
                                "properties": {
                                  "application": {
                                    "type": "object",
                                    "required": [
                                      "application_id",
                                      "platforms"
                                    ],
                                    "properties": {
                                      "application_id": {
                                        "type": "string",
                                        "description": "Registered application ID",
                                        "example": "ace-ios",
                                        "x-examples": [
                                          "ace-ios"
                                        ]
                                      },
                                      "platforms": {
                                        "type": "array",
                                        "description": "Allowed platforms the application can run on",
                                        "items": {
                                          "type": "object",
                                          "required": [
                                            "platform",
                                            "arch"
                                          ],
                                          "properties": {
                                            "platform": {
                                              "type": "string",
                                              "description": "The platform (OS) the application can run on",
                                              "enum": [
                                                "aix",
                                                "darwin",
                                                "freebsd",
                                                "linux",
                                                "openbsd",
                                                "sunos",
                                                "win32"
                                              ]
                                            },
                                            "arch": {
                                              "type": "string",
                                              "description": "The CPU architecture needed to run the application",
                                              "enum": [
                                                "arm",
                                                "arm64",
                                                "ia32",
                                                "mips",
                                                "mipsel",
                                                "ppc",
                                                "ppc64",
                                                "s390",
                                                "s390x",
                                                "x32",
                                                "x64"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "required": [
                                  "type",
                                  "label",
                                  "goto"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "description": "Type of workflow step",
                                    "enum": [
                                      "load",
                                      "choice",
                                      "function",
                                      "machine",
                                      "pass",
                                      "fail",
                                      "success",
                                      "user",
                                      "wait"
                                    ]
                                  },
                                  "label": {
                                    "type": "string",
                                    "description": "Label for the step",
                                    "example": "Find units",
                                    "x-examples": [
                                      "Find units"
                                    ]
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to move to",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "complete",
                                    "x-examples": [
                                      "complete"
                                    ]
                                  },
                                  "goto-fail": {
                                    "type": "string",
                                    "description": "Step to transition too if this step cannot be completed",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "process-fail",
                                    "x-examples": [
                                      "process-fail"
                                    ]
                                  },
                                  "context": {
                                    "type": "array",
                                    "description": "Initial values to set on the context",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "key",
                                        "value"
                                      ],
                                      "properties": {
                                        "key": {
                                          "type": "string",
                                          "description": "The context key to set",
                                          "example": "$.fizz",
                                          "x-examples": [
                                            "$.fizz",
                                            "$.unit.status",
                                            "extract_fields"
                                          ]
                                        },
                                        "value": {
                                          "type": "string",
                                          "description": "Value to set",
                                          "example": "$.buzz",
                                          "x-examples": [
                                            "$.buzz",
                                            "Pending",
                                            true
                                          ]
                                        },
                                        "lock": {
                                          "type": "boolean",
                                          "description": "Prevents other steps from writing this value",
                                          "example": true
                                        },
                                        "ignore": {
                                          "type": "boolean",
                                          "description": "When trying to set a locked key, do not fail",
                                          "example": false
                                        }
                                      }
                                    }
                                  },
                                  "onError": {
                                    "type": "object",
                                    "description": "Action to take when step fails",
                                    "required": [
                                      "finally"
                                    ],
                                    "properties": {
                                      "retry": {
                                        "type": "integer",
                                        "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                        "minimum": 0,
                                        "maximum": 10,
                                        "example": 3,
                                        "default": 0
                                      },
                                      "finally": {
                                        "type": "object",
                                        "description": "What to do after all retries",
                                        "required": [
                                          "goto"
                                        ],
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "description": "Actions to take on failure",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to transition to on failure",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "failed",
                                            "x-examples": [
                                              "failed"
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "onComplete": {
                                    "type": "object",
                                    "description": "Actions to take when the step completes",
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "object",
                        "properties": {
                          "label": {
                            "example": "Is device ok?",
                            "x-examples": [
                              "Is device ok?"
                            ]
                          },
                          "type": {
                            "example": "choice",
                            "x-examples": [
                              "choice"
                            ]
                          },
                          "choices": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "required": [
                                "goto"
                              ],
                              "maxProperties": 2,
                              "minProperties": 2,
                              "maximum": 20,
                              "properties": {
                                "and": {
                                  "type": "array",
                                  "description": "All choices must be satisfied",
                                  "maximum": 5,
                                  "items": {
                                    "description": "A Step choice",
                                    "type": "object",
                                    "maxProperties": 2,
                                    "minProperties": 2,
                                    "required": [
                                      "variable"
                                    ],
                                    "properties": {
                                      "variable": {
                                        "type": "string",
                                        "description": "Context variable to check",
                                        "example": "$.parts.available",
                                        "x-examples": [
                                          "$.parts.available"
                                        ]
                                      },
                                      "greater_than_equals": {
                                        "type": "string",
                                        "description": "Value has to be greater than or equals to",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "less_than_equals": {
                                        "type": "string",
                                        "description": "Value has to be less than or equals to",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "greater_than": {
                                        "type": "string",
                                        "description": "Value has to be greater than",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "less_than": {
                                        "type": "string",
                                        "description": "Value has to be less than",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "equals": {
                                        "type": "string",
                                        "description": "Value has to equal",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "not_equals": {
                                        "type": "string",
                                        "description": "Value must not equal",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      }
                                    }
                                  }
                                },
                                "or": {
                                  "type": "array",
                                  "description": "Any of these choices must be satisfied",
                                  "maximum": 5,
                                  "items": {
                                    "description": "A Step choice",
                                    "type": "object",
                                    "maxProperties": 2,
                                    "minProperties": 2,
                                    "required": [
                                      "variable"
                                    ],
                                    "properties": {
                                      "variable": {
                                        "type": "string",
                                        "description": "Context variable to check",
                                        "example": "$.parts.available",
                                        "x-examples": [
                                          "$.parts.available"
                                        ]
                                      },
                                      "greater_than_equals": {
                                        "type": "string",
                                        "description": "Value has to be greater than or equals to",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "less_than_equals": {
                                        "type": "string",
                                        "description": "Value has to be less than or equals to",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "greater_than": {
                                        "type": "string",
                                        "description": "Value has to be greater than",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "less_than": {
                                        "type": "string",
                                        "description": "Value has to be less than",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "equals": {
                                        "type": "string",
                                        "description": "Value has to equal",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "not_equals": {
                                        "type": "string",
                                        "description": "Value must not equal",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      }
                                    }
                                  }
                                },
                                "not": {
                                  "type": "array",
                                  "description": "None of these choices must be satisfied",
                                  "maximum": 5,
                                  "items": {
                                    "description": "A Step choice",
                                    "type": "object",
                                    "maxProperties": 2,
                                    "minProperties": 2,
                                    "required": [
                                      "variable"
                                    ],
                                    "properties": {
                                      "variable": {
                                        "type": "string",
                                        "description": "Context variable to check",
                                        "example": "$.parts.available",
                                        "x-examples": [
                                          "$.parts.available"
                                        ]
                                      },
                                      "greater_than_equals": {
                                        "type": "string",
                                        "description": "Value has to be greater than or equals to",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "less_than_equals": {
                                        "type": "string",
                                        "description": "Value has to be less than or equals to",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "greater_than": {
                                        "type": "string",
                                        "description": "Value has to be greater than",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "less_than": {
                                        "type": "string",
                                        "description": "Value has to be less than",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "equals": {
                                        "type": "string",
                                        "description": "Value has to equal",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      },
                                      "not_equals": {
                                        "type": "string",
                                        "description": "Value must not equal",
                                        "example": "42",
                                        "x-examples": [
                                          "42"
                                        ]
                                      }
                                    }
                                  }
                                },
                                "goto": {
                                  "description": "Step to goto when condition is met",
                                  "allOf": [
                                    {
                                      "type": "string",
                                      "description": "Step to move to",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "complete",
                                      "x-examples": [
                                        "complete"
                                      ]
                                    }
                                  ]
                                }
                              }
                            }
                          },
                          "goto": {
                            "description": "Default step to goto when no choice can be made"
                          }
                        },
                        "allOf": [
                          {
                            "type": "object",
                            "x-ui-hide": true,
                            "required": [
                              "type",
                              "label",
                              "goto"
                            ],
                            "properties": {
                              "type": {
                                "type": "string",
                                "description": "Type of workflow step",
                                "enum": [
                                  "load",
                                  "choice",
                                  "function",
                                  "machine",
                                  "pass",
                                  "fail",
                                  "success",
                                  "user",
                                  "wait"
                                ]
                              },
                              "label": {
                                "type": "string",
                                "description": "Label for the step",
                                "example": "Find units",
                                "x-examples": [
                                  "Find units"
                                ]
                              },
                              "goto": {
                                "type": "string",
                                "description": "Step to move to",
                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                "example": "complete",
                                "x-examples": [
                                  "complete"
                                ]
                              },
                              "goto-fail": {
                                "type": "string",
                                "description": "Step to transition too if this step cannot be completed",
                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                "example": "process-fail",
                                "x-examples": [
                                  "process-fail"
                                ]
                              },
                              "context": {
                                "type": "array",
                                "description": "Initial values to set on the context",
                                "items": {
                                  "type": "object",
                                  "required": [
                                    "key",
                                    "value"
                                  ],
                                  "properties": {
                                    "key": {
                                      "type": "string",
                                      "description": "The context key to set",
                                      "example": "$.fizz",
                                      "x-examples": [
                                        "$.fizz",
                                        "$.unit.status",
                                        "extract_fields"
                                      ]
                                    },
                                    "value": {
                                      "type": "string",
                                      "description": "Value to set",
                                      "example": "$.buzz",
                                      "x-examples": [
                                        "$.buzz",
                                        "Pending",
                                        true
                                      ]
                                    },
                                    "lock": {
                                      "type": "boolean",
                                      "description": "Prevents other steps from writing this value",
                                      "example": true
                                    },
                                    "ignore": {
                                      "type": "boolean",
                                      "description": "When trying to set a locked key, do not fail",
                                      "example": false
                                    }
                                  }
                                }
                              },
                              "onError": {
                                "type": "object",
                                "description": "Action to take when step fails",
                                "required": [
                                  "finally"
                                ],
                                "properties": {
                                  "retry": {
                                    "type": "integer",
                                    "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                    "minimum": 0,
                                    "maximum": 10,
                                    "example": 3,
                                    "default": 0
                                  },
                                  "finally": {
                                    "type": "object",
                                    "description": "What to do after all retries",
                                    "required": [
                                      "goto"
                                    ],
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "description": "Actions to take on failure",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      },
                                      "goto": {
                                        "type": "string",
                                        "description": "Step to transition to on failure",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "failed",
                                        "x-examples": [
                                          "failed"
                                        ]
                                      }
                                    }
                                  }
                                }
                              },
                              "onComplete": {
                                "type": "object",
                                "description": "Actions to take when the step completes",
                                "properties": {
                                  "actions": {
                                    "type": "array",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "The type of the action",
                                              "enum": [
                                                "email"
                                              ]
                                            },
                                            "options": {
                                              "type": "object",
                                              "description": "settings for the action",
                                              "additionalProperties": {
                                                "type": "string"
                                              },
                                              "x-examples": [
                                                {
                                                  "to": "bob@example.com",
                                                  "from": "alice@example.com"
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "object",
                        "description": "Finial step which is marked as failed",
                        "properties": {
                          "label": {
                            "example": "Failed",
                            "x-examples": [
                              "Failed"
                            ],
                            "allOf": [
                              {
                                "type": "string",
                                "description": "Label for the step",
                                "example": "Find units",
                                "x-examples": [
                                  "Find units"
                                ]
                              }
                            ]
                          },
                          "type": {
                            "example": "fail",
                            "x-examples": [
                              "fail"
                            ],
                            "allOf": [
                              {
                                "type": "string",
                                "description": "Type of workflow step",
                                "enum": [
                                  "load",
                                  "choice",
                                  "function",
                                  "machine",
                                  "pass",
                                  "fail",
                                  "success",
                                  "user",
                                  "wait"
                                ]
                              }
                            ]
                          },
                          "onComplete": {
                            "type": "object",
                            "description": "Actions to take when the step completes",
                            "properties": {
                              "actions": {
                                "type": "array",
                                "items": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "The type of the action",
                                          "enum": [
                                            "email"
                                          ]
                                        },
                                        "options": {
                                          "type": "object",
                                          "description": "settings for the action",
                                          "additionalProperties": {
                                            "type": "string"
                                          },
                                          "x-examples": [
                                            {
                                              "to": "bob@example.com",
                                              "from": "alice@example.com"
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          }
                        }
                      },
                      {
                        "type": "object",
                        "description": "Allows executing actions with out performing any function",
                        "properties": {
                          "label": {
                            "example": "Send email to project manager",
                            "x-examples": [
                              "Send email to project manager"
                            ]
                          },
                          "type": {
                            "example": "pass",
                            "x-examples": [
                              "pass"
                            ],
                            "allOf": [
                              {
                                "type": "string",
                                "description": "Type of workflow step",
                                "enum": [
                                  "load",
                                  "choice",
                                  "function",
                                  "machine",
                                  "pass",
                                  "fail",
                                  "success",
                                  "user",
                                  "wait"
                                ]
                              }
                            ]
                          }
                        },
                        "allOf": [
                          {
                            "type": "object",
                            "x-ui-hide": true,
                            "required": [
                              "type",
                              "label",
                              "goto"
                            ],
                            "properties": {
                              "type": {
                                "type": "string",
                                "description": "Type of workflow step",
                                "enum": [
                                  "load",
                                  "choice",
                                  "function",
                                  "machine",
                                  "pass",
                                  "fail",
                                  "success",
                                  "user",
                                  "wait"
                                ]
                              },
                              "label": {
                                "type": "string",
                                "description": "Label for the step",
                                "example": "Find units",
                                "x-examples": [
                                  "Find units"
                                ]
                              },
                              "goto": {
                                "type": "string",
                                "description": "Step to move to",
                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                "example": "complete",
                                "x-examples": [
                                  "complete"
                                ]
                              },
                              "goto-fail": {
                                "type": "string",
                                "description": "Step to transition too if this step cannot be completed",
                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                "example": "process-fail",
                                "x-examples": [
                                  "process-fail"
                                ]
                              },
                              "context": {
                                "type": "array",
                                "description": "Initial values to set on the context",
                                "items": {
                                  "type": "object",
                                  "required": [
                                    "key",
                                    "value"
                                  ],
                                  "properties": {
                                    "key": {
                                      "type": "string",
                                      "description": "The context key to set",
                                      "example": "$.fizz",
                                      "x-examples": [
                                        "$.fizz",
                                        "$.unit.status",
                                        "extract_fields"
                                      ]
                                    },
                                    "value": {
                                      "type": "string",
                                      "description": "Value to set",
                                      "example": "$.buzz",
                                      "x-examples": [
                                        "$.buzz",
                                        "Pending",
                                        true
                                      ]
                                    },
                                    "lock": {
                                      "type": "boolean",
                                      "description": "Prevents other steps from writing this value",
                                      "example": true
                                    },
                                    "ignore": {
                                      "type": "boolean",
                                      "description": "When trying to set a locked key, do not fail",
                                      "example": false
                                    }
                                  }
                                }
                              },
                              "onError": {
                                "type": "object",
                                "description": "Action to take when step fails",
                                "required": [
                                  "finally"
                                ],
                                "properties": {
                                  "retry": {
                                    "type": "integer",
                                    "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                    "minimum": 0,
                                    "maximum": 10,
                                    "example": 3,
                                    "default": 0
                                  },
                                  "finally": {
                                    "type": "object",
                                    "description": "What to do after all retries",
                                    "required": [
                                      "goto"
                                    ],
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "description": "Actions to take on failure",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      },
                                      "goto": {
                                        "type": "string",
                                        "description": "Step to transition to on failure",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "failed",
                                        "x-examples": [
                                          "failed"
                                        ]
                                      }
                                    }
                                  }
                                }
                              },
                              "onComplete": {
                                "type": "object",
                                "description": "Actions to take when the step completes",
                                "properties": {
                                  "actions": {
                                    "type": "array",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "The type of the action",
                                              "enum": [
                                                "email"
                                              ]
                                            },
                                            "options": {
                                              "type": "object",
                                              "description": "settings for the action",
                                              "additionalProperties": {
                                                "type": "string"
                                              },
                                              "x-examples": [
                                                {
                                                  "to": "bob@example.com",
                                                  "from": "alice@example.com"
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "object",
                        "description": "Finial step which is marked as completed successfully",
                        "properties": {
                          "label": {
                            "example": "Complete",
                            "x-examples": [
                              "Complete"
                            ],
                            "allOf": [
                              {
                                "type": "string",
                                "description": "Label for the step",
                                "example": "Find units",
                                "x-examples": [
                                  "Find units"
                                ]
                              }
                            ]
                          },
                          "type": {
                            "example": "success",
                            "x-examples": [
                              "success"
                            ],
                            "allOf": [
                              {
                                "type": "string",
                                "description": "Type of workflow step",
                                "enum": [
                                  "load",
                                  "choice",
                                  "function",
                                  "machine",
                                  "pass",
                                  "fail",
                                  "success",
                                  "user",
                                  "wait"
                                ]
                              }
                            ]
                          },
                          "onComplete": {
                            "type": "object",
                            "description": "Actions to take when the step completes",
                            "properties": {
                              "actions": {
                                "type": "array",
                                "items": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "The type of the action",
                                          "enum": [
                                            "email"
                                          ]
                                        },
                                        "options": {
                                          "type": "object",
                                          "description": "settings for the action",
                                          "additionalProperties": {
                                            "type": "string"
                                          },
                                          "x-examples": [
                                            {
                                              "to": "bob@example.com",
                                              "from": "alice@example.com"
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          }
                        }
                      },
                      {
                        "type": "object",
                        "description": "A step which run at certain times",
                        "required": [
                          "stop_at",
                          "time"
                        ],
                        "properties": {
                          "label": {
                            "example": "Wait for cable",
                            "x-examples": [
                              "Wait for cable"
                            ],
                            "allOf": [
                              {
                                "type": "string",
                                "description": "Label for the step",
                                "example": "Find units",
                                "x-examples": [
                                  "Find units"
                                ]
                              }
                            ]
                          },
                          "type": {
                            "x-examples": [
                              "wait"
                            ],
                            "example": "wait"
                          },
                          "stop_at": {
                            "type": "integer",
                            "description": "Time in seconds to stop this task",
                            "maximum": 900,
                            "minimum": 1
                          },
                          "time": {
                            "type": "integer",
                            "description": "Time to wait before checking this step",
                            "example": 600,
                            "maximum": 900,
                            "minimum": 1
                          },
                          "listen_for": {
                            "type": "array",
                            "description": "List of events and conditions to listen for to trigger",
                            "items": {
                              "type": "object",
                              "required": [
                                "event"
                              ],
                              "properties": {
                                "event": {
                                  "type": "string",
                                  "description": "Name of the event to listen for",
                                  "allOf": [
                                    {
                                      "type": "string",
                                      "description": "Possible entity events",
                                      "enum": [
                                        "CON.attached",
                                        "CON.created",
                                        "CON.deleted",
                                        "CON.detached",
                                        "CON.removed",
                                        "CON.updated",
                                        "CUS.attached",
                                        "CUS.created",
                                        "CUS.deleted",
                                        "CUS.detached",
                                        "CUS.removed",
                                        "CUS.updated",
                                        "LOC.attached",
                                        "LOC.created",
                                        "LOC.deleted",
                                        "LOC.detached",
                                        "LOC.removed",
                                        "LOC.updated",
                                        "NOTE.attached",
                                        "NOTE.created",
                                        "NOTE.deleted",
                                        "NOTE.detached",
                                        "NOTE.removed",
                                        "NOTE.updated",
                                        "PART.attached",
                                        "PART.created",
                                        "PART.deleted",
                                        "PART.detached",
                                        "PART.removed",
                                        "PART.updated",
                                        "PGM.attached",
                                        "PGM.created",
                                        "PGM.deleted",
                                        "PGM.detached",
                                        "PGM.removed",
                                        "PGM.updated",
                                        "PRO.attached",
                                        "PRO.created",
                                        "PRO.deleted",
                                        "PRO.detached",
                                        "PRO.removed",
                                        "PRO.updated",
                                        "RES.attached",
                                        "RES.created",
                                        "RES.deleted",
                                        "RES.detached",
                                        "RES.removed",
                                        "RES.updated",
                                        "UNIT.attached",
                                        "UNIT.created",
                                        "UNIT.deleted",
                                        "UNIT.detached",
                                        "UNIT.removed",
                                        "UNIT.updated",
                                        "USER.attached",
                                        "USER.created",
                                        "USER.deleted",
                                        "USER.detached",
                                        "USER.removed",
                                        "USER.updated",
                                        "WKF.attached",
                                        "WKF.created",
                                        "WKF.deleted",
                                        "WKF.detached",
                                        "WKF.removed",
                                        "WKF.updated",
                                        "WOR.attached",
                                        "WOR.created",
                                        "WOR.deleted",
                                        "WOR.detached",
                                        "WOR.removed",
                                        "WOR.updated"
                                      ]
                                    }
                                  ]
                                },
                                "event_value": {
                                  "type": "object",
                                  "description": "The event conditions that have to be met",
                                  "allOf": [
                                    {
                                      "description": "A Step choice",
                                      "type": "object",
                                      "maxProperties": 2,
                                      "minProperties": 2,
                                      "required": [
                                        "variable"
                                      ],
                                      "properties": {
                                        "variable": {
                                          "type": "string",
                                          "description": "Context variable to check",
                                          "example": "$.parts.available",
                                          "x-examples": [
                                            "$.parts.available"
                                          ]
                                        },
                                        "greater_than_equals": {
                                          "type": "string",
                                          "description": "Value has to be greater than or equals to",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "less_than_equals": {
                                          "type": "string",
                                          "description": "Value has to be less than or equals to",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "greater_than": {
                                          "type": "string",
                                          "description": "Value has to be greater than",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "less_than": {
                                          "type": "string",
                                          "description": "Value has to be less than",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "equals": {
                                          "type": "string",
                                          "description": "Value has to equal",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        },
                                        "not_equals": {
                                          "type": "string",
                                          "description": "Value must not equal",
                                          "example": "42",
                                          "x-examples": [
                                            "42"
                                          ]
                                        }
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          }
                        },
                        "allOf": [
                          {
                            "type": "object",
                            "x-ui-hide": true,
                            "required": [
                              "type",
                              "label",
                              "goto"
                            ],
                            "properties": {
                              "type": {
                                "type": "string",
                                "description": "Type of workflow step",
                                "enum": [
                                  "load",
                                  "choice",
                                  "function",
                                  "machine",
                                  "pass",
                                  "fail",
                                  "success",
                                  "user",
                                  "wait"
                                ]
                              },
                              "label": {
                                "type": "string",
                                "description": "Label for the step",
                                "example": "Find units",
                                "x-examples": [
                                  "Find units"
                                ]
                              },
                              "goto": {
                                "type": "string",
                                "description": "Step to move to",
                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                "example": "complete",
                                "x-examples": [
                                  "complete"
                                ]
                              },
                              "goto-fail": {
                                "type": "string",
                                "description": "Step to transition too if this step cannot be completed",
                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                "example": "process-fail",
                                "x-examples": [
                                  "process-fail"
                                ]
                              },
                              "context": {
                                "type": "array",
                                "description": "Initial values to set on the context",
                                "items": {
                                  "type": "object",
                                  "required": [
                                    "key",
                                    "value"
                                  ],
                                  "properties": {
                                    "key": {
                                      "type": "string",
                                      "description": "The context key to set",
                                      "example": "$.fizz",
                                      "x-examples": [
                                        "$.fizz",
                                        "$.unit.status",
                                        "extract_fields"
                                      ]
                                    },
                                    "value": {
                                      "type": "string",
                                      "description": "Value to set",
                                      "example": "$.buzz",
                                      "x-examples": [
                                        "$.buzz",
                                        "Pending",
                                        true
                                      ]
                                    },
                                    "lock": {
                                      "type": "boolean",
                                      "description": "Prevents other steps from writing this value",
                                      "example": true
                                    },
                                    "ignore": {
                                      "type": "boolean",
                                      "description": "When trying to set a locked key, do not fail",
                                      "example": false
                                    }
                                  }
                                }
                              },
                              "onError": {
                                "type": "object",
                                "description": "Action to take when step fails",
                                "required": [
                                  "finally"
                                ],
                                "properties": {
                                  "retry": {
                                    "type": "integer",
                                    "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                    "minimum": 0,
                                    "maximum": 10,
                                    "example": 3,
                                    "default": 0
                                  },
                                  "finally": {
                                    "type": "object",
                                    "description": "What to do after all retries",
                                    "required": [
                                      "goto"
                                    ],
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "description": "Actions to take on failure",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      },
                                      "goto": {
                                        "type": "string",
                                        "description": "Step to transition to on failure",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "failed",
                                        "x-examples": [
                                          "failed"
                                        ]
                                      }
                                    }
                                  }
                                }
                              },
                              "onComplete": {
                                "type": "object",
                                "description": "Actions to take when the step completes",
                                "properties": {
                                  "actions": {
                                    "type": "array",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "The type of the action",
                                              "enum": [
                                                "email"
                                              ]
                                            },
                                            "options": {
                                              "type": "object",
                                              "description": "settings for the action",
                                              "additionalProperties": {
                                                "type": "string"
                                              },
                                              "x-examples": [
                                                {
                                                  "to": "bob@example.com",
                                                  "from": "alice@example.com"
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            }
          },
          "allOf": [
            {
              "x-ui-hide": true,
              "type": "object",
              "description": "Common Properties to all entities",
              "required": [
                "label"
              ],
              "properties": {
                "label": {
                  "type": "string",
                  "description": "Label for the entity",
                  "example": "primary"
                },
                "slug": {
                  "type": "string",
                  "description": "Slug for the entity (Auto-generated from the label)",
                  "readOnly": true,
                  "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$"
                },
                "created": {
                  "description": "Date the entity was created",
                  "type": "string",
                  "format": "date-time",
                  "readOnly": true
                },
                "updated": {
                  "description": "Last date the entity was updated",
                  "type": "string",
                  "format": "date-time",
                  "readOnly": true
                }
              }
            }
          ],
          "example": {
            "steps": {
              "fail": {
                "step": "complete",
                "type": "user",
                "options": {
                  "component": "assignUnitsFromCustomerToProject",
                  "payload": {
                    "message": "Device powered off?",
                    "negative_message": "Device not functioning"
                  }
                },
                "label": "Find units",
                "goto": "complete",
                "goto-fail": "process-fail",
                "context": [
                  {
                    "key": "$.unit.status",
                    "value": "Pending",
                    "lock": true,
                    "ignore": true
                  }
                ],
                "onError": {
                  "finally": {
                    "goto": "failed",
                    "actions": [
                      {
                        "type": "email",
                        "options": {
                          "to": "bob@example.com",
                          "from": "alice@example.com"
                        }
                      }
                    ]
                  },
                  "retry": 8
                },
                "onComplete": {
                  "actions": [
                    {
                      "type": "email",
                      "options": {
                        "to": "bob@example.com",
                        "from": "alice@example.com"
                      }
                    },
                    {
                      "type": "email",
                      "options": {
                        "to": "bob@example.com",
                        "from": "alice@example.com"
                      }
                    },
                    {
                      "type": "email",
                      "options": {
                        "to": "bob@example.com",
                        "from": "alice@example.com"
                      }
                    }
                  ]
                }
              },
              "amet_b64$": {
                "step": "complete",
                "label": "Find units",
                "type": "success",
                "onComplete": {
                  "actions": [
                    {
                      "type": "email",
                      "options": {
                        "to": "bob@example.com",
                        "from": "alice@example.com"
                      }
                    }
                  ]
                }
              },
              "minim2__": {
                "step": "complete",
                "type": "pass",
                "label": "Find units",
                "goto": "complete",
                "goto-fail": "process-fail",
                "context": [
                  {
                    "key": "$.fizz",
                    "value": "$.buzz",
                    "lock": false,
                    "ignore": true
                  }
                ],
                "onError": {
                  "finally": {
                    "goto": "failed",
                    "actions": [
                      {
                        "type": "email",
                        "options": {
                          "to": "bob@example.com",
                          "from": "alice@example.com"
                        }
                      },
                      {
                        "type": "email",
                        "options": {
                          "to": "bob@example.com",
                          "from": "alice@example.com"
                        }
                      },
                      {
                        "type": "email",
                        "options": {
                          "to": "bob@example.com",
                          "from": "alice@example.com"
                        }
                      },
                      {
                        "type": "email",
                        "options": {
                          "to": "bob@example.com",
                          "from": "alice@example.com"
                        }
                      }
                    ]
                  },
                  "retry": 0
                },
                "onComplete": {
                  "actions": [
                    {
                      "type": "email",
                      "options": {
                        "to": "bob@example.com",
                        "from": "alice@example.com"
                      }
                    },
                    {
                      "type": "email",
                      "options": {
                        "to": "bob@example.com",
                        "from": "alice@example.com"
                      }
                    },
                    {
                      "type": "email",
                      "options": {
                        "to": "bob@example.com",
                        "from": "alice@example.com"
                      }
                    },
                    {
                      "type": "email",
                      "options": {
                        "to": "bob@example.com",
                        "from": "alice@example.com"
                      }
                    }
                  ]
                }
              }
            },
            "starts_at": "entry",
            "label": "MLTI iPad Assembly Assignment",
            "workflow_id": "e530652e-28e8-4f64-84af-e1cf0ff7c805",
            "applies_to": "customer",
            "slug": "mlti-ipad-assembly-assignment",
            "version": "1.0",
            "workflow_version": 7,
            "context": [
              {
                "key": "$.fizz",
                "value": "Pending",
                "lock": false,
                "ignore": true
              },
              {
                "key": "$.unit.status",
                "value": "true",
                "lock": false,
                "ignore": true
              },
              {
                "key": "$.unit.status",
                "value": "Pending",
                "lock": false,
                "ignore": true
              },
              {
                "key": "extract_fields",
                "value": "Pending",
                "lock": true,
                "ignore": false
              }
            ],
            "created": "1991-03-23T20:31:55.727Z",
            "updated": "1988-03-24T09:13:18.759Z"
          }
        }
      ],
      "example": "undefined"
    }
  ]
}
```

<h3 id="updateworkflow-responses">Responses</h3>

|Status|Meaning|Description|Schema|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|A workflow response|Inline|
|400|[Bad Request](https://tools.ietf.org/html/rfc7231#section-6.5.1)|Bad Request|Inline|
|403|[Forbidden](https://tools.ietf.org/html/rfc7231#section-6.5.3)|Forbidden|Inline|
|423|[Locked](https://tools.ietf.org/html/rfc2518#section-10.4)|Forbidden|Inline|

<h3 id="updateworkflow-responseschema">Response Schema</h3>

Status Code **200**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» _links|object|false|none|none|
|»» self|object|false|read-only|none|
|»»» href|string|false|none|none|

Status Code **400**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» title|any|false|none|none|
|» type|any|false|none|none|
|» status|any|false|none|none|
|» detail|any|false|none|none|

Status Code **403**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» title|any|false|none|none|
|» type|any|false|none|none|
|» status|any|false|none|none|
|» detail|any|false|none|none|

Status Code **423**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» title|any|false|none|none|
|» type|any|false|none|none|
|» status|any|false|none|none|
|» detail|any|false|none|none|

<aside class="success">
This operation does not require authentication
</aside>

## deleteWorkflow

<a id="opIddeleteWorkflow"></a>

`DELETE /work-flows/:workflow_id`

*Deletes a workflow*

This will soft delete the workflow

<h3 id="deleteworkflow-parameters">Parameters</h3>

|Name|In|Type|Required|Description|
|---|---|---|---|---|
|workflow_id|path|string|true|Id for the workflow|

> Example responses

> 401 Response

```json
{
  "properties": {
    "title": {
      "example": "Unauthorized"
    },
    "type": {
      "example": "https://docs.nterprise.com/api/problem/Unauthorized"
    },
    "status": {
      "example": 401
    },
    "detail": {
      "example": "You are not authorized to access this resource"
    }
  },
  "allOf": [
    {
      "type": "object",
      "x-ui-hide": true,
      "description": "API Error",
      "properties": {
        "type": {
          "type": "string",
          "format": "uri",
          "description": "An absolute URI that identifies the problem type",
          "default": "about:blank",
          "example": "https://docs.nterprise.com/problem/InternalServerError"
        },
        "title": {
          "type": "string",
          "example": "Internal Server Error",
          "description": "A short, summary of the problem type"
        },
        "status": {
          "type": "integer",
          "format": "int32",
          "description": "The HTTP status code generated by the origin server for this occurrence of the problem",
          "minimum": 100,
          "maximum": 600,
          "example": 500
        },
        "detail": {
          "type": "string",
          "description": "A human readable explanation specific to this occurrence of the problem",
          "example": "Failed to reticulate splines"
        }
      }
    }
  ]
}
```

<h3 id="deleteworkflow-responses">Responses</h3>

|Status|Meaning|Description|Schema|
|---|---|---|---|
|205|[Reset Content](https://tools.ietf.org/html/rfc7231#section-6.3.6)|Workflow deleted|None|
|401|[Unauthorized](https://tools.ietf.org/html/rfc7235#section-3.1)|Unauthorized|Inline|
|403|[Forbidden](https://tools.ietf.org/html/rfc7231#section-6.5.3)|Forbidden|Inline|
|404|[Not Found](https://tools.ietf.org/html/rfc7231#section-6.5.4)|Resource not found|Inline|
|423|[Locked](https://tools.ietf.org/html/rfc2518#section-10.4)|Forbidden|Inline|

<h3 id="deleteworkflow-responseschema">Response Schema</h3>

Status Code **401**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» title|any|false|none|none|
|» type|any|false|none|none|
|» status|any|false|none|none|
|» detail|any|false|none|none|

Status Code **403**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» title|any|false|none|none|
|» type|any|false|none|none|
|» status|any|false|none|none|
|» detail|any|false|none|none|

Status Code **404**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» title|any|false|none|none|
|» type|any|false|none|none|
|» status|any|false|none|none|
|» detail|any|false|none|none|

Status Code **423**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» title|any|false|none|none|
|» type|any|false|none|none|
|» status|any|false|none|none|
|» detail|any|false|none|none|

<aside class="success">
This operation does not require authentication
</aside>

## fetchBomForWorkflow

<a id="opIdfetchBomForWorkflow"></a>

`GET /work-flows/:workflow_id/bill-of-materials`

*Fetch workflow Bill of Material*

Fetches the Bill of Material for a workflow

<h3 id="fetchbomforworkflow-parameters">Parameters</h3>

|Name|In|Type|Required|Description|
|---|---|---|---|---|
|workflow_id|path|string|true|Id for the workflow|

> Example responses

> 200 Response

```json
{
  "allOf": [
    {
      "x-id": "#bom",
      "description": "Defines the properties for a work flow Bill of Material",
      "properties": {
        "label": {
          "example": "Bill of materials for: MLTI iPad Assembly Assignment"
        },
        "parts_needed": {
          "type": "array",
          "description": "A List of parts",
          "items": {
            "type": "object",
            "properties": {
              "part": {
                "x-id": "#part",
                "x-nter-relation": "parts",
                "x-nter-model": "Part",
                "x-nter-callable": true,
                "description": "Defines the properties for a part",
                "required": [
                  "label",
                  "part_id",
                  "customer",
                  "manufacturer"
                ],
                "properties": {
                  "part_id": {
                    "type": "string",
                    "description": "Unique identifier",
                    "example": "ec5db56d-32e6-4e5d-9bef-1016f3e13670",
                    "x-examples": [
                      "ec5db56d-32e6-4e5d-9bef-1016f3e13670"
                    ],
                    "pattern": "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"
                  },
                  "label": {
                    "type": "string",
                    "example": "10\" iPad",
                    "x-examples": [
                      "10\" iPad"
                    ],
                    "description": "Label for the part"
                  },
                  "slug": {
                    "type": "string",
                    "example": "10-ipad",
                    "x-examples": [
                      "10-ipad"
                    ],
                    "description": "Auto-generated slug for the part"
                  },
                  "customer": {
                    "x-id": "#customer",
                    "x-nter-relation": "customers",
                    "x-nter-model": "Customer",
                    "x-nter-callable": true,
                    "description": "Customer",
                    "required": [
                      "label",
                      "customer_id",
                      "status_map"
                    ],
                    "properties": {
                      "customer_id": {
                        "type": "string",
                        "description": "Customer identifier",
                        "example": "e530652e-28e8-4f64-84af-e1cf0ff7c805",
                        "x-examples": [
                          "e530652e-28e8-4f64-84af-e1cf0ff7c805"
                        ],
                        "pattern": "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$",
                        "x-faker": "random.uuid"
                      },
                      "label": {
                        "type": "string",
                        "example": "Zones Inc",
                        "x-examples": [
                          "Zones Inc"
                        ],
                        "description": "Label for the customer"
                      },
                      "slug": {
                        "type": "string",
                        "example": "zones-inc",
                        "x-examples": [
                          "zones-inc"
                        ],
                        "description": "Auto generated slug"
                      },
                      "external_platform": {
                        "type": "object",
                        "description": "External Identifiers for the customer",
                        "nullable": true,
                        "additionalProperties": {
                          "type": "string"
                        },
                        "x-examples": [
                          {
                            "ax_customer_id": "eff3ada3-0966-42be-a5e8-78efd3c52d39"
                          }
                        ]
                      },
                      "allowed_statuses": {
                        "type": "array",
                        "description": "List of allowed statuses",
                        "items": {
                          "x-id": "#status",
                          "x-nter-relation": "statuses",
                          "x-nter-model": "Status",
                          "x-nter-callable": true,
                          "x-ui-hide": true,
                          "description": "Defines the properties for a status",
                          "type": "object",
                          "required": [
                            "status",
                            "status_category"
                          ],
                          "properties": {
                            "status": {
                              "type": "string",
                              "description": "A Custom label for the status",
                              "x-examples": [
                                "Pending",
                                "In Progress",
                                "Verifying",
                                "Complete",
                                "Cancelled",
                                "Blocked",
                                "Reticulating Splines"
                              ]
                            },
                            "category": {
                              "type": "string",
                              "description": "The classifier for the statues",
                              "x-examples": [
                                "PENDING",
                                "IN_PROGRESS",
                                "VERIFYING",
                                "COMPLETE",
                                "CANCELLED",
                                "BLOCKED"
                              ],
                              "enum": [
                                "PENDING",
                                "IN_PROGRESS",
                                "VERIFYING",
                                "COMPLETE",
                                "CANCELLED",
                                "BLOCKED"
                              ]
                            }
                          }
                        }
                      }
                    },
                    "allOf": [
                      {
                        "x-ui-hide": true,
                        "type": "object",
                        "description": "Common Properties to all entities",
                        "required": [
                          "label"
                        ],
                        "properties": {
                          "label": {
                            "type": "string",
                            "description": "Label for the entity",
                            "example": "primary"
                          },
                          "slug": {
                            "type": "string",
                            "description": "Slug for the entity (Auto-generated from the label)",
                            "readOnly": true,
                            "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$"
                          },
                          "created": {
                            "description": "Date the entity was created",
                            "type": "string",
                            "format": "date-time",
                            "readOnly": true
                          },
                          "updated": {
                            "description": "Last date the entity was updated",
                            "type": "string",
                            "format": "date-time",
                            "readOnly": true
                          }
                        }
                      }
                    ],
                    "example": {
                      "label": "Zones Inc",
                      "customer_id": "e530652e-28e8-4f64-84af-e1cf0ff7c805",
                      "slug": "zones-inc",
                      "external_platform": {
                        "ax_customer_id": "eff3ada3-0966-42be-a5e8-78efd3c52d39"
                      },
                      "allowed_statuses": [
                        {
                          "status": "Reticulating Splines",
                          "category": "BLOCKED"
                        }
                      ],
                      "created": "1960-01-22T21:27:37.876Z",
                      "updated": "2015-12-03T17:42:43.706Z"
                    }
                  },
                  "manufacturer": {
                    "type": "object",
                    "description": "Manufacturer information for the part",
                    "required": [
                      "part_number"
                    ],
                    "properties": {
                      "part_number": {
                        "type": "string",
                        "description": "Manufacturer part number",
                        "example": "602-3075-01",
                        "x-examples": [
                          "602-3075-01"
                        ]
                      }
                    },
                    "allOf": [
                      {
                        "x-id": "#manufacturer",
                        "x-nter-relation": "manufacturers",
                        "x-nter-model": "Manufacturer",
                        "x-nter-callable": true,
                        "description": "A Manufacturer of parts",
                        "required": [
                          "label",
                          "manufacturer_id"
                        ],
                        "properties": {
                          "manufacturer_id": {
                            "type": "string",
                            "description": "unique id",
                            "example": "99ec26f2-fa31-4768-b357-268c708fcda5",
                            "pattern": "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"
                          },
                          "label": {
                            "type": "string",
                            "example": "Apple Inc",
                            "x-examples": [
                              "Apple Inc"
                            ],
                            "description": "Label for the manufacturer"
                          },
                          "slug": {
                            "type": "string",
                            "example": "apple-inc",
                            "x-examples": [
                              "apple-inc"
                            ],
                            "description": "Auto-generated slug for the manufacturer"
                          }
                        },
                        "allOf": [
                          {
                            "x-ui-hide": true,
                            "type": "object",
                            "description": "Common Properties to all entities",
                            "required": [
                              "label"
                            ],
                            "properties": {
                              "label": {
                                "type": "string",
                                "description": "Label for the entity",
                                "example": "primary"
                              },
                              "slug": {
                                "type": "string",
                                "description": "Slug for the entity (Auto-generated from the label)",
                                "readOnly": true,
                                "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$"
                              },
                              "created": {
                                "description": "Date the entity was created",
                                "type": "string",
                                "format": "date-time",
                                "readOnly": true
                              },
                              "updated": {
                                "description": "Last date the entity was updated",
                                "type": "string",
                                "format": "date-time",
                                "readOnly": true
                              }
                            }
                          }
                        ],
                        "example": {
                          "label": "Apple Inc",
                          "manufacturer_id": "003DffD7-Dff3-3E2A-Ae76-26E6C7aE5F7B",
                          "slug": "apple-inc",
                          "created": "1978-03-10T02:20:23.811Z",
                          "updated": "1940-10-01T09:10:03.934Z"
                        }
                      }
                    ]
                  },
                  "serial_prefix": {
                    "type": "string",
                    "example": "S",
                    "x-examples": [
                      "S"
                    ],
                    "description": "A serial number prefix for the part"
                  },
                  "input_filter": {
                    "description": "Input Filters allow custom fields to be defined for entities",
                    "type": "array",
                    "items": {
                      "type": "object",
                      "description": "Input filter specification",
                      "properties": {
                        "label": {
                          "type": "string",
                          "description": "Human readable name",
                          "example": "Serial Number",
                          "x-examples": [
                            "Serial Number",
                            "Asset tag",
                            "WiFi MAC address",
                            "Bluetooh MAC address"
                          ]
                        },
                        "key": {
                          "type": "string",
                          "description": "Slug used to store the property",
                          "example": "serial-number",
                          "x-examples": [
                            "serial-number",
                            "asset-tag",
                            "wifi-mac-address",
                            "bluetooh-mac-address"
                          ],
                          "readOnly": true,
                          "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$"
                        },
                        "filters": {
                          "type": "array",
                          "description": "A Collection of filters applied to the field",
                          "items": {
                            "anyOf": [
                              {
                                "description": "This filter will set the value based on a list of approved values. If the value is not in the list, it will then be set to empty unless the default option is set",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "allowed_list"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "approved_values"
                                    ],
                                    "properties": {
                                      "approved_values": {
                                        "type": "array",
                                        "minimum": 1,
                                        "maximum": 100,
                                        "description": "The list of approved values",
                                        "items": {
                                          "type": "string"
                                        },
                                        "example": [
                                          "foo",
                                          "bar",
                                          "fizz",
                                          "buzz"
                                        ],
                                        "x-examples": [
                                          [
                                            "foo",
                                            "bar",
                                            "fizz",
                                            "buzz"
                                          ]
                                        ]
                                      },
                                      "check_case": {
                                        "type": "boolean",
                                        "description": "Perform a case sensitive match. By default will not match case",
                                        "default": false
                                      },
                                      "default": {
                                        "type": "string",
                                        "description": "If this is set and the value is not in the approved_list, set the value to this",
                                        "nullable": true,
                                        "example": "fizz",
                                        "x-examples": [
                                          "fizz"
                                        ]
                                      }
                                    }
                                  }
                                }
                              },
                              {
                                "description": "Make the value camelCase",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "camel"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "description": "This filter has no options"
                                  }
                                }
                              },
                              {
                                "description": "Filter to transform a value into a date",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "date"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "description": "Date filter has no options",
                                    "example": {},
                                    "x-examples": [
                                      {}
                                    ]
                                  }
                                }
                              },
                              {
                                "description": "Filter to transform values into null. This is helpful when trying to make a value required. The following are considered empty:\n# The number 0 or 0.0\n# empty string ''\n# A boolean false\n# The word 'false'\n# ",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "empty"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "description": "empty filter has no options",
                                    "example": {},
                                    "x-examples": [
                                      {}
                                    ]
                                  }
                                }
                              },
                              {
                                "description": "Filter to transform a value into a float. Non numeric characters (including comma) will be removed",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "float"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "properties": {
                                      "precision": {
                                        "type": "integer",
                                        "minimum": 1,
                                        "maximum": 8,
                                        "default": 3,
                                        "description": "How many decimal places to preserve"
                                      }
                                    }
                                  }
                                }
                              },
                              {
                                "description": "Make the value kebab-case",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "kebab"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "description": "This filter has no options"
                                  }
                                }
                              },
                              {
                                "description": "Make the value lowercase",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "lower"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "description": "This filter has no options"
                                  }
                                }
                              },
                              {
                                "description": "Filter to transform a value into a number. Non numeric characters (including comma and decimal points) will be removed",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "number"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "description": "Number filter has no options",
                                    "example": {},
                                    "x-examples": [
                                      {}
                                    ]
                                  }
                                }
                              },
                              {
                                "description": "Add a prefix to the start of a string. If the string already start with the prefix, it will not prepend.",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "prefix"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "prefix"
                                    ],
                                    "properties": {
                                      "prefix": {
                                        "type": "string",
                                        "description": "The prefix to add",
                                        "example": "MAN-",
                                        "x-examples": [
                                          "MAN-"
                                        ]
                                      }
                                    }
                                  }
                                }
                              },
                              {
                                "description": "Make the value snake_case",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "snake"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "description": "This filter has no options"
                                  }
                                }
                              },
                              {
                                "description": "Filter to transform a value into a string",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "string"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "description": "String filter has no options",
                                    "example": {},
                                    "x-examples": [
                                      {}
                                    ]
                                  }
                                }
                              },
                              {
                                "description": "Add a suffix to the start of a string. If the string already start with the suffix, it will not append.",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "suffix"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "suffix"
                                    ],
                                    "properties": {
                                      "suffix": {
                                        "type": "string",
                                        "description": "The suffix to add",
                                        "example": "-MAN",
                                        "x-examples": [
                                          "MAN"
                                        ]
                                      }
                                    }
                                  }
                                }
                              },
                              {
                                "description": "Filter to trim whitespace from a value",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "trim"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "description": "By default will trim from the start and end",
                                    "properties": {
                                      "start": {
                                        "type": "boolean",
                                        "description": "Remove white space from the start of the string",
                                        "default": true
                                      },
                                      "end": {
                                        "type": "boolean",
                                        "description": "Remove white space from the end of the string",
                                        "default": true
                                      }
                                    }
                                  }
                                }
                              },
                              {
                                "description": "Make the value UPPERCASE",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "upper"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "description": "This filter has no options"
                                  }
                                }
                              }
                            ]
                          }
                        },
                        "validators": {
                          "type": "array",
                          "description": "A set of validators to use for this field",
                          "items": {
                            "anyOf": [
                              {
                                "description": "Validate number is between two values. By default, min and max are included",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "greater_than"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "min",
                                      "max"
                                    ],
                                    "properties": {
                                      "min": {
                                        "type": "number",
                                        "description": "Minimum value to check",
                                        "example": 42,
                                        "x-examples": [
                                          42
                                        ]
                                      },
                                      "max": {
                                        "type": "number",
                                        "description": "The maximum value to check",
                                        "example": 42,
                                        "x-examples": [
                                          42
                                        ]
                                      },
                                      "precision": {
                                        "type": "integer",
                                        "description": "When number is a float, this will set the decimal precision",
                                        "minimum": 1,
                                        "maximum": 8,
                                        "default": 3
                                      },
                                      "include": {
                                        "type": "boolean",
                                        "description": "Include the value in the check",
                                        "default": true
                                      }
                                    }
                                  }
                                }
                              },
                              {
                                "description": "Validate value does not match a list (black list)",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "white_list"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "list"
                                    ],
                                    "properties": {
                                      "list": {
                                        "type": "array",
                                        "minimum": 1,
                                        "maximum": 100,
                                        "description": "The list of approved values",
                                        "items": {
                                          "type": "string"
                                        },
                                        "example": [
                                          "foo",
                                          "bar",
                                          "fizz",
                                          "buzz"
                                        ],
                                        "x-examples": [
                                          [
                                            "foo",
                                            "bar",
                                            "fizz",
                                            "buzz"
                                          ]
                                        ]
                                      },
                                      "check_case": {
                                        "type": "boolean",
                                        "description": "Perform a case sensitive match. By default will not match case",
                                        "default": false
                                      }
                                    }
                                  }
                                }
                              },
                              {
                                "description": "Validate string contains a value",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "contains"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "contains"
                                    ],
                                    "properties": {
                                      "contains": {
                                        "type": "string",
                                        "description": "String must contain with this value",
                                        "example": "foo",
                                        "x-examples": [
                                          "foo"
                                        ]
                                      },
                                      "check_case": {
                                        "type": "boolean",
                                        "description": "Perform a case sensitive match. By default will not match case",
                                        "default": false
                                      }
                                    }
                                  }
                                }
                              },
                              {
                                "description": "Validate string is a correct email address",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "email_address"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "properties": {
                                      "strict": {
                                        "type": "boolean",
                                        "description": "Enforce strict standards from ARPA. This will enforce the length of the string",
                                        "default": true
                                      },
                                      "lookup": {
                                        "type": "boolean",
                                        "description": "Look up the host name and check if it has a valid MX record",
                                        "default": false
                                      }
                                    }
                                  }
                                }
                              },
                              {
                                "description": "Validate string ends with a value",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "ends_with"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "ends_with"
                                    ],
                                    "properties": {
                                      "ends_with": {
                                        "type": "string",
                                        "description": "String must end with this value",
                                        "example": "foo",
                                        "x-examples": [
                                          "foo"
                                        ]
                                      },
                                      "check_case": {
                                        "type": "boolean",
                                        "description": "Perform a case sensitive match. By default will not match case",
                                        "default": false
                                      }
                                    }
                                  }
                                }
                              },
                              {
                                "description": "Validate number equals a value",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "equals"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "value"
                                    ],
                                    "properties": {
                                      "value": {
                                        "type": "number",
                                        "description": "The value to compare against",
                                        "example": 42,
                                        "x-examples": [
                                          42
                                        ]
                                      },
                                      "precision": {
                                        "type": "integer",
                                        "description": "When value is a float, this will set the decimal precision",
                                        "minimum": 1,
                                        "maximum": 8,
                                        "default": 3
                                      }
                                    }
                                  }
                                }
                              },
                              {
                                "description": "Validate number is greater than a value. By default, this will check if value is greater than or equals to",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "greater_than"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "value"
                                    ],
                                    "properties": {
                                      "value": {
                                        "type": "number",
                                        "description": "The value to compare against",
                                        "example": 42,
                                        "x-examples": [
                                          42
                                        ]
                                      },
                                      "precision": {
                                        "type": "integer",
                                        "description": "When number is a float, this will set the decimal precision",
                                        "minimum": 1,
                                        "maximum": 8,
                                        "default": 3
                                      },
                                      "include": {
                                        "type": "boolean",
                                        "description": "Include the value in the check",
                                        "default": true
                                      }
                                    }
                                  }
                                }
                              },
                              {
                                "description": "Validate string has a correct DNS records",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "hostname"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "properties": {
                                      "record_type": {
                                        "type": "string",
                                        "description": "DNS record type to validate",
                                        "default": "A",
                                        "enum": [
                                          "A",
                                          "AAAA",
                                          "AFSDB",
                                          "APL",
                                          "CAA",
                                          "CDNSKEY",
                                          "CDS",
                                          "CERT",
                                          "CNAME",
                                          "CSYNC",
                                          "DHCID",
                                          "DLV",
                                          "DNAME",
                                          "DNSKEY",
                                          "DS",
                                          "HIP",
                                          "IPSECKEY",
                                          "KEY",
                                          "KX",
                                          "LOC",
                                          "MX",
                                          "NAPTR",
                                          "NS",
                                          "NSEC",
                                          "NSEC3",
                                          "NSEC3PARAM",
                                          "OPENPGPKEY",
                                          "PTR",
                                          "RRSIG",
                                          "RP",
                                          "SIG",
                                          "SMIMEA",
                                          "SOA",
                                          "SRV",
                                          "SSHFP",
                                          "TA",
                                          "TKEY",
                                          "TLSA",
                                          "TSIG",
                                          "TXT",
                                          "URI"
                                        ]
                                      }
                                    }
                                  }
                                }
                              },
                              {
                                "description": "Validate string matches an IP address format. Defaults to matching IPv4",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "ipAddress"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "properties": {
                                      "versions": {
                                        "type": "array",
                                        "description": "IP Version to match against",
                                        "example": [
                                          "IPv4"
                                        ],
                                        "x-examples": [
                                          [
                                            "IPv4"
                                          ]
                                        ],
                                        "items": {
                                          "type": "string",
                                          "enum": [
                                            "IPv4",
                                            "IPv6"
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              },
                              {
                                "description": "Validate string is a certain length",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "length"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "length"
                                    ],
                                    "properties": {
                                      "length": {
                                        "type": "string",
                                        "description": "String must contain with this value",
                                        "example": "foo",
                                        "x-examples": [
                                          "foo"
                                        ]
                                      },
                                      "operator": {
                                        "type": "string",
                                        "description": "Which type of length comparision to make",
                                        "default": "equals",
                                        "enum": [
                                          "equals",
                                          "less_than",
                                          "less_than_equals",
                                          "greater_than",
                                          "greater_than_equals"
                                        ]
                                      }
                                    }
                                  }
                                }
                              },
                              {
                                "description": "Validate number is less than a value. By default, this will check if value is less than or equals to",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "lessThan"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "value"
                                    ],
                                    "properties": {
                                      "value": {
                                        "type": "number",
                                        "description": "The value to compare against",
                                        "example": 42,
                                        "x-examples": [
                                          42
                                        ]
                                      },
                                      "precision": {
                                        "type": "integer",
                                        "description": "When number is a float, this will set the decimal precision",
                                        "minimum": 1,
                                        "maximum": 8,
                                        "default": 3
                                      },
                                      "include": {
                                        "type": "boolean",
                                        "description": "Include the value in the check",
                                        "default": true
                                      }
                                    }
                                  }
                                }
                              },
                              {
                                "description": "Validate string matches an MAC address format",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "macAddress"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "description": "This validator has no options"
                                  }
                                }
                              },
                              {
                                "description": "Validate string matches a regular expression",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "mask"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "mask"
                                    ],
                                    "properties": {
                                      "mask": {
                                        "type": "string",
                                        "description": "Mask to validate against",
                                        "example": "^[a-z]$",
                                        "x-examples": [
                                          "^[a-z]$"
                                        ]
                                      }
                                    }
                                  }
                                }
                              },
                              {
                                "description": "Validate string starts with a value",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "startsWith"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "starts_with"
                                    ],
                                    "properties": {
                                      "starts_with": {
                                        "type": "string",
                                        "description": "String must start with this value",
                                        "example": "foo",
                                        "x-examples": [
                                          "foo"
                                        ]
                                      },
                                      "check_case": {
                                        "type": "boolean",
                                        "description": "Perform a case sensitive match. By default will not match case",
                                        "default": false
                                      }
                                    }
                                  }
                                }
                              },
                              {
                                "description": "Validates that a value follows a step. Both start and end options do not have to sync with the step. If they do not sync then find the nearest step.",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "step"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "step"
                                    ],
                                    "properties": {
                                      "step": {
                                        "type": "number",
                                        "description": "The step value",
                                        "example": 4,
                                        "x-examples": [
                                          4
                                        ]
                                      },
                                      "start": {
                                        "type": "integer",
                                        "description": "Start stepping at this value",
                                        "example": 0,
                                        "x-examples": [
                                          0
                                        ]
                                      },
                                      "end": {
                                        "type": "integer",
                                        "description": "End stepping at this value",
                                        "example": 16,
                                        "x-examples": [
                                          16
                                        ]
                                      }
                                    }
                                  }
                                }
                              },
                              {
                                "description": "Validate string matches an URI",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "uri"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "properties": {
                                      "schemes": {
                                        "type": "array",
                                        "description": "Schemes to match. By default all are matched",
                                        "example": [
                                          "http"
                                        ],
                                        "x-examples": [
                                          [
                                            "http"
                                          ]
                                        ],
                                        "items": {
                                          "type": "string",
                                          "enum": [
                                            "http",
                                            "https",
                                            "sip",
                                            "sips",
                                            "ftp",
                                            "ftps",
                                            "ldap",
                                            "ldaps",
                                            "file",
                                            "udp",
                                            "tcp",
                                            "urn"
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              },
                              {
                                "description": "Validate value matches a list (white list)",
                                "type": "object",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "enum": [
                                      "whiteList"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "list"
                                    ],
                                    "properties": {
                                      "list": {
                                        "type": "array",
                                        "minimum": 1,
                                        "maximum": 100,
                                        "description": "The list of approved values",
                                        "items": {
                                          "type": "string"
                                        },
                                        "example": [
                                          "foo",
                                          "bar",
                                          "fizz",
                                          "buzz"
                                        ],
                                        "x-examples": [
                                          [
                                            "foo",
                                            "bar",
                                            "fizz",
                                            "buzz"
                                          ]
                                        ]
                                      },
                                      "check_case": {
                                        "type": "boolean",
                                        "description": "Perform a case sensitive match. By default will not match case",
                                        "default": false
                                      }
                                    }
                                  }
                                }
                              }
                            ]
                          }
                        }
                      }
                    },
                    "example": [
                      {
                        "label": "Serial Number",
                        "key": "bluetooh-mac-address",
                        "filters": [
                          {
                            "type": "empty",
                            "options": {}
                          },
                          {
                            "type": "camel",
                            "options": {}
                          },
                          {
                            "type": "camel",
                            "options": {}
                          },
                          {
                            "type": "trim",
                            "options": {
                              "start": false,
                              "end": false
                            }
                          },
                          {
                            "type": "suffix",
                            "options": {
                              "suffix": "MAN"
                            }
                          }
                        ],
                        "validators": [
                          {
                            "type": "uri",
                            "options": {
                              "schemes": [
                                "http"
                              ]
                            }
                          }
                        ]
                      },
                      {
                        "label": "Asset tag",
                        "key": "wifi-mac-address",
                        "filters": [
                          {
                            "type": "trim",
                            "options": {
                              "start": true,
                              "end": false
                            }
                          },
                          {
                            "type": "prefix",
                            "options": {
                              "prefix": "MAN-"
                            }
                          }
                        ],
                        "validators": [
                          {
                            "type": "lessThan",
                            "options": {
                              "value": 42,
                              "precision": 4,
                              "include": true
                            }
                          },
                          {
                            "type": "hostname",
                            "options": {
                              "record_type": "HIP"
                            }
                          },
                          {
                            "type": "ends_with",
                            "options": {
                              "ends_with": "foo",
                              "check_case": false
                            }
                          }
                        ]
                      }
                    ]
                  }
                },
                "allOf": [
                  {
                    "x-ui-hide": true,
                    "type": "object",
                    "description": "Common Properties to all entities",
                    "required": [
                      "label"
                    ],
                    "properties": {
                      "label": {
                        "type": "string",
                        "description": "Label for the entity",
                        "example": "primary"
                      },
                      "slug": {
                        "type": "string",
                        "description": "Slug for the entity (Auto-generated from the label)",
                        "readOnly": true,
                        "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$"
                      },
                      "created": {
                        "description": "Date the entity was created",
                        "type": "string",
                        "format": "date-time",
                        "readOnly": true
                      },
                      "updated": {
                        "description": "Last date the entity was updated",
                        "type": "string",
                        "format": "date-time",
                        "readOnly": true
                      }
                    }
                  }
                ],
                "example": {
                  "label": "10\" iPad",
                  "part_id": "ec5db56d-32e6-4e5d-9bef-1016f3e13670",
                  "customer": {
                    "label": "Zones Inc",
                    "customer_id": "e530652e-28e8-4f64-84af-e1cf0ff7c805",
                    "slug": "zones-inc",
                    "external_platform": {
                      "ax_customer_id": "eff3ada3-0966-42be-a5e8-78efd3c52d39"
                    },
                    "allowed_statuses": [
                      {
                        "status": "Reticulating Splines",
                        "category": "IN_PROGRESS"
                      }
                    ],
                    "created": "1992-08-12T08:06:10.993Z",
                    "updated": "2002-08-23T06:46:31.317Z"
                  },
                  "manufacturer": {
                    "part_number": "602-3075-01",
                    "label": "Apple Inc",
                    "manufacturer_id": "0cF15DfC-586c-bd1b-ADeb-95Ce468beee7",
                    "slug": "apple-inc",
                    "created": "2016-07-11T22:09:20.498Z",
                    "updated": "1942-12-06T05:12:04.745Z"
                  },
                  "slug": "10-ipad",
                  "serial_prefix": "S",
                  "input_filter": [
                    {
                      "label": "Bluetooh MAC address",
                      "key": "asset-tag",
                      "filters": [
                        {
                          "type": "date",
                          "options": {}
                        },
                        {
                          "type": "date",
                          "options": {}
                        },
                        {
                          "type": "allowed_list",
                          "options": {
                            "approved_values": [
                              "foo",
                              "bar",
                              "fizz",
                              "buzz"
                            ],
                            "check_case": false,
                            "default": "fizz"
                          }
                        },
                        {
                          "type": "number",
                          "options": {}
                        }
                      ],
                      "validators": [
                        {
                          "type": "lessThan",
                          "options": {
                            "value": 42,
                            "precision": 3,
                            "include": true
                          }
                        },
                        {
                          "type": "whiteList",
                          "options": {
                            "list": [
                              "foo",
                              "bar",
                              "fizz",
                              "buzz"
                            ],
                            "check_case": true
                          }
                        },
                        {
                          "type": "macAddress",
                          "options": {}
                        },
                        {
                          "type": "macAddress",
                          "options": {}
                        },
                        {
                          "type": "contains",
                          "options": {
                            "contains": "foo",
                            "check_case": true
                          }
                        }
                      ]
                    }
                  ],
                  "created": "1999-04-30T19:19:03.277Z",
                  "updated": "1971-01-10T16:33:44.126Z"
                }
              },
              "total": {
                "type": "integer",
                "format": "int32",
                "minimum": 1,
                "description": "number of units needed",
                "example": 4,
                "x-examples": [
                  4
                ]
              },
              "total_by_allocation": {
                "type": "object",
                "properties": {
                  "allocated": {
                    "type": "integer",
                    "format": "int32",
                    "minimum": 0,
                    "description": "number of units needed to be allocated",
                    "example": 6,
                    "x-examples": [
                      6
                    ]
                  },
                  "unallocated": {
                    "type": "integer",
                    "format": "int32",
                    "minimum": 0,
                    "description": "number of units needed to be unallocated",
                    "example": 1,
                    "x-examples": [
                      1
                    ]
                  },
                  "enters_allocated": {
                    "type": "boolean",
                    "description": "Weather the unit starts allocated",
                    "example": false
                  },
                  "leaves_allocated": {
                    "type": "boolean",
                    "description": "Weather the unit ends allocated",
                    "example": false
                  }
                }
              },
              "total_by_status": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "total": {
                      "type": "integer",
                      "format": "int32",
                      "minimum": 1,
                      "description": "number of units needed at this status",
                      "example": 1,
                      "x-examples": [
                        1
                      ]
                    },
                    "enters_at": {
                      "type": "boolean",
                      "description": "Weather the unit is required to have this status at the start of the workflow",
                      "example": false
                    },
                    "leaves_at": {
                      "type": "boolean",
                      "description": "Weather the unit is has this status at the end of the workflow",
                      "example": false
                    },
                    "status": {
                      "x-id": "#status",
                      "x-nter-relation": "statuses",
                      "x-nter-model": "Status",
                      "x-nter-callable": true,
                      "x-ui-hide": true,
                      "description": "Defines the properties for a status",
                      "type": "object",
                      "required": [
                        "status",
                        "status_category"
                      ],
                      "properties": {
                        "status": {
                          "type": "string",
                          "description": "A Custom label for the status",
                          "x-examples": [
                            "Pending",
                            "In Progress",
                            "Verifying",
                            "Complete",
                            "Cancelled",
                            "Blocked",
                            "Reticulating Splines"
                          ]
                        },
                        "category": {
                          "type": "string",
                          "description": "The classifier for the statues",
                          "x-examples": [
                            "PENDING",
                            "IN_PROGRESS",
                            "VERIFYING",
                            "COMPLETE",
                            "CANCELLED",
                            "BLOCKED"
                          ],
                          "enum": [
                            "PENDING",
                            "IN_PROGRESS",
                            "VERIFYING",
                            "COMPLETE",
                            "CANCELLED",
                            "BLOCKED"
                          ]
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "workflow": {
          "type": "object",
          "description": "The workflow",
          "allOf": [
            {
              "x-id": "#workflow",
              "x-nter-relation": "work-flows",
              "x-nter-model": "WorkFlow",
              "x-nter-callable": true,
              "type": "object",
              "description": "Workflow",
              "required": [
                "steps",
                "starts_at",
                "label",
                "workflow_id",
                "applies_to"
              ],
              "properties": {
                "workflow_id": {
                  "type": "string",
                  "description": "Customer identifier",
                  "example": "e530652e-28e8-4f64-84af-e1cf0ff7c805",
                  "x-examples": [
                    "e530652e-28e8-4f64-84af-e1cf0ff7c805"
                  ],
                  "pattern": "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"
                },
                "label": {
                  "type": "string",
                  "example": "MLTI iPad Assembly Assignment",
                  "x-examples": [
                    "MLTI iPad Assembly Assignment"
                  ],
                  "description": "Label for the workflow"
                },
                "slug": {
                  "type": "string",
                  "description": "Auto-generated slug for the workflow",
                  "example": "mlti-ipad-assembly-assignment",
                  "x-examples": [
                    "mlti-ipad-assembly-assignment"
                  ]
                },
                "version": {
                  "type": "string",
                  "description": "Version of the workflow schema used",
                  "enum": [
                    "1.0"
                  ],
                  "example": "1.0"
                },
                "workflow_version": {
                  "type": "integer",
                  "format": "int32",
                  "example": 7,
                  "x-examples": [
                    7
                  ],
                  "readOnly": true,
                  "description": "Version number for the work flows (the number of times it has been changed"
                },
                "applies_to": {
                  "type": "string",
                  "description": "The entity type this work flow applies too",
                  "enum": [
                    "unit",
                    "part",
                    "program",
                    "project",
                    "customer",
                    "contact"
                  ],
                  "example": "unit"
                },
                "starts_at": {
                  "type": "string",
                  "description": "Starting step",
                  "example": "entry",
                  "x-examples": [
                    "entry"
                  ]
                },
                "context": {
                  "type": "array",
                  "description": "Initial values to set on the context",
                  "items": {
                    "type": "object",
                    "required": [
                      "key",
                      "value"
                    ],
                    "properties": {
                      "key": {
                        "type": "string",
                        "description": "The context key to set",
                        "example": "$.fizz",
                        "x-examples": [
                          "$.fizz",
                          "$.unit.status",
                          "extract_fields"
                        ]
                      },
                      "value": {
                        "type": "string",
                        "description": "Value to set",
                        "example": "$.buzz",
                        "x-examples": [
                          "$.buzz",
                          "Pending",
                          true
                        ]
                      },
                      "lock": {
                        "type": "boolean",
                        "description": "Prevents other steps from writing this value",
                        "example": true
                      },
                      "ignore": {
                        "type": "boolean",
                        "description": "When trying to set a locked key, do not fail",
                        "example": false
                      }
                    }
                  }
                },
                "steps": {
                  "type": "object",
                  "description": "Steps for the workflow",
                  "x-patternProperties": {
                    "(confirm|success|fail|manual|run-ace|follow)": {
                      "type": "object",
                      "allOf": [
                        {
                          "type": "object",
                          "description": "Close step",
                          "required": [
                            "step"
                          ],
                          "properties": {
                            "step": {
                              "type": "string",
                              "description": "Step to mark as complete",
                              "pattern": "^[a-z][a-z-]+[a-z]$",
                              "example": "complete",
                              "x-examples": [
                                "complete"
                              ]
                            }
                          },
                          "anyOf": [
                            {
                              "type": "object",
                              "description": "Require the user confirm an action. This is normally used when Niagara cannot automatically detect that a task or action has been performed.",
                              "x-nter-step-component": "confirm-action",
                              "properties": {
                                "label": {
                                  "x-examples": [
                                    "Confirm the device has powered off"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "component",
                                    "payload"
                                  ],
                                  "properties": {
                                    "component": {
                                      "enum": [
                                        "confirm-action"
                                      ],
                                      "example": "confirm-action",
                                      "x-examples": [
                                        "confirm-action"
                                      ]
                                    },
                                    "payload": {
                                      "type": "object",
                                      "required": [
                                        "message"
                                      ],
                                      "properties": {
                                        "message": {
                                          "type": "string",
                                          "description": "The confirmation message to display to the user",
                                          "example": "Device powered off?",
                                          "x-examples": [
                                            "Device powered off?"
                                          ]
                                        },
                                        "negative_message": {
                                          "type": "string",
                                          "description": "An optional inverse message",
                                          "nullable": true,
                                          "example": "Device not functioning",
                                          "x-examples": [
                                            "Device not functioning"
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "description": "A step which requires a user to complete",
                                  "required": [
                                    "type",
                                    "options"
                                  ],
                                  "properties": {
                                    "type": {
                                      "example": "user",
                                      "x-examples": [
                                        "user"
                                      ]
                                    },
                                    "options": {
                                      "type": "object",
                                      "required": [
                                        "component",
                                        "payload"
                                      ],
                                      "properties": {
                                        "component": {
                                          "type": "string",
                                          "description": "Name of the function to invoke",
                                          "example": "assignUnitsFromCustomerToProject",
                                          "x-examples": [
                                            "assignUnitsFromCustomerToProject"
                                          ]
                                        },
                                        "payload": {
                                          "type": "object"
                                        }
                                      }
                                    }
                                  },
                                  "allOf": [
                                    {
                                      "type": "object",
                                      "x-ui-hide": true,
                                      "required": [
                                        "type",
                                        "label",
                                        "goto"
                                      ],
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "Type of workflow step",
                                          "enum": [
                                            "load",
                                            "choice",
                                            "function",
                                            "machine",
                                            "pass",
                                            "fail",
                                            "success",
                                            "user",
                                            "wait"
                                          ]
                                        },
                                        "label": {
                                          "type": "string",
                                          "description": "Label for the step",
                                          "example": "Find units",
                                          "x-examples": [
                                            "Find units"
                                          ]
                                        },
                                        "goto": {
                                          "type": "string",
                                          "description": "Step to move to",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "complete",
                                          "x-examples": [
                                            "complete"
                                          ]
                                        },
                                        "goto-fail": {
                                          "type": "string",
                                          "description": "Step to transition too if this step cannot be completed",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "process-fail",
                                          "x-examples": [
                                            "process-fail"
                                          ]
                                        },
                                        "context": {
                                          "type": "array",
                                          "description": "Initial values to set on the context",
                                          "items": {
                                            "type": "object",
                                            "required": [
                                              "key",
                                              "value"
                                            ],
                                            "properties": {
                                              "key": {
                                                "type": "string",
                                                "description": "The context key to set",
                                                "example": "$.fizz",
                                                "x-examples": [
                                                  "$.fizz",
                                                  "$.unit.status",
                                                  "extract_fields"
                                                ]
                                              },
                                              "value": {
                                                "type": "string",
                                                "description": "Value to set",
                                                "example": "$.buzz",
                                                "x-examples": [
                                                  "$.buzz",
                                                  "Pending",
                                                  true
                                                ]
                                              },
                                              "lock": {
                                                "type": "boolean",
                                                "description": "Prevents other steps from writing this value",
                                                "example": true
                                              },
                                              "ignore": {
                                                "type": "boolean",
                                                "description": "When trying to set a locked key, do not fail",
                                                "example": false
                                              }
                                            }
                                          }
                                        },
                                        "onError": {
                                          "type": "object",
                                          "description": "Action to take when step fails",
                                          "required": [
                                            "finally"
                                          ],
                                          "properties": {
                                            "retry": {
                                              "type": "integer",
                                              "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                              "minimum": 0,
                                              "maximum": 10,
                                              "example": 3,
                                              "default": 0
                                            },
                                            "finally": {
                                              "type": "object",
                                              "description": "What to do after all retries",
                                              "required": [
                                                "goto"
                                              ],
                                              "properties": {
                                                "actions": {
                                                  "type": "array",
                                                  "description": "Actions to take on failure",
                                                  "items": {
                                                    "anyOf": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "type": {
                                                            "type": "string",
                                                            "description": "The type of the action",
                                                            "enum": [
                                                              "email"
                                                            ]
                                                          },
                                                          "options": {
                                                            "type": "object",
                                                            "description": "settings for the action",
                                                            "additionalProperties": {
                                                              "type": "string"
                                                            },
                                                            "x-examples": [
                                                              {
                                                                "to": "bob@example.com",
                                                                "from": "alice@example.com"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  }
                                                },
                                                "goto": {
                                                  "type": "string",
                                                  "description": "Step to transition to on failure",
                                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                                  "example": "failed",
                                                  "x-examples": [
                                                    "failed"
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        },
                                        "onComplete": {
                                          "type": "object",
                                          "description": "Actions to take when the step completes",
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "object",
                              "description": "Display a link or modal to a user which contains instructions from a PDF",
                              "x-nter-step-component": "follow-pdf-instructions",
                              "required": [
                                "label",
                                "payload"
                              ],
                              "properties": {
                                "label": {
                                  "x-examples": [
                                    "Instruct user to follow steps outlined in Apple PDF"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "component",
                                    "payload"
                                  ],
                                  "properties": {
                                    "component": {
                                      "enum": [
                                        "follow-pds-instructions"
                                      ],
                                      "example": "follow-pdf-instructions",
                                      "x-examples": [
                                        "follow-pdf-instructions"
                                      ]
                                    },
                                    "payload": {
                                      "type": "object",
                                      "required": [
                                        "attachment_id"
                                      ],
                                      "properties": {
                                        "attachment_id": {
                                          "type": "string",
                                          "description": "UUID for the attachment",
                                          "format": "uuid",
                                          "example": "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7",
                                          "x-examples": [
                                            "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7"
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "description": "A step which requires a user to complete",
                                  "required": [
                                    "type",
                                    "options"
                                  ],
                                  "properties": {
                                    "type": {
                                      "example": "user",
                                      "x-examples": [
                                        "user"
                                      ]
                                    },
                                    "options": {
                                      "type": "object",
                                      "required": [
                                        "component",
                                        "payload"
                                      ],
                                      "properties": {
                                        "component": {
                                          "type": "string",
                                          "description": "Name of the function to invoke",
                                          "example": "assignUnitsFromCustomerToProject",
                                          "x-examples": [
                                            "assignUnitsFromCustomerToProject"
                                          ]
                                        },
                                        "payload": {
                                          "type": "object"
                                        }
                                      }
                                    }
                                  },
                                  "allOf": [
                                    {
                                      "type": "object",
                                      "x-ui-hide": true,
                                      "required": [
                                        "type",
                                        "label",
                                        "goto"
                                      ],
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "Type of workflow step",
                                          "enum": [
                                            "load",
                                            "choice",
                                            "function",
                                            "machine",
                                            "pass",
                                            "fail",
                                            "success",
                                            "user",
                                            "wait"
                                          ]
                                        },
                                        "label": {
                                          "type": "string",
                                          "description": "Label for the step",
                                          "example": "Find units",
                                          "x-examples": [
                                            "Find units"
                                          ]
                                        },
                                        "goto": {
                                          "type": "string",
                                          "description": "Step to move to",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "complete",
                                          "x-examples": [
                                            "complete"
                                          ]
                                        },
                                        "goto-fail": {
                                          "type": "string",
                                          "description": "Step to transition too if this step cannot be completed",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "process-fail",
                                          "x-examples": [
                                            "process-fail"
                                          ]
                                        },
                                        "context": {
                                          "type": "array",
                                          "description": "Initial values to set on the context",
                                          "items": {
                                            "type": "object",
                                            "required": [
                                              "key",
                                              "value"
                                            ],
                                            "properties": {
                                              "key": {
                                                "type": "string",
                                                "description": "The context key to set",
                                                "example": "$.fizz",
                                                "x-examples": [
                                                  "$.fizz",
                                                  "$.unit.status",
                                                  "extract_fields"
                                                ]
                                              },
                                              "value": {
                                                "type": "string",
                                                "description": "Value to set",
                                                "example": "$.buzz",
                                                "x-examples": [
                                                  "$.buzz",
                                                  "Pending",
                                                  true
                                                ]
                                              },
                                              "lock": {
                                                "type": "boolean",
                                                "description": "Prevents other steps from writing this value",
                                                "example": true
                                              },
                                              "ignore": {
                                                "type": "boolean",
                                                "description": "When trying to set a locked key, do not fail",
                                                "example": false
                                              }
                                            }
                                          }
                                        },
                                        "onError": {
                                          "type": "object",
                                          "description": "Action to take when step fails",
                                          "required": [
                                            "finally"
                                          ],
                                          "properties": {
                                            "retry": {
                                              "type": "integer",
                                              "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                              "minimum": 0,
                                              "maximum": 10,
                                              "example": 3,
                                              "default": 0
                                            },
                                            "finally": {
                                              "type": "object",
                                              "description": "What to do after all retries",
                                              "required": [
                                                "goto"
                                              ],
                                              "properties": {
                                                "actions": {
                                                  "type": "array",
                                                  "description": "Actions to take on failure",
                                                  "items": {
                                                    "anyOf": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "type": {
                                                            "type": "string",
                                                            "description": "The type of the action",
                                                            "enum": [
                                                              "email"
                                                            ]
                                                          },
                                                          "options": {
                                                            "type": "object",
                                                            "description": "settings for the action",
                                                            "additionalProperties": {
                                                              "type": "string"
                                                            },
                                                            "x-examples": [
                                                              {
                                                                "to": "bob@example.com",
                                                                "from": "alice@example.com"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  }
                                                },
                                                "goto": {
                                                  "type": "string",
                                                  "description": "Step to transition to on failure",
                                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                                  "example": "failed",
                                                  "x-examples": [
                                                    "failed"
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        },
                                        "onComplete": {
                                          "type": "object",
                                          "description": "Actions to take when the step completes",
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "object",
                              "description": "Ask the user to manually enter (or confirm) data for an entity",
                              "x-nter-step-component": "manual-data-entry",
                              "properties": {
                                "label": {
                                  "x-examples": [
                                    "Enter asset tag and confirm serial number"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "component",
                                    "payload"
                                  ],
                                  "properties": {
                                    "component": {
                                      "enum": [
                                        "manual-data-entry"
                                      ],
                                      "example": "manual-data-entry",
                                      "x-examples": [
                                        "manual-data-entry"
                                      ]
                                    },
                                    "payload": {
                                      "type": "object",
                                      "required": [
                                        "fields"
                                      ],
                                      "properties": {
                                        "fields": {
                                          "type": "array",
                                          "description": "Configuration for each field",
                                          "items": {
                                            "type": "object",
                                            "required": [
                                              "input_type",
                                              "label",
                                              "required",
                                              "entity_field"
                                            ],
                                            "properties": {
                                              "input_type": {
                                                "type": "string",
                                                "description": "The type of input field to display",
                                                "enum": [
                                                  "textbox",
                                                  "input"
                                                ]
                                              },
                                              "label": {
                                                "type": "string",
                                                "description": "Label to display for the field",
                                                "example": "Asset Tag",
                                                "x-examples": [
                                                  "Asset Tag"
                                                ]
                                              },
                                              "required": {
                                                "type": "boolean",
                                                "description": "Display the field as required input. Note: this is a helper function. It singles that the user is required to input data at this step. If the field is required on the entity, the user will be presented with a validation message",
                                                "example": true
                                              },
                                              "entity_field": {
                                                "type": "string",
                                                "description": "JSON Path to the field on the entity. If the path does not start with '$' then the entity on the context is assumed. Otherwise the data will be set on the context path",
                                                "example": "input_filter[?(@.key = 'asset-tag')]",
                                                "x-examples": [
                                                  "input_filter[?(@.key = 'asset-tag')]"
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "description": "A step which requires a user to complete",
                                  "required": [
                                    "type",
                                    "options"
                                  ],
                                  "properties": {
                                    "type": {
                                      "example": "user",
                                      "x-examples": [
                                        "user"
                                      ]
                                    },
                                    "options": {
                                      "type": "object",
                                      "required": [
                                        "component",
                                        "payload"
                                      ],
                                      "properties": {
                                        "component": {
                                          "type": "string",
                                          "description": "Name of the function to invoke",
                                          "example": "assignUnitsFromCustomerToProject",
                                          "x-examples": [
                                            "assignUnitsFromCustomerToProject"
                                          ]
                                        },
                                        "payload": {
                                          "type": "object"
                                        }
                                      }
                                    }
                                  },
                                  "allOf": [
                                    {
                                      "type": "object",
                                      "x-ui-hide": true,
                                      "required": [
                                        "type",
                                        "label",
                                        "goto"
                                      ],
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "Type of workflow step",
                                          "enum": [
                                            "load",
                                            "choice",
                                            "function",
                                            "machine",
                                            "pass",
                                            "fail",
                                            "success",
                                            "user",
                                            "wait"
                                          ]
                                        },
                                        "label": {
                                          "type": "string",
                                          "description": "Label for the step",
                                          "example": "Find units",
                                          "x-examples": [
                                            "Find units"
                                          ]
                                        },
                                        "goto": {
                                          "type": "string",
                                          "description": "Step to move to",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "complete",
                                          "x-examples": [
                                            "complete"
                                          ]
                                        },
                                        "goto-fail": {
                                          "type": "string",
                                          "description": "Step to transition too if this step cannot be completed",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "process-fail",
                                          "x-examples": [
                                            "process-fail"
                                          ]
                                        },
                                        "context": {
                                          "type": "array",
                                          "description": "Initial values to set on the context",
                                          "items": {
                                            "type": "object",
                                            "required": [
                                              "key",
                                              "value"
                                            ],
                                            "properties": {
                                              "key": {
                                                "type": "string",
                                                "description": "The context key to set",
                                                "example": "$.fizz",
                                                "x-examples": [
                                                  "$.fizz",
                                                  "$.unit.status",
                                                  "extract_fields"
                                                ]
                                              },
                                              "value": {
                                                "type": "string",
                                                "description": "Value to set",
                                                "example": "$.buzz",
                                                "x-examples": [
                                                  "$.buzz",
                                                  "Pending",
                                                  true
                                                ]
                                              },
                                              "lock": {
                                                "type": "boolean",
                                                "description": "Prevents other steps from writing this value",
                                                "example": true
                                              },
                                              "ignore": {
                                                "type": "boolean",
                                                "description": "When trying to set a locked key, do not fail",
                                                "example": false
                                              }
                                            }
                                          }
                                        },
                                        "onError": {
                                          "type": "object",
                                          "description": "Action to take when step fails",
                                          "required": [
                                            "finally"
                                          ],
                                          "properties": {
                                            "retry": {
                                              "type": "integer",
                                              "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                              "minimum": 0,
                                              "maximum": 10,
                                              "example": 3,
                                              "default": 0
                                            },
                                            "finally": {
                                              "type": "object",
                                              "description": "What to do after all retries",
                                              "required": [
                                                "goto"
                                              ],
                                              "properties": {
                                                "actions": {
                                                  "type": "array",
                                                  "description": "Actions to take on failure",
                                                  "items": {
                                                    "anyOf": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "type": {
                                                            "type": "string",
                                                            "description": "The type of the action",
                                                            "enum": [
                                                              "email"
                                                            ]
                                                          },
                                                          "options": {
                                                            "type": "object",
                                                            "description": "settings for the action",
                                                            "additionalProperties": {
                                                              "type": "string"
                                                            },
                                                            "x-examples": [
                                                              {
                                                                "to": "bob@example.com",
                                                                "from": "alice@example.com"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  }
                                                },
                                                "goto": {
                                                  "type": "string",
                                                  "description": "Step to transition to on failure",
                                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                                  "example": "failed",
                                                  "x-examples": [
                                                    "failed"
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        },
                                        "onComplete": {
                                          "type": "object",
                                          "description": "Actions to take when the step completes",
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "object",
                              "description": "Ask the user to follow a list and check off boxes",
                              "x-nter-step-component": "task-list",
                              "properties": {
                                "label": {
                                  "x-examples": [
                                    "Enter asset tag and confirm serial number"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "component",
                                    "payload"
                                  ],
                                  "properties": {
                                    "component": {
                                      "enum": [
                                        "task-list"
                                      ],
                                      "example": "task-list",
                                      "x-examples": [
                                        "task-list"
                                      ]
                                    },
                                    "payload": {
                                      "type": "object",
                                      "required": [
                                        "items"
                                      ],
                                      "properties": {
                                        "is_qc": {
                                          "type": "boolean",
                                          "description": "Flags this list as a QC task list. This means that a different user can close the task to one previously on the context"
                                        },
                                        "items": {
                                          "type": "array",
                                          "description": "Configuration for each task list item",
                                          "items": {
                                            "type": "object",
                                            "required": [
                                              "label",
                                              "help",
                                              "evaluated",
                                              "na_option"
                                            ],
                                            "properties": {
                                              "label": {
                                                "type": "string",
                                                "description": "Label to display for the field",
                                                "example": "Asset Tag placement",
                                                "x-examples": [
                                                  "Asset Tag placement"
                                                ]
                                              },
                                              "slug": {
                                                "type": "string",
                                                "description": "Slug for the item (Auto-generated from the label)",
                                                "readOnly": true,
                                                "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$",
                                                "example": "asset-tag-placement",
                                                "x-examples": [
                                                  "asset-tag-placement"
                                                ]
                                              },
                                              "help": {
                                                "type": "string",
                                                "description": "Message describing what is needed to be checked",
                                                "example": "Asset Tag attached to the unit in the correct position",
                                                "x-examples": [
                                                  "Asset Tag attached to the unit in the correct position"
                                                ]
                                              },
                                              "evaluated": {
                                                "type": "boolean",
                                                "description": "When set to true, this will fail the step if the value for the item is false or N/A",
                                                "example": true
                                              },
                                              "na_field": {
                                                "type": "boolean",
                                                "description": "Allow the user to select the N/A option when checking off the list",
                                                "example": true
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "description": "A step which requires a user to complete",
                                  "required": [
                                    "type",
                                    "options"
                                  ],
                                  "properties": {
                                    "type": {
                                      "example": "user",
                                      "x-examples": [
                                        "user"
                                      ]
                                    },
                                    "options": {
                                      "type": "object",
                                      "required": [
                                        "component",
                                        "payload"
                                      ],
                                      "properties": {
                                        "component": {
                                          "type": "string",
                                          "description": "Name of the function to invoke",
                                          "example": "assignUnitsFromCustomerToProject",
                                          "x-examples": [
                                            "assignUnitsFromCustomerToProject"
                                          ]
                                        },
                                        "payload": {
                                          "type": "object"
                                        }
                                      }
                                    }
                                  },
                                  "allOf": [
                                    {
                                      "type": "object",
                                      "x-ui-hide": true,
                                      "required": [
                                        "type",
                                        "label",
                                        "goto"
                                      ],
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "Type of workflow step",
                                          "enum": [
                                            "load",
                                            "choice",
                                            "function",
                                            "machine",
                                            "pass",
                                            "fail",
                                            "success",
                                            "user",
                                            "wait"
                                          ]
                                        },
                                        "label": {
                                          "type": "string",
                                          "description": "Label for the step",
                                          "example": "Find units",
                                          "x-examples": [
                                            "Find units"
                                          ]
                                        },
                                        "goto": {
                                          "type": "string",
                                          "description": "Step to move to",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "complete",
                                          "x-examples": [
                                            "complete"
                                          ]
                                        },
                                        "goto-fail": {
                                          "type": "string",
                                          "description": "Step to transition too if this step cannot be completed",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "process-fail",
                                          "x-examples": [
                                            "process-fail"
                                          ]
                                        },
                                        "context": {
                                          "type": "array",
                                          "description": "Initial values to set on the context",
                                          "items": {
                                            "type": "object",
                                            "required": [
                                              "key",
                                              "value"
                                            ],
                                            "properties": {
                                              "key": {
                                                "type": "string",
                                                "description": "The context key to set",
                                                "example": "$.fizz",
                                                "x-examples": [
                                                  "$.fizz",
                                                  "$.unit.status",
                                                  "extract_fields"
                                                ]
                                              },
                                              "value": {
                                                "type": "string",
                                                "description": "Value to set",
                                                "example": "$.buzz",
                                                "x-examples": [
                                                  "$.buzz",
                                                  "Pending",
                                                  true
                                                ]
                                              },
                                              "lock": {
                                                "type": "boolean",
                                                "description": "Prevents other steps from writing this value",
                                                "example": true
                                              },
                                              "ignore": {
                                                "type": "boolean",
                                                "description": "When trying to set a locked key, do not fail",
                                                "example": false
                                              }
                                            }
                                          }
                                        },
                                        "onError": {
                                          "type": "object",
                                          "description": "Action to take when step fails",
                                          "required": [
                                            "finally"
                                          ],
                                          "properties": {
                                            "retry": {
                                              "type": "integer",
                                              "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                              "minimum": 0,
                                              "maximum": 10,
                                              "example": 3,
                                              "default": 0
                                            },
                                            "finally": {
                                              "type": "object",
                                              "description": "What to do after all retries",
                                              "required": [
                                                "goto"
                                              ],
                                              "properties": {
                                                "actions": {
                                                  "type": "array",
                                                  "description": "Actions to take on failure",
                                                  "items": {
                                                    "anyOf": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "type": {
                                                            "type": "string",
                                                            "description": "The type of the action",
                                                            "enum": [
                                                              "email"
                                                            ]
                                                          },
                                                          "options": {
                                                            "type": "object",
                                                            "description": "settings for the action",
                                                            "additionalProperties": {
                                                              "type": "string"
                                                            },
                                                            "x-examples": [
                                                              {
                                                                "to": "bob@example.com",
                                                                "from": "alice@example.com"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  }
                                                },
                                                "goto": {
                                                  "type": "string",
                                                  "description": "Step to transition to on failure",
                                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                                  "example": "failed",
                                                  "x-examples": [
                                                    "failed"
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        },
                                        "onComplete": {
                                          "type": "object",
                                          "description": "Actions to take when the step completes",
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "object",
                              "description": "Run the ACE-IOS application to provision iOS devices or ",
                              "properties": {
                                "type": {
                                  "example": "machine",
                                  "x-examples": [
                                    "machine"
                                  ]
                                },
                                "label": {
                                  "x-examples": [
                                    "Run Application"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "application",
                                    "configuration"
                                  ],
                                  "properties": {
                                    "configuration": {
                                      "type": "object",
                                      "description": "ACE Configuration options",
                                      "properties": {
                                        "pairing_cert": {
                                          "type": "string",
                                          "format": "base64",
                                          "description": "Contents of a *.crt file exported from Apple Configurator or MDM",
                                          "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                          "x-examples": [
                                            "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                          ],
                                          "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                        },
                                        "pairing_key": {
                                          "type": "string",
                                          "format": "base64",
                                          "description": "Contents of a *.der file exported from Apple Configurator or MDM",
                                          "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                          "x-examples": [
                                            "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                          ],
                                          "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                        },
                                        "restore_device": {
                                          "type": "boolean",
                                          "description": "Restore device to factory defaults"
                                        },
                                        "automated_enrollment": {
                                          "type": "boolean",
                                          "description": "Automatically enroll the device to MDM"
                                        },
                                        "mdm": {
                                          "type": "object",
                                          "format": "base64",
                                          "description": "The settings for the Customers MDM",
                                          "properties": {
                                            "vendor": {
                                              "type": "string",
                                              "description": "MDM vendor. Currently, supported values are AirWatch, JAMF, and Meraki.",
                                              "enum": [
                                                "AirWatch",
                                                "JAMF",
                                                "Meraki"
                                              ]
                                            },
                                            "console_url": {
                                              "type": "string",
                                              "format": "uri",
                                              "description": "Base URL for HTTP requests",
                                              "example": "http://jamf.zones.com",
                                              "x-examples": [
                                                "http://jamf.zones.com"
                                              ]
                                            },
                                            "user": {
                                              "type": "string",
                                              "description": "MDM User name",
                                              "example": "NterpriseBob",
                                              "x-examples": [
                                                "NterpriseBob"
                                              ]
                                            },
                                            "password": {
                                              "type": "string",
                                              "description": "MDM password"
                                            },
                                            "tenant_code": {
                                              "type": "string",
                                              "description": "MDM authentication key",
                                              "example": "nterprise",
                                              "x-examples": [
                                                "nterprise"
                                              ]
                                            },
                                            "set_asset_tag": {
                                              "type": "string",
                                              "description": "Sets the devices Asset tag based on a field from the unit",
                                              "example": "$._entity.input_filter[?(@.key = 'asset-tag')]",
                                              "x-examples": [
                                                "$._entity.input_filter[?(@.key = 'asset-tag')]"
                                              ]
                                            }
                                          }
                                        },
                                        "field_mappings": {
                                          "type": "array",
                                          "description": "List of fields to map to the device",
                                          "items": {
                                            "type": "object",
                                            "properties": {
                                              "from": {
                                                "type": "string",
                                                "description": "The field reported from ACE",
                                                "enum": [
                                                  "serial_number",
                                                  "name",
                                                  "ecid",
                                                  "udid",
                                                  "configurator_serial",
                                                  "ios",
                                                  "model",
                                                  "storage",
                                                  "wifi_mac",
                                                  "bt_mac",
                                                  "ethernet_mac",
                                                  "thundersync_serial",
                                                  "iccid",
                                                  "iccid2",
                                                  "imei",
                                                  "imei2",
                                                  "missed_profiles",
                                                  "missed_apps",
                                                  "icon_list_regex",
                                                  "icon_layout",
                                                  "bat_capacity"
                                                ]
                                              },
                                              "to": {
                                                "type": "string",
                                                "description": "Field to set on the entity",
                                                "example": "$._entity.input_filter[?(@.key = 'serial-number')]",
                                                "x-examples": [
                                                  "$._entity.input_filter[?(@.key = 'serial-number')]"
                                                ]
                                              }
                                            }
                                          }
                                        },
                                        "wait_for_apps": {
                                          "type": "array",
                                          "description": "A list of applications needed to be installed on the device. This will cause the extension to poll the device for installed applications. Once all the applications have been installed, this step can be completed",
                                          "items": {
                                            "type": "string",
                                            "format": "uri",
                                            "example": "com.apple.itunes",
                                            "x-examples": [
                                              "com.apple.itunes"
                                            ]
                                          }
                                        },
                                        "wait_for_battery_charge": {
                                          "type": "integer",
                                          "description": "The required battery percentage needed before this step can move on",
                                          "minimum": 0,
                                          "maximum": 100
                                        }
                                      }
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "description": "Run an application extension",
                                  "properties": {
                                    "label": {
                                      "x-examples": [
                                        "Run Application"
                                      ]
                                    },
                                    "options": {
                                      "type": "object",
                                      "required": [
                                        "application",
                                        "configuration"
                                      ],
                                      "properties": {
                                        "application": {
                                          "type": "object",
                                          "required": [
                                            "application_id",
                                            "platforms"
                                          ],
                                          "properties": {
                                            "application_id": {
                                              "type": "string",
                                              "description": "Registered application ID",
                                              "example": "ace-ios",
                                              "x-examples": [
                                                "ace-ios"
                                              ]
                                            },
                                            "platforms": {
                                              "type": "array",
                                              "description": "Allowed platforms the application can run on",
                                              "items": {
                                                "type": "object",
                                                "required": [
                                                  "platform",
                                                  "arch"
                                                ],
                                                "properties": {
                                                  "platform": {
                                                    "type": "string",
                                                    "description": "The platform (OS) the application can run on",
                                                    "enum": [
                                                      "aix",
                                                      "darwin",
                                                      "freebsd",
                                                      "linux",
                                                      "openbsd",
                                                      "sunos",
                                                      "win32"
                                                    ]
                                                  },
                                                  "arch": {
                                                    "type": "string",
                                                    "description": "The CPU architecture needed to run the application",
                                                    "enum": [
                                                      "arm",
                                                      "arm64",
                                                      "ia32",
                                                      "mips",
                                                      "mipsel",
                                                      "ppc",
                                                      "ppc64",
                                                      "s390",
                                                      "s390x",
                                                      "x32",
                                                      "x64"
                                                    ]
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "allOf": [
                                    {
                                      "type": "object",
                                      "x-ui-hide": true,
                                      "required": [
                                        "type",
                                        "label",
                                        "goto"
                                      ],
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "Type of workflow step",
                                          "enum": [
                                            "load",
                                            "choice",
                                            "function",
                                            "machine",
                                            "pass",
                                            "fail",
                                            "success",
                                            "user",
                                            "wait"
                                          ]
                                        },
                                        "label": {
                                          "type": "string",
                                          "description": "Label for the step",
                                          "example": "Find units",
                                          "x-examples": [
                                            "Find units"
                                          ]
                                        },
                                        "goto": {
                                          "type": "string",
                                          "description": "Step to move to",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "complete",
                                          "x-examples": [
                                            "complete"
                                          ]
                                        },
                                        "goto-fail": {
                                          "type": "string",
                                          "description": "Step to transition too if this step cannot be completed",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "process-fail",
                                          "x-examples": [
                                            "process-fail"
                                          ]
                                        },
                                        "context": {
                                          "type": "array",
                                          "description": "Initial values to set on the context",
                                          "items": {
                                            "type": "object",
                                            "required": [
                                              "key",
                                              "value"
                                            ],
                                            "properties": {
                                              "key": {
                                                "type": "string",
                                                "description": "The context key to set",
                                                "example": "$.fizz",
                                                "x-examples": [
                                                  "$.fizz",
                                                  "$.unit.status",
                                                  "extract_fields"
                                                ]
                                              },
                                              "value": {
                                                "type": "string",
                                                "description": "Value to set",
                                                "example": "$.buzz",
                                                "x-examples": [
                                                  "$.buzz",
                                                  "Pending",
                                                  true
                                                ]
                                              },
                                              "lock": {
                                                "type": "boolean",
                                                "description": "Prevents other steps from writing this value",
                                                "example": true
                                              },
                                              "ignore": {
                                                "type": "boolean",
                                                "description": "When trying to set a locked key, do not fail",
                                                "example": false
                                              }
                                            }
                                          }
                                        },
                                        "onError": {
                                          "type": "object",
                                          "description": "Action to take when step fails",
                                          "required": [
                                            "finally"
                                          ],
                                          "properties": {
                                            "retry": {
                                              "type": "integer",
                                              "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                              "minimum": 0,
                                              "maximum": 10,
                                              "example": 3,
                                              "default": 0
                                            },
                                            "finally": {
                                              "type": "object",
                                              "description": "What to do after all retries",
                                              "required": [
                                                "goto"
                                              ],
                                              "properties": {
                                                "actions": {
                                                  "type": "array",
                                                  "description": "Actions to take on failure",
                                                  "items": {
                                                    "anyOf": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "type": {
                                                            "type": "string",
                                                            "description": "The type of the action",
                                                            "enum": [
                                                              "email"
                                                            ]
                                                          },
                                                          "options": {
                                                            "type": "object",
                                                            "description": "settings for the action",
                                                            "additionalProperties": {
                                                              "type": "string"
                                                            },
                                                            "x-examples": [
                                                              {
                                                                "to": "bob@example.com",
                                                                "from": "alice@example.com"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  }
                                                },
                                                "goto": {
                                                  "type": "string",
                                                  "description": "Step to transition to on failure",
                                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                                  "example": "failed",
                                                  "x-examples": [
                                                    "failed"
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        },
                                        "onComplete": {
                                          "type": "object",
                                          "description": "Actions to take when the step completes",
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "label": {
                                  "example": "Is device ok?",
                                  "x-examples": [
                                    "Is device ok?"
                                  ]
                                },
                                "type": {
                                  "example": "choice",
                                  "x-examples": [
                                    "choice"
                                  ]
                                },
                                "choices": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "required": [
                                      "goto"
                                    ],
                                    "maxProperties": 2,
                                    "minProperties": 2,
                                    "maximum": 20,
                                    "properties": {
                                      "and": {
                                        "type": "array",
                                        "description": "All choices must be satisfied",
                                        "maximum": 5,
                                        "items": {
                                          "description": "A Step choice",
                                          "type": "object",
                                          "maxProperties": 2,
                                          "minProperties": 2,
                                          "required": [
                                            "variable"
                                          ],
                                          "properties": {
                                            "variable": {
                                              "type": "string",
                                              "description": "Context variable to check",
                                              "example": "$.parts.available",
                                              "x-examples": [
                                                "$.parts.available"
                                              ]
                                            },
                                            "greater_than_equals": {
                                              "type": "string",
                                              "description": "Value has to be greater than or equals to",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "less_than_equals": {
                                              "type": "string",
                                              "description": "Value has to be less than or equals to",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "greater_than": {
                                              "type": "string",
                                              "description": "Value has to be greater than",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "less_than": {
                                              "type": "string",
                                              "description": "Value has to be less than",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "equals": {
                                              "type": "string",
                                              "description": "Value has to equal",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "not_equals": {
                                              "type": "string",
                                              "description": "Value must not equal",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            }
                                          }
                                        }
                                      },
                                      "or": {
                                        "type": "array",
                                        "description": "Any of these choices must be satisfied",
                                        "maximum": 5,
                                        "items": {
                                          "description": "A Step choice",
                                          "type": "object",
                                          "maxProperties": 2,
                                          "minProperties": 2,
                                          "required": [
                                            "variable"
                                          ],
                                          "properties": {
                                            "variable": {
                                              "type": "string",
                                              "description": "Context variable to check",
                                              "example": "$.parts.available",
                                              "x-examples": [
                                                "$.parts.available"
                                              ]
                                            },
                                            "greater_than_equals": {
                                              "type": "string",
                                              "description": "Value has to be greater than or equals to",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "less_than_equals": {
                                              "type": "string",
                                              "description": "Value has to be less than or equals to",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "greater_than": {
                                              "type": "string",
                                              "description": "Value has to be greater than",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "less_than": {
                                              "type": "string",
                                              "description": "Value has to be less than",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "equals": {
                                              "type": "string",
                                              "description": "Value has to equal",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "not_equals": {
                                              "type": "string",
                                              "description": "Value must not equal",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            }
                                          }
                                        }
                                      },
                                      "not": {
                                        "type": "array",
                                        "description": "None of these choices must be satisfied",
                                        "maximum": 5,
                                        "items": {
                                          "description": "A Step choice",
                                          "type": "object",
                                          "maxProperties": 2,
                                          "minProperties": 2,
                                          "required": [
                                            "variable"
                                          ],
                                          "properties": {
                                            "variable": {
                                              "type": "string",
                                              "description": "Context variable to check",
                                              "example": "$.parts.available",
                                              "x-examples": [
                                                "$.parts.available"
                                              ]
                                            },
                                            "greater_than_equals": {
                                              "type": "string",
                                              "description": "Value has to be greater than or equals to",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "less_than_equals": {
                                              "type": "string",
                                              "description": "Value has to be less than or equals to",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "greater_than": {
                                              "type": "string",
                                              "description": "Value has to be greater than",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "less_than": {
                                              "type": "string",
                                              "description": "Value has to be less than",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "equals": {
                                              "type": "string",
                                              "description": "Value has to equal",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "not_equals": {
                                              "type": "string",
                                              "description": "Value must not equal",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            }
                                          }
                                        }
                                      },
                                      "goto": {
                                        "description": "Step to goto when condition is met",
                                        "allOf": [
                                          {
                                            "type": "string",
                                            "description": "Step to move to",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "complete",
                                            "x-examples": [
                                              "complete"
                                            ]
                                          }
                                        ]
                                      }
                                    }
                                  }
                                },
                                "goto": {
                                  "description": "Default step to goto when no choice can be made"
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "required": [
                                    "type",
                                    "label",
                                    "goto"
                                  ],
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    },
                                    "label": {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to move to",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "complete",
                                      "x-examples": [
                                        "complete"
                                      ]
                                    },
                                    "goto-fail": {
                                      "type": "string",
                                      "description": "Step to transition too if this step cannot be completed",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "process-fail",
                                      "x-examples": [
                                        "process-fail"
                                      ]
                                    },
                                    "context": {
                                      "type": "array",
                                      "description": "Initial values to set on the context",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "key",
                                          "value"
                                        ],
                                        "properties": {
                                          "key": {
                                            "type": "string",
                                            "description": "The context key to set",
                                            "example": "$.fizz",
                                            "x-examples": [
                                              "$.fizz",
                                              "$.unit.status",
                                              "extract_fields"
                                            ]
                                          },
                                          "value": {
                                            "type": "string",
                                            "description": "Value to set",
                                            "example": "$.buzz",
                                            "x-examples": [
                                              "$.buzz",
                                              "Pending",
                                              true
                                            ]
                                          },
                                          "lock": {
                                            "type": "boolean",
                                            "description": "Prevents other steps from writing this value",
                                            "example": true
                                          },
                                          "ignore": {
                                            "type": "boolean",
                                            "description": "When trying to set a locked key, do not fail",
                                            "example": false
                                          }
                                        }
                                      }
                                    },
                                    "onError": {
                                      "type": "object",
                                      "description": "Action to take when step fails",
                                      "required": [
                                        "finally"
                                      ],
                                      "properties": {
                                        "retry": {
                                          "type": "integer",
                                          "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                          "minimum": 0,
                                          "maximum": 10,
                                          "example": 3,
                                          "default": 0
                                        },
                                        "finally": {
                                          "type": "object",
                                          "description": "What to do after all retries",
                                          "required": [
                                            "goto"
                                          ],
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "description": "Actions to take on failure",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to transition to on failure",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "failed",
                                              "x-examples": [
                                                "failed"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "onComplete": {
                                      "type": "object",
                                      "description": "Actions to take when the step completes",
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            },
                            {
                              "type": "object",
                              "description": "Finial step which is marked as failed",
                              "properties": {
                                "label": {
                                  "example": "Failed",
                                  "x-examples": [
                                    "Failed"
                                  ],
                                  "allOf": [
                                    {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    }
                                  ]
                                },
                                "type": {
                                  "example": "fail",
                                  "x-examples": [
                                    "fail"
                                  ],
                                  "allOf": [
                                    {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    }
                                  ]
                                },
                                "onComplete": {
                                  "type": "object",
                                  "description": "Actions to take when the step completes",
                                  "properties": {
                                    "actions": {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "The type of the action",
                                                "enum": [
                                                  "email"
                                                ]
                                              },
                                              "options": {
                                                "type": "object",
                                                "description": "settings for the action",
                                                "additionalProperties": {
                                                  "type": "string"
                                                },
                                                "x-examples": [
                                                  {
                                                    "to": "bob@example.com",
                                                    "from": "alice@example.com"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            {
                              "type": "object",
                              "description": "Allows executing actions with out performing any function",
                              "properties": {
                                "label": {
                                  "example": "Send email to project manager",
                                  "x-examples": [
                                    "Send email to project manager"
                                  ]
                                },
                                "type": {
                                  "example": "pass",
                                  "x-examples": [
                                    "pass"
                                  ],
                                  "allOf": [
                                    {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    }
                                  ]
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "required": [
                                    "type",
                                    "label",
                                    "goto"
                                  ],
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    },
                                    "label": {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to move to",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "complete",
                                      "x-examples": [
                                        "complete"
                                      ]
                                    },
                                    "goto-fail": {
                                      "type": "string",
                                      "description": "Step to transition too if this step cannot be completed",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "process-fail",
                                      "x-examples": [
                                        "process-fail"
                                      ]
                                    },
                                    "context": {
                                      "type": "array",
                                      "description": "Initial values to set on the context",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "key",
                                          "value"
                                        ],
                                        "properties": {
                                          "key": {
                                            "type": "string",
                                            "description": "The context key to set",
                                            "example": "$.fizz",
                                            "x-examples": [
                                              "$.fizz",
                                              "$.unit.status",
                                              "extract_fields"
                                            ]
                                          },
                                          "value": {
                                            "type": "string",
                                            "description": "Value to set",
                                            "example": "$.buzz",
                                            "x-examples": [
                                              "$.buzz",
                                              "Pending",
                                              true
                                            ]
                                          },
                                          "lock": {
                                            "type": "boolean",
                                            "description": "Prevents other steps from writing this value",
                                            "example": true
                                          },
                                          "ignore": {
                                            "type": "boolean",
                                            "description": "When trying to set a locked key, do not fail",
                                            "example": false
                                          }
                                        }
                                      }
                                    },
                                    "onError": {
                                      "type": "object",
                                      "description": "Action to take when step fails",
                                      "required": [
                                        "finally"
                                      ],
                                      "properties": {
                                        "retry": {
                                          "type": "integer",
                                          "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                          "minimum": 0,
                                          "maximum": 10,
                                          "example": 3,
                                          "default": 0
                                        },
                                        "finally": {
                                          "type": "object",
                                          "description": "What to do after all retries",
                                          "required": [
                                            "goto"
                                          ],
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "description": "Actions to take on failure",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to transition to on failure",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "failed",
                                              "x-examples": [
                                                "failed"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "onComplete": {
                                      "type": "object",
                                      "description": "Actions to take when the step completes",
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            },
                            {
                              "type": "object",
                              "description": "Finial step which is marked as completed successfully",
                              "properties": {
                                "label": {
                                  "example": "Complete",
                                  "x-examples": [
                                    "Complete"
                                  ],
                                  "allOf": [
                                    {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    }
                                  ]
                                },
                                "type": {
                                  "example": "success",
                                  "x-examples": [
                                    "success"
                                  ],
                                  "allOf": [
                                    {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    }
                                  ]
                                },
                                "onComplete": {
                                  "type": "object",
                                  "description": "Actions to take when the step completes",
                                  "properties": {
                                    "actions": {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "The type of the action",
                                                "enum": [
                                                  "email"
                                                ]
                                              },
                                              "options": {
                                                "type": "object",
                                                "description": "settings for the action",
                                                "additionalProperties": {
                                                  "type": "string"
                                                },
                                                "x-examples": [
                                                  {
                                                    "to": "bob@example.com",
                                                    "from": "alice@example.com"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            {
                              "type": "object",
                              "description": "A step which run at certain times",
                              "required": [
                                "stop_at",
                                "time"
                              ],
                              "properties": {
                                "label": {
                                  "example": "Wait for cable",
                                  "x-examples": [
                                    "Wait for cable"
                                  ],
                                  "allOf": [
                                    {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    }
                                  ]
                                },
                                "type": {
                                  "x-examples": [
                                    "wait"
                                  ],
                                  "example": "wait"
                                },
                                "stop_at": {
                                  "type": "integer",
                                  "description": "Time in seconds to stop this task",
                                  "maximum": 900,
                                  "minimum": 1
                                },
                                "time": {
                                  "type": "integer",
                                  "description": "Time to wait before checking this step",
                                  "example": 600,
                                  "maximum": 900,
                                  "minimum": 1
                                },
                                "listen_for": {
                                  "type": "array",
                                  "description": "List of events and conditions to listen for to trigger",
                                  "items": {
                                    "type": "object",
                                    "required": [
                                      "event"
                                    ],
                                    "properties": {
                                      "event": {
                                        "type": "string",
                                        "description": "Name of the event to listen for",
                                        "allOf": [
                                          {
                                            "type": "string",
                                            "description": "Possible entity events",
                                            "enum": [
                                              "CON.attached",
                                              "CON.created",
                                              "CON.deleted",
                                              "CON.detached",
                                              "CON.removed",
                                              "CON.updated",
                                              "CUS.attached",
                                              "CUS.created",
                                              "CUS.deleted",
                                              "CUS.detached",
                                              "CUS.removed",
                                              "CUS.updated",
                                              "LOC.attached",
                                              "LOC.created",
                                              "LOC.deleted",
                                              "LOC.detached",
                                              "LOC.removed",
                                              "LOC.updated",
                                              "NOTE.attached",
                                              "NOTE.created",
                                              "NOTE.deleted",
                                              "NOTE.detached",
                                              "NOTE.removed",
                                              "NOTE.updated",
                                              "PART.attached",
                                              "PART.created",
                                              "PART.deleted",
                                              "PART.detached",
                                              "PART.removed",
                                              "PART.updated",
                                              "PGM.attached",
                                              "PGM.created",
                                              "PGM.deleted",
                                              "PGM.detached",
                                              "PGM.removed",
                                              "PGM.updated",
                                              "PRO.attached",
                                              "PRO.created",
                                              "PRO.deleted",
                                              "PRO.detached",
                                              "PRO.removed",
                                              "PRO.updated",
                                              "RES.attached",
                                              "RES.created",
                                              "RES.deleted",
                                              "RES.detached",
                                              "RES.removed",
                                              "RES.updated",
                                              "UNIT.attached",
                                              "UNIT.created",
                                              "UNIT.deleted",
                                              "UNIT.detached",
                                              "UNIT.removed",
                                              "UNIT.updated",
                                              "USER.attached",
                                              "USER.created",
                                              "USER.deleted",
                                              "USER.detached",
                                              "USER.removed",
                                              "USER.updated",
                                              "WKF.attached",
                                              "WKF.created",
                                              "WKF.deleted",
                                              "WKF.detached",
                                              "WKF.removed",
                                              "WKF.updated",
                                              "WOR.attached",
                                              "WOR.created",
                                              "WOR.deleted",
                                              "WOR.detached",
                                              "WOR.removed",
                                              "WOR.updated"
                                            ]
                                          }
                                        ]
                                      },
                                      "event_value": {
                                        "type": "object",
                                        "description": "The event conditions that have to be met",
                                        "allOf": [
                                          {
                                            "description": "A Step choice",
                                            "type": "object",
                                            "maxProperties": 2,
                                            "minProperties": 2,
                                            "required": [
                                              "variable"
                                            ],
                                            "properties": {
                                              "variable": {
                                                "type": "string",
                                                "description": "Context variable to check",
                                                "example": "$.parts.available",
                                                "x-examples": [
                                                  "$.parts.available"
                                                ]
                                              },
                                              "greater_than_equals": {
                                                "type": "string",
                                                "description": "Value has to be greater than or equals to",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "less_than_equals": {
                                                "type": "string",
                                                "description": "Value has to be less than or equals to",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "greater_than": {
                                                "type": "string",
                                                "description": "Value has to be greater than",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "less_than": {
                                                "type": "string",
                                                "description": "Value has to be less than",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "equals": {
                                                "type": "string",
                                                "description": "Value has to equal",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "not_equals": {
                                                "type": "string",
                                                "description": "Value must not equal",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "required": [
                                    "type",
                                    "label",
                                    "goto"
                                  ],
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    },
                                    "label": {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to move to",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "complete",
                                      "x-examples": [
                                        "complete"
                                      ]
                                    },
                                    "goto-fail": {
                                      "type": "string",
                                      "description": "Step to transition too if this step cannot be completed",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "process-fail",
                                      "x-examples": [
                                        "process-fail"
                                      ]
                                    },
                                    "context": {
                                      "type": "array",
                                      "description": "Initial values to set on the context",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "key",
                                          "value"
                                        ],
                                        "properties": {
                                          "key": {
                                            "type": "string",
                                            "description": "The context key to set",
                                            "example": "$.fizz",
                                            "x-examples": [
                                              "$.fizz",
                                              "$.unit.status",
                                              "extract_fields"
                                            ]
                                          },
                                          "value": {
                                            "type": "string",
                                            "description": "Value to set",
                                            "example": "$.buzz",
                                            "x-examples": [
                                              "$.buzz",
                                              "Pending",
                                              true
                                            ]
                                          },
                                          "lock": {
                                            "type": "boolean",
                                            "description": "Prevents other steps from writing this value",
                                            "example": true
                                          },
                                          "ignore": {
                                            "type": "boolean",
                                            "description": "When trying to set a locked key, do not fail",
                                            "example": false
                                          }
                                        }
                                      }
                                    },
                                    "onError": {
                                      "type": "object",
                                      "description": "Action to take when step fails",
                                      "required": [
                                        "finally"
                                      ],
                                      "properties": {
                                        "retry": {
                                          "type": "integer",
                                          "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                          "minimum": 0,
                                          "maximum": 10,
                                          "example": 3,
                                          "default": 0
                                        },
                                        "finally": {
                                          "type": "object",
                                          "description": "What to do after all retries",
                                          "required": [
                                            "goto"
                                          ],
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "description": "Actions to take on failure",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to transition to on failure",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "failed",
                                              "x-examples": [
                                                "failed"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "onComplete": {
                                      "type": "object",
                                      "description": "Actions to take when the step completes",
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  },
                  "additionalProperties": {
                    "type": "object",
                    "anyOf": [
                      {
                        "type": "object",
                        "description": "Close step",
                        "required": [
                          "step"
                        ],
                        "properties": {
                          "step": {
                            "type": "string",
                            "description": "Step to mark as complete",
                            "pattern": "^[a-z][a-z-]+[a-z]$",
                            "example": "complete",
                            "x-examples": [
                              "complete"
                            ]
                          }
                        },
                        "anyOf": [
                          {
                            "type": "object",
                            "description": "Require the user confirm an action. This is normally used when Niagara cannot automatically detect that a task or action has been performed.",
                            "x-nter-step-component": "confirm-action",
                            "properties": {
                              "label": {
                                "x-examples": [
                                  "Confirm the device has powered off"
                                ]
                              },
                              "options": {
                                "type": "object",
                                "required": [
                                  "component",
                                  "payload"
                                ],
                                "properties": {
                                  "component": {
                                    "enum": [
                                      "confirm-action"
                                    ],
                                    "example": "confirm-action",
                                    "x-examples": [
                                      "confirm-action"
                                    ]
                                  },
                                  "payload": {
                                    "type": "object",
                                    "required": [
                                      "message"
                                    ],
                                    "properties": {
                                      "message": {
                                        "type": "string",
                                        "description": "The confirmation message to display to the user",
                                        "example": "Device powered off?",
                                        "x-examples": [
                                          "Device powered off?"
                                        ]
                                      },
                                      "negative_message": {
                                        "type": "string",
                                        "description": "An optional inverse message",
                                        "nullable": true,
                                        "example": "Device not functioning",
                                        "x-examples": [
                                          "Device not functioning"
                                        ]
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "description": "A step which requires a user to complete",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "example": "user",
                                    "x-examples": [
                                      "user"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "component",
                                      "payload"
                                    ],
                                    "properties": {
                                      "component": {
                                        "type": "string",
                                        "description": "Name of the function to invoke",
                                        "example": "assignUnitsFromCustomerToProject",
                                        "x-examples": [
                                          "assignUnitsFromCustomerToProject"
                                        ]
                                      },
                                      "payload": {
                                        "type": "object"
                                      }
                                    }
                                  }
                                },
                                "allOf": [
                                  {
                                    "type": "object",
                                    "x-ui-hide": true,
                                    "required": [
                                      "type",
                                      "label",
                                      "goto"
                                    ],
                                    "properties": {
                                      "type": {
                                        "type": "string",
                                        "description": "Type of workflow step",
                                        "enum": [
                                          "load",
                                          "choice",
                                          "function",
                                          "machine",
                                          "pass",
                                          "fail",
                                          "success",
                                          "user",
                                          "wait"
                                        ]
                                      },
                                      "label": {
                                        "type": "string",
                                        "description": "Label for the step",
                                        "example": "Find units",
                                        "x-examples": [
                                          "Find units"
                                        ]
                                      },
                                      "goto": {
                                        "type": "string",
                                        "description": "Step to move to",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "complete",
                                        "x-examples": [
                                          "complete"
                                        ]
                                      },
                                      "goto-fail": {
                                        "type": "string",
                                        "description": "Step to transition too if this step cannot be completed",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "process-fail",
                                        "x-examples": [
                                          "process-fail"
                                        ]
                                      },
                                      "context": {
                                        "type": "array",
                                        "description": "Initial values to set on the context",
                                        "items": {
                                          "type": "object",
                                          "required": [
                                            "key",
                                            "value"
                                          ],
                                          "properties": {
                                            "key": {
                                              "type": "string",
                                              "description": "The context key to set",
                                              "example": "$.fizz",
                                              "x-examples": [
                                                "$.fizz",
                                                "$.unit.status",
                                                "extract_fields"
                                              ]
                                            },
                                            "value": {
                                              "type": "string",
                                              "description": "Value to set",
                                              "example": "$.buzz",
                                              "x-examples": [
                                                "$.buzz",
                                                "Pending",
                                                true
                                              ]
                                            },
                                            "lock": {
                                              "type": "boolean",
                                              "description": "Prevents other steps from writing this value",
                                              "example": true
                                            },
                                            "ignore": {
                                              "type": "boolean",
                                              "description": "When trying to set a locked key, do not fail",
                                              "example": false
                                            }
                                          }
                                        }
                                      },
                                      "onError": {
                                        "type": "object",
                                        "description": "Action to take when step fails",
                                        "required": [
                                          "finally"
                                        ],
                                        "properties": {
                                          "retry": {
                                            "type": "integer",
                                            "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                            "minimum": 0,
                                            "maximum": 10,
                                            "example": 3,
                                            "default": 0
                                          },
                                          "finally": {
                                            "type": "object",
                                            "description": "What to do after all retries",
                                            "required": [
                                              "goto"
                                            ],
                                            "properties": {
                                              "actions": {
                                                "type": "array",
                                                "description": "Actions to take on failure",
                                                "items": {
                                                  "anyOf": [
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "type": {
                                                          "type": "string",
                                                          "description": "The type of the action",
                                                          "enum": [
                                                            "email"
                                                          ]
                                                        },
                                                        "options": {
                                                          "type": "object",
                                                          "description": "settings for the action",
                                                          "additionalProperties": {
                                                            "type": "string"
                                                          },
                                                          "x-examples": [
                                                            {
                                                              "to": "bob@example.com",
                                                              "from": "alice@example.com"
                                                            }
                                                          ]
                                                        }
                                                      }
                                                    }
                                                  ]
                                                }
                                              },
                                              "goto": {
                                                "type": "string",
                                                "description": "Step to transition to on failure",
                                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                                "example": "failed",
                                                "x-examples": [
                                                  "failed"
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      },
                                      "onComplete": {
                                        "type": "object",
                                        "description": "Actions to take when the step completes",
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "object",
                            "description": "Display a link or modal to a user which contains instructions from a PDF",
                            "x-nter-step-component": "follow-pdf-instructions",
                            "required": [
                              "label",
                              "payload"
                            ],
                            "properties": {
                              "label": {
                                "x-examples": [
                                  "Instruct user to follow steps outlined in Apple PDF"
                                ]
                              },
                              "options": {
                                "type": "object",
                                "required": [
                                  "component",
                                  "payload"
                                ],
                                "properties": {
                                  "component": {
                                    "enum": [
                                      "follow-pds-instructions"
                                    ],
                                    "example": "follow-pdf-instructions",
                                    "x-examples": [
                                      "follow-pdf-instructions"
                                    ]
                                  },
                                  "payload": {
                                    "type": "object",
                                    "required": [
                                      "attachment_id"
                                    ],
                                    "properties": {
                                      "attachment_id": {
                                        "type": "string",
                                        "description": "UUID for the attachment",
                                        "format": "uuid",
                                        "example": "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7",
                                        "x-examples": [
                                          "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7"
                                        ]
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "description": "A step which requires a user to complete",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "example": "user",
                                    "x-examples": [
                                      "user"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "component",
                                      "payload"
                                    ],
                                    "properties": {
                                      "component": {
                                        "type": "string",
                                        "description": "Name of the function to invoke",
                                        "example": "assignUnitsFromCustomerToProject",
                                        "x-examples": [
                                          "assignUnitsFromCustomerToProject"
                                        ]
                                      },
                                      "payload": {
                                        "type": "object"
                                      }
                                    }
                                  }
                                },
                                "allOf": [
                                  {
                                    "type": "object",
                                    "x-ui-hide": true,
                                    "required": [
                                      "type",
                                      "label",
                                      "goto"
                                    ],
                                    "properties": {
                                      "type": {
                                        "type": "string",
                                        "description": "Type of workflow step",
                                        "enum": [
                                          "load",
                                          "choice",
                                          "function",
                                          "machine",
                                          "pass",
                                          "fail",
                                          "success",
                                          "user",
                                          "wait"
                                        ]
                                      },
                                      "label": {
                                        "type": "string",
                                        "description": "Label for the step",
                                        "example": "Find units",
                                        "x-examples": [
                                          "Find units"
                                        ]
                                      },
                                      "goto": {
                                        "type": "string",
                                        "description": "Step to move to",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "complete",
                                        "x-examples": [
                                          "complete"
                                        ]
                                      },
                                      "goto-fail": {
                                        "type": "string",
                                        "description": "Step to transition too if this step cannot be completed",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "process-fail",
                                        "x-examples": [
                                          "process-fail"
                                        ]
                                      },
                                      "context": {
                                        "type": "array",
                                        "description": "Initial values to set on the context",
                                        "items": {
                                          "type": "object",
                                          "required": [
                                            "key",
                                            "value"
                                          ],
                                          "properties": {
                                            "key": {
                                              "type": "string",
                                              "description": "The context key to set",
                                              "example": "$.fizz",
                                              "x-examples": [
                                                "$.fizz",
                                                "$.unit.status",
                                                "extract_fields"
                                              ]
                                            },
                                            "value": {
                                              "type": "string",
                                              "description": "Value to set",
                                              "example": "$.buzz",
                                              "x-examples": [
                                                "$.buzz",
                                                "Pending",
                                                true
                                              ]
                                            },
                                            "lock": {
                                              "type": "boolean",
                                              "description": "Prevents other steps from writing this value",
                                              "example": true
                                            },
                                            "ignore": {
                                              "type": "boolean",
                                              "description": "When trying to set a locked key, do not fail",
                                              "example": false
                                            }
                                          }
                                        }
                                      },
                                      "onError": {
                                        "type": "object",
                                        "description": "Action to take when step fails",
                                        "required": [
                                          "finally"
                                        ],
                                        "properties": {
                                          "retry": {
                                            "type": "integer",
                                            "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                            "minimum": 0,
                                            "maximum": 10,
                                            "example": 3,
                                            "default": 0
                                          },
                                          "finally": {
                                            "type": "object",
                                            "description": "What to do after all retries",
                                            "required": [
                                              "goto"
                                            ],
                                            "properties": {
                                              "actions": {
                                                "type": "array",
                                                "description": "Actions to take on failure",
                                                "items": {
                                                  "anyOf": [
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "type": {
                                                          "type": "string",
                                                          "description": "The type of the action",
                                                          "enum": [
                                                            "email"
                                                          ]
                                                        },
                                                        "options": {
                                                          "type": "object",
                                                          "description": "settings for the action",
                                                          "additionalProperties": {
                                                            "type": "string"
                                                          },
                                                          "x-examples": [
                                                            {
                                                              "to": "bob@example.com",
                                                              "from": "alice@example.com"
                                                            }
                                                          ]
                                                        }
                                                      }
                                                    }
                                                  ]
                                                }
                                              },
                                              "goto": {
                                                "type": "string",
                                                "description": "Step to transition to on failure",
                                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                                "example": "failed",
                                                "x-examples": [
                                                  "failed"
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      },
                                      "onComplete": {
                                        "type": "object",
                                        "description": "Actions to take when the step completes",
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "object",
                            "description": "Ask the user to manually enter (or confirm) data for an entity",
                            "x-nter-step-component": "manual-data-entry",
                            "properties": {
                              "label": {
                                "x-examples": [
                                  "Enter asset tag and confirm serial number"
                                ]
                              },
                              "options": {
                                "type": "object",
                                "required": [
                                  "component",
                                  "payload"
                                ],
                                "properties": {
                                  "component": {
                                    "enum": [
                                      "manual-data-entry"
                                    ],
                                    "example": "manual-data-entry",
                                    "x-examples": [
                                      "manual-data-entry"
                                    ]
                                  },
                                  "payload": {
                                    "type": "object",
                                    "required": [
                                      "fields"
                                    ],
                                    "properties": {
                                      "fields": {
                                        "type": "array",
                                        "description": "Configuration for each field",
                                        "items": {
                                          "type": "object",
                                          "required": [
                                            "input_type",
                                            "label",
                                            "required",
                                            "entity_field"
                                          ],
                                          "properties": {
                                            "input_type": {
                                              "type": "string",
                                              "description": "The type of input field to display",
                                              "enum": [
                                                "textbox",
                                                "input"
                                              ]
                                            },
                                            "label": {
                                              "type": "string",
                                              "description": "Label to display for the field",
                                              "example": "Asset Tag",
                                              "x-examples": [
                                                "Asset Tag"
                                              ]
                                            },
                                            "required": {
                                              "type": "boolean",
                                              "description": "Display the field as required input. Note: this is a helper function. It singles that the user is required to input data at this step. If the field is required on the entity, the user will be presented with a validation message",
                                              "example": true
                                            },
                                            "entity_field": {
                                              "type": "string",
                                              "description": "JSON Path to the field on the entity. If the path does not start with '$' then the entity on the context is assumed. Otherwise the data will be set on the context path",
                                              "example": "input_filter[?(@.key = 'asset-tag')]",
                                              "x-examples": [
                                                "input_filter[?(@.key = 'asset-tag')]"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "description": "A step which requires a user to complete",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "example": "user",
                                    "x-examples": [
                                      "user"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "component",
                                      "payload"
                                    ],
                                    "properties": {
                                      "component": {
                                        "type": "string",
                                        "description": "Name of the function to invoke",
                                        "example": "assignUnitsFromCustomerToProject",
                                        "x-examples": [
                                          "assignUnitsFromCustomerToProject"
                                        ]
                                      },
                                      "payload": {
                                        "type": "object"
                                      }
                                    }
                                  }
                                },
                                "allOf": [
                                  {
                                    "type": "object",
                                    "x-ui-hide": true,
                                    "required": [
                                      "type",
                                      "label",
                                      "goto"
                                    ],
                                    "properties": {
                                      "type": {
                                        "type": "string",
                                        "description": "Type of workflow step",
                                        "enum": [
                                          "load",
                                          "choice",
                                          "function",
                                          "machine",
                                          "pass",
                                          "fail",
                                          "success",
                                          "user",
                                          "wait"
                                        ]
                                      },
                                      "label": {
                                        "type": "string",
                                        "description": "Label for the step",
                                        "example": "Find units",
                                        "x-examples": [
                                          "Find units"
                                        ]
                                      },
                                      "goto": {
                                        "type": "string",
                                        "description": "Step to move to",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "complete",
                                        "x-examples": [
                                          "complete"
                                        ]
                                      },
                                      "goto-fail": {
                                        "type": "string",
                                        "description": "Step to transition too if this step cannot be completed",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "process-fail",
                                        "x-examples": [
                                          "process-fail"
                                        ]
                                      },
                                      "context": {
                                        "type": "array",
                                        "description": "Initial values to set on the context",
                                        "items": {
                                          "type": "object",
                                          "required": [
                                            "key",
                                            "value"
                                          ],
                                          "properties": {
                                            "key": {
                                              "type": "string",
                                              "description": "The context key to set",
                                              "example": "$.fizz",
                                              "x-examples": [
                                                "$.fizz",
                                                "$.unit.status",
                                                "extract_fields"
                                              ]
                                            },
                                            "value": {
                                              "type": "string",
                                              "description": "Value to set",
                                              "example": "$.buzz",
                                              "x-examples": [
                                                "$.buzz",
                                                "Pending",
                                                true
                                              ]
                                            },
                                            "lock": {
                                              "type": "boolean",
                                              "description": "Prevents other steps from writing this value",
                                              "example": true
                                            },
                                            "ignore": {
                                              "type": "boolean",
                                              "description": "When trying to set a locked key, do not fail",
                                              "example": false
                                            }
                                          }
                                        }
                                      },
                                      "onError": {
                                        "type": "object",
                                        "description": "Action to take when step fails",
                                        "required": [
                                          "finally"
                                        ],
                                        "properties": {
                                          "retry": {
                                            "type": "integer",
                                            "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                            "minimum": 0,
                                            "maximum": 10,
                                            "example": 3,
                                            "default": 0
                                          },
                                          "finally": {
                                            "type": "object",
                                            "description": "What to do after all retries",
                                            "required": [
                                              "goto"
                                            ],
                                            "properties": {
                                              "actions": {
                                                "type": "array",
                                                "description": "Actions to take on failure",
                                                "items": {
                                                  "anyOf": [
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "type": {
                                                          "type": "string",
                                                          "description": "The type of the action",
                                                          "enum": [
                                                            "email"
                                                          ]
                                                        },
                                                        "options": {
                                                          "type": "object",
                                                          "description": "settings for the action",
                                                          "additionalProperties": {
                                                            "type": "string"
                                                          },
                                                          "x-examples": [
                                                            {
                                                              "to": "bob@example.com",
                                                              "from": "alice@example.com"
                                                            }
                                                          ]
                                                        }
                                                      }
                                                    }
                                                  ]
                                                }
                                              },
                                              "goto": {
                                                "type": "string",
                                                "description": "Step to transition to on failure",
                                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                                "example": "failed",
                                                "x-examples": [
                                                  "failed"
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      },
                                      "onComplete": {
                                        "type": "object",
                                        "description": "Actions to take when the step completes",
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "object",
                            "description": "Ask the user to follow a list and check off boxes",
                            "x-nter-step-component": "task-list",
                            "properties": {
                              "label": {
                                "x-examples": [
                                  "Enter asset tag and confirm serial number"
                                ]
                              },
                              "options": {
                                "type": "object",
                                "required": [
                                  "component",
                                  "payload"
                                ],
                                "properties": {
                                  "component": {
                                    "enum": [
                                      "task-list"
                                    ],
                                    "example": "task-list",
                                    "x-examples": [
                                      "task-list"
                                    ]
                                  },
                                  "payload": {
                                    "type": "object",
                                    "required": [
                                      "items"
                                    ],
                                    "properties": {
                                      "is_qc": {
                                        "type": "boolean",
                                        "description": "Flags this list as a QC task list. This means that a different user can close the task to one previously on the context"
                                      },
                                      "items": {
                                        "type": "array",
                                        "description": "Configuration for each task list item",
                                        "items": {
                                          "type": "object",
                                          "required": [
                                            "label",
                                            "help",
                                            "evaluated",
                                            "na_option"
                                          ],
                                          "properties": {
                                            "label": {
                                              "type": "string",
                                              "description": "Label to display for the field",
                                              "example": "Asset Tag placement",
                                              "x-examples": [
                                                "Asset Tag placement"
                                              ]
                                            },
                                            "slug": {
                                              "type": "string",
                                              "description": "Slug for the item (Auto-generated from the label)",
                                              "readOnly": true,
                                              "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$",
                                              "example": "asset-tag-placement",
                                              "x-examples": [
                                                "asset-tag-placement"
                                              ]
                                            },
                                            "help": {
                                              "type": "string",
                                              "description": "Message describing what is needed to be checked",
                                              "example": "Asset Tag attached to the unit in the correct position",
                                              "x-examples": [
                                                "Asset Tag attached to the unit in the correct position"
                                              ]
                                            },
                                            "evaluated": {
                                              "type": "boolean",
                                              "description": "When set to true, this will fail the step if the value for the item is false or N/A",
                                              "example": true
                                            },
                                            "na_field": {
                                              "type": "boolean",
                                              "description": "Allow the user to select the N/A option when checking off the list",
                                              "example": true
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "description": "A step which requires a user to complete",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "example": "user",
                                    "x-examples": [
                                      "user"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "component",
                                      "payload"
                                    ],
                                    "properties": {
                                      "component": {
                                        "type": "string",
                                        "description": "Name of the function to invoke",
                                        "example": "assignUnitsFromCustomerToProject",
                                        "x-examples": [
                                          "assignUnitsFromCustomerToProject"
                                        ]
                                      },
                                      "payload": {
                                        "type": "object"
                                      }
                                    }
                                  }
                                },
                                "allOf": [
                                  {
                                    "type": "object",
                                    "x-ui-hide": true,
                                    "required": [
                                      "type",
                                      "label",
                                      "goto"
                                    ],
                                    "properties": {
                                      "type": {
                                        "type": "string",
                                        "description": "Type of workflow step",
                                        "enum": [
                                          "load",
                                          "choice",
                                          "function",
                                          "machine",
                                          "pass",
                                          "fail",
                                          "success",
                                          "user",
                                          "wait"
                                        ]
                                      },
                                      "label": {
                                        "type": "string",
                                        "description": "Label for the step",
                                        "example": "Find units",
                                        "x-examples": [
                                          "Find units"
                                        ]
                                      },
                                      "goto": {
                                        "type": "string",
                                        "description": "Step to move to",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "complete",
                                        "x-examples": [
                                          "complete"
                                        ]
                                      },
                                      "goto-fail": {
                                        "type": "string",
                                        "description": "Step to transition too if this step cannot be completed",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "process-fail",
                                        "x-examples": [
                                          "process-fail"
                                        ]
                                      },
                                      "context": {
                                        "type": "array",
                                        "description": "Initial values to set on the context",
                                        "items": {
                                          "type": "object",
                                          "required": [
                                            "key",
                                            "value"
                                          ],
                                          "properties": {
                                            "key": {
                                              "type": "string",
                                              "description": "The context key to set",
                                              "example": "$.fizz",
                                              "x-examples": [
                                                "$.fizz",
                                                "$.unit.status",
                                                "extract_fields"
                                              ]
                                            },
                                            "value": {
                                              "type": "string",
                                              "description": "Value to set",
                                              "example": "$.buzz",
                                              "x-examples": [
                                                "$.buzz",
                                                "Pending",
                                                true
                                              ]
                                            },
                                            "lock": {
                                              "type": "boolean",
                                              "description": "Prevents other steps from writing this value",
                                              "example": true
                                            },
                                            "ignore": {
                                              "type": "boolean",
                                              "description": "When trying to set a locked key, do not fail",
                                              "example": false
                                            }
                                          }
                                        }
                                      },
                                      "onError": {
                                        "type": "object",
                                        "description": "Action to take when step fails",
                                        "required": [
                                          "finally"
                                        ],
                                        "properties": {
                                          "retry": {
                                            "type": "integer",
                                            "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                            "minimum": 0,
                                            "maximum": 10,
                                            "example": 3,
                                            "default": 0
                                          },
                                          "finally": {
                                            "type": "object",
                                            "description": "What to do after all retries",
                                            "required": [
                                              "goto"
                                            ],
                                            "properties": {
                                              "actions": {
                                                "type": "array",
                                                "description": "Actions to take on failure",
                                                "items": {
                                                  "anyOf": [
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "type": {
                                                          "type": "string",
                                                          "description": "The type of the action",
                                                          "enum": [
                                                            "email"
                                                          ]
                                                        },
                                                        "options": {
                                                          "type": "object",
                                                          "description": "settings for the action",
                                                          "additionalProperties": {
                                                            "type": "string"
                                                          },
                                                          "x-examples": [
                                                            {
                                                              "to": "bob@example.com",
                                                              "from": "alice@example.com"
                                                            }
                                                          ]
                                                        }
                                                      }
                                                    }
                                                  ]
                                                }
                                              },
                                              "goto": {
                                                "type": "string",
                                                "description": "Step to transition to on failure",
                                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                                "example": "failed",
                                                "x-examples": [
                                                  "failed"
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      },
                                      "onComplete": {
                                        "type": "object",
                                        "description": "Actions to take when the step completes",
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "object",
                            "description": "Run the ACE-IOS application to provision iOS devices or ",
                            "properties": {
                              "type": {
                                "example": "machine",
                                "x-examples": [
                                  "machine"
                                ]
                              },
                              "label": {
                                "x-examples": [
                                  "Run Application"
                                ]
                              },
                              "options": {
                                "type": "object",
                                "required": [
                                  "application",
                                  "configuration"
                                ],
                                "properties": {
                                  "configuration": {
                                    "type": "object",
                                    "description": "ACE Configuration options",
                                    "properties": {
                                      "pairing_cert": {
                                        "type": "string",
                                        "format": "base64",
                                        "description": "Contents of a *.crt file exported from Apple Configurator or MDM",
                                        "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                        "x-examples": [
                                          "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                        ],
                                        "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                      },
                                      "pairing_key": {
                                        "type": "string",
                                        "format": "base64",
                                        "description": "Contents of a *.der file exported from Apple Configurator or MDM",
                                        "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                        "x-examples": [
                                          "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                        ],
                                        "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                      },
                                      "restore_device": {
                                        "type": "boolean",
                                        "description": "Restore device to factory defaults"
                                      },
                                      "automated_enrollment": {
                                        "type": "boolean",
                                        "description": "Automatically enroll the device to MDM"
                                      },
                                      "mdm": {
                                        "type": "object",
                                        "format": "base64",
                                        "description": "The settings for the Customers MDM",
                                        "properties": {
                                          "vendor": {
                                            "type": "string",
                                            "description": "MDM vendor. Currently, supported values are AirWatch, JAMF, and Meraki.",
                                            "enum": [
                                              "AirWatch",
                                              "JAMF",
                                              "Meraki"
                                            ]
                                          },
                                          "console_url": {
                                            "type": "string",
                                            "format": "uri",
                                            "description": "Base URL for HTTP requests",
                                            "example": "http://jamf.zones.com",
                                            "x-examples": [
                                              "http://jamf.zones.com"
                                            ]
                                          },
                                          "user": {
                                            "type": "string",
                                            "description": "MDM User name",
                                            "example": "NterpriseBob",
                                            "x-examples": [
                                              "NterpriseBob"
                                            ]
                                          },
                                          "password": {
                                            "type": "string",
                                            "description": "MDM password"
                                          },
                                          "tenant_code": {
                                            "type": "string",
                                            "description": "MDM authentication key",
                                            "example": "nterprise",
                                            "x-examples": [
                                              "nterprise"
                                            ]
                                          },
                                          "set_asset_tag": {
                                            "type": "string",
                                            "description": "Sets the devices Asset tag based on a field from the unit",
                                            "example": "$._entity.input_filter[?(@.key = 'asset-tag')]",
                                            "x-examples": [
                                              "$._entity.input_filter[?(@.key = 'asset-tag')]"
                                            ]
                                          }
                                        }
                                      },
                                      "field_mappings": {
                                        "type": "array",
                                        "description": "List of fields to map to the device",
                                        "items": {
                                          "type": "object",
                                          "properties": {
                                            "from": {
                                              "type": "string",
                                              "description": "The field reported from ACE",
                                              "enum": [
                                                "serial_number",
                                                "name",
                                                "ecid",
                                                "udid",
                                                "configurator_serial",
                                                "ios",
                                                "model",
                                                "storage",
                                                "wifi_mac",
                                                "bt_mac",
                                                "ethernet_mac",
                                                "thundersync_serial",
                                                "iccid",
                                                "iccid2",
                                                "imei",
                                                "imei2",
                                                "missed_profiles",
                                                "missed_apps",
                                                "icon_list_regex",
                                                "icon_layout",
                                                "bat_capacity"
                                              ]
                                            },
                                            "to": {
                                              "type": "string",
                                              "description": "Field to set on the entity",
                                              "example": "$._entity.input_filter[?(@.key = 'serial-number')]",
                                              "x-examples": [
                                                "$._entity.input_filter[?(@.key = 'serial-number')]"
                                              ]
                                            }
                                          }
                                        }
                                      },
                                      "wait_for_apps": {
                                        "type": "array",
                                        "description": "A list of applications needed to be installed on the device. This will cause the extension to poll the device for installed applications. Once all the applications have been installed, this step can be completed",
                                        "items": {
                                          "type": "string",
                                          "format": "uri",
                                          "example": "com.apple.itunes",
                                          "x-examples": [
                                            "com.apple.itunes"
                                          ]
                                        }
                                      },
                                      "wait_for_battery_charge": {
                                        "type": "integer",
                                        "description": "The required battery percentage needed before this step can move on",
                                        "minimum": 0,
                                        "maximum": 100
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "description": "Run an application extension",
                                "properties": {
                                  "label": {
                                    "x-examples": [
                                      "Run Application"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "application",
                                      "configuration"
                                    ],
                                    "properties": {
                                      "application": {
                                        "type": "object",
                                        "required": [
                                          "application_id",
                                          "platforms"
                                        ],
                                        "properties": {
                                          "application_id": {
                                            "type": "string",
                                            "description": "Registered application ID",
                                            "example": "ace-ios",
                                            "x-examples": [
                                              "ace-ios"
                                            ]
                                          },
                                          "platforms": {
                                            "type": "array",
                                            "description": "Allowed platforms the application can run on",
                                            "items": {
                                              "type": "object",
                                              "required": [
                                                "platform",
                                                "arch"
                                              ],
                                              "properties": {
                                                "platform": {
                                                  "type": "string",
                                                  "description": "The platform (OS) the application can run on",
                                                  "enum": [
                                                    "aix",
                                                    "darwin",
                                                    "freebsd",
                                                    "linux",
                                                    "openbsd",
                                                    "sunos",
                                                    "win32"
                                                  ]
                                                },
                                                "arch": {
                                                  "type": "string",
                                                  "description": "The CPU architecture needed to run the application",
                                                  "enum": [
                                                    "arm",
                                                    "arm64",
                                                    "ia32",
                                                    "mips",
                                                    "mipsel",
                                                    "ppc",
                                                    "ppc64",
                                                    "s390",
                                                    "s390x",
                                                    "x32",
                                                    "x64"
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                },
                                "allOf": [
                                  {
                                    "type": "object",
                                    "x-ui-hide": true,
                                    "required": [
                                      "type",
                                      "label",
                                      "goto"
                                    ],
                                    "properties": {
                                      "type": {
                                        "type": "string",
                                        "description": "Type of workflow step",
                                        "enum": [
                                          "load",
                                          "choice",
                                          "function",
                                          "machine",
                                          "pass",
                                          "fail",
                                          "success",
                                          "user",
                                          "wait"
                                        ]
                                      },
                                      "label": {
                                        "type": "string",
                                        "description": "Label for the step",
                                        "example": "Find units",
                                        "x-examples": [
                                          "Find units"
                                        ]
                                      },
                                      "goto": {
                                        "type": "string",
                                        "description": "Step to move to",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "complete",
                                        "x-examples": [
                                          "complete"
                                        ]
                                      },
                                      "goto-fail": {
                                        "type": "string",
                                        "description": "Step to transition too if this step cannot be completed",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "process-fail",
                                        "x-examples": [
                                          "process-fail"
                                        ]
                                      },
                                      "context": {
                                        "type": "array",
                                        "description": "Initial values to set on the context",
                                        "items": {
                                          "type": "object",
                                          "required": [
                                            "key",
                                            "value"
                                          ],
                                          "properties": {
                                            "key": {
                                              "type": "string",
                                              "description": "The context key to set",
                                              "example": "$.fizz",
                                              "x-examples": [
                                                "$.fizz",
                                                "$.unit.status",
                                                "extract_fields"
                                              ]
                                            },
                                            "value": {
                                              "type": "string",
                                              "description": "Value to set",
                                              "example": "$.buzz",
                                              "x-examples": [
                                                "$.buzz",
                                                "Pending",
                                                true
                                              ]
                                            },
                                            "lock": {
                                              "type": "boolean",
                                              "description": "Prevents other steps from writing this value",
                                              "example": true
                                            },
                                            "ignore": {
                                              "type": "boolean",
                                              "description": "When trying to set a locked key, do not fail",
                                              "example": false
                                            }
                                          }
                                        }
                                      },
                                      "onError": {
                                        "type": "object",
                                        "description": "Action to take when step fails",
                                        "required": [
                                          "finally"
                                        ],
                                        "properties": {
                                          "retry": {
                                            "type": "integer",
                                            "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                            "minimum": 0,
                                            "maximum": 10,
                                            "example": 3,
                                            "default": 0
                                          },
                                          "finally": {
                                            "type": "object",
                                            "description": "What to do after all retries",
                                            "required": [
                                              "goto"
                                            ],
                                            "properties": {
                                              "actions": {
                                                "type": "array",
                                                "description": "Actions to take on failure",
                                                "items": {
                                                  "anyOf": [
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "type": {
                                                          "type": "string",
                                                          "description": "The type of the action",
                                                          "enum": [
                                                            "email"
                                                          ]
                                                        },
                                                        "options": {
                                                          "type": "object",
                                                          "description": "settings for the action",
                                                          "additionalProperties": {
                                                            "type": "string"
                                                          },
                                                          "x-examples": [
                                                            {
                                                              "to": "bob@example.com",
                                                              "from": "alice@example.com"
                                                            }
                                                          ]
                                                        }
                                                      }
                                                    }
                                                  ]
                                                }
                                              },
                                              "goto": {
                                                "type": "string",
                                                "description": "Step to transition to on failure",
                                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                                "example": "failed",
                                                "x-examples": [
                                                  "failed"
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      },
                                      "onComplete": {
                                        "type": "object",
                                        "description": "Actions to take when the step completes",
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "label": {
                                "example": "Is device ok?",
                                "x-examples": [
                                  "Is device ok?"
                                ]
                              },
                              "type": {
                                "example": "choice",
                                "x-examples": [
                                  "choice"
                                ]
                              },
                              "choices": {
                                "type": "array",
                                "items": {
                                  "type": "object",
                                  "required": [
                                    "goto"
                                  ],
                                  "maxProperties": 2,
                                  "minProperties": 2,
                                  "maximum": 20,
                                  "properties": {
                                    "and": {
                                      "type": "array",
                                      "description": "All choices must be satisfied",
                                      "maximum": 5,
                                      "items": {
                                        "description": "A Step choice",
                                        "type": "object",
                                        "maxProperties": 2,
                                        "minProperties": 2,
                                        "required": [
                                          "variable"
                                        ],
                                        "properties": {
                                          "variable": {
                                            "type": "string",
                                            "description": "Context variable to check",
                                            "example": "$.parts.available",
                                            "x-examples": [
                                              "$.parts.available"
                                            ]
                                          },
                                          "greater_than_equals": {
                                            "type": "string",
                                            "description": "Value has to be greater than or equals to",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "less_than_equals": {
                                            "type": "string",
                                            "description": "Value has to be less than or equals to",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "greater_than": {
                                            "type": "string",
                                            "description": "Value has to be greater than",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "less_than": {
                                            "type": "string",
                                            "description": "Value has to be less than",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "equals": {
                                            "type": "string",
                                            "description": "Value has to equal",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "not_equals": {
                                            "type": "string",
                                            "description": "Value must not equal",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          }
                                        }
                                      }
                                    },
                                    "or": {
                                      "type": "array",
                                      "description": "Any of these choices must be satisfied",
                                      "maximum": 5,
                                      "items": {
                                        "description": "A Step choice",
                                        "type": "object",
                                        "maxProperties": 2,
                                        "minProperties": 2,
                                        "required": [
                                          "variable"
                                        ],
                                        "properties": {
                                          "variable": {
                                            "type": "string",
                                            "description": "Context variable to check",
                                            "example": "$.parts.available",
                                            "x-examples": [
                                              "$.parts.available"
                                            ]
                                          },
                                          "greater_than_equals": {
                                            "type": "string",
                                            "description": "Value has to be greater than or equals to",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "less_than_equals": {
                                            "type": "string",
                                            "description": "Value has to be less than or equals to",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "greater_than": {
                                            "type": "string",
                                            "description": "Value has to be greater than",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "less_than": {
                                            "type": "string",
                                            "description": "Value has to be less than",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "equals": {
                                            "type": "string",
                                            "description": "Value has to equal",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "not_equals": {
                                            "type": "string",
                                            "description": "Value must not equal",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          }
                                        }
                                      }
                                    },
                                    "not": {
                                      "type": "array",
                                      "description": "None of these choices must be satisfied",
                                      "maximum": 5,
                                      "items": {
                                        "description": "A Step choice",
                                        "type": "object",
                                        "maxProperties": 2,
                                        "minProperties": 2,
                                        "required": [
                                          "variable"
                                        ],
                                        "properties": {
                                          "variable": {
                                            "type": "string",
                                            "description": "Context variable to check",
                                            "example": "$.parts.available",
                                            "x-examples": [
                                              "$.parts.available"
                                            ]
                                          },
                                          "greater_than_equals": {
                                            "type": "string",
                                            "description": "Value has to be greater than or equals to",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "less_than_equals": {
                                            "type": "string",
                                            "description": "Value has to be less than or equals to",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "greater_than": {
                                            "type": "string",
                                            "description": "Value has to be greater than",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "less_than": {
                                            "type": "string",
                                            "description": "Value has to be less than",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "equals": {
                                            "type": "string",
                                            "description": "Value has to equal",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "not_equals": {
                                            "type": "string",
                                            "description": "Value must not equal",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          }
                                        }
                                      }
                                    },
                                    "goto": {
                                      "description": "Step to goto when condition is met",
                                      "allOf": [
                                        {
                                          "type": "string",
                                          "description": "Step to move to",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "complete",
                                          "x-examples": [
                                            "complete"
                                          ]
                                        }
                                      ]
                                    }
                                  }
                                }
                              },
                              "goto": {
                                "description": "Default step to goto when no choice can be made"
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "required": [
                                  "type",
                                  "label",
                                  "goto"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "description": "Type of workflow step",
                                    "enum": [
                                      "load",
                                      "choice",
                                      "function",
                                      "machine",
                                      "pass",
                                      "fail",
                                      "success",
                                      "user",
                                      "wait"
                                    ]
                                  },
                                  "label": {
                                    "type": "string",
                                    "description": "Label for the step",
                                    "example": "Find units",
                                    "x-examples": [
                                      "Find units"
                                    ]
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to move to",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "complete",
                                    "x-examples": [
                                      "complete"
                                    ]
                                  },
                                  "goto-fail": {
                                    "type": "string",
                                    "description": "Step to transition too if this step cannot be completed",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "process-fail",
                                    "x-examples": [
                                      "process-fail"
                                    ]
                                  },
                                  "context": {
                                    "type": "array",
                                    "description": "Initial values to set on the context",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "key",
                                        "value"
                                      ],
                                      "properties": {
                                        "key": {
                                          "type": "string",
                                          "description": "The context key to set",
                                          "example": "$.fizz",
                                          "x-examples": [
                                            "$.fizz",
                                            "$.unit.status",
                                            "extract_fields"
                                          ]
                                        },
                                        "value": {
                                          "type": "string",
                                          "description": "Value to set",
                                          "example": "$.buzz",
                                          "x-examples": [
                                            "$.buzz",
                                            "Pending",
                                            true
                                          ]
                                        },
                                        "lock": {
                                          "type": "boolean",
                                          "description": "Prevents other steps from writing this value",
                                          "example": true
                                        },
                                        "ignore": {
                                          "type": "boolean",
                                          "description": "When trying to set a locked key, do not fail",
                                          "example": false
                                        }
                                      }
                                    }
                                  },
                                  "onError": {
                                    "type": "object",
                                    "description": "Action to take when step fails",
                                    "required": [
                                      "finally"
                                    ],
                                    "properties": {
                                      "retry": {
                                        "type": "integer",
                                        "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                        "minimum": 0,
                                        "maximum": 10,
                                        "example": 3,
                                        "default": 0
                                      },
                                      "finally": {
                                        "type": "object",
                                        "description": "What to do after all retries",
                                        "required": [
                                          "goto"
                                        ],
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "description": "Actions to take on failure",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to transition to on failure",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "failed",
                                            "x-examples": [
                                              "failed"
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "onComplete": {
                                    "type": "object",
                                    "description": "Actions to take when the step completes",
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            ]
                          },
                          {
                            "type": "object",
                            "description": "Finial step which is marked as failed",
                            "properties": {
                              "label": {
                                "example": "Failed",
                                "x-examples": [
                                  "Failed"
                                ],
                                "allOf": [
                                  {
                                    "type": "string",
                                    "description": "Label for the step",
                                    "example": "Find units",
                                    "x-examples": [
                                      "Find units"
                                    ]
                                  }
                                ]
                              },
                              "type": {
                                "example": "fail",
                                "x-examples": [
                                  "fail"
                                ],
                                "allOf": [
                                  {
                                    "type": "string",
                                    "description": "Type of workflow step",
                                    "enum": [
                                      "load",
                                      "choice",
                                      "function",
                                      "machine",
                                      "pass",
                                      "fail",
                                      "success",
                                      "user",
                                      "wait"
                                    ]
                                  }
                                ]
                              },
                              "onComplete": {
                                "type": "object",
                                "description": "Actions to take when the step completes",
                                "properties": {
                                  "actions": {
                                    "type": "array",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "The type of the action",
                                              "enum": [
                                                "email"
                                              ]
                                            },
                                            "options": {
                                              "type": "object",
                                              "description": "settings for the action",
                                              "additionalProperties": {
                                                "type": "string"
                                              },
                                              "x-examples": [
                                                {
                                                  "to": "bob@example.com",
                                                  "from": "alice@example.com"
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          },
                          {
                            "type": "object",
                            "description": "Allows executing actions with out performing any function",
                            "properties": {
                              "label": {
                                "example": "Send email to project manager",
                                "x-examples": [
                                  "Send email to project manager"
                                ]
                              },
                              "type": {
                                "example": "pass",
                                "x-examples": [
                                  "pass"
                                ],
                                "allOf": [
                                  {
                                    "type": "string",
                                    "description": "Type of workflow step",
                                    "enum": [
                                      "load",
                                      "choice",
                                      "function",
                                      "machine",
                                      "pass",
                                      "fail",
                                      "success",
                                      "user",
                                      "wait"
                                    ]
                                  }
                                ]
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "required": [
                                  "type",
                                  "label",
                                  "goto"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "description": "Type of workflow step",
                                    "enum": [
                                      "load",
                                      "choice",
                                      "function",
                                      "machine",
                                      "pass",
                                      "fail",
                                      "success",
                                      "user",
                                      "wait"
                                    ]
                                  },
                                  "label": {
                                    "type": "string",
                                    "description": "Label for the step",
                                    "example": "Find units",
                                    "x-examples": [
                                      "Find units"
                                    ]
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to move to",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "complete",
                                    "x-examples": [
                                      "complete"
                                    ]
                                  },
                                  "goto-fail": {
                                    "type": "string",
                                    "description": "Step to transition too if this step cannot be completed",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "process-fail",
                                    "x-examples": [
                                      "process-fail"
                                    ]
                                  },
                                  "context": {
                                    "type": "array",
                                    "description": "Initial values to set on the context",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "key",
                                        "value"
                                      ],
                                      "properties": {
                                        "key": {
                                          "type": "string",
                                          "description": "The context key to set",
                                          "example": "$.fizz",
                                          "x-examples": [
                                            "$.fizz",
                                            "$.unit.status",
                                            "extract_fields"
                                          ]
                                        },
                                        "value": {
                                          "type": "string",
                                          "description": "Value to set",
                                          "example": "$.buzz",
                                          "x-examples": [
                                            "$.buzz",
                                            "Pending",
                                            true
                                          ]
                                        },
                                        "lock": {
                                          "type": "boolean",
                                          "description": "Prevents other steps from writing this value",
                                          "example": true
                                        },
                                        "ignore": {
                                          "type": "boolean",
                                          "description": "When trying to set a locked key, do not fail",
                                          "example": false
                                        }
                                      }
                                    }
                                  },
                                  "onError": {
                                    "type": "object",
                                    "description": "Action to take when step fails",
                                    "required": [
                                      "finally"
                                    ],
                                    "properties": {
                                      "retry": {
                                        "type": "integer",
                                        "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                        "minimum": 0,
                                        "maximum": 10,
                                        "example": 3,
                                        "default": 0
                                      },
                                      "finally": {
                                        "type": "object",
                                        "description": "What to do after all retries",
                                        "required": [
                                          "goto"
                                        ],
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "description": "Actions to take on failure",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to transition to on failure",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "failed",
                                            "x-examples": [
                                              "failed"
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "onComplete": {
                                    "type": "object",
                                    "description": "Actions to take when the step completes",
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            ]
                          },
                          {
                            "type": "object",
                            "description": "Finial step which is marked as completed successfully",
                            "properties": {
                              "label": {
                                "example": "Complete",
                                "x-examples": [
                                  "Complete"
                                ],
                                "allOf": [
                                  {
                                    "type": "string",
                                    "description": "Label for the step",
                                    "example": "Find units",
                                    "x-examples": [
                                      "Find units"
                                    ]
                                  }
                                ]
                              },
                              "type": {
                                "example": "success",
                                "x-examples": [
                                  "success"
                                ],
                                "allOf": [
                                  {
                                    "type": "string",
                                    "description": "Type of workflow step",
                                    "enum": [
                                      "load",
                                      "choice",
                                      "function",
                                      "machine",
                                      "pass",
                                      "fail",
                                      "success",
                                      "user",
                                      "wait"
                                    ]
                                  }
                                ]
                              },
                              "onComplete": {
                                "type": "object",
                                "description": "Actions to take when the step completes",
                                "properties": {
                                  "actions": {
                                    "type": "array",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "The type of the action",
                                              "enum": [
                                                "email"
                                              ]
                                            },
                                            "options": {
                                              "type": "object",
                                              "description": "settings for the action",
                                              "additionalProperties": {
                                                "type": "string"
                                              },
                                              "x-examples": [
                                                {
                                                  "to": "bob@example.com",
                                                  "from": "alice@example.com"
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          },
                          {
                            "type": "object",
                            "description": "A step which run at certain times",
                            "required": [
                              "stop_at",
                              "time"
                            ],
                            "properties": {
                              "label": {
                                "example": "Wait for cable",
                                "x-examples": [
                                  "Wait for cable"
                                ],
                                "allOf": [
                                  {
                                    "type": "string",
                                    "description": "Label for the step",
                                    "example": "Find units",
                                    "x-examples": [
                                      "Find units"
                                    ]
                                  }
                                ]
                              },
                              "type": {
                                "x-examples": [
                                  "wait"
                                ],
                                "example": "wait"
                              },
                              "stop_at": {
                                "type": "integer",
                                "description": "Time in seconds to stop this task",
                                "maximum": 900,
                                "minimum": 1
                              },
                              "time": {
                                "type": "integer",
                                "description": "Time to wait before checking this step",
                                "example": 600,
                                "maximum": 900,
                                "minimum": 1
                              },
                              "listen_for": {
                                "type": "array",
                                "description": "List of events and conditions to listen for to trigger",
                                "items": {
                                  "type": "object",
                                  "required": [
                                    "event"
                                  ],
                                  "properties": {
                                    "event": {
                                      "type": "string",
                                      "description": "Name of the event to listen for",
                                      "allOf": [
                                        {
                                          "type": "string",
                                          "description": "Possible entity events",
                                          "enum": [
                                            "CON.attached",
                                            "CON.created",
                                            "CON.deleted",
                                            "CON.detached",
                                            "CON.removed",
                                            "CON.updated",
                                            "CUS.attached",
                                            "CUS.created",
                                            "CUS.deleted",
                                            "CUS.detached",
                                            "CUS.removed",
                                            "CUS.updated",
                                            "LOC.attached",
                                            "LOC.created",
                                            "LOC.deleted",
                                            "LOC.detached",
                                            "LOC.removed",
                                            "LOC.updated",
                                            "NOTE.attached",
                                            "NOTE.created",
                                            "NOTE.deleted",
                                            "NOTE.detached",
                                            "NOTE.removed",
                                            "NOTE.updated",
                                            "PART.attached",
                                            "PART.created",
                                            "PART.deleted",
                                            "PART.detached",
                                            "PART.removed",
                                            "PART.updated",
                                            "PGM.attached",
                                            "PGM.created",
                                            "PGM.deleted",
                                            "PGM.detached",
                                            "PGM.removed",
                                            "PGM.updated",
                                            "PRO.attached",
                                            "PRO.created",
                                            "PRO.deleted",
                                            "PRO.detached",
                                            "PRO.removed",
                                            "PRO.updated",
                                            "RES.attached",
                                            "RES.created",
                                            "RES.deleted",
                                            "RES.detached",
                                            "RES.removed",
                                            "RES.updated",
                                            "UNIT.attached",
                                            "UNIT.created",
                                            "UNIT.deleted",
                                            "UNIT.detached",
                                            "UNIT.removed",
                                            "UNIT.updated",
                                            "USER.attached",
                                            "USER.created",
                                            "USER.deleted",
                                            "USER.detached",
                                            "USER.removed",
                                            "USER.updated",
                                            "WKF.attached",
                                            "WKF.created",
                                            "WKF.deleted",
                                            "WKF.detached",
                                            "WKF.removed",
                                            "WKF.updated",
                                            "WOR.attached",
                                            "WOR.created",
                                            "WOR.deleted",
                                            "WOR.detached",
                                            "WOR.removed",
                                            "WOR.updated"
                                          ]
                                        }
                                      ]
                                    },
                                    "event_value": {
                                      "type": "object",
                                      "description": "The event conditions that have to be met",
                                      "allOf": [
                                        {
                                          "description": "A Step choice",
                                          "type": "object",
                                          "maxProperties": 2,
                                          "minProperties": 2,
                                          "required": [
                                            "variable"
                                          ],
                                          "properties": {
                                            "variable": {
                                              "type": "string",
                                              "description": "Context variable to check",
                                              "example": "$.parts.available",
                                              "x-examples": [
                                                "$.parts.available"
                                              ]
                                            },
                                            "greater_than_equals": {
                                              "type": "string",
                                              "description": "Value has to be greater than or equals to",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "less_than_equals": {
                                              "type": "string",
                                              "description": "Value has to be less than or equals to",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "greater_than": {
                                              "type": "string",
                                              "description": "Value has to be greater than",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "less_than": {
                                              "type": "string",
                                              "description": "Value has to be less than",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "equals": {
                                              "type": "string",
                                              "description": "Value has to equal",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "not_equals": {
                                              "type": "string",
                                              "description": "Value must not equal",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "required": [
                                  "type",
                                  "label",
                                  "goto"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "description": "Type of workflow step",
                                    "enum": [
                                      "load",
                                      "choice",
                                      "function",
                                      "machine",
                                      "pass",
                                      "fail",
                                      "success",
                                      "user",
                                      "wait"
                                    ]
                                  },
                                  "label": {
                                    "type": "string",
                                    "description": "Label for the step",
                                    "example": "Find units",
                                    "x-examples": [
                                      "Find units"
                                    ]
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to move to",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "complete",
                                    "x-examples": [
                                      "complete"
                                    ]
                                  },
                                  "goto-fail": {
                                    "type": "string",
                                    "description": "Step to transition too if this step cannot be completed",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "process-fail",
                                    "x-examples": [
                                      "process-fail"
                                    ]
                                  },
                                  "context": {
                                    "type": "array",
                                    "description": "Initial values to set on the context",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "key",
                                        "value"
                                      ],
                                      "properties": {
                                        "key": {
                                          "type": "string",
                                          "description": "The context key to set",
                                          "example": "$.fizz",
                                          "x-examples": [
                                            "$.fizz",
                                            "$.unit.status",
                                            "extract_fields"
                                          ]
                                        },
                                        "value": {
                                          "type": "string",
                                          "description": "Value to set",
                                          "example": "$.buzz",
                                          "x-examples": [
                                            "$.buzz",
                                            "Pending",
                                            true
                                          ]
                                        },
                                        "lock": {
                                          "type": "boolean",
                                          "description": "Prevents other steps from writing this value",
                                          "example": true
                                        },
                                        "ignore": {
                                          "type": "boolean",
                                          "description": "When trying to set a locked key, do not fail",
                                          "example": false
                                        }
                                      }
                                    }
                                  },
                                  "onError": {
                                    "type": "object",
                                    "description": "Action to take when step fails",
                                    "required": [
                                      "finally"
                                    ],
                                    "properties": {
                                      "retry": {
                                        "type": "integer",
                                        "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                        "minimum": 0,
                                        "maximum": 10,
                                        "example": 3,
                                        "default": 0
                                      },
                                      "finally": {
                                        "type": "object",
                                        "description": "What to do after all retries",
                                        "required": [
                                          "goto"
                                        ],
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "description": "Actions to take on failure",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to transition to on failure",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "failed",
                                            "x-examples": [
                                              "failed"
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "onComplete": {
                                    "type": "object",
                                    "description": "Actions to take when the step completes",
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                }
              },
              "allOf": [
                {
                  "x-ui-hide": true,
                  "type": "object",
                  "description": "Common Properties to all entities",
                  "required": [
                    "label"
                  ],
                  "properties": {
                    "label": {
                      "type": "string",
                      "description": "Label for the entity",
                      "example": "primary"
                    },
                    "slug": {
                      "type": "string",
                      "description": "Slug for the entity (Auto-generated from the label)",
                      "readOnly": true,
                      "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$"
                    },
                    "created": {
                      "description": "Date the entity was created",
                      "type": "string",
                      "format": "date-time",
                      "readOnly": true
                    },
                    "updated": {
                      "description": "Last date the entity was updated",
                      "type": "string",
                      "format": "date-time",
                      "readOnly": true
                    }
                  }
                }
              ],
              "example": {
                "steps": {
                  "fail": {
                    "step": "complete",
                    "type": "user",
                    "options": {
                      "component": "assignUnitsFromCustomerToProject",
                      "payload": {
                        "message": "Device powered off?",
                        "negative_message": "Device not functioning"
                      }
                    },
                    "label": "Find units",
                    "goto": "complete",
                    "goto-fail": "process-fail",
                    "context": [
                      {
                        "key": "$.unit.status",
                        "value": "Pending",
                        "lock": true,
                        "ignore": true
                      }
                    ],
                    "onError": {
                      "finally": {
                        "goto": "failed",
                        "actions": [
                          {
                            "type": "email",
                            "options": {
                              "to": "bob@example.com",
                              "from": "alice@example.com"
                            }
                          }
                        ]
                      },
                      "retry": 8
                    },
                    "onComplete": {
                      "actions": [
                        {
                          "type": "email",
                          "options": {
                            "to": "bob@example.com",
                            "from": "alice@example.com"
                          }
                        },
                        {
                          "type": "email",
                          "options": {
                            "to": "bob@example.com",
                            "from": "alice@example.com"
                          }
                        },
                        {
                          "type": "email",
                          "options": {
                            "to": "bob@example.com",
                            "from": "alice@example.com"
                          }
                        }
                      ]
                    }
                  },
                  "amet_b64$": {
                    "step": "complete",
                    "label": "Find units",
                    "type": "success",
                    "onComplete": {
                      "actions": [
                        {
                          "type": "email",
                          "options": {
                            "to": "bob@example.com",
                            "from": "alice@example.com"
                          }
                        }
                      ]
                    }
                  },
                  "minim2__": {
                    "step": "complete",
                    "type": "pass",
                    "label": "Find units",
                    "goto": "complete",
                    "goto-fail": "process-fail",
                    "context": [
                      {
                        "key": "$.fizz",
                        "value": "$.buzz",
                        "lock": false,
                        "ignore": true
                      }
                    ],
                    "onError": {
                      "finally": {
                        "goto": "failed",
                        "actions": [
                          {
                            "type": "email",
                            "options": {
                              "to": "bob@example.com",
                              "from": "alice@example.com"
                            }
                          },
                          {
                            "type": "email",
                            "options": {
                              "to": "bob@example.com",
                              "from": "alice@example.com"
                            }
                          },
                          {
                            "type": "email",
                            "options": {
                              "to": "bob@example.com",
                              "from": "alice@example.com"
                            }
                          },
                          {
                            "type": "email",
                            "options": {
                              "to": "bob@example.com",
                              "from": "alice@example.com"
                            }
                          }
                        ]
                      },
                      "retry": 0
                    },
                    "onComplete": {
                      "actions": [
                        {
                          "type": "email",
                          "options": {
                            "to": "bob@example.com",
                            "from": "alice@example.com"
                          }
                        },
                        {
                          "type": "email",
                          "options": {
                            "to": "bob@example.com",
                            "from": "alice@example.com"
                          }
                        },
                        {
                          "type": "email",
                          "options": {
                            "to": "bob@example.com",
                            "from": "alice@example.com"
                          }
                        },
                        {
                          "type": "email",
                          "options": {
                            "to": "bob@example.com",
                            "from": "alice@example.com"
                          }
                        }
                      ]
                    }
                  }
                },
                "starts_at": "entry",
                "label": "MLTI iPad Assembly Assignment",
                "workflow_id": "e530652e-28e8-4f64-84af-e1cf0ff7c805",
                "applies_to": "customer",
                "slug": "mlti-ipad-assembly-assignment",
                "version": "1.0",
                "workflow_version": 7,
                "context": [
                  {
                    "key": "$.fizz",
                    "value": "Pending",
                    "lock": false,
                    "ignore": true
                  },
                  {
                    "key": "$.unit.status",
                    "value": "true",
                    "lock": false,
                    "ignore": true
                  },
                  {
                    "key": "$.unit.status",
                    "value": "Pending",
                    "lock": false,
                    "ignore": true
                  },
                  {
                    "key": "extract_fields",
                    "value": "Pending",
                    "lock": true,
                    "ignore": false
                  }
                ],
                "created": "1991-03-23T20:31:55.727Z",
                "updated": "1988-03-24T09:13:18.759Z"
              }
            }
          ]
        }
      },
      "allOf": [
        {
          "description": "Date the entity was created",
          "type": "string",
          "format": "date-time",
          "readOnly": true
        },
        {
          "description": "Last date the entity was updated",
          "type": "string",
          "format": "date-time",
          "readOnly": true
        }
      ],
      "example": "2000-04-14T12:40:22.789Z"
    }
  ]
}
```

<h3 id="fetchbomforworkflow-responses">Responses</h3>

|Status|Meaning|Description|Schema|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|Bill of Material|Inline|
|401|[Unauthorized](https://tools.ietf.org/html/rfc7235#section-3.1)|Unauthorized|Inline|
|403|[Forbidden](https://tools.ietf.org/html/rfc7231#section-6.5.3)|Forbidden|Inline|
|404|[Not Found](https://tools.ietf.org/html/rfc7231#section-6.5.4)|Resource not found|Inline|

<h3 id="fetchbomforworkflow-responseschema">Response Schema</h3>

Status Code **200**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» label|any|false|none|none|
|» parts_needed|[object]|false|none|A List of parts|
|»» part|object|false|none|Defines the properties for a part|
|»»» part_id|string|true|none|Unique identifier|
|»»» label|string|true|none|Label for the part|
|»»» slug|string|false|none|Auto-generated slug for the part|
|»»» customer|object|true|none|Customer|
|»»»» customer_id|string|true|none|Customer identifier|
|»»»» label|string|true|none|Label for the customer|
|»»»» slug|string|false|none|Auto generated slug|
|»»»» external_platform|object\|null|false|none|External Identifiers for the customer|
|»»»»» **additionalProperties**|string|false|none|none|
|»»»» allowed_statuses|[object]|false|none|List of allowed statuses|
|»»»»» status|string|true|none|A Custom label for the status|
|»»»»» category|string|false|none|The classifier for the statues|
|»»»» manufacturer|object|true|none|Manufacturer information for the part|
|»»»»» part_number|string|true|none|Manufacturer part number|
|»»»» serial_prefix|string|false|none|A serial number prefix for the part|
|»»»» input_filter|[object]|false|none|Input Filters allow custom fields to be defined for entities|
|»»»»» label|string|false|none|Human readable name|
|»»»»» key|string|false|read-only|Slug used to store the property|
|»»»»» filters|[anyOf]|false|none|A Collection of filters applied to the field|

*anyOf*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»» *anonymous*|object|false|none|This filter will set the value based on a list of approved values. If the value is not in the list, it will then be set to empty unless the default option is set|
|»»»»»»» type|string|true|none|none|
|»»»»»»» options|object|true|none|none|
|»»»»»»»» approved_values|[string]|true|none|The list of approved values|
|»»»»»»»» check_case|boolean|false|none|Perform a case sensitive match. By default will not match case|
|»»»»»»»» default|string\|null|false|none|If this is set and the value is not in the approved_list, set the value to this|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»» *anonymous*|object|false|none|Make the value camelCase|
|»»»»»»»» type|string|true|none|none|
|»»»»»»»» options|object|true|none|This filter has no options|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»» *anonymous*|object|false|none|Filter to transform a value into a date|
|»»»»»»»» type|string|true|none|none|
|»»»»»»»» options|object|true|none|Date filter has no options|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»» *anonymous*|object|false|none|Filter to transform values into null. This is helpful when trying to make a value required. The following are considered empty: # The number 0 or 0.0 # empty string '' # A boolean false # The word 'false' #|
|»»»»»»»» type|string|true|none|none|
|»»»»»»»» options|object|true|none|empty filter has no options|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»» *anonymous*|object|false|none|Filter to transform a value into a float. Non numeric characters (including comma) will be removed|
|»»»»»»»» type|string|true|none|none|
|»»»»»»»» options|object|true|none|none|
|»»»»»»»»» precision|integer|false|none|How many decimal places to preserve|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»» *anonymous*|object|false|none|Make the value kebab-case|
|»»»»»»»»» type|string|true|none|none|
|»»»»»»»»» options|object|true|none|This filter has no options|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»» *anonymous*|object|false|none|Make the value lowercase|
|»»»»»»»»» type|string|true|none|none|
|»»»»»»»»» options|object|true|none|This filter has no options|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»» *anonymous*|object|false|none|Filter to transform a value into a number. Non numeric characters (including comma and decimal points) will be removed|
|»»»»»»»»» type|string|true|none|none|
|»»»»»»»»» options|object|true|none|Number filter has no options|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»» *anonymous*|object|false|none|Add a prefix to the start of a string. If the string already start with the prefix, it will not prepend.|
|»»»»»»»»» type|string|true|none|none|
|»»»»»»»»» options|object|true|none|none|
|»»»»»»»»»» prefix|string|true|none|The prefix to add|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»»» *anonymous*|object|false|none|Make the value snake_case|
|»»»»»»»»»» type|string|true|none|none|
|»»»»»»»»»» options|object|true|none|This filter has no options|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»»» *anonymous*|object|false|none|Filter to transform a value into a string|
|»»»»»»»»»» type|string|true|none|none|
|»»»»»»»»»» options|object|true|none|String filter has no options|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»»» *anonymous*|object|false|none|Add a suffix to the start of a string. If the string already start with the suffix, it will not append.|
|»»»»»»»»»» type|string|true|none|none|
|»»»»»»»»»» options|object|true|none|none|
|»»»»»»»»»»» suffix|string|true|none|The suffix to add|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»»»» *anonymous*|object|false|none|Filter to trim whitespace from a value|
|»»»»»»»»»»» type|string|true|none|none|
|»»»»»»»»»»» options|object|true|none|By default will trim from the start and end|
|»»»»»»»»»»»» start|boolean|false|none|Remove white space from the start of the string|
|»»»»»»»»»»»» end|boolean|false|none|Remove white space from the end of the string|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»»»»» *anonymous*|object|false|none|Make the value UPPERCASE|
|»»»»»»»»»»»» type|string|true|none|none|
|»»»»»»»»»»»» options|object|true|none|This filter has no options|

*continued*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»»»»» validators|[anyOf]|false|none|A set of validators to use for this field|

*anyOf*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»»»»»» *anonymous*|object|false|none|Validate number is between two values. By default, min and max are included|
|»»»»»»»»»»»»» type|string|true|none|none|
|»»»»»»»»»»»»» options|object|true|none|none|
|»»»»»»»»»»»»»» min|number|true|none|Minimum value to check|
|»»»»»»»»»»»»»» max|number|true|none|The maximum value to check|
|»»»»»»»»»»»»»» precision|integer|false|none|When number is a float, this will set the decimal precision|
|»»»»»»»»»»»»»» include|boolean|false|none|Include the value in the check|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»»»»»»» *anonymous*|object|false|none|Validate value does not match a list (black list)|
|»»»»»»»»»»»»»» type|string|true|none|none|
|»»»»»»»»»»»»»» options|object|true|none|none|
|»»»»»»»»»»»»»»» list|[string]|true|none|The list of approved values|
|»»»»»»»»»»»»»»» check_case|boolean|false|none|Perform a case sensitive match. By default will not match case|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»»»»»»»» *anonymous*|object|false|none|Validate string contains a value|
|»»»»»»»»»»»»»»» type|string|true|none|none|
|»»»»»»»»»»»»»»» options|object|true|none|none|
|»»»»»»»»»»»»»»»» contains|string|true|none|String must contain with this value|
|»»»»»»»»»»»»»»»» check_case|boolean|false|none|Perform a case sensitive match. By default will not match case|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»»»»»»»»» *anonymous*|object|false|none|Validate string is a correct email address|
|»»»»»»»»»»»»»»»» type|string|true|none|none|
|»»»»»»»»»»»»»»»» options|object|true|none|none|
|»»»»»»»»»»»»»»»»» strict|boolean|false|none|Enforce strict standards from ARPA. This will enforce the length of the string|
|»»»»»»»»»»»»»»»»» lookup|boolean|false|none|Look up the host name and check if it has a valid MX record|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»»»»»»»»»» *anonymous*|object|false|none|Validate string ends with a value|
|»»»»»»»»»»»»»»»»» type|string|true|none|none|
|»»»»»»»»»»»»»»»»» options|object|true|none|none|
|»»»»»»»»»»»»»»»»»» ends_with|string|true|none|String must end with this value|
|»»»»»»»»»»»»»»»»»» check_case|boolean|false|none|Perform a case sensitive match. By default will not match case|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»»»»»»»»»»» *anonymous*|object|false|none|Validate number equals a value|
|»»»»»»»»»»»»»»»»»» type|string|true|none|none|
|»»»»»»»»»»»»»»»»»» options|object|true|none|none|
|»»»»»»»»»»»»»»»»»»» value|number|true|none|The value to compare against|
|»»»»»»»»»»»»»»»»»»» precision|integer|false|none|When value is a float, this will set the decimal precision|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»»»»»»»»»»»» *anonymous*|object|false|none|Validate number is greater than a value. By default, this will check if value is greater than or equals to|
|»»»»»»»»»»»»»»»»»»» type|string|true|none|none|
|»»»»»»»»»»»»»»»»»»» options|object|true|none|none|
|»»»»»»»»»»»»»»»»»»»» value|number|true|none|The value to compare against|
|»»»»»»»»»»»»»»»»»»»» precision|integer|false|none|When number is a float, this will set the decimal precision|
|»»»»»»»»»»»»»»»»»»»» include|boolean|false|none|Include the value in the check|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»»»»»»»»»»»»» *anonymous*|object|false|none|Validate string has a correct DNS records|
|»»»»»»»»»»»»»»»»»»»» type|string|true|none|none|
|»»»»»»»»»»»»»»»»»»»» options|object|true|none|none|
|»»»»»»»»»»»»»»»»»»»»» record_type|string|false|none|DNS record type to validate|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»»»»»»»»»»»»»» *anonymous*|object|false|none|Validate string matches an IP address format. Defaults to matching IPv4|
|»»»»»»»»»»»»»»»»»»»»» type|string|true|none|none|
|»»»»»»»»»»»»»»»»»»»»» options|object|true|none|none|
|»»»»»»»»»»»»»»»»»»»»»» versions|[string]|false|none|IP Version to match against|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»»»»»»»»»»»»»»» *anonymous*|object|false|none|Validate string is a certain length|
|»»»»»»»»»»»»»»»»»»»»»» type|string|true|none|none|
|»»»»»»»»»»»»»»»»»»»»»» options|object|true|none|none|
|»»»»»»»»»»»»»»»»»»»»»»» length|string|true|none|String must contain with this value|
|»»»»»»»»»»»»»»»»»»»»»»» operator|string|false|none|Which type of length comparision to make|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»»»»»»»»»»»»»»»» *anonymous*|object|false|none|Validate number is less than a value. By default, this will check if value is less than or equals to|
|»»»»»»»»»»»»»»»»»»»»»»» type|string|true|none|none|
|»»»»»»»»»»»»»»»»»»»»»»» options|object|true|none|none|
|»»»»»»»»»»»»»»»»»»»»»»»» value|number|true|none|The value to compare against|
|»»»»»»»»»»»»»»»»»»»»»»»» precision|integer|false|none|When number is a float, this will set the decimal precision|
|»»»»»»»»»»»»»»»»»»»»»»»» include|boolean|false|none|Include the value in the check|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»»»»»»»»»»»»»»»»» *anonymous*|object|false|none|Validate string matches an MAC address format|
|»»»»»»»»»»»»»»»»»»»»»»»» type|string|true|none|none|
|»»»»»»»»»»»»»»»»»»»»»»»» options|object|true|none|This validator has no options|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»»»»»»»»»»»»»»»»» *anonymous*|object|false|none|Validate string matches a regular expression|
|»»»»»»»»»»»»»»»»»»»»»»»» type|string|true|none|none|
|»»»»»»»»»»»»»»»»»»»»»»»» options|object|true|none|none|
|»»»»»»»»»»»»»»»»»»»»»»»»» mask|string|true|none|Mask to validate against|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»»»»»»»»»»»»»»»»»» *anonymous*|object|false|none|Validate string starts with a value|
|»»»»»»»»»»»»»»»»»»»»»»»»» type|string|true|none|none|
|»»»»»»»»»»»»»»»»»»»»»»»»» options|object|true|none|none|
|»»»»»»»»»»»»»»»»»»»»»»»»»» starts_with|string|true|none|String must start with this value|
|»»»»»»»»»»»»»»»»»»»»»»»»»» check_case|boolean|false|none|Perform a case sensitive match. By default will not match case|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»»»»»»»»»»»»»»»»»»» *anonymous*|object|false|none|Validates that a value follows a step. Both start and end options do not have to sync with the step. If they do not sync then find the nearest step.|
|»»»»»»»»»»»»»»»»»»»»»»»»»» type|string|true|none|none|
|»»»»»»»»»»»»»»»»»»»»»»»»»» options|object|true|none|none|
|»»»»»»»»»»»»»»»»»»»»»»»»»»» step|number|true|none|The step value|
|»»»»»»»»»»»»»»»»»»»»»»»»»»» start|integer|false|none|Start stepping at this value|
|»»»»»»»»»»»»»»»»»»»»»»»»»»» end|integer|false|none|End stepping at this value|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»»»»»»»»»»»»»»»»»»»» *anonymous*|object|false|none|Validate string matches an URI|
|»»»»»»»»»»»»»»»»»»»»»»»»»»» type|string|true|none|none|
|»»»»»»»»»»»»»»»»»»»»»»»»»»» options|object|true|none|none|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»» schemes|[string]|false|none|Schemes to match. By default all are matched|

*or*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»»»»»»»»»»»»»»»»»»»»» *anonymous*|object|false|none|Validate value matches a list (white list)|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»» type|string|true|none|none|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»» options|object|true|none|none|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»»» list|[string]|true|none|The list of approved values|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»»» check_case|boolean|false|none|Perform a case sensitive match. By default will not match case|

*continued*

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»» total|integer(int32)|false|none|number of units needed|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»» total_by_allocation|object|false|none|none|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»»» allocated|integer(int32)|false|none|number of units needed to be allocated|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»»» unallocated|integer(int32)|false|none|number of units needed to be unallocated|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»»» enters_allocated|boolean|false|none|Weather the unit starts allocated|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»»» leaves_allocated|boolean|false|none|Weather the unit ends allocated|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»» total_by_status|[object]|false|none|none|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»»» total|integer(int32)|false|none|number of units needed at this status|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»»» enters_at|boolean|false|none|Weather the unit is required to have this status at the start of the workflow|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»»» leaves_at|boolean|false|none|Weather the unit is has this status at the end of the workflow|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»»» status|object|false|none|Defines the properties for a status|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»» workflow|object|false|none|The workflow|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»»» workflow_id|string|true|none|Customer identifier|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»»» label|string|true|none|Label for the workflow|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»»» slug|string|false|none|Auto-generated slug for the workflow|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»»» version|string|false|none|Version of the workflow schema used|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»»» workflow_version|integer(int32)|false|read-only|Version number for the work flows (the number of times it has been changed|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»»» applies_to|string|true|none|The entity type this work flow applies too|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»»» starts_at|string|true|none|Starting step|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»»» context|[object]|false|none|Initial values to set on the context|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» key|string|true|none|The context key to set|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» value|string|true|none|Value to set|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» lock|boolean|false|none|Prevents other steps from writing this value|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ignore|boolean|false|none|When trying to set a locked key, do not fail|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»»» steps|object|true|none|Steps for the workflow|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» **additionalProperties**|object|false|none|Close step|
|»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» step|string|true|none|Step to mark as complete|

#### Enumerated Values

|Property|Value|
|---|---|
|category|PENDING|
|category|IN_PROGRESS|
|category|VERIFYING|
|category|COMPLETE|
|category|CANCELLED|
|category|BLOCKED|
|type|allowed_list|
|type|camel|
|type|date|
|type|empty|
|type|float|
|type|kebab|
|type|lower|
|type|number|
|type|prefix|
|type|snake|
|type|string|
|type|suffix|
|type|trim|
|type|upper|
|type|greater_than|
|type|white_list|
|type|contains|
|type|email_address|
|type|ends_with|
|type|equals|
|type|greater_than|
|type|hostname|
|record_type|A|
|record_type|AAAA|
|record_type|AFSDB|
|record_type|APL|
|record_type|CAA|
|record_type|CDNSKEY|
|record_type|CDS|
|record_type|CERT|
|record_type|CNAME|
|record_type|CSYNC|
|record_type|DHCID|
|record_type|DLV|
|record_type|DNAME|
|record_type|DNSKEY|
|record_type|DS|
|record_type|HIP|
|record_type|IPSECKEY|
|record_type|KEY|
|record_type|KX|
|record_type|LOC|
|record_type|MX|
|record_type|NAPTR|
|record_type|NS|
|record_type|NSEC|
|record_type|NSEC3|
|record_type|NSEC3PARAM|
|record_type|OPENPGPKEY|
|record_type|PTR|
|record_type|RRSIG|
|record_type|RP|
|record_type|SIG|
|record_type|SMIMEA|
|record_type|SOA|
|record_type|SRV|
|record_type|SSHFP|
|record_type|TA|
|record_type|TKEY|
|record_type|TLSA|
|record_type|TSIG|
|record_type|TXT|
|record_type|URI|
|type|ipAddress|
|type|length|
|operator|equals|
|operator|less_than|
|operator|less_than_equals|
|operator|greater_than|
|operator|greater_than_equals|
|type|lessThan|
|type|macAddress|
|type|mask|
|type|startsWith|
|type|step|
|type|uri|
|type|whiteList|
|version|1.0|
|applies_to|unit|
|applies_to|part|
|applies_to|program|
|applies_to|project|
|applies_to|customer|
|applies_to|contact|

Status Code **401**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» title|any|false|none|none|
|» type|any|false|none|none|
|» status|any|false|none|none|
|» detail|any|false|none|none|

Status Code **403**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» title|any|false|none|none|
|» type|any|false|none|none|
|» status|any|false|none|none|
|» detail|any|false|none|none|

Status Code **404**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» title|any|false|none|none|
|» type|any|false|none|none|
|» status|any|false|none|none|
|» detail|any|false|none|none|

<aside class="success">
This operation does not require authentication
</aside>

## fetchContextsForWorkflow

<a id="opIdfetchContextsForWorkflow"></a>

`GET /work-flows/:workflow_id/contexts`

*Fetches A Page of active contexts for a workflow*

Fetch Workflow Contexts

<h3 id="fetchcontextsforworkflow-parameters">Parameters</h3>

|Name|In|Type|Required|Description|
|---|---|---|---|---|
|workflow_id|path|string|true|Id for the workflow|
|limit|query|integer(int32)|false|How many items to return at one time (max 100)|
|offset|query|string|false|Continue from last offset|
|sort|query|string|false|Sort by field|
|filter[waiting_for_user]|query|boolean|false|Filter where the context is waiting for user|

#### Enumerated Values

|Parameter|Value|
|---|---|
|sort|label|
|sort|-label|
|sort|created|
|sort|-created|
|sort|updated|
|sort|-updated|
|sort|active|
|sort|-active|

> Example responses

> 200 Response

```json
{
  "properties": {
    "_embedded": {
      "type": "object",
      "properties": {
        "nter:contexts": {
          "type": "array",
          "maxItems": 100,
          "items": {
            "type": "object",
            "x-hal": true,
            "x-ui-hide": true,
            "properties": {
              "_links": {
                "type": "object",
                "properties": {
                  "self": {
                    "type": "object",
                    "readOnly": true,
                    "properties": {
                      "href": {
                        "type": "string",
                        "example": "https://api.nterprise.com/contexts/ab87d29b-02ac-46f0-a487-dc84059907f0"
                      }
                    }
                  }
                }
              }
            },
            "allOf": [
              {
                "x-nter-relation": "contexts",
                "x-nter-model": "Context",
                "x-nter-callable": true,
                "type": "object",
                "properties": {
                  "context_id": {
                    "type": "string",
                    "description": "Identifier for the context",
                    "example": "MWMwMjIyNTgtYWZjZC00YmYyLWE1NzYtYWU1OWI3YTE1ZDczOlVOSVQ6NTMxMDI5MjQtNDUwYS00ZjFlLWI1ZDQtYTIwN2JjNTg2NTIxOjE1Njc2MDUwNTU5OTUuNDQ1NjYzNDM-",
                    "x-examples": [
                      "MWMwMjIyNTgtYWZjZC00YmYyLWE1NzYtYWU1OWI3YTE1ZDczOlVOSVQ6NTMxMDI5MjQtNDUwYS00ZjFlLWI1ZDQtYTIwN2JjNTg2NTIxOjE1Njc2MDUwNTU5OTUuNDQ1NjYzNDM-"
                    ],
                    "pattern": "^[A-Za-z0-9-_]+$"
                  },
                  "workflow": {
                    "x-id": "#workflow",
                    "x-nter-relation": "work-flows",
                    "x-nter-model": "WorkFlow",
                    "x-nter-callable": true,
                    "type": "object",
                    "description": "Workflow",
                    "required": [
                      "steps",
                      "starts_at",
                      "label",
                      "workflow_id",
                      "applies_to"
                    ],
                    "properties": {
                      "workflow_id": {
                        "type": "string",
                        "description": "Customer identifier",
                        "example": "e530652e-28e8-4f64-84af-e1cf0ff7c805",
                        "x-examples": [
                          "e530652e-28e8-4f64-84af-e1cf0ff7c805"
                        ],
                        "pattern": "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"
                      },
                      "label": {
                        "type": "string",
                        "example": "MLTI iPad Assembly Assignment",
                        "x-examples": [
                          "MLTI iPad Assembly Assignment"
                        ],
                        "description": "Label for the workflow"
                      },
                      "slug": {
                        "type": "string",
                        "description": "Auto-generated slug for the workflow",
                        "example": "mlti-ipad-assembly-assignment",
                        "x-examples": [
                          "mlti-ipad-assembly-assignment"
                        ]
                      },
                      "version": {
                        "type": "string",
                        "description": "Version of the workflow schema used",
                        "enum": [
                          "1.0"
                        ],
                        "example": "1.0"
                      },
                      "workflow_version": {
                        "type": "integer",
                        "format": "int32",
                        "example": 7,
                        "x-examples": [
                          7
                        ],
                        "readOnly": true,
                        "description": "Version number for the work flows (the number of times it has been changed"
                      },
                      "applies_to": {
                        "type": "string",
                        "description": "The entity type this work flow applies too",
                        "enum": [
                          "unit",
                          "part",
                          "program",
                          "project",
                          "customer",
                          "contact"
                        ],
                        "example": "unit"
                      },
                      "starts_at": {
                        "type": "string",
                        "description": "Starting step",
                        "example": "entry",
                        "x-examples": [
                          "entry"
                        ]
                      },
                      "context": {
                        "type": "array",
                        "description": "Initial values to set on the context",
                        "items": {
                          "type": "object",
                          "required": [
                            "key",
                            "value"
                          ],
                          "properties": {
                            "key": {
                              "type": "string",
                              "description": "The context key to set",
                              "example": "$.fizz",
                              "x-examples": [
                                "$.fizz",
                                "$.unit.status",
                                "extract_fields"
                              ]
                            },
                            "value": {
                              "type": "string",
                              "description": "Value to set",
                              "example": "$.buzz",
                              "x-examples": [
                                "$.buzz",
                                "Pending",
                                true
                              ]
                            },
                            "lock": {
                              "type": "boolean",
                              "description": "Prevents other steps from writing this value",
                              "example": true
                            },
                            "ignore": {
                              "type": "boolean",
                              "description": "When trying to set a locked key, do not fail",
                              "example": false
                            }
                          }
                        }
                      },
                      "steps": {
                        "type": "object",
                        "description": "Steps for the workflow",
                        "x-patternProperties": {
                          "(confirm|success|fail|manual|run-ace|follow)": {
                            "type": "object",
                            "allOf": [
                              {
                                "type": "object",
                                "description": "Close step",
                                "required": [
                                  "step"
                                ],
                                "properties": {
                                  "step": {
                                    "type": "string",
                                    "description": "Step to mark as complete",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "complete",
                                    "x-examples": [
                                      "complete"
                                    ]
                                  }
                                },
                                "anyOf": [
                                  {
                                    "type": "object",
                                    "description": "Require the user confirm an action. This is normally used when Niagara cannot automatically detect that a task or action has been performed.",
                                    "x-nter-step-component": "confirm-action",
                                    "properties": {
                                      "label": {
                                        "x-examples": [
                                          "Confirm the device has powered off"
                                        ]
                                      },
                                      "options": {
                                        "type": "object",
                                        "required": [
                                          "component",
                                          "payload"
                                        ],
                                        "properties": {
                                          "component": {
                                            "enum": [
                                              "confirm-action"
                                            ],
                                            "example": "confirm-action",
                                            "x-examples": [
                                              "confirm-action"
                                            ]
                                          },
                                          "payload": {
                                            "type": "object",
                                            "required": [
                                              "message"
                                            ],
                                            "properties": {
                                              "message": {
                                                "type": "string",
                                                "description": "The confirmation message to display to the user",
                                                "example": "Device powered off?",
                                                "x-examples": [
                                                  "Device powered off?"
                                                ]
                                              },
                                              "negative_message": {
                                                "type": "string",
                                                "description": "An optional inverse message",
                                                "nullable": true,
                                                "example": "Device not functioning",
                                                "x-examples": [
                                                  "Device not functioning"
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "x-ui-hide": true,
                                        "description": "A step which requires a user to complete",
                                        "required": [
                                          "type",
                                          "options"
                                        ],
                                        "properties": {
                                          "type": {
                                            "example": "user",
                                            "x-examples": [
                                              "user"
                                            ]
                                          },
                                          "options": {
                                            "type": "object",
                                            "required": [
                                              "component",
                                              "payload"
                                            ],
                                            "properties": {
                                              "component": {
                                                "type": "string",
                                                "description": "Name of the function to invoke",
                                                "example": "assignUnitsFromCustomerToProject",
                                                "x-examples": [
                                                  "assignUnitsFromCustomerToProject"
                                                ]
                                              },
                                              "payload": {
                                                "type": "object"
                                              }
                                            }
                                          }
                                        },
                                        "allOf": [
                                          {
                                            "type": "object",
                                            "x-ui-hide": true,
                                            "required": [
                                              "type",
                                              "label",
                                              "goto"
                                            ],
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "Type of workflow step",
                                                "enum": [
                                                  "load",
                                                  "choice",
                                                  "function",
                                                  "machine",
                                                  "pass",
                                                  "fail",
                                                  "success",
                                                  "user",
                                                  "wait"
                                                ]
                                              },
                                              "label": {
                                                "type": "string",
                                                "description": "Label for the step",
                                                "example": "Find units",
                                                "x-examples": [
                                                  "Find units"
                                                ]
                                              },
                                              "goto": {
                                                "type": "string",
                                                "description": "Step to move to",
                                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                                "example": "complete",
                                                "x-examples": [
                                                  "complete"
                                                ]
                                              },
                                              "goto-fail": {
                                                "type": "string",
                                                "description": "Step to transition too if this step cannot be completed",
                                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                                "example": "process-fail",
                                                "x-examples": [
                                                  "process-fail"
                                                ]
                                              },
                                              "context": {
                                                "type": "array",
                                                "description": "Initial values to set on the context",
                                                "items": {
                                                  "type": "object",
                                                  "required": [
                                                    "key",
                                                    "value"
                                                  ],
                                                  "properties": {
                                                    "key": {
                                                      "type": "string",
                                                      "description": "The context key to set",
                                                      "example": "$.fizz",
                                                      "x-examples": [
                                                        "$.fizz",
                                                        "$.unit.status",
                                                        "extract_fields"
                                                      ]
                                                    },
                                                    "value": {
                                                      "type": "string",
                                                      "description": "Value to set",
                                                      "example": "$.buzz",
                                                      "x-examples": [
                                                        "$.buzz",
                                                        "Pending",
                                                        true
                                                      ]
                                                    },
                                                    "lock": {
                                                      "type": "boolean",
                                                      "description": "Prevents other steps from writing this value",
                                                      "example": true
                                                    },
                                                    "ignore": {
                                                      "type": "boolean",
                                                      "description": "When trying to set a locked key, do not fail",
                                                      "example": false
                                                    }
                                                  }
                                                }
                                              },
                                              "onError": {
                                                "type": "object",
                                                "description": "Action to take when step fails",
                                                "required": [
                                                  "finally"
                                                ],
                                                "properties": {
                                                  "retry": {
                                                    "type": "integer",
                                                    "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                                    "minimum": 0,
                                                    "maximum": 10,
                                                    "example": 3,
                                                    "default": 0
                                                  },
                                                  "finally": {
                                                    "type": "object",
                                                    "description": "What to do after all retries",
                                                    "required": [
                                                      "goto"
                                                    ],
                                                    "properties": {
                                                      "actions": {
                                                        "type": "array",
                                                        "description": "Actions to take on failure",
                                                        "items": {
                                                          "anyOf": [
                                                            {
                                                              "type": "object",
                                                              "properties": {
                                                                "type": {
                                                                  "type": "string",
                                                                  "description": "The type of the action",
                                                                  "enum": [
                                                                    "email"
                                                                  ]
                                                                },
                                                                "options": {
                                                                  "type": "object",
                                                                  "description": "settings for the action",
                                                                  "additionalProperties": {
                                                                    "type": "string"
                                                                  },
                                                                  "x-examples": [
                                                                    {
                                                                      "to": "bob@example.com",
                                                                      "from": "alice@example.com"
                                                                    }
                                                                  ]
                                                                }
                                                              }
                                                            }
                                                          ]
                                                        }
                                                      },
                                                      "goto": {
                                                        "type": "string",
                                                        "description": "Step to transition to on failure",
                                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                                        "example": "failed",
                                                        "x-examples": [
                                                          "failed"
                                                        ]
                                                      }
                                                    }
                                                  }
                                                }
                                              },
                                              "onComplete": {
                                                "type": "object",
                                                "description": "Actions to take when the step completes",
                                                "properties": {
                                                  "actions": {
                                                    "type": "array",
                                                    "items": {
                                                      "anyOf": [
                                                        {
                                                          "type": "object",
                                                          "properties": {
                                                            "type": {
                                                              "type": "string",
                                                              "description": "The type of the action",
                                                              "enum": [
                                                                "email"
                                                              ]
                                                            },
                                                            "options": {
                                                              "type": "object",
                                                              "description": "settings for the action",
                                                              "additionalProperties": {
                                                                "type": "string"
                                                              },
                                                              "x-examples": [
                                                                {
                                                                  "to": "bob@example.com",
                                                                  "from": "alice@example.com"
                                                                }
                                                              ]
                                                            }
                                                          }
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "object",
                                    "description": "Display a link or modal to a user which contains instructions from a PDF",
                                    "x-nter-step-component": "follow-pdf-instructions",
                                    "required": [
                                      "label",
                                      "payload"
                                    ],
                                    "properties": {
                                      "label": {
                                        "x-examples": [
                                          "Instruct user to follow steps outlined in Apple PDF"
                                        ]
                                      },
                                      "options": {
                                        "type": "object",
                                        "required": [
                                          "component",
                                          "payload"
                                        ],
                                        "properties": {
                                          "component": {
                                            "enum": [
                                              "follow-pds-instructions"
                                            ],
                                            "example": "follow-pdf-instructions",
                                            "x-examples": [
                                              "follow-pdf-instructions"
                                            ]
                                          },
                                          "payload": {
                                            "type": "object",
                                            "required": [
                                              "attachment_id"
                                            ],
                                            "properties": {
                                              "attachment_id": {
                                                "type": "string",
                                                "description": "UUID for the attachment",
                                                "format": "uuid",
                                                "example": "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7",
                                                "x-examples": [
                                                  "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7"
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "x-ui-hide": true,
                                        "description": "A step which requires a user to complete",
                                        "required": [
                                          "type",
                                          "options"
                                        ],
                                        "properties": {
                                          "type": {
                                            "example": "user",
                                            "x-examples": [
                                              "user"
                                            ]
                                          },
                                          "options": {
                                            "type": "object",
                                            "required": [
                                              "component",
                                              "payload"
                                            ],
                                            "properties": {
                                              "component": {
                                                "type": "string",
                                                "description": "Name of the function to invoke",
                                                "example": "assignUnitsFromCustomerToProject",
                                                "x-examples": [
                                                  "assignUnitsFromCustomerToProject"
                                                ]
                                              },
                                              "payload": {
                                                "type": "object"
                                              }
                                            }
                                          }
                                        },
                                        "allOf": [
                                          {
                                            "type": "object",
                                            "x-ui-hide": true,
                                            "required": [
                                              "type",
                                              "label",
                                              "goto"
                                            ],
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "Type of workflow step",
                                                "enum": [
                                                  "load",
                                                  "choice",
                                                  "function",
                                                  "machine",
                                                  "pass",
                                                  "fail",
                                                  "success",
                                                  "user",
                                                  "wait"
                                                ]
                                              },
                                              "label": {
                                                "type": "string",
                                                "description": "Label for the step",
                                                "example": "Find units",
                                                "x-examples": [
                                                  "Find units"
                                                ]
                                              },
                                              "goto": {
                                                "type": "string",
                                                "description": "Step to move to",
                                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                                "example": "complete",
                                                "x-examples": [
                                                  "complete"
                                                ]
                                              },
                                              "goto-fail": {
                                                "type": "string",
                                                "description": "Step to transition too if this step cannot be completed",
                                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                                "example": "process-fail",
                                                "x-examples": [
                                                  "process-fail"
                                                ]
                                              },
                                              "context": {
                                                "type": "array",
                                                "description": "Initial values to set on the context",
                                                "items": {
                                                  "type": "object",
                                                  "required": [
                                                    "key",
                                                    "value"
                                                  ],
                                                  "properties": {
                                                    "key": {
                                                      "type": "string",
                                                      "description": "The context key to set",
                                                      "example": "$.fizz",
                                                      "x-examples": [
                                                        "$.fizz",
                                                        "$.unit.status",
                                                        "extract_fields"
                                                      ]
                                                    },
                                                    "value": {
                                                      "type": "string",
                                                      "description": "Value to set",
                                                      "example": "$.buzz",
                                                      "x-examples": [
                                                        "$.buzz",
                                                        "Pending",
                                                        true
                                                      ]
                                                    },
                                                    "lock": {
                                                      "type": "boolean",
                                                      "description": "Prevents other steps from writing this value",
                                                      "example": true
                                                    },
                                                    "ignore": {
                                                      "type": "boolean",
                                                      "description": "When trying to set a locked key, do not fail",
                                                      "example": false
                                                    }
                                                  }
                                                }
                                              },
                                              "onError": {
                                                "type": "object",
                                                "description": "Action to take when step fails",
                                                "required": [
                                                  "finally"
                                                ],
                                                "properties": {
                                                  "retry": {
                                                    "type": "integer",
                                                    "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                                    "minimum": 0,
                                                    "maximum": 10,
                                                    "example": 3,
                                                    "default": 0
                                                  },
                                                  "finally": {
                                                    "type": "object",
                                                    "description": "What to do after all retries",
                                                    "required": [
                                                      "goto"
                                                    ],
                                                    "properties": {
                                                      "actions": {
                                                        "type": "array",
                                                        "description": "Actions to take on failure",
                                                        "items": {
                                                          "anyOf": [
                                                            {
                                                              "type": "object",
                                                              "properties": {
                                                                "type": {
                                                                  "type": "string",
                                                                  "description": "The type of the action",
                                                                  "enum": [
                                                                    "email"
                                                                  ]
                                                                },
                                                                "options": {
                                                                  "type": "object",
                                                                  "description": "settings for the action",
                                                                  "additionalProperties": {
                                                                    "type": "string"
                                                                  },
                                                                  "x-examples": [
                                                                    {
                                                                      "to": "bob@example.com",
                                                                      "from": "alice@example.com"
                                                                    }
                                                                  ]
                                                                }
                                                              }
                                                            }
                                                          ]
                                                        }
                                                      },
                                                      "goto": {
                                                        "type": "string",
                                                        "description": "Step to transition to on failure",
                                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                                        "example": "failed",
                                                        "x-examples": [
                                                          "failed"
                                                        ]
                                                      }
                                                    }
                                                  }
                                                }
                                              },
                                              "onComplete": {
                                                "type": "object",
                                                "description": "Actions to take when the step completes",
                                                "properties": {
                                                  "actions": {
                                                    "type": "array",
                                                    "items": {
                                                      "anyOf": [
                                                        {
                                                          "type": "object",
                                                          "properties": {
                                                            "type": {
                                                              "type": "string",
                                                              "description": "The type of the action",
                                                              "enum": [
                                                                "email"
                                                              ]
                                                            },
                                                            "options": {
                                                              "type": "object",
                                                              "description": "settings for the action",
                                                              "additionalProperties": {
                                                                "type": "string"
                                                              },
                                                              "x-examples": [
                                                                {
                                                                  "to": "bob@example.com",
                                                                  "from": "alice@example.com"
                                                                }
                                                              ]
                                                            }
                                                          }
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "object",
                                    "description": "Ask the user to manually enter (or confirm) data for an entity",
                                    "x-nter-step-component": "manual-data-entry",
                                    "properties": {
                                      "label": {
                                        "x-examples": [
                                          "Enter asset tag and confirm serial number"
                                        ]
                                      },
                                      "options": {
                                        "type": "object",
                                        "required": [
                                          "component",
                                          "payload"
                                        ],
                                        "properties": {
                                          "component": {
                                            "enum": [
                                              "manual-data-entry"
                                            ],
                                            "example": "manual-data-entry",
                                            "x-examples": [
                                              "manual-data-entry"
                                            ]
                                          },
                                          "payload": {
                                            "type": "object",
                                            "required": [
                                              "fields"
                                            ],
                                            "properties": {
                                              "fields": {
                                                "type": "array",
                                                "description": "Configuration for each field",
                                                "items": {
                                                  "type": "object",
                                                  "required": [
                                                    "input_type",
                                                    "label",
                                                    "required",
                                                    "entity_field"
                                                  ],
                                                  "properties": {
                                                    "input_type": {
                                                      "type": "string",
                                                      "description": "The type of input field to display",
                                                      "enum": [
                                                        "textbox",
                                                        "input"
                                                      ]
                                                    },
                                                    "label": {
                                                      "type": "string",
                                                      "description": "Label to display for the field",
                                                      "example": "Asset Tag",
                                                      "x-examples": [
                                                        "Asset Tag"
                                                      ]
                                                    },
                                                    "required": {
                                                      "type": "boolean",
                                                      "description": "Display the field as required input. Note: this is a helper function. It singles that the user is required to input data at this step. If the field is required on the entity, the user will be presented with a validation message",
                                                      "example": true
                                                    },
                                                    "entity_field": {
                                                      "type": "string",
                                                      "description": "JSON Path to the field on the entity. If the path does not start with '$' then the entity on the context is assumed. Otherwise the data will be set on the context path",
                                                      "example": "input_filter[?(@.key = 'asset-tag')]",
                                                      "x-examples": [
                                                        "input_filter[?(@.key = 'asset-tag')]"
                                                      ]
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "x-ui-hide": true,
                                        "description": "A step which requires a user to complete",
                                        "required": [
                                          "type",
                                          "options"
                                        ],
                                        "properties": {
                                          "type": {
                                            "example": "user",
                                            "x-examples": [
                                              "user"
                                            ]
                                          },
                                          "options": {
                                            "type": "object",
                                            "required": [
                                              "component",
                                              "payload"
                                            ],
                                            "properties": {
                                              "component": {
                                                "type": "string",
                                                "description": "Name of the function to invoke",
                                                "example": "assignUnitsFromCustomerToProject",
                                                "x-examples": [
                                                  "assignUnitsFromCustomerToProject"
                                                ]
                                              },
                                              "payload": {
                                                "type": "object"
                                              }
                                            }
                                          }
                                        },
                                        "allOf": [
                                          {
                                            "type": "object",
                                            "x-ui-hide": true,
                                            "required": [
                                              "type",
                                              "label",
                                              "goto"
                                            ],
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "Type of workflow step",
                                                "enum": [
                                                  "load",
                                                  "choice",
                                                  "function",
                                                  "machine",
                                                  "pass",
                                                  "fail",
                                                  "success",
                                                  "user",
                                                  "wait"
                                                ]
                                              },
                                              "label": {
                                                "type": "string",
                                                "description": "Label for the step",
                                                "example": "Find units",
                                                "x-examples": [
                                                  "Find units"
                                                ]
                                              },
                                              "goto": {
                                                "type": "string",
                                                "description": "Step to move to",
                                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                                "example": "complete",
                                                "x-examples": [
                                                  "complete"
                                                ]
                                              },
                                              "goto-fail": {
                                                "type": "string",
                                                "description": "Step to transition too if this step cannot be completed",
                                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                                "example": "process-fail",
                                                "x-examples": [
                                                  "process-fail"
                                                ]
                                              },
                                              "context": {
                                                "type": "array",
                                                "description": "Initial values to set on the context",
                                                "items": {
                                                  "type": "object",
                                                  "required": [
                                                    "key",
                                                    "value"
                                                  ],
                                                  "properties": {
                                                    "key": {
                                                      "type": "string",
                                                      "description": "The context key to set",
                                                      "example": "$.fizz",
                                                      "x-examples": [
                                                        "$.fizz",
                                                        "$.unit.status",
                                                        "extract_fields"
                                                      ]
                                                    },
                                                    "value": {
                                                      "type": "string",
                                                      "description": "Value to set",
                                                      "example": "$.buzz",
                                                      "x-examples": [
                                                        "$.buzz",
                                                        "Pending",
                                                        true
                                                      ]
                                                    },
                                                    "lock": {
                                                      "type": "boolean",
                                                      "description": "Prevents other steps from writing this value",
                                                      "example": true
                                                    },
                                                    "ignore": {
                                                      "type": "boolean",
                                                      "description": "When trying to set a locked key, do not fail",
                                                      "example": false
                                                    }
                                                  }
                                                }
                                              },
                                              "onError": {
                                                "type": "object",
                                                "description": "Action to take when step fails",
                                                "required": [
                                                  "finally"
                                                ],
                                                "properties": {
                                                  "retry": {
                                                    "type": "integer",
                                                    "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                                    "minimum": 0,
                                                    "maximum": 10,
                                                    "example": 3,
                                                    "default": 0
                                                  },
                                                  "finally": {
                                                    "type": "object",
                                                    "description": "What to do after all retries",
                                                    "required": [
                                                      "goto"
                                                    ],
                                                    "properties": {
                                                      "actions": {
                                                        "type": "array",
                                                        "description": "Actions to take on failure",
                                                        "items": {
                                                          "anyOf": [
                                                            {
                                                              "type": "object",
                                                              "properties": {
                                                                "type": {
                                                                  "type": "string",
                                                                  "description": "The type of the action",
                                                                  "enum": [
                                                                    "email"
                                                                  ]
                                                                },
                                                                "options": {
                                                                  "type": "object",
                                                                  "description": "settings for the action",
                                                                  "additionalProperties": {
                                                                    "type": "string"
                                                                  },
                                                                  "x-examples": [
                                                                    {
                                                                      "to": "bob@example.com",
                                                                      "from": "alice@example.com"
                                                                    }
                                                                  ]
                                                                }
                                                              }
                                                            }
                                                          ]
                                                        }
                                                      },
                                                      "goto": {
                                                        "type": "string",
                                                        "description": "Step to transition to on failure",
                                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                                        "example": "failed",
                                                        "x-examples": [
                                                          "failed"
                                                        ]
                                                      }
                                                    }
                                                  }
                                                }
                                              },
                                              "onComplete": {
                                                "type": "object",
                                                "description": "Actions to take when the step completes",
                                                "properties": {
                                                  "actions": {
                                                    "type": "array",
                                                    "items": {
                                                      "anyOf": [
                                                        {
                                                          "type": "object",
                                                          "properties": {
                                                            "type": {
                                                              "type": "string",
                                                              "description": "The type of the action",
                                                              "enum": [
                                                                "email"
                                                              ]
                                                            },
                                                            "options": {
                                                              "type": "object",
                                                              "description": "settings for the action",
                                                              "additionalProperties": {
                                                                "type": "string"
                                                              },
                                                              "x-examples": [
                                                                {
                                                                  "to": "bob@example.com",
                                                                  "from": "alice@example.com"
                                                                }
                                                              ]
                                                            }
                                                          }
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "object",
                                    "description": "Ask the user to follow a list and check off boxes",
                                    "x-nter-step-component": "task-list",
                                    "properties": {
                                      "label": {
                                        "x-examples": [
                                          "Enter asset tag and confirm serial number"
                                        ]
                                      },
                                      "options": {
                                        "type": "object",
                                        "required": [
                                          "component",
                                          "payload"
                                        ],
                                        "properties": {
                                          "component": {
                                            "enum": [
                                              "task-list"
                                            ],
                                            "example": "task-list",
                                            "x-examples": [
                                              "task-list"
                                            ]
                                          },
                                          "payload": {
                                            "type": "object",
                                            "required": [
                                              "items"
                                            ],
                                            "properties": {
                                              "is_qc": {
                                                "type": "boolean",
                                                "description": "Flags this list as a QC task list. This means that a different user can close the task to one previously on the context"
                                              },
                                              "items": {
                                                "type": "array",
                                                "description": "Configuration for each task list item",
                                                "items": {
                                                  "type": "object",
                                                  "required": [
                                                    "label",
                                                    "help",
                                                    "evaluated",
                                                    "na_option"
                                                  ],
                                                  "properties": {
                                                    "label": {
                                                      "type": "string",
                                                      "description": "Label to display for the field",
                                                      "example": "Asset Tag placement",
                                                      "x-examples": [
                                                        "Asset Tag placement"
                                                      ]
                                                    },
                                                    "slug": {
                                                      "type": "string",
                                                      "description": "Slug for the item (Auto-generated from the label)",
                                                      "readOnly": true,
                                                      "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$",
                                                      "example": "asset-tag-placement",
                                                      "x-examples": [
                                                        "asset-tag-placement"
                                                      ]
                                                    },
                                                    "help": {
                                                      "type": "string",
                                                      "description": "Message describing what is needed to be checked",
                                                      "example": "Asset Tag attached to the unit in the correct position",
                                                      "x-examples": [
                                                        "Asset Tag attached to the unit in the correct position"
                                                      ]
                                                    },
                                                    "evaluated": {
                                                      "type": "boolean",
                                                      "description": "When set to true, this will fail the step if the value for the item is false or N/A",
                                                      "example": true
                                                    },
                                                    "na_field": {
                                                      "type": "boolean",
                                                      "description": "Allow the user to select the N/A option when checking off the list",
                                                      "example": true
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "x-ui-hide": true,
                                        "description": "A step which requires a user to complete",
                                        "required": [
                                          "type",
                                          "options"
                                        ],
                                        "properties": {
                                          "type": {
                                            "example": "user",
                                            "x-examples": [
                                              "user"
                                            ]
                                          },
                                          "options": {
                                            "type": "object",
                                            "required": [
                                              "component",
                                              "payload"
                                            ],
                                            "properties": {
                                              "component": {
                                                "type": "string",
                                                "description": "Name of the function to invoke",
                                                "example": "assignUnitsFromCustomerToProject",
                                                "x-examples": [
                                                  "assignUnitsFromCustomerToProject"
                                                ]
                                              },
                                              "payload": {
                                                "type": "object"
                                              }
                                            }
                                          }
                                        },
                                        "allOf": [
                                          {
                                            "type": "object",
                                            "x-ui-hide": true,
                                            "required": [
                                              "type",
                                              "label",
                                              "goto"
                                            ],
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "Type of workflow step",
                                                "enum": [
                                                  "load",
                                                  "choice",
                                                  "function",
                                                  "machine",
                                                  "pass",
                                                  "fail",
                                                  "success",
                                                  "user",
                                                  "wait"
                                                ]
                                              },
                                              "label": {
                                                "type": "string",
                                                "description": "Label for the step",
                                                "example": "Find units",
                                                "x-examples": [
                                                  "Find units"
                                                ]
                                              },
                                              "goto": {
                                                "type": "string",
                                                "description": "Step to move to",
                                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                                "example": "complete",
                                                "x-examples": [
                                                  "complete"
                                                ]
                                              },
                                              "goto-fail": {
                                                "type": "string",
                                                "description": "Step to transition too if this step cannot be completed",
                                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                                "example": "process-fail",
                                                "x-examples": [
                                                  "process-fail"
                                                ]
                                              },
                                              "context": {
                                                "type": "array",
                                                "description": "Initial values to set on the context",
                                                "items": {
                                                  "type": "object",
                                                  "required": [
                                                    "key",
                                                    "value"
                                                  ],
                                                  "properties": {
                                                    "key": {
                                                      "type": "string",
                                                      "description": "The context key to set",
                                                      "example": "$.fizz",
                                                      "x-examples": [
                                                        "$.fizz",
                                                        "$.unit.status",
                                                        "extract_fields"
                                                      ]
                                                    },
                                                    "value": {
                                                      "type": "string",
                                                      "description": "Value to set",
                                                      "example": "$.buzz",
                                                      "x-examples": [
                                                        "$.buzz",
                                                        "Pending",
                                                        true
                                                      ]
                                                    },
                                                    "lock": {
                                                      "type": "boolean",
                                                      "description": "Prevents other steps from writing this value",
                                                      "example": true
                                                    },
                                                    "ignore": {
                                                      "type": "boolean",
                                                      "description": "When trying to set a locked key, do not fail",
                                                      "example": false
                                                    }
                                                  }
                                                }
                                              },
                                              "onError": {
                                                "type": "object",
                                                "description": "Action to take when step fails",
                                                "required": [
                                                  "finally"
                                                ],
                                                "properties": {
                                                  "retry": {
                                                    "type": "integer",
                                                    "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                                    "minimum": 0,
                                                    "maximum": 10,
                                                    "example": 3,
                                                    "default": 0
                                                  },
                                                  "finally": {
                                                    "type": "object",
                                                    "description": "What to do after all retries",
                                                    "required": [
                                                      "goto"
                                                    ],
                                                    "properties": {
                                                      "actions": {
                                                        "type": "array",
                                                        "description": "Actions to take on failure",
                                                        "items": {
                                                          "anyOf": [
                                                            {
                                                              "type": "object",
                                                              "properties": {
                                                                "type": {
                                                                  "type": "string",
                                                                  "description": "The type of the action",
                                                                  "enum": [
                                                                    "email"
                                                                  ]
                                                                },
                                                                "options": {
                                                                  "type": "object",
                                                                  "description": "settings for the action",
                                                                  "additionalProperties": {
                                                                    "type": "string"
                                                                  },
                                                                  "x-examples": [
                                                                    {
                                                                      "to": "bob@example.com",
                                                                      "from": "alice@example.com"
                                                                    }
                                                                  ]
                                                                }
                                                              }
                                                            }
                                                          ]
                                                        }
                                                      },
                                                      "goto": {
                                                        "type": "string",
                                                        "description": "Step to transition to on failure",
                                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                                        "example": "failed",
                                                        "x-examples": [
                                                          "failed"
                                                        ]
                                                      }
                                                    }
                                                  }
                                                }
                                              },
                                              "onComplete": {
                                                "type": "object",
                                                "description": "Actions to take when the step completes",
                                                "properties": {
                                                  "actions": {
                                                    "type": "array",
                                                    "items": {
                                                      "anyOf": [
                                                        {
                                                          "type": "object",
                                                          "properties": {
                                                            "type": {
                                                              "type": "string",
                                                              "description": "The type of the action",
                                                              "enum": [
                                                                "email"
                                                              ]
                                                            },
                                                            "options": {
                                                              "type": "object",
                                                              "description": "settings for the action",
                                                              "additionalProperties": {
                                                                "type": "string"
                                                              },
                                                              "x-examples": [
                                                                {
                                                                  "to": "bob@example.com",
                                                                  "from": "alice@example.com"
                                                                }
                                                              ]
                                                            }
                                                          }
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "object",
                                    "description": "Run the ACE-IOS application to provision iOS devices or ",
                                    "properties": {
                                      "type": {
                                        "example": "machine",
                                        "x-examples": [
                                          "machine"
                                        ]
                                      },
                                      "label": {
                                        "x-examples": [
                                          "Run Application"
                                        ]
                                      },
                                      "options": {
                                        "type": "object",
                                        "required": [
                                          "application",
                                          "configuration"
                                        ],
                                        "properties": {
                                          "configuration": {
                                            "type": "object",
                                            "description": "ACE Configuration options",
                                            "properties": {
                                              "pairing_cert": {
                                                "type": "string",
                                                "format": "base64",
                                                "description": "Contents of a *.crt file exported from Apple Configurator or MDM",
                                                "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                                "x-examples": [
                                                  "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                                ],
                                                "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                              },
                                              "pairing_key": {
                                                "type": "string",
                                                "format": "base64",
                                                "description": "Contents of a *.der file exported from Apple Configurator or MDM",
                                                "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                                "x-examples": [
                                                  "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                                ],
                                                "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                              },
                                              "restore_device": {
                                                "type": "boolean",
                                                "description": "Restore device to factory defaults"
                                              },
                                              "automated_enrollment": {
                                                "type": "boolean",
                                                "description": "Automatically enroll the device to MDM"
                                              },
                                              "mdm": {
                                                "type": "object",
                                                "format": "base64",
                                                "description": "The settings for the Customers MDM",
                                                "properties": {
                                                  "vendor": {
                                                    "type": "string",
                                                    "description": "MDM vendor. Currently, supported values are AirWatch, JAMF, and Meraki.",
                                                    "enum": [
                                                      "AirWatch",
                                                      "JAMF",
                                                      "Meraki"
                                                    ]
                                                  },
                                                  "console_url": {
                                                    "type": "string",
                                                    "format": "uri",
                                                    "description": "Base URL for HTTP requests",
                                                    "example": "http://jamf.zones.com",
                                                    "x-examples": [
                                                      "http://jamf.zones.com"
                                                    ]
                                                  },
                                                  "user": {
                                                    "type": "string",
                                                    "description": "MDM User name",
                                                    "example": "NterpriseBob",
                                                    "x-examples": [
                                                      "NterpriseBob"
                                                    ]
                                                  },
                                                  "password": {
                                                    "type": "string",
                                                    "description": "MDM password"
                                                  },
                                                  "tenant_code": {
                                                    "type": "string",
                                                    "description": "MDM authentication key",
                                                    "example": "nterprise",
                                                    "x-examples": [
                                                      "nterprise"
                                                    ]
                                                  },
                                                  "set_asset_tag": {
                                                    "type": "string",
                                                    "description": "Sets the devices Asset tag based on a field from the unit",
                                                    "example": "$._entity.input_filter[?(@.key = 'asset-tag')]",
                                                    "x-examples": [
                                                      "$._entity.input_filter[?(@.key = 'asset-tag')]"
                                                    ]
                                                  }
                                                }
                                              },
                                              "field_mappings": {
                                                "type": "array",
                                                "description": "List of fields to map to the device",
                                                "items": {
                                                  "type": "object",
                                                  "properties": {
                                                    "from": {
                                                      "type": "string",
                                                      "description": "The field reported from ACE",
                                                      "enum": [
                                                        "serial_number",
                                                        "name",
                                                        "ecid",
                                                        "udid",
                                                        "configurator_serial",
                                                        "ios",
                                                        "model",
                                                        "storage",
                                                        "wifi_mac",
                                                        "bt_mac",
                                                        "ethernet_mac",
                                                        "thundersync_serial",
                                                        "iccid",
                                                        "iccid2",
                                                        "imei",
                                                        "imei2",
                                                        "missed_profiles",
                                                        "missed_apps",
                                                        "icon_list_regex",
                                                        "icon_layout",
                                                        "bat_capacity"
                                                      ]
                                                    },
                                                    "to": {
                                                      "type": "string",
                                                      "description": "Field to set on the entity",
                                                      "example": "$._entity.input_filter[?(@.key = 'serial-number')]",
                                                      "x-examples": [
                                                        "$._entity.input_filter[?(@.key = 'serial-number')]"
                                                      ]
                                                    }
                                                  }
                                                }
                                              },
                                              "wait_for_apps": {
                                                "type": "array",
                                                "description": "A list of applications needed to be installed on the device. This will cause the extension to poll the device for installed applications. Once all the applications have been installed, this step can be completed",
                                                "items": {
                                                  "type": "string",
                                                  "format": "uri",
                                                  "example": "com.apple.itunes",
                                                  "x-examples": [
                                                    "com.apple.itunes"
                                                  ]
                                                }
                                              },
                                              "wait_for_battery_charge": {
                                                "type": "integer",
                                                "description": "The required battery percentage needed before this step can move on",
                                                "minimum": 0,
                                                "maximum": 100
                                              }
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "description": "Run an application extension",
                                        "properties": {
                                          "label": {
                                            "x-examples": [
                                              "Run Application"
                                            ]
                                          },
                                          "options": {
                                            "type": "object",
                                            "required": [
                                              "application",
                                              "configuration"
                                            ],
                                            "properties": {
                                              "application": {
                                                "type": "object",
                                                "required": [
                                                  "application_id",
                                                  "platforms"
                                                ],
                                                "properties": {
                                                  "application_id": {
                                                    "type": "string",
                                                    "description": "Registered application ID",
                                                    "example": "ace-ios",
                                                    "x-examples": [
                                                      "ace-ios"
                                                    ]
                                                  },
                                                  "platforms": {
                                                    "type": "array",
                                                    "description": "Allowed platforms the application can run on",
                                                    "items": {
                                                      "type": "object",
                                                      "required": [
                                                        "platform",
                                                        "arch"
                                                      ],
                                                      "properties": {
                                                        "platform": {
                                                          "type": "string",
                                                          "description": "The platform (OS) the application can run on",
                                                          "enum": [
                                                            "aix",
                                                            "darwin",
                                                            "freebsd",
                                                            "linux",
                                                            "openbsd",
                                                            "sunos",
                                                            "win32"
                                                          ]
                                                        },
                                                        "arch": {
                                                          "type": "string",
                                                          "description": "The CPU architecture needed to run the application",
                                                          "enum": [
                                                            "arm",
                                                            "arm64",
                                                            "ia32",
                                                            "mips",
                                                            "mipsel",
                                                            "ppc",
                                                            "ppc64",
                                                            "s390",
                                                            "s390x",
                                                            "x32",
                                                            "x64"
                                                          ]
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        },
                                        "allOf": [
                                          {
                                            "type": "object",
                                            "x-ui-hide": true,
                                            "required": [
                                              "type",
                                              "label",
                                              "goto"
                                            ],
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "Type of workflow step",
                                                "enum": [
                                                  "load",
                                                  "choice",
                                                  "function",
                                                  "machine",
                                                  "pass",
                                                  "fail",
                                                  "success",
                                                  "user",
                                                  "wait"
                                                ]
                                              },
                                              "label": {
                                                "type": "string",
                                                "description": "Label for the step",
                                                "example": "Find units",
                                                "x-examples": [
                                                  "Find units"
                                                ]
                                              },
                                              "goto": {
                                                "type": "string",
                                                "description": "Step to move to",
                                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                                "example": "complete",
                                                "x-examples": [
                                                  "complete"
                                                ]
                                              },
                                              "goto-fail": {
                                                "type": "string",
                                                "description": "Step to transition too if this step cannot be completed",
                                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                                "example": "process-fail",
                                                "x-examples": [
                                                  "process-fail"
                                                ]
                                              },
                                              "context": {
                                                "type": "array",
                                                "description": "Initial values to set on the context",
                                                "items": {
                                                  "type": "object",
                                                  "required": [
                                                    "key",
                                                    "value"
                                                  ],
                                                  "properties": {
                                                    "key": {
                                                      "type": "string",
                                                      "description": "The context key to set",
                                                      "example": "$.fizz",
                                                      "x-examples": [
                                                        "$.fizz",
                                                        "$.unit.status",
                                                        "extract_fields"
                                                      ]
                                                    },
                                                    "value": {
                                                      "type": "string",
                                                      "description": "Value to set",
                                                      "example": "$.buzz",
                                                      "x-examples": [
                                                        "$.buzz",
                                                        "Pending",
                                                        true
                                                      ]
                                                    },
                                                    "lock": {
                                                      "type": "boolean",
                                                      "description": "Prevents other steps from writing this value",
                                                      "example": true
                                                    },
                                                    "ignore": {
                                                      "type": "boolean",
                                                      "description": "When trying to set a locked key, do not fail",
                                                      "example": false
                                                    }
                                                  }
                                                }
                                              },
                                              "onError": {
                                                "type": "object",
                                                "description": "Action to take when step fails",
                                                "required": [
                                                  "finally"
                                                ],
                                                "properties": {
                                                  "retry": {
                                                    "type": "integer",
                                                    "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                                    "minimum": 0,
                                                    "maximum": 10,
                                                    "example": 3,
                                                    "default": 0
                                                  },
                                                  "finally": {
                                                    "type": "object",
                                                    "description": "What to do after all retries",
                                                    "required": [
                                                      "goto"
                                                    ],
                                                    "properties": {
                                                      "actions": {
                                                        "type": "array",
                                                        "description": "Actions to take on failure",
                                                        "items": {
                                                          "anyOf": [
                                                            {
                                                              "type": "object",
                                                              "properties": {
                                                                "type": {
                                                                  "type": "string",
                                                                  "description": "The type of the action",
                                                                  "enum": [
                                                                    "email"
                                                                  ]
                                                                },
                                                                "options": {
                                                                  "type": "object",
                                                                  "description": "settings for the action",
                                                                  "additionalProperties": {
                                                                    "type": "string"
                                                                  },
                                                                  "x-examples": [
                                                                    {
                                                                      "to": "bob@example.com",
                                                                      "from": "alice@example.com"
                                                                    }
                                                                  ]
                                                                }
                                                              }
                                                            }
                                                          ]
                                                        }
                                                      },
                                                      "goto": {
                                                        "type": "string",
                                                        "description": "Step to transition to on failure",
                                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                                        "example": "failed",
                                                        "x-examples": [
                                                          "failed"
                                                        ]
                                                      }
                                                    }
                                                  }
                                                }
                                              },
                                              "onComplete": {
                                                "type": "object",
                                                "description": "Actions to take when the step completes",
                                                "properties": {
                                                  "actions": {
                                                    "type": "array",
                                                    "items": {
                                                      "anyOf": [
                                                        {
                                                          "type": "object",
                                                          "properties": {
                                                            "type": {
                                                              "type": "string",
                                                              "description": "The type of the action",
                                                              "enum": [
                                                                "email"
                                                              ]
                                                            },
                                                            "options": {
                                                              "type": "object",
                                                              "description": "settings for the action",
                                                              "additionalProperties": {
                                                                "type": "string"
                                                              },
                                                              "x-examples": [
                                                                {
                                                                  "to": "bob@example.com",
                                                                  "from": "alice@example.com"
                                                                }
                                                              ]
                                                            }
                                                          }
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "label": {
                                        "example": "Is device ok?",
                                        "x-examples": [
                                          "Is device ok?"
                                        ]
                                      },
                                      "type": {
                                        "example": "choice",
                                        "x-examples": [
                                          "choice"
                                        ]
                                      },
                                      "choices": {
                                        "type": "array",
                                        "items": {
                                          "type": "object",
                                          "required": [
                                            "goto"
                                          ],
                                          "maxProperties": 2,
                                          "minProperties": 2,
                                          "maximum": 20,
                                          "properties": {
                                            "and": {
                                              "type": "array",
                                              "description": "All choices must be satisfied",
                                              "maximum": 5,
                                              "items": {
                                                "description": "A Step choice",
                                                "type": "object",
                                                "maxProperties": 2,
                                                "minProperties": 2,
                                                "required": [
                                                  "variable"
                                                ],
                                                "properties": {
                                                  "variable": {
                                                    "type": "string",
                                                    "description": "Context variable to check",
                                                    "example": "$.parts.available",
                                                    "x-examples": [
                                                      "$.parts.available"
                                                    ]
                                                  },
                                                  "greater_than_equals": {
                                                    "type": "string",
                                                    "description": "Value has to be greater than or equals to",
                                                    "example": "42",
                                                    "x-examples": [
                                                      "42"
                                                    ]
                                                  },
                                                  "less_than_equals": {
                                                    "type": "string",
                                                    "description": "Value has to be less than or equals to",
                                                    "example": "42",
                                                    "x-examples": [
                                                      "42"
                                                    ]
                                                  },
                                                  "greater_than": {
                                                    "type": "string",
                                                    "description": "Value has to be greater than",
                                                    "example": "42",
                                                    "x-examples": [
                                                      "42"
                                                    ]
                                                  },
                                                  "less_than": {
                                                    "type": "string",
                                                    "description": "Value has to be less than",
                                                    "example": "42",
                                                    "x-examples": [
                                                      "42"
                                                    ]
                                                  },
                                                  "equals": {
                                                    "type": "string",
                                                    "description": "Value has to equal",
                                                    "example": "42",
                                                    "x-examples": [
                                                      "42"
                                                    ]
                                                  },
                                                  "not_equals": {
                                                    "type": "string",
                                                    "description": "Value must not equal",
                                                    "example": "42",
                                                    "x-examples": [
                                                      "42"
                                                    ]
                                                  }
                                                }
                                              }
                                            },
                                            "or": {
                                              "type": "array",
                                              "description": "Any of these choices must be satisfied",
                                              "maximum": 5,
                                              "items": {
                                                "description": "A Step choice",
                                                "type": "object",
                                                "maxProperties": 2,
                                                "minProperties": 2,
                                                "required": [
                                                  "variable"
                                                ],
                                                "properties": {
                                                  "variable": {
                                                    "type": "string",
                                                    "description": "Context variable to check",
                                                    "example": "$.parts.available",
                                                    "x-examples": [
                                                      "$.parts.available"
                                                    ]
                                                  },
                                                  "greater_than_equals": {
                                                    "type": "string",
                                                    "description": "Value has to be greater than or equals to",
                                                    "example": "42",
                                                    "x-examples": [
                                                      "42"
                                                    ]
                                                  },
                                                  "less_than_equals": {
                                                    "type": "string",
                                                    "description": "Value has to be less than or equals to",
                                                    "example": "42",
                                                    "x-examples": [
                                                      "42"
                                                    ]
                                                  },
                                                  "greater_than": {
                                                    "type": "string",
                                                    "description": "Value has to be greater than",
                                                    "example": "42",
                                                    "x-examples": [
                                                      "42"
                                                    ]
                                                  },
                                                  "less_than": {
                                                    "type": "string",
                                                    "description": "Value has to be less than",
                                                    "example": "42",
                                                    "x-examples": [
                                                      "42"
                                                    ]
                                                  },
                                                  "equals": {
                                                    "type": "string",
                                                    "description": "Value has to equal",
                                                    "example": "42",
                                                    "x-examples": [
                                                      "42"
                                                    ]
                                                  },
                                                  "not_equals": {
                                                    "type": "string",
                                                    "description": "Value must not equal",
                                                    "example": "42",
                                                    "x-examples": [
                                                      "42"
                                                    ]
                                                  }
                                                }
                                              }
                                            },
                                            "not": {
                                              "type": "array",
                                              "description": "None of these choices must be satisfied",
                                              "maximum": 5,
                                              "items": {
                                                "description": "A Step choice",
                                                "type": "object",
                                                "maxProperties": 2,
                                                "minProperties": 2,
                                                "required": [
                                                  "variable"
                                                ],
                                                "properties": {
                                                  "variable": {
                                                    "type": "string",
                                                    "description": "Context variable to check",
                                                    "example": "$.parts.available",
                                                    "x-examples": [
                                                      "$.parts.available"
                                                    ]
                                                  },
                                                  "greater_than_equals": {
                                                    "type": "string",
                                                    "description": "Value has to be greater than or equals to",
                                                    "example": "42",
                                                    "x-examples": [
                                                      "42"
                                                    ]
                                                  },
                                                  "less_than_equals": {
                                                    "type": "string",
                                                    "description": "Value has to be less than or equals to",
                                                    "example": "42",
                                                    "x-examples": [
                                                      "42"
                                                    ]
                                                  },
                                                  "greater_than": {
                                                    "type": "string",
                                                    "description": "Value has to be greater than",
                                                    "example": "42",
                                                    "x-examples": [
                                                      "42"
                                                    ]
                                                  },
                                                  "less_than": {
                                                    "type": "string",
                                                    "description": "Value has to be less than",
                                                    "example": "42",
                                                    "x-examples": [
                                                      "42"
                                                    ]
                                                  },
                                                  "equals": {
                                                    "type": "string",
                                                    "description": "Value has to equal",
                                                    "example": "42",
                                                    "x-examples": [
                                                      "42"
                                                    ]
                                                  },
                                                  "not_equals": {
                                                    "type": "string",
                                                    "description": "Value must not equal",
                                                    "example": "42",
                                                    "x-examples": [
                                                      "42"
                                                    ]
                                                  }
                                                }
                                              }
                                            },
                                            "goto": {
                                              "description": "Step to goto when condition is met",
                                              "allOf": [
                                                {
                                                  "type": "string",
                                                  "description": "Step to move to",
                                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                                  "example": "complete",
                                                  "x-examples": [
                                                    "complete"
                                                  ]
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      },
                                      "goto": {
                                        "description": "Default step to goto when no choice can be made"
                                      }
                                    },
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "x-ui-hide": true,
                                        "required": [
                                          "type",
                                          "label",
                                          "goto"
                                        ],
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "Type of workflow step",
                                            "enum": [
                                              "load",
                                              "choice",
                                              "function",
                                              "machine",
                                              "pass",
                                              "fail",
                                              "success",
                                              "user",
                                              "wait"
                                            ]
                                          },
                                          "label": {
                                            "type": "string",
                                            "description": "Label for the step",
                                            "example": "Find units",
                                            "x-examples": [
                                              "Find units"
                                            ]
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to move to",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "complete",
                                            "x-examples": [
                                              "complete"
                                            ]
                                          },
                                          "goto-fail": {
                                            "type": "string",
                                            "description": "Step to transition too if this step cannot be completed",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "process-fail",
                                            "x-examples": [
                                              "process-fail"
                                            ]
                                          },
                                          "context": {
                                            "type": "array",
                                            "description": "Initial values to set on the context",
                                            "items": {
                                              "type": "object",
                                              "required": [
                                                "key",
                                                "value"
                                              ],
                                              "properties": {
                                                "key": {
                                                  "type": "string",
                                                  "description": "The context key to set",
                                                  "example": "$.fizz",
                                                  "x-examples": [
                                                    "$.fizz",
                                                    "$.unit.status",
                                                    "extract_fields"
                                                  ]
                                                },
                                                "value": {
                                                  "type": "string",
                                                  "description": "Value to set",
                                                  "example": "$.buzz",
                                                  "x-examples": [
                                                    "$.buzz",
                                                    "Pending",
                                                    true
                                                  ]
                                                },
                                                "lock": {
                                                  "type": "boolean",
                                                  "description": "Prevents other steps from writing this value",
                                                  "example": true
                                                },
                                                "ignore": {
                                                  "type": "boolean",
                                                  "description": "When trying to set a locked key, do not fail",
                                                  "example": false
                                                }
                                              }
                                            }
                                          },
                                          "onError": {
                                            "type": "object",
                                            "description": "Action to take when step fails",
                                            "required": [
                                              "finally"
                                            ],
                                            "properties": {
                                              "retry": {
                                                "type": "integer",
                                                "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                                "minimum": 0,
                                                "maximum": 10,
                                                "example": 3,
                                                "default": 0
                                              },
                                              "finally": {
                                                "type": "object",
                                                "description": "What to do after all retries",
                                                "required": [
                                                  "goto"
                                                ],
                                                "properties": {
                                                  "actions": {
                                                    "type": "array",
                                                    "description": "Actions to take on failure",
                                                    "items": {
                                                      "anyOf": [
                                                        {
                                                          "type": "object",
                                                          "properties": {
                                                            "type": {
                                                              "type": "string",
                                                              "description": "The type of the action",
                                                              "enum": [
                                                                "email"
                                                              ]
                                                            },
                                                            "options": {
                                                              "type": "object",
                                                              "description": "settings for the action",
                                                              "additionalProperties": {
                                                                "type": "string"
                                                              },
                                                              "x-examples": [
                                                                {
                                                                  "to": "bob@example.com",
                                                                  "from": "alice@example.com"
                                                                }
                                                              ]
                                                            }
                                                          }
                                                        }
                                                      ]
                                                    }
                                                  },
                                                  "goto": {
                                                    "type": "string",
                                                    "description": "Step to transition to on failure",
                                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                                    "example": "failed",
                                                    "x-examples": [
                                                      "failed"
                                                    ]
                                                  }
                                                }
                                              }
                                            }
                                          },
                                          "onComplete": {
                                            "type": "object",
                                            "description": "Actions to take when the step completes",
                                            "properties": {
                                              "actions": {
                                                "type": "array",
                                                "items": {
                                                  "anyOf": [
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "type": {
                                                          "type": "string",
                                                          "description": "The type of the action",
                                                          "enum": [
                                                            "email"
                                                          ]
                                                        },
                                                        "options": {
                                                          "type": "object",
                                                          "description": "settings for the action",
                                                          "additionalProperties": {
                                                            "type": "string"
                                                          },
                                                          "x-examples": [
                                                            {
                                                              "to": "bob@example.com",
                                                              "from": "alice@example.com"
                                                            }
                                                          ]
                                                        }
                                                      }
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    ]
                                  },
                                  {
                                    "type": "object",
                                    "description": "Finial step which is marked as failed",
                                    "properties": {
                                      "label": {
                                        "example": "Failed",
                                        "x-examples": [
                                          "Failed"
                                        ],
                                        "allOf": [
                                          {
                                            "type": "string",
                                            "description": "Label for the step",
                                            "example": "Find units",
                                            "x-examples": [
                                              "Find units"
                                            ]
                                          }
                                        ]
                                      },
                                      "type": {
                                        "example": "fail",
                                        "x-examples": [
                                          "fail"
                                        ],
                                        "allOf": [
                                          {
                                            "type": "string",
                                            "description": "Type of workflow step",
                                            "enum": [
                                              "load",
                                              "choice",
                                              "function",
                                              "machine",
                                              "pass",
                                              "fail",
                                              "success",
                                              "user",
                                              "wait"
                                            ]
                                          }
                                        ]
                                      },
                                      "onComplete": {
                                        "type": "object",
                                        "description": "Actions to take when the step completes",
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    }
                                  },
                                  {
                                    "type": "object",
                                    "description": "Allows executing actions with out performing any function",
                                    "properties": {
                                      "label": {
                                        "example": "Send email to project manager",
                                        "x-examples": [
                                          "Send email to project manager"
                                        ]
                                      },
                                      "type": {
                                        "example": "pass",
                                        "x-examples": [
                                          "pass"
                                        ],
                                        "allOf": [
                                          {
                                            "type": "string",
                                            "description": "Type of workflow step",
                                            "enum": [
                                              "load",
                                              "choice",
                                              "function",
                                              "machine",
                                              "pass",
                                              "fail",
                                              "success",
                                              "user",
                                              "wait"
                                            ]
                                          }
                                        ]
                                      }
                                    },
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "x-ui-hide": true,
                                        "required": [
                                          "type",
                                          "label",
                                          "goto"
                                        ],
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "Type of workflow step",
                                            "enum": [
                                              "load",
                                              "choice",
                                              "function",
                                              "machine",
                                              "pass",
                                              "fail",
                                              "success",
                                              "user",
                                              "wait"
                                            ]
                                          },
                                          "label": {
                                            "type": "string",
                                            "description": "Label for the step",
                                            "example": "Find units",
                                            "x-examples": [
                                              "Find units"
                                            ]
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to move to",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "complete",
                                            "x-examples": [
                                              "complete"
                                            ]
                                          },
                                          "goto-fail": {
                                            "type": "string",
                                            "description": "Step to transition too if this step cannot be completed",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "process-fail",
                                            "x-examples": [
                                              "process-fail"
                                            ]
                                          },
                                          "context": {
                                            "type": "array",
                                            "description": "Initial values to set on the context",
                                            "items": {
                                              "type": "object",
                                              "required": [
                                                "key",
                                                "value"
                                              ],
                                              "properties": {
                                                "key": {
                                                  "type": "string",
                                                  "description": "The context key to set",
                                                  "example": "$.fizz",
                                                  "x-examples": [
                                                    "$.fizz",
                                                    "$.unit.status",
                                                    "extract_fields"
                                                  ]
                                                },
                                                "value": {
                                                  "type": "string",
                                                  "description": "Value to set",
                                                  "example": "$.buzz",
                                                  "x-examples": [
                                                    "$.buzz",
                                                    "Pending",
                                                    true
                                                  ]
                                                },
                                                "lock": {
                                                  "type": "boolean",
                                                  "description": "Prevents other steps from writing this value",
                                                  "example": true
                                                },
                                                "ignore": {
                                                  "type": "boolean",
                                                  "description": "When trying to set a locked key, do not fail",
                                                  "example": false
                                                }
                                              }
                                            }
                                          },
                                          "onError": {
                                            "type": "object",
                                            "description": "Action to take when step fails",
                                            "required": [
                                              "finally"
                                            ],
                                            "properties": {
                                              "retry": {
                                                "type": "integer",
                                                "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                                "minimum": 0,
                                                "maximum": 10,
                                                "example": 3,
                                                "default": 0
                                              },
                                              "finally": {
                                                "type": "object",
                                                "description": "What to do after all retries",
                                                "required": [
                                                  "goto"
                                                ],
                                                "properties": {
                                                  "actions": {
                                                    "type": "array",
                                                    "description": "Actions to take on failure",
                                                    "items": {
                                                      "anyOf": [
                                                        {
                                                          "type": "object",
                                                          "properties": {
                                                            "type": {
                                                              "type": "string",
                                                              "description": "The type of the action",
                                                              "enum": [
                                                                "email"
                                                              ]
                                                            },
                                                            "options": {
                                                              "type": "object",
                                                              "description": "settings for the action",
                                                              "additionalProperties": {
                                                                "type": "string"
                                                              },
                                                              "x-examples": [
                                                                {
                                                                  "to": "bob@example.com",
                                                                  "from": "alice@example.com"
                                                                }
                                                              ]
                                                            }
                                                          }
                                                        }
                                                      ]
                                                    }
                                                  },
                                                  "goto": {
                                                    "type": "string",
                                                    "description": "Step to transition to on failure",
                                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                                    "example": "failed",
                                                    "x-examples": [
                                                      "failed"
                                                    ]
                                                  }
                                                }
                                              }
                                            }
                                          },
                                          "onComplete": {
                                            "type": "object",
                                            "description": "Actions to take when the step completes",
                                            "properties": {
                                              "actions": {
                                                "type": "array",
                                                "items": {
                                                  "anyOf": [
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "type": {
                                                          "type": "string",
                                                          "description": "The type of the action",
                                                          "enum": [
                                                            "email"
                                                          ]
                                                        },
                                                        "options": {
                                                          "type": "object",
                                                          "description": "settings for the action",
                                                          "additionalProperties": {
                                                            "type": "string"
                                                          },
                                                          "x-examples": [
                                                            {
                                                              "to": "bob@example.com",
                                                              "from": "alice@example.com"
                                                            }
                                                          ]
                                                        }
                                                      }
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    ]
                                  },
                                  {
                                    "type": "object",
                                    "description": "Finial step which is marked as completed successfully",
                                    "properties": {
                                      "label": {
                                        "example": "Complete",
                                        "x-examples": [
                                          "Complete"
                                        ],
                                        "allOf": [
                                          {
                                            "type": "string",
                                            "description": "Label for the step",
                                            "example": "Find units",
                                            "x-examples": [
                                              "Find units"
                                            ]
                                          }
                                        ]
                                      },
                                      "type": {
                                        "example": "success",
                                        "x-examples": [
                                          "success"
                                        ],
                                        "allOf": [
                                          {
                                            "type": "string",
                                            "description": "Type of workflow step",
                                            "enum": [
                                              "load",
                                              "choice",
                                              "function",
                                              "machine",
                                              "pass",
                                              "fail",
                                              "success",
                                              "user",
                                              "wait"
                                            ]
                                          }
                                        ]
                                      },
                                      "onComplete": {
                                        "type": "object",
                                        "description": "Actions to take when the step completes",
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    }
                                  },
                                  {
                                    "type": "object",
                                    "description": "A step which run at certain times",
                                    "required": [
                                      "stop_at",
                                      "time"
                                    ],
                                    "properties": {
                                      "label": {
                                        "example": "Wait for cable",
                                        "x-examples": [
                                          "Wait for cable"
                                        ],
                                        "allOf": [
                                          {
                                            "type": "string",
                                            "description": "Label for the step",
                                            "example": "Find units",
                                            "x-examples": [
                                              "Find units"
                                            ]
                                          }
                                        ]
                                      },
                                      "type": {
                                        "x-examples": [
                                          "wait"
                                        ],
                                        "example": "wait"
                                      },
                                      "stop_at": {
                                        "type": "integer",
                                        "description": "Time in seconds to stop this task",
                                        "maximum": 900,
                                        "minimum": 1
                                      },
                                      "time": {
                                        "type": "integer",
                                        "description": "Time to wait before checking this step",
                                        "example": 600,
                                        "maximum": 900,
                                        "minimum": 1
                                      },
                                      "listen_for": {
                                        "type": "array",
                                        "description": "List of events and conditions to listen for to trigger",
                                        "items": {
                                          "type": "object",
                                          "required": [
                                            "event"
                                          ],
                                          "properties": {
                                            "event": {
                                              "type": "string",
                                              "description": "Name of the event to listen for",
                                              "allOf": [
                                                {
                                                  "type": "string",
                                                  "description": "Possible entity events",
                                                  "enum": [
                                                    "CON.attached",
                                                    "CON.created",
                                                    "CON.deleted",
                                                    "CON.detached",
                                                    "CON.removed",
                                                    "CON.updated",
                                                    "CUS.attached",
                                                    "CUS.created",
                                                    "CUS.deleted",
                                                    "CUS.detached",
                                                    "CUS.removed",
                                                    "CUS.updated",
                                                    "LOC.attached",
                                                    "LOC.created",
                                                    "LOC.deleted",
                                                    "LOC.detached",
                                                    "LOC.removed",
                                                    "LOC.updated",
                                                    "NOTE.attached",
                                                    "NOTE.created",
                                                    "NOTE.deleted",
                                                    "NOTE.detached",
                                                    "NOTE.removed",
                                                    "NOTE.updated",
                                                    "PART.attached",
                                                    "PART.created",
                                                    "PART.deleted",
                                                    "PART.detached",
                                                    "PART.removed",
                                                    "PART.updated",
                                                    "PGM.attached",
                                                    "PGM.created",
                                                    "PGM.deleted",
                                                    "PGM.detached",
                                                    "PGM.removed",
                                                    "PGM.updated",
                                                    "PRO.attached",
                                                    "PRO.created",
                                                    "PRO.deleted",
                                                    "PRO.detached",
                                                    "PRO.removed",
                                                    "PRO.updated",
                                                    "RES.attached",
                                                    "RES.created",
                                                    "RES.deleted",
                                                    "RES.detached",
                                                    "RES.removed",
                                                    "RES.updated",
                                                    "UNIT.attached",
                                                    "UNIT.created",
                                                    "UNIT.deleted",
                                                    "UNIT.detached",
                                                    "UNIT.removed",
                                                    "UNIT.updated",
                                                    "USER.attached",
                                                    "USER.created",
                                                    "USER.deleted",
                                                    "USER.detached",
                                                    "USER.removed",
                                                    "USER.updated",
                                                    "WKF.attached",
                                                    "WKF.created",
                                                    "WKF.deleted",
                                                    "WKF.detached",
                                                    "WKF.removed",
                                                    "WKF.updated",
                                                    "WOR.attached",
                                                    "WOR.created",
                                                    "WOR.deleted",
                                                    "WOR.detached",
                                                    "WOR.removed",
                                                    "WOR.updated"
                                                  ]
                                                }
                                              ]
                                            },
                                            "event_value": {
                                              "type": "object",
                                              "description": "The event conditions that have to be met",
                                              "allOf": [
                                                {
                                                  "description": "A Step choice",
                                                  "type": "object",
                                                  "maxProperties": 2,
                                                  "minProperties": 2,
                                                  "required": [
                                                    "variable"
                                                  ],
                                                  "properties": {
                                                    "variable": {
                                                      "type": "string",
                                                      "description": "Context variable to check",
                                                      "example": "$.parts.available",
                                                      "x-examples": [
                                                        "$.parts.available"
                                                      ]
                                                    },
                                                    "greater_than_equals": {
                                                      "type": "string",
                                                      "description": "Value has to be greater than or equals to",
                                                      "example": "42",
                                                      "x-examples": [
                                                        "42"
                                                      ]
                                                    },
                                                    "less_than_equals": {
                                                      "type": "string",
                                                      "description": "Value has to be less than or equals to",
                                                      "example": "42",
                                                      "x-examples": [
                                                        "42"
                                                      ]
                                                    },
                                                    "greater_than": {
                                                      "type": "string",
                                                      "description": "Value has to be greater than",
                                                      "example": "42",
                                                      "x-examples": [
                                                        "42"
                                                      ]
                                                    },
                                                    "less_than": {
                                                      "type": "string",
                                                      "description": "Value has to be less than",
                                                      "example": "42",
                                                      "x-examples": [
                                                        "42"
                                                      ]
                                                    },
                                                    "equals": {
                                                      "type": "string",
                                                      "description": "Value has to equal",
                                                      "example": "42",
                                                      "x-examples": [
                                                        "42"
                                                      ]
                                                    },
                                                    "not_equals": {
                                                      "type": "string",
                                                      "description": "Value must not equal",
                                                      "example": "42",
                                                      "x-examples": [
                                                        "42"
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "allOf": [
                                      {
                                        "type": "object",
                                        "x-ui-hide": true,
                                        "required": [
                                          "type",
                                          "label",
                                          "goto"
                                        ],
                                        "properties": {
                                          "type": {
                                            "type": "string",
                                            "description": "Type of workflow step",
                                            "enum": [
                                              "load",
                                              "choice",
                                              "function",
                                              "machine",
                                              "pass",
                                              "fail",
                                              "success",
                                              "user",
                                              "wait"
                                            ]
                                          },
                                          "label": {
                                            "type": "string",
                                            "description": "Label for the step",
                                            "example": "Find units",
                                            "x-examples": [
                                              "Find units"
                                            ]
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to move to",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "complete",
                                            "x-examples": [
                                              "complete"
                                            ]
                                          },
                                          "goto-fail": {
                                            "type": "string",
                                            "description": "Step to transition too if this step cannot be completed",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "process-fail",
                                            "x-examples": [
                                              "process-fail"
                                            ]
                                          },
                                          "context": {
                                            "type": "array",
                                            "description": "Initial values to set on the context",
                                            "items": {
                                              "type": "object",
                                              "required": [
                                                "key",
                                                "value"
                                              ],
                                              "properties": {
                                                "key": {
                                                  "type": "string",
                                                  "description": "The context key to set",
                                                  "example": "$.fizz",
                                                  "x-examples": [
                                                    "$.fizz",
                                                    "$.unit.status",
                                                    "extract_fields"
                                                  ]
                                                },
                                                "value": {
                                                  "type": "string",
                                                  "description": "Value to set",
                                                  "example": "$.buzz",
                                                  "x-examples": [
                                                    "$.buzz",
                                                    "Pending",
                                                    true
                                                  ]
                                                },
                                                "lock": {
                                                  "type": "boolean",
                                                  "description": "Prevents other steps from writing this value",
                                                  "example": true
                                                },
                                                "ignore": {
                                                  "type": "boolean",
                                                  "description": "When trying to set a locked key, do not fail",
                                                  "example": false
                                                }
                                              }
                                            }
                                          },
                                          "onError": {
                                            "type": "object",
                                            "description": "Action to take when step fails",
                                            "required": [
                                              "finally"
                                            ],
                                            "properties": {
                                              "retry": {
                                                "type": "integer",
                                                "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                                "minimum": 0,
                                                "maximum": 10,
                                                "example": 3,
                                                "default": 0
                                              },
                                              "finally": {
                                                "type": "object",
                                                "description": "What to do after all retries",
                                                "required": [
                                                  "goto"
                                                ],
                                                "properties": {
                                                  "actions": {
                                                    "type": "array",
                                                    "description": "Actions to take on failure",
                                                    "items": {
                                                      "anyOf": [
                                                        {
                                                          "type": "object",
                                                          "properties": {
                                                            "type": {
                                                              "type": "string",
                                                              "description": "The type of the action",
                                                              "enum": [
                                                                "email"
                                                              ]
                                                            },
                                                            "options": {
                                                              "type": "object",
                                                              "description": "settings for the action",
                                                              "additionalProperties": {
                                                                "type": "string"
                                                              },
                                                              "x-examples": [
                                                                {
                                                                  "to": "bob@example.com",
                                                                  "from": "alice@example.com"
                                                                }
                                                              ]
                                                            }
                                                          }
                                                        }
                                                      ]
                                                    }
                                                  },
                                                  "goto": {
                                                    "type": "string",
                                                    "description": "Step to transition to on failure",
                                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                                    "example": "failed",
                                                    "x-examples": [
                                                      "failed"
                                                    ]
                                                  }
                                                }
                                              }
                                            }
                                          },
                                          "onComplete": {
                                            "type": "object",
                                            "description": "Actions to take when the step completes",
                                            "properties": {
                                              "actions": {
                                                "type": "array",
                                                "items": {
                                                  "anyOf": [
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "type": {
                                                          "type": "string",
                                                          "description": "The type of the action",
                                                          "enum": [
                                                            "email"
                                                          ]
                                                        },
                                                        "options": {
                                                          "type": "object",
                                                          "description": "settings for the action",
                                                          "additionalProperties": {
                                                            "type": "string"
                                                          },
                                                          "x-examples": [
                                                            {
                                                              "to": "bob@example.com",
                                                              "from": "alice@example.com"
                                                            }
                                                          ]
                                                        }
                                                      }
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        },
                        "additionalProperties": {
                          "type": "object",
                          "anyOf": [
                            {
                              "type": "object",
                              "description": "Close step",
                              "required": [
                                "step"
                              ],
                              "properties": {
                                "step": {
                                  "type": "string",
                                  "description": "Step to mark as complete",
                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                  "example": "complete",
                                  "x-examples": [
                                    "complete"
                                  ]
                                }
                              },
                              "anyOf": [
                                {
                                  "type": "object",
                                  "description": "Require the user confirm an action. This is normally used when Niagara cannot automatically detect that a task or action has been performed.",
                                  "x-nter-step-component": "confirm-action",
                                  "properties": {
                                    "label": {
                                      "x-examples": [
                                        "Confirm the device has powered off"
                                      ]
                                    },
                                    "options": {
                                      "type": "object",
                                      "required": [
                                        "component",
                                        "payload"
                                      ],
                                      "properties": {
                                        "component": {
                                          "enum": [
                                            "confirm-action"
                                          ],
                                          "example": "confirm-action",
                                          "x-examples": [
                                            "confirm-action"
                                          ]
                                        },
                                        "payload": {
                                          "type": "object",
                                          "required": [
                                            "message"
                                          ],
                                          "properties": {
                                            "message": {
                                              "type": "string",
                                              "description": "The confirmation message to display to the user",
                                              "example": "Device powered off?",
                                              "x-examples": [
                                                "Device powered off?"
                                              ]
                                            },
                                            "negative_message": {
                                              "type": "string",
                                              "description": "An optional inverse message",
                                              "nullable": true,
                                              "example": "Device not functioning",
                                              "x-examples": [
                                                "Device not functioning"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "allOf": [
                                    {
                                      "type": "object",
                                      "x-ui-hide": true,
                                      "description": "A step which requires a user to complete",
                                      "required": [
                                        "type",
                                        "options"
                                      ],
                                      "properties": {
                                        "type": {
                                          "example": "user",
                                          "x-examples": [
                                            "user"
                                          ]
                                        },
                                        "options": {
                                          "type": "object",
                                          "required": [
                                            "component",
                                            "payload"
                                          ],
                                          "properties": {
                                            "component": {
                                              "type": "string",
                                              "description": "Name of the function to invoke",
                                              "example": "assignUnitsFromCustomerToProject",
                                              "x-examples": [
                                                "assignUnitsFromCustomerToProject"
                                              ]
                                            },
                                            "payload": {
                                              "type": "object"
                                            }
                                          }
                                        }
                                      },
                                      "allOf": [
                                        {
                                          "type": "object",
                                          "x-ui-hide": true,
                                          "required": [
                                            "type",
                                            "label",
                                            "goto"
                                          ],
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "Type of workflow step",
                                              "enum": [
                                                "load",
                                                "choice",
                                                "function",
                                                "machine",
                                                "pass",
                                                "fail",
                                                "success",
                                                "user",
                                                "wait"
                                              ]
                                            },
                                            "label": {
                                              "type": "string",
                                              "description": "Label for the step",
                                              "example": "Find units",
                                              "x-examples": [
                                                "Find units"
                                              ]
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to move to",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "complete",
                                              "x-examples": [
                                                "complete"
                                              ]
                                            },
                                            "goto-fail": {
                                              "type": "string",
                                              "description": "Step to transition too if this step cannot be completed",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "process-fail",
                                              "x-examples": [
                                                "process-fail"
                                              ]
                                            },
                                            "context": {
                                              "type": "array",
                                              "description": "Initial values to set on the context",
                                              "items": {
                                                "type": "object",
                                                "required": [
                                                  "key",
                                                  "value"
                                                ],
                                                "properties": {
                                                  "key": {
                                                    "type": "string",
                                                    "description": "The context key to set",
                                                    "example": "$.fizz",
                                                    "x-examples": [
                                                      "$.fizz",
                                                      "$.unit.status",
                                                      "extract_fields"
                                                    ]
                                                  },
                                                  "value": {
                                                    "type": "string",
                                                    "description": "Value to set",
                                                    "example": "$.buzz",
                                                    "x-examples": [
                                                      "$.buzz",
                                                      "Pending",
                                                      true
                                                    ]
                                                  },
                                                  "lock": {
                                                    "type": "boolean",
                                                    "description": "Prevents other steps from writing this value",
                                                    "example": true
                                                  },
                                                  "ignore": {
                                                    "type": "boolean",
                                                    "description": "When trying to set a locked key, do not fail",
                                                    "example": false
                                                  }
                                                }
                                              }
                                            },
                                            "onError": {
                                              "type": "object",
                                              "description": "Action to take when step fails",
                                              "required": [
                                                "finally"
                                              ],
                                              "properties": {
                                                "retry": {
                                                  "type": "integer",
                                                  "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                                  "minimum": 0,
                                                  "maximum": 10,
                                                  "example": 3,
                                                  "default": 0
                                                },
                                                "finally": {
                                                  "type": "object",
                                                  "description": "What to do after all retries",
                                                  "required": [
                                                    "goto"
                                                  ],
                                                  "properties": {
                                                    "actions": {
                                                      "type": "array",
                                                      "description": "Actions to take on failure",
                                                      "items": {
                                                        "anyOf": [
                                                          {
                                                            "type": "object",
                                                            "properties": {
                                                              "type": {
                                                                "type": "string",
                                                                "description": "The type of the action",
                                                                "enum": [
                                                                  "email"
                                                                ]
                                                              },
                                                              "options": {
                                                                "type": "object",
                                                                "description": "settings for the action",
                                                                "additionalProperties": {
                                                                  "type": "string"
                                                                },
                                                                "x-examples": [
                                                                  {
                                                                    "to": "bob@example.com",
                                                                    "from": "alice@example.com"
                                                                  }
                                                                ]
                                                              }
                                                            }
                                                          }
                                                        ]
                                                      }
                                                    },
                                                    "goto": {
                                                      "type": "string",
                                                      "description": "Step to transition to on failure",
                                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                                      "example": "failed",
                                                      "x-examples": [
                                                        "failed"
                                                      ]
                                                    }
                                                  }
                                                }
                                              }
                                            },
                                            "onComplete": {
                                              "type": "object",
                                              "description": "Actions to take when the step completes",
                                              "properties": {
                                                "actions": {
                                                  "type": "array",
                                                  "items": {
                                                    "anyOf": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "type": {
                                                            "type": "string",
                                                            "description": "The type of the action",
                                                            "enum": [
                                                              "email"
                                                            ]
                                                          },
                                                          "options": {
                                                            "type": "object",
                                                            "description": "settings for the action",
                                                            "additionalProperties": {
                                                              "type": "string"
                                                            },
                                                            "x-examples": [
                                                              {
                                                                "to": "bob@example.com",
                                                                "from": "alice@example.com"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": "object",
                                  "description": "Display a link or modal to a user which contains instructions from a PDF",
                                  "x-nter-step-component": "follow-pdf-instructions",
                                  "required": [
                                    "label",
                                    "payload"
                                  ],
                                  "properties": {
                                    "label": {
                                      "x-examples": [
                                        "Instruct user to follow steps outlined in Apple PDF"
                                      ]
                                    },
                                    "options": {
                                      "type": "object",
                                      "required": [
                                        "component",
                                        "payload"
                                      ],
                                      "properties": {
                                        "component": {
                                          "enum": [
                                            "follow-pds-instructions"
                                          ],
                                          "example": "follow-pdf-instructions",
                                          "x-examples": [
                                            "follow-pdf-instructions"
                                          ]
                                        },
                                        "payload": {
                                          "type": "object",
                                          "required": [
                                            "attachment_id"
                                          ],
                                          "properties": {
                                            "attachment_id": {
                                              "type": "string",
                                              "description": "UUID for the attachment",
                                              "format": "uuid",
                                              "example": "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7",
                                              "x-examples": [
                                                "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "allOf": [
                                    {
                                      "type": "object",
                                      "x-ui-hide": true,
                                      "description": "A step which requires a user to complete",
                                      "required": [
                                        "type",
                                        "options"
                                      ],
                                      "properties": {
                                        "type": {
                                          "example": "user",
                                          "x-examples": [
                                            "user"
                                          ]
                                        },
                                        "options": {
                                          "type": "object",
                                          "required": [
                                            "component",
                                            "payload"
                                          ],
                                          "properties": {
                                            "component": {
                                              "type": "string",
                                              "description": "Name of the function to invoke",
                                              "example": "assignUnitsFromCustomerToProject",
                                              "x-examples": [
                                                "assignUnitsFromCustomerToProject"
                                              ]
                                            },
                                            "payload": {
                                              "type": "object"
                                            }
                                          }
                                        }
                                      },
                                      "allOf": [
                                        {
                                          "type": "object",
                                          "x-ui-hide": true,
                                          "required": [
                                            "type",
                                            "label",
                                            "goto"
                                          ],
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "Type of workflow step",
                                              "enum": [
                                                "load",
                                                "choice",
                                                "function",
                                                "machine",
                                                "pass",
                                                "fail",
                                                "success",
                                                "user",
                                                "wait"
                                              ]
                                            },
                                            "label": {
                                              "type": "string",
                                              "description": "Label for the step",
                                              "example": "Find units",
                                              "x-examples": [
                                                "Find units"
                                              ]
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to move to",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "complete",
                                              "x-examples": [
                                                "complete"
                                              ]
                                            },
                                            "goto-fail": {
                                              "type": "string",
                                              "description": "Step to transition too if this step cannot be completed",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "process-fail",
                                              "x-examples": [
                                                "process-fail"
                                              ]
                                            },
                                            "context": {
                                              "type": "array",
                                              "description": "Initial values to set on the context",
                                              "items": {
                                                "type": "object",
                                                "required": [
                                                  "key",
                                                  "value"
                                                ],
                                                "properties": {
                                                  "key": {
                                                    "type": "string",
                                                    "description": "The context key to set",
                                                    "example": "$.fizz",
                                                    "x-examples": [
                                                      "$.fizz",
                                                      "$.unit.status",
                                                      "extract_fields"
                                                    ]
                                                  },
                                                  "value": {
                                                    "type": "string",
                                                    "description": "Value to set",
                                                    "example": "$.buzz",
                                                    "x-examples": [
                                                      "$.buzz",
                                                      "Pending",
                                                      true
                                                    ]
                                                  },
                                                  "lock": {
                                                    "type": "boolean",
                                                    "description": "Prevents other steps from writing this value",
                                                    "example": true
                                                  },
                                                  "ignore": {
                                                    "type": "boolean",
                                                    "description": "When trying to set a locked key, do not fail",
                                                    "example": false
                                                  }
                                                }
                                              }
                                            },
                                            "onError": {
                                              "type": "object",
                                              "description": "Action to take when step fails",
                                              "required": [
                                                "finally"
                                              ],
                                              "properties": {
                                                "retry": {
                                                  "type": "integer",
                                                  "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                                  "minimum": 0,
                                                  "maximum": 10,
                                                  "example": 3,
                                                  "default": 0
                                                },
                                                "finally": {
                                                  "type": "object",
                                                  "description": "What to do after all retries",
                                                  "required": [
                                                    "goto"
                                                  ],
                                                  "properties": {
                                                    "actions": {
                                                      "type": "array",
                                                      "description": "Actions to take on failure",
                                                      "items": {
                                                        "anyOf": [
                                                          {
                                                            "type": "object",
                                                            "properties": {
                                                              "type": {
                                                                "type": "string",
                                                                "description": "The type of the action",
                                                                "enum": [
                                                                  "email"
                                                                ]
                                                              },
                                                              "options": {
                                                                "type": "object",
                                                                "description": "settings for the action",
                                                                "additionalProperties": {
                                                                  "type": "string"
                                                                },
                                                                "x-examples": [
                                                                  {
                                                                    "to": "bob@example.com",
                                                                    "from": "alice@example.com"
                                                                  }
                                                                ]
                                                              }
                                                            }
                                                          }
                                                        ]
                                                      }
                                                    },
                                                    "goto": {
                                                      "type": "string",
                                                      "description": "Step to transition to on failure",
                                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                                      "example": "failed",
                                                      "x-examples": [
                                                        "failed"
                                                      ]
                                                    }
                                                  }
                                                }
                                              }
                                            },
                                            "onComplete": {
                                              "type": "object",
                                              "description": "Actions to take when the step completes",
                                              "properties": {
                                                "actions": {
                                                  "type": "array",
                                                  "items": {
                                                    "anyOf": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "type": {
                                                            "type": "string",
                                                            "description": "The type of the action",
                                                            "enum": [
                                                              "email"
                                                            ]
                                                          },
                                                          "options": {
                                                            "type": "object",
                                                            "description": "settings for the action",
                                                            "additionalProperties": {
                                                              "type": "string"
                                                            },
                                                            "x-examples": [
                                                              {
                                                                "to": "bob@example.com",
                                                                "from": "alice@example.com"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": "object",
                                  "description": "Ask the user to manually enter (or confirm) data for an entity",
                                  "x-nter-step-component": "manual-data-entry",
                                  "properties": {
                                    "label": {
                                      "x-examples": [
                                        "Enter asset tag and confirm serial number"
                                      ]
                                    },
                                    "options": {
                                      "type": "object",
                                      "required": [
                                        "component",
                                        "payload"
                                      ],
                                      "properties": {
                                        "component": {
                                          "enum": [
                                            "manual-data-entry"
                                          ],
                                          "example": "manual-data-entry",
                                          "x-examples": [
                                            "manual-data-entry"
                                          ]
                                        },
                                        "payload": {
                                          "type": "object",
                                          "required": [
                                            "fields"
                                          ],
                                          "properties": {
                                            "fields": {
                                              "type": "array",
                                              "description": "Configuration for each field",
                                              "items": {
                                                "type": "object",
                                                "required": [
                                                  "input_type",
                                                  "label",
                                                  "required",
                                                  "entity_field"
                                                ],
                                                "properties": {
                                                  "input_type": {
                                                    "type": "string",
                                                    "description": "The type of input field to display",
                                                    "enum": [
                                                      "textbox",
                                                      "input"
                                                    ]
                                                  },
                                                  "label": {
                                                    "type": "string",
                                                    "description": "Label to display for the field",
                                                    "example": "Asset Tag",
                                                    "x-examples": [
                                                      "Asset Tag"
                                                    ]
                                                  },
                                                  "required": {
                                                    "type": "boolean",
                                                    "description": "Display the field as required input. Note: this is a helper function. It singles that the user is required to input data at this step. If the field is required on the entity, the user will be presented with a validation message",
                                                    "example": true
                                                  },
                                                  "entity_field": {
                                                    "type": "string",
                                                    "description": "JSON Path to the field on the entity. If the path does not start with '$' then the entity on the context is assumed. Otherwise the data will be set on the context path",
                                                    "example": "input_filter[?(@.key = 'asset-tag')]",
                                                    "x-examples": [
                                                      "input_filter[?(@.key = 'asset-tag')]"
                                                    ]
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "allOf": [
                                    {
                                      "type": "object",
                                      "x-ui-hide": true,
                                      "description": "A step which requires a user to complete",
                                      "required": [
                                        "type",
                                        "options"
                                      ],
                                      "properties": {
                                        "type": {
                                          "example": "user",
                                          "x-examples": [
                                            "user"
                                          ]
                                        },
                                        "options": {
                                          "type": "object",
                                          "required": [
                                            "component",
                                            "payload"
                                          ],
                                          "properties": {
                                            "component": {
                                              "type": "string",
                                              "description": "Name of the function to invoke",
                                              "example": "assignUnitsFromCustomerToProject",
                                              "x-examples": [
                                                "assignUnitsFromCustomerToProject"
                                              ]
                                            },
                                            "payload": {
                                              "type": "object"
                                            }
                                          }
                                        }
                                      },
                                      "allOf": [
                                        {
                                          "type": "object",
                                          "x-ui-hide": true,
                                          "required": [
                                            "type",
                                            "label",
                                            "goto"
                                          ],
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "Type of workflow step",
                                              "enum": [
                                                "load",
                                                "choice",
                                                "function",
                                                "machine",
                                                "pass",
                                                "fail",
                                                "success",
                                                "user",
                                                "wait"
                                              ]
                                            },
                                            "label": {
                                              "type": "string",
                                              "description": "Label for the step",
                                              "example": "Find units",
                                              "x-examples": [
                                                "Find units"
                                              ]
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to move to",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "complete",
                                              "x-examples": [
                                                "complete"
                                              ]
                                            },
                                            "goto-fail": {
                                              "type": "string",
                                              "description": "Step to transition too if this step cannot be completed",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "process-fail",
                                              "x-examples": [
                                                "process-fail"
                                              ]
                                            },
                                            "context": {
                                              "type": "array",
                                              "description": "Initial values to set on the context",
                                              "items": {
                                                "type": "object",
                                                "required": [
                                                  "key",
                                                  "value"
                                                ],
                                                "properties": {
                                                  "key": {
                                                    "type": "string",
                                                    "description": "The context key to set",
                                                    "example": "$.fizz",
                                                    "x-examples": [
                                                      "$.fizz",
                                                      "$.unit.status",
                                                      "extract_fields"
                                                    ]
                                                  },
                                                  "value": {
                                                    "type": "string",
                                                    "description": "Value to set",
                                                    "example": "$.buzz",
                                                    "x-examples": [
                                                      "$.buzz",
                                                      "Pending",
                                                      true
                                                    ]
                                                  },
                                                  "lock": {
                                                    "type": "boolean",
                                                    "description": "Prevents other steps from writing this value",
                                                    "example": true
                                                  },
                                                  "ignore": {
                                                    "type": "boolean",
                                                    "description": "When trying to set a locked key, do not fail",
                                                    "example": false
                                                  }
                                                }
                                              }
                                            },
                                            "onError": {
                                              "type": "object",
                                              "description": "Action to take when step fails",
                                              "required": [
                                                "finally"
                                              ],
                                              "properties": {
                                                "retry": {
                                                  "type": "integer",
                                                  "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                                  "minimum": 0,
                                                  "maximum": 10,
                                                  "example": 3,
                                                  "default": 0
                                                },
                                                "finally": {
                                                  "type": "object",
                                                  "description": "What to do after all retries",
                                                  "required": [
                                                    "goto"
                                                  ],
                                                  "properties": {
                                                    "actions": {
                                                      "type": "array",
                                                      "description": "Actions to take on failure",
                                                      "items": {
                                                        "anyOf": [
                                                          {
                                                            "type": "object",
                                                            "properties": {
                                                              "type": {
                                                                "type": "string",
                                                                "description": "The type of the action",
                                                                "enum": [
                                                                  "email"
                                                                ]
                                                              },
                                                              "options": {
                                                                "type": "object",
                                                                "description": "settings for the action",
                                                                "additionalProperties": {
                                                                  "type": "string"
                                                                },
                                                                "x-examples": [
                                                                  {
                                                                    "to": "bob@example.com",
                                                                    "from": "alice@example.com"
                                                                  }
                                                                ]
                                                              }
                                                            }
                                                          }
                                                        ]
                                                      }
                                                    },
                                                    "goto": {
                                                      "type": "string",
                                                      "description": "Step to transition to on failure",
                                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                                      "example": "failed",
                                                      "x-examples": [
                                                        "failed"
                                                      ]
                                                    }
                                                  }
                                                }
                                              }
                                            },
                                            "onComplete": {
                                              "type": "object",
                                              "description": "Actions to take when the step completes",
                                              "properties": {
                                                "actions": {
                                                  "type": "array",
                                                  "items": {
                                                    "anyOf": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "type": {
                                                            "type": "string",
                                                            "description": "The type of the action",
                                                            "enum": [
                                                              "email"
                                                            ]
                                                          },
                                                          "options": {
                                                            "type": "object",
                                                            "description": "settings for the action",
                                                            "additionalProperties": {
                                                              "type": "string"
                                                            },
                                                            "x-examples": [
                                                              {
                                                                "to": "bob@example.com",
                                                                "from": "alice@example.com"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": "object",
                                  "description": "Ask the user to follow a list and check off boxes",
                                  "x-nter-step-component": "task-list",
                                  "properties": {
                                    "label": {
                                      "x-examples": [
                                        "Enter asset tag and confirm serial number"
                                      ]
                                    },
                                    "options": {
                                      "type": "object",
                                      "required": [
                                        "component",
                                        "payload"
                                      ],
                                      "properties": {
                                        "component": {
                                          "enum": [
                                            "task-list"
                                          ],
                                          "example": "task-list",
                                          "x-examples": [
                                            "task-list"
                                          ]
                                        },
                                        "payload": {
                                          "type": "object",
                                          "required": [
                                            "items"
                                          ],
                                          "properties": {
                                            "is_qc": {
                                              "type": "boolean",
                                              "description": "Flags this list as a QC task list. This means that a different user can close the task to one previously on the context"
                                            },
                                            "items": {
                                              "type": "array",
                                              "description": "Configuration for each task list item",
                                              "items": {
                                                "type": "object",
                                                "required": [
                                                  "label",
                                                  "help",
                                                  "evaluated",
                                                  "na_option"
                                                ],
                                                "properties": {
                                                  "label": {
                                                    "type": "string",
                                                    "description": "Label to display for the field",
                                                    "example": "Asset Tag placement",
                                                    "x-examples": [
                                                      "Asset Tag placement"
                                                    ]
                                                  },
                                                  "slug": {
                                                    "type": "string",
                                                    "description": "Slug for the item (Auto-generated from the label)",
                                                    "readOnly": true,
                                                    "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$",
                                                    "example": "asset-tag-placement",
                                                    "x-examples": [
                                                      "asset-tag-placement"
                                                    ]
                                                  },
                                                  "help": {
                                                    "type": "string",
                                                    "description": "Message describing what is needed to be checked",
                                                    "example": "Asset Tag attached to the unit in the correct position",
                                                    "x-examples": [
                                                      "Asset Tag attached to the unit in the correct position"
                                                    ]
                                                  },
                                                  "evaluated": {
                                                    "type": "boolean",
                                                    "description": "When set to true, this will fail the step if the value for the item is false or N/A",
                                                    "example": true
                                                  },
                                                  "na_field": {
                                                    "type": "boolean",
                                                    "description": "Allow the user to select the N/A option when checking off the list",
                                                    "example": true
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "allOf": [
                                    {
                                      "type": "object",
                                      "x-ui-hide": true,
                                      "description": "A step which requires a user to complete",
                                      "required": [
                                        "type",
                                        "options"
                                      ],
                                      "properties": {
                                        "type": {
                                          "example": "user",
                                          "x-examples": [
                                            "user"
                                          ]
                                        },
                                        "options": {
                                          "type": "object",
                                          "required": [
                                            "component",
                                            "payload"
                                          ],
                                          "properties": {
                                            "component": {
                                              "type": "string",
                                              "description": "Name of the function to invoke",
                                              "example": "assignUnitsFromCustomerToProject",
                                              "x-examples": [
                                                "assignUnitsFromCustomerToProject"
                                              ]
                                            },
                                            "payload": {
                                              "type": "object"
                                            }
                                          }
                                        }
                                      },
                                      "allOf": [
                                        {
                                          "type": "object",
                                          "x-ui-hide": true,
                                          "required": [
                                            "type",
                                            "label",
                                            "goto"
                                          ],
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "Type of workflow step",
                                              "enum": [
                                                "load",
                                                "choice",
                                                "function",
                                                "machine",
                                                "pass",
                                                "fail",
                                                "success",
                                                "user",
                                                "wait"
                                              ]
                                            },
                                            "label": {
                                              "type": "string",
                                              "description": "Label for the step",
                                              "example": "Find units",
                                              "x-examples": [
                                                "Find units"
                                              ]
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to move to",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "complete",
                                              "x-examples": [
                                                "complete"
                                              ]
                                            },
                                            "goto-fail": {
                                              "type": "string",
                                              "description": "Step to transition too if this step cannot be completed",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "process-fail",
                                              "x-examples": [
                                                "process-fail"
                                              ]
                                            },
                                            "context": {
                                              "type": "array",
                                              "description": "Initial values to set on the context",
                                              "items": {
                                                "type": "object",
                                                "required": [
                                                  "key",
                                                  "value"
                                                ],
                                                "properties": {
                                                  "key": {
                                                    "type": "string",
                                                    "description": "The context key to set",
                                                    "example": "$.fizz",
                                                    "x-examples": [
                                                      "$.fizz",
                                                      "$.unit.status",
                                                      "extract_fields"
                                                    ]
                                                  },
                                                  "value": {
                                                    "type": "string",
                                                    "description": "Value to set",
                                                    "example": "$.buzz",
                                                    "x-examples": [
                                                      "$.buzz",
                                                      "Pending",
                                                      true
                                                    ]
                                                  },
                                                  "lock": {
                                                    "type": "boolean",
                                                    "description": "Prevents other steps from writing this value",
                                                    "example": true
                                                  },
                                                  "ignore": {
                                                    "type": "boolean",
                                                    "description": "When trying to set a locked key, do not fail",
                                                    "example": false
                                                  }
                                                }
                                              }
                                            },
                                            "onError": {
                                              "type": "object",
                                              "description": "Action to take when step fails",
                                              "required": [
                                                "finally"
                                              ],
                                              "properties": {
                                                "retry": {
                                                  "type": "integer",
                                                  "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                                  "minimum": 0,
                                                  "maximum": 10,
                                                  "example": 3,
                                                  "default": 0
                                                },
                                                "finally": {
                                                  "type": "object",
                                                  "description": "What to do after all retries",
                                                  "required": [
                                                    "goto"
                                                  ],
                                                  "properties": {
                                                    "actions": {
                                                      "type": "array",
                                                      "description": "Actions to take on failure",
                                                      "items": {
                                                        "anyOf": [
                                                          {
                                                            "type": "object",
                                                            "properties": {
                                                              "type": {
                                                                "type": "string",
                                                                "description": "The type of the action",
                                                                "enum": [
                                                                  "email"
                                                                ]
                                                              },
                                                              "options": {
                                                                "type": "object",
                                                                "description": "settings for the action",
                                                                "additionalProperties": {
                                                                  "type": "string"
                                                                },
                                                                "x-examples": [
                                                                  {
                                                                    "to": "bob@example.com",
                                                                    "from": "alice@example.com"
                                                                  }
                                                                ]
                                                              }
                                                            }
                                                          }
                                                        ]
                                                      }
                                                    },
                                                    "goto": {
                                                      "type": "string",
                                                      "description": "Step to transition to on failure",
                                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                                      "example": "failed",
                                                      "x-examples": [
                                                        "failed"
                                                      ]
                                                    }
                                                  }
                                                }
                                              }
                                            },
                                            "onComplete": {
                                              "type": "object",
                                              "description": "Actions to take when the step completes",
                                              "properties": {
                                                "actions": {
                                                  "type": "array",
                                                  "items": {
                                                    "anyOf": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "type": {
                                                            "type": "string",
                                                            "description": "The type of the action",
                                                            "enum": [
                                                              "email"
                                                            ]
                                                          },
                                                          "options": {
                                                            "type": "object",
                                                            "description": "settings for the action",
                                                            "additionalProperties": {
                                                              "type": "string"
                                                            },
                                                            "x-examples": [
                                                              {
                                                                "to": "bob@example.com",
                                                                "from": "alice@example.com"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": "object",
                                  "description": "Run the ACE-IOS application to provision iOS devices or ",
                                  "properties": {
                                    "type": {
                                      "example": "machine",
                                      "x-examples": [
                                        "machine"
                                      ]
                                    },
                                    "label": {
                                      "x-examples": [
                                        "Run Application"
                                      ]
                                    },
                                    "options": {
                                      "type": "object",
                                      "required": [
                                        "application",
                                        "configuration"
                                      ],
                                      "properties": {
                                        "configuration": {
                                          "type": "object",
                                          "description": "ACE Configuration options",
                                          "properties": {
                                            "pairing_cert": {
                                              "type": "string",
                                              "format": "base64",
                                              "description": "Contents of a *.crt file exported from Apple Configurator or MDM",
                                              "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                              "x-examples": [
                                                "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                              ],
                                              "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                            },
                                            "pairing_key": {
                                              "type": "string",
                                              "format": "base64",
                                              "description": "Contents of a *.der file exported from Apple Configurator or MDM",
                                              "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                              "x-examples": [
                                                "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                              ],
                                              "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                            },
                                            "restore_device": {
                                              "type": "boolean",
                                              "description": "Restore device to factory defaults"
                                            },
                                            "automated_enrollment": {
                                              "type": "boolean",
                                              "description": "Automatically enroll the device to MDM"
                                            },
                                            "mdm": {
                                              "type": "object",
                                              "format": "base64",
                                              "description": "The settings for the Customers MDM",
                                              "properties": {
                                                "vendor": {
                                                  "type": "string",
                                                  "description": "MDM vendor. Currently, supported values are AirWatch, JAMF, and Meraki.",
                                                  "enum": [
                                                    "AirWatch",
                                                    "JAMF",
                                                    "Meraki"
                                                  ]
                                                },
                                                "console_url": {
                                                  "type": "string",
                                                  "format": "uri",
                                                  "description": "Base URL for HTTP requests",
                                                  "example": "http://jamf.zones.com",
                                                  "x-examples": [
                                                    "http://jamf.zones.com"
                                                  ]
                                                },
                                                "user": {
                                                  "type": "string",
                                                  "description": "MDM User name",
                                                  "example": "NterpriseBob",
                                                  "x-examples": [
                                                    "NterpriseBob"
                                                  ]
                                                },
                                                "password": {
                                                  "type": "string",
                                                  "description": "MDM password"
                                                },
                                                "tenant_code": {
                                                  "type": "string",
                                                  "description": "MDM authentication key",
                                                  "example": "nterprise",
                                                  "x-examples": [
                                                    "nterprise"
                                                  ]
                                                },
                                                "set_asset_tag": {
                                                  "type": "string",
                                                  "description": "Sets the devices Asset tag based on a field from the unit",
                                                  "example": "$._entity.input_filter[?(@.key = 'asset-tag')]",
                                                  "x-examples": [
                                                    "$._entity.input_filter[?(@.key = 'asset-tag')]"
                                                  ]
                                                }
                                              }
                                            },
                                            "field_mappings": {
                                              "type": "array",
                                              "description": "List of fields to map to the device",
                                              "items": {
                                                "type": "object",
                                                "properties": {
                                                  "from": {
                                                    "type": "string",
                                                    "description": "The field reported from ACE",
                                                    "enum": [
                                                      "serial_number",
                                                      "name",
                                                      "ecid",
                                                      "udid",
                                                      "configurator_serial",
                                                      "ios",
                                                      "model",
                                                      "storage",
                                                      "wifi_mac",
                                                      "bt_mac",
                                                      "ethernet_mac",
                                                      "thundersync_serial",
                                                      "iccid",
                                                      "iccid2",
                                                      "imei",
                                                      "imei2",
                                                      "missed_profiles",
                                                      "missed_apps",
                                                      "icon_list_regex",
                                                      "icon_layout",
                                                      "bat_capacity"
                                                    ]
                                                  },
                                                  "to": {
                                                    "type": "string",
                                                    "description": "Field to set on the entity",
                                                    "example": "$._entity.input_filter[?(@.key = 'serial-number')]",
                                                    "x-examples": [
                                                      "$._entity.input_filter[?(@.key = 'serial-number')]"
                                                    ]
                                                  }
                                                }
                                              }
                                            },
                                            "wait_for_apps": {
                                              "type": "array",
                                              "description": "A list of applications needed to be installed on the device. This will cause the extension to poll the device for installed applications. Once all the applications have been installed, this step can be completed",
                                              "items": {
                                                "type": "string",
                                                "format": "uri",
                                                "example": "com.apple.itunes",
                                                "x-examples": [
                                                  "com.apple.itunes"
                                                ]
                                              }
                                            },
                                            "wait_for_battery_charge": {
                                              "type": "integer",
                                              "description": "The required battery percentage needed before this step can move on",
                                              "minimum": 0,
                                              "maximum": 100
                                            }
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "allOf": [
                                    {
                                      "type": "object",
                                      "description": "Run an application extension",
                                      "properties": {
                                        "label": {
                                          "x-examples": [
                                            "Run Application"
                                          ]
                                        },
                                        "options": {
                                          "type": "object",
                                          "required": [
                                            "application",
                                            "configuration"
                                          ],
                                          "properties": {
                                            "application": {
                                              "type": "object",
                                              "required": [
                                                "application_id",
                                                "platforms"
                                              ],
                                              "properties": {
                                                "application_id": {
                                                  "type": "string",
                                                  "description": "Registered application ID",
                                                  "example": "ace-ios",
                                                  "x-examples": [
                                                    "ace-ios"
                                                  ]
                                                },
                                                "platforms": {
                                                  "type": "array",
                                                  "description": "Allowed platforms the application can run on",
                                                  "items": {
                                                    "type": "object",
                                                    "required": [
                                                      "platform",
                                                      "arch"
                                                    ],
                                                    "properties": {
                                                      "platform": {
                                                        "type": "string",
                                                        "description": "The platform (OS) the application can run on",
                                                        "enum": [
                                                          "aix",
                                                          "darwin",
                                                          "freebsd",
                                                          "linux",
                                                          "openbsd",
                                                          "sunos",
                                                          "win32"
                                                        ]
                                                      },
                                                      "arch": {
                                                        "type": "string",
                                                        "description": "The CPU architecture needed to run the application",
                                                        "enum": [
                                                          "arm",
                                                          "arm64",
                                                          "ia32",
                                                          "mips",
                                                          "mipsel",
                                                          "ppc",
                                                          "ppc64",
                                                          "s390",
                                                          "s390x",
                                                          "x32",
                                                          "x64"
                                                        ]
                                                      }
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      },
                                      "allOf": [
                                        {
                                          "type": "object",
                                          "x-ui-hide": true,
                                          "required": [
                                            "type",
                                            "label",
                                            "goto"
                                          ],
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "Type of workflow step",
                                              "enum": [
                                                "load",
                                                "choice",
                                                "function",
                                                "machine",
                                                "pass",
                                                "fail",
                                                "success",
                                                "user",
                                                "wait"
                                              ]
                                            },
                                            "label": {
                                              "type": "string",
                                              "description": "Label for the step",
                                              "example": "Find units",
                                              "x-examples": [
                                                "Find units"
                                              ]
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to move to",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "complete",
                                              "x-examples": [
                                                "complete"
                                              ]
                                            },
                                            "goto-fail": {
                                              "type": "string",
                                              "description": "Step to transition too if this step cannot be completed",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "process-fail",
                                              "x-examples": [
                                                "process-fail"
                                              ]
                                            },
                                            "context": {
                                              "type": "array",
                                              "description": "Initial values to set on the context",
                                              "items": {
                                                "type": "object",
                                                "required": [
                                                  "key",
                                                  "value"
                                                ],
                                                "properties": {
                                                  "key": {
                                                    "type": "string",
                                                    "description": "The context key to set",
                                                    "example": "$.fizz",
                                                    "x-examples": [
                                                      "$.fizz",
                                                      "$.unit.status",
                                                      "extract_fields"
                                                    ]
                                                  },
                                                  "value": {
                                                    "type": "string",
                                                    "description": "Value to set",
                                                    "example": "$.buzz",
                                                    "x-examples": [
                                                      "$.buzz",
                                                      "Pending",
                                                      true
                                                    ]
                                                  },
                                                  "lock": {
                                                    "type": "boolean",
                                                    "description": "Prevents other steps from writing this value",
                                                    "example": true
                                                  },
                                                  "ignore": {
                                                    "type": "boolean",
                                                    "description": "When trying to set a locked key, do not fail",
                                                    "example": false
                                                  }
                                                }
                                              }
                                            },
                                            "onError": {
                                              "type": "object",
                                              "description": "Action to take when step fails",
                                              "required": [
                                                "finally"
                                              ],
                                              "properties": {
                                                "retry": {
                                                  "type": "integer",
                                                  "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                                  "minimum": 0,
                                                  "maximum": 10,
                                                  "example": 3,
                                                  "default": 0
                                                },
                                                "finally": {
                                                  "type": "object",
                                                  "description": "What to do after all retries",
                                                  "required": [
                                                    "goto"
                                                  ],
                                                  "properties": {
                                                    "actions": {
                                                      "type": "array",
                                                      "description": "Actions to take on failure",
                                                      "items": {
                                                        "anyOf": [
                                                          {
                                                            "type": "object",
                                                            "properties": {
                                                              "type": {
                                                                "type": "string",
                                                                "description": "The type of the action",
                                                                "enum": [
                                                                  "email"
                                                                ]
                                                              },
                                                              "options": {
                                                                "type": "object",
                                                                "description": "settings for the action",
                                                                "additionalProperties": {
                                                                  "type": "string"
                                                                },
                                                                "x-examples": [
                                                                  {
                                                                    "to": "bob@example.com",
                                                                    "from": "alice@example.com"
                                                                  }
                                                                ]
                                                              }
                                                            }
                                                          }
                                                        ]
                                                      }
                                                    },
                                                    "goto": {
                                                      "type": "string",
                                                      "description": "Step to transition to on failure",
                                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                                      "example": "failed",
                                                      "x-examples": [
                                                        "failed"
                                                      ]
                                                    }
                                                  }
                                                }
                                              }
                                            },
                                            "onComplete": {
                                              "type": "object",
                                              "description": "Actions to take when the step completes",
                                              "properties": {
                                                "actions": {
                                                  "type": "array",
                                                  "items": {
                                                    "anyOf": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "type": {
                                                            "type": "string",
                                                            "description": "The type of the action",
                                                            "enum": [
                                                              "email"
                                                            ]
                                                          },
                                                          "options": {
                                                            "type": "object",
                                                            "description": "settings for the action",
                                                            "additionalProperties": {
                                                              "type": "string"
                                                            },
                                                            "x-examples": [
                                                              {
                                                                "to": "bob@example.com",
                                                                "from": "alice@example.com"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "label": {
                                      "example": "Is device ok?",
                                      "x-examples": [
                                        "Is device ok?"
                                      ]
                                    },
                                    "type": {
                                      "example": "choice",
                                      "x-examples": [
                                        "choice"
                                      ]
                                    },
                                    "choices": {
                                      "type": "array",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "goto"
                                        ],
                                        "maxProperties": 2,
                                        "minProperties": 2,
                                        "maximum": 20,
                                        "properties": {
                                          "and": {
                                            "type": "array",
                                            "description": "All choices must be satisfied",
                                            "maximum": 5,
                                            "items": {
                                              "description": "A Step choice",
                                              "type": "object",
                                              "maxProperties": 2,
                                              "minProperties": 2,
                                              "required": [
                                                "variable"
                                              ],
                                              "properties": {
                                                "variable": {
                                                  "type": "string",
                                                  "description": "Context variable to check",
                                                  "example": "$.parts.available",
                                                  "x-examples": [
                                                    "$.parts.available"
                                                  ]
                                                },
                                                "greater_than_equals": {
                                                  "type": "string",
                                                  "description": "Value has to be greater than or equals to",
                                                  "example": "42",
                                                  "x-examples": [
                                                    "42"
                                                  ]
                                                },
                                                "less_than_equals": {
                                                  "type": "string",
                                                  "description": "Value has to be less than or equals to",
                                                  "example": "42",
                                                  "x-examples": [
                                                    "42"
                                                  ]
                                                },
                                                "greater_than": {
                                                  "type": "string",
                                                  "description": "Value has to be greater than",
                                                  "example": "42",
                                                  "x-examples": [
                                                    "42"
                                                  ]
                                                },
                                                "less_than": {
                                                  "type": "string",
                                                  "description": "Value has to be less than",
                                                  "example": "42",
                                                  "x-examples": [
                                                    "42"
                                                  ]
                                                },
                                                "equals": {
                                                  "type": "string",
                                                  "description": "Value has to equal",
                                                  "example": "42",
                                                  "x-examples": [
                                                    "42"
                                                  ]
                                                },
                                                "not_equals": {
                                                  "type": "string",
                                                  "description": "Value must not equal",
                                                  "example": "42",
                                                  "x-examples": [
                                                    "42"
                                                  ]
                                                }
                                              }
                                            }
                                          },
                                          "or": {
                                            "type": "array",
                                            "description": "Any of these choices must be satisfied",
                                            "maximum": 5,
                                            "items": {
                                              "description": "A Step choice",
                                              "type": "object",
                                              "maxProperties": 2,
                                              "minProperties": 2,
                                              "required": [
                                                "variable"
                                              ],
                                              "properties": {
                                                "variable": {
                                                  "type": "string",
                                                  "description": "Context variable to check",
                                                  "example": "$.parts.available",
                                                  "x-examples": [
                                                    "$.parts.available"
                                                  ]
                                                },
                                                "greater_than_equals": {
                                                  "type": "string",
                                                  "description": "Value has to be greater than or equals to",
                                                  "example": "42",
                                                  "x-examples": [
                                                    "42"
                                                  ]
                                                },
                                                "less_than_equals": {
                                                  "type": "string",
                                                  "description": "Value has to be less than or equals to",
                                                  "example": "42",
                                                  "x-examples": [
                                                    "42"
                                                  ]
                                                },
                                                "greater_than": {
                                                  "type": "string",
                                                  "description": "Value has to be greater than",
                                                  "example": "42",
                                                  "x-examples": [
                                                    "42"
                                                  ]
                                                },
                                                "less_than": {
                                                  "type": "string",
                                                  "description": "Value has to be less than",
                                                  "example": "42",
                                                  "x-examples": [
                                                    "42"
                                                  ]
                                                },
                                                "equals": {
                                                  "type": "string",
                                                  "description": "Value has to equal",
                                                  "example": "42",
                                                  "x-examples": [
                                                    "42"
                                                  ]
                                                },
                                                "not_equals": {
                                                  "type": "string",
                                                  "description": "Value must not equal",
                                                  "example": "42",
                                                  "x-examples": [
                                                    "42"
                                                  ]
                                                }
                                              }
                                            }
                                          },
                                          "not": {
                                            "type": "array",
                                            "description": "None of these choices must be satisfied",
                                            "maximum": 5,
                                            "items": {
                                              "description": "A Step choice",
                                              "type": "object",
                                              "maxProperties": 2,
                                              "minProperties": 2,
                                              "required": [
                                                "variable"
                                              ],
                                              "properties": {
                                                "variable": {
                                                  "type": "string",
                                                  "description": "Context variable to check",
                                                  "example": "$.parts.available",
                                                  "x-examples": [
                                                    "$.parts.available"
                                                  ]
                                                },
                                                "greater_than_equals": {
                                                  "type": "string",
                                                  "description": "Value has to be greater than or equals to",
                                                  "example": "42",
                                                  "x-examples": [
                                                    "42"
                                                  ]
                                                },
                                                "less_than_equals": {
                                                  "type": "string",
                                                  "description": "Value has to be less than or equals to",
                                                  "example": "42",
                                                  "x-examples": [
                                                    "42"
                                                  ]
                                                },
                                                "greater_than": {
                                                  "type": "string",
                                                  "description": "Value has to be greater than",
                                                  "example": "42",
                                                  "x-examples": [
                                                    "42"
                                                  ]
                                                },
                                                "less_than": {
                                                  "type": "string",
                                                  "description": "Value has to be less than",
                                                  "example": "42",
                                                  "x-examples": [
                                                    "42"
                                                  ]
                                                },
                                                "equals": {
                                                  "type": "string",
                                                  "description": "Value has to equal",
                                                  "example": "42",
                                                  "x-examples": [
                                                    "42"
                                                  ]
                                                },
                                                "not_equals": {
                                                  "type": "string",
                                                  "description": "Value must not equal",
                                                  "example": "42",
                                                  "x-examples": [
                                                    "42"
                                                  ]
                                                }
                                              }
                                            }
                                          },
                                          "goto": {
                                            "description": "Step to goto when condition is met",
                                            "allOf": [
                                              {
                                                "type": "string",
                                                "description": "Step to move to",
                                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                                "example": "complete",
                                                "x-examples": [
                                                  "complete"
                                                ]
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    },
                                    "goto": {
                                      "description": "Default step to goto when no choice can be made"
                                    }
                                  },
                                  "allOf": [
                                    {
                                      "type": "object",
                                      "x-ui-hide": true,
                                      "required": [
                                        "type",
                                        "label",
                                        "goto"
                                      ],
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "Type of workflow step",
                                          "enum": [
                                            "load",
                                            "choice",
                                            "function",
                                            "machine",
                                            "pass",
                                            "fail",
                                            "success",
                                            "user",
                                            "wait"
                                          ]
                                        },
                                        "label": {
                                          "type": "string",
                                          "description": "Label for the step",
                                          "example": "Find units",
                                          "x-examples": [
                                            "Find units"
                                          ]
                                        },
                                        "goto": {
                                          "type": "string",
                                          "description": "Step to move to",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "complete",
                                          "x-examples": [
                                            "complete"
                                          ]
                                        },
                                        "goto-fail": {
                                          "type": "string",
                                          "description": "Step to transition too if this step cannot be completed",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "process-fail",
                                          "x-examples": [
                                            "process-fail"
                                          ]
                                        },
                                        "context": {
                                          "type": "array",
                                          "description": "Initial values to set on the context",
                                          "items": {
                                            "type": "object",
                                            "required": [
                                              "key",
                                              "value"
                                            ],
                                            "properties": {
                                              "key": {
                                                "type": "string",
                                                "description": "The context key to set",
                                                "example": "$.fizz",
                                                "x-examples": [
                                                  "$.fizz",
                                                  "$.unit.status",
                                                  "extract_fields"
                                                ]
                                              },
                                              "value": {
                                                "type": "string",
                                                "description": "Value to set",
                                                "example": "$.buzz",
                                                "x-examples": [
                                                  "$.buzz",
                                                  "Pending",
                                                  true
                                                ]
                                              },
                                              "lock": {
                                                "type": "boolean",
                                                "description": "Prevents other steps from writing this value",
                                                "example": true
                                              },
                                              "ignore": {
                                                "type": "boolean",
                                                "description": "When trying to set a locked key, do not fail",
                                                "example": false
                                              }
                                            }
                                          }
                                        },
                                        "onError": {
                                          "type": "object",
                                          "description": "Action to take when step fails",
                                          "required": [
                                            "finally"
                                          ],
                                          "properties": {
                                            "retry": {
                                              "type": "integer",
                                              "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                              "minimum": 0,
                                              "maximum": 10,
                                              "example": 3,
                                              "default": 0
                                            },
                                            "finally": {
                                              "type": "object",
                                              "description": "What to do after all retries",
                                              "required": [
                                                "goto"
                                              ],
                                              "properties": {
                                                "actions": {
                                                  "type": "array",
                                                  "description": "Actions to take on failure",
                                                  "items": {
                                                    "anyOf": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "type": {
                                                            "type": "string",
                                                            "description": "The type of the action",
                                                            "enum": [
                                                              "email"
                                                            ]
                                                          },
                                                          "options": {
                                                            "type": "object",
                                                            "description": "settings for the action",
                                                            "additionalProperties": {
                                                              "type": "string"
                                                            },
                                                            "x-examples": [
                                                              {
                                                                "to": "bob@example.com",
                                                                "from": "alice@example.com"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  }
                                                },
                                                "goto": {
                                                  "type": "string",
                                                  "description": "Step to transition to on failure",
                                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                                  "example": "failed",
                                                  "x-examples": [
                                                    "failed"
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        },
                                        "onComplete": {
                                          "type": "object",
                                          "description": "Actions to take when the step completes",
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  ]
                                },
                                {
                                  "type": "object",
                                  "description": "Finial step which is marked as failed",
                                  "properties": {
                                    "label": {
                                      "example": "Failed",
                                      "x-examples": [
                                        "Failed"
                                      ],
                                      "allOf": [
                                        {
                                          "type": "string",
                                          "description": "Label for the step",
                                          "example": "Find units",
                                          "x-examples": [
                                            "Find units"
                                          ]
                                        }
                                      ]
                                    },
                                    "type": {
                                      "example": "fail",
                                      "x-examples": [
                                        "fail"
                                      ],
                                      "allOf": [
                                        {
                                          "type": "string",
                                          "description": "Type of workflow step",
                                          "enum": [
                                            "load",
                                            "choice",
                                            "function",
                                            "machine",
                                            "pass",
                                            "fail",
                                            "success",
                                            "user",
                                            "wait"
                                          ]
                                        }
                                      ]
                                    },
                                    "onComplete": {
                                      "type": "object",
                                      "description": "Actions to take when the step completes",
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                },
                                {
                                  "type": "object",
                                  "description": "Allows executing actions with out performing any function",
                                  "properties": {
                                    "label": {
                                      "example": "Send email to project manager",
                                      "x-examples": [
                                        "Send email to project manager"
                                      ]
                                    },
                                    "type": {
                                      "example": "pass",
                                      "x-examples": [
                                        "pass"
                                      ],
                                      "allOf": [
                                        {
                                          "type": "string",
                                          "description": "Type of workflow step",
                                          "enum": [
                                            "load",
                                            "choice",
                                            "function",
                                            "machine",
                                            "pass",
                                            "fail",
                                            "success",
                                            "user",
                                            "wait"
                                          ]
                                        }
                                      ]
                                    }
                                  },
                                  "allOf": [
                                    {
                                      "type": "object",
                                      "x-ui-hide": true,
                                      "required": [
                                        "type",
                                        "label",
                                        "goto"
                                      ],
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "Type of workflow step",
                                          "enum": [
                                            "load",
                                            "choice",
                                            "function",
                                            "machine",
                                            "pass",
                                            "fail",
                                            "success",
                                            "user",
                                            "wait"
                                          ]
                                        },
                                        "label": {
                                          "type": "string",
                                          "description": "Label for the step",
                                          "example": "Find units",
                                          "x-examples": [
                                            "Find units"
                                          ]
                                        },
                                        "goto": {
                                          "type": "string",
                                          "description": "Step to move to",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "complete",
                                          "x-examples": [
                                            "complete"
                                          ]
                                        },
                                        "goto-fail": {
                                          "type": "string",
                                          "description": "Step to transition too if this step cannot be completed",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "process-fail",
                                          "x-examples": [
                                            "process-fail"
                                          ]
                                        },
                                        "context": {
                                          "type": "array",
                                          "description": "Initial values to set on the context",
                                          "items": {
                                            "type": "object",
                                            "required": [
                                              "key",
                                              "value"
                                            ],
                                            "properties": {
                                              "key": {
                                                "type": "string",
                                                "description": "The context key to set",
                                                "example": "$.fizz",
                                                "x-examples": [
                                                  "$.fizz",
                                                  "$.unit.status",
                                                  "extract_fields"
                                                ]
                                              },
                                              "value": {
                                                "type": "string",
                                                "description": "Value to set",
                                                "example": "$.buzz",
                                                "x-examples": [
                                                  "$.buzz",
                                                  "Pending",
                                                  true
                                                ]
                                              },
                                              "lock": {
                                                "type": "boolean",
                                                "description": "Prevents other steps from writing this value",
                                                "example": true
                                              },
                                              "ignore": {
                                                "type": "boolean",
                                                "description": "When trying to set a locked key, do not fail",
                                                "example": false
                                              }
                                            }
                                          }
                                        },
                                        "onError": {
                                          "type": "object",
                                          "description": "Action to take when step fails",
                                          "required": [
                                            "finally"
                                          ],
                                          "properties": {
                                            "retry": {
                                              "type": "integer",
                                              "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                              "minimum": 0,
                                              "maximum": 10,
                                              "example": 3,
                                              "default": 0
                                            },
                                            "finally": {
                                              "type": "object",
                                              "description": "What to do after all retries",
                                              "required": [
                                                "goto"
                                              ],
                                              "properties": {
                                                "actions": {
                                                  "type": "array",
                                                  "description": "Actions to take on failure",
                                                  "items": {
                                                    "anyOf": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "type": {
                                                            "type": "string",
                                                            "description": "The type of the action",
                                                            "enum": [
                                                              "email"
                                                            ]
                                                          },
                                                          "options": {
                                                            "type": "object",
                                                            "description": "settings for the action",
                                                            "additionalProperties": {
                                                              "type": "string"
                                                            },
                                                            "x-examples": [
                                                              {
                                                                "to": "bob@example.com",
                                                                "from": "alice@example.com"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  }
                                                },
                                                "goto": {
                                                  "type": "string",
                                                  "description": "Step to transition to on failure",
                                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                                  "example": "failed",
                                                  "x-examples": [
                                                    "failed"
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        },
                                        "onComplete": {
                                          "type": "object",
                                          "description": "Actions to take when the step completes",
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  ]
                                },
                                {
                                  "type": "object",
                                  "description": "Finial step which is marked as completed successfully",
                                  "properties": {
                                    "label": {
                                      "example": "Complete",
                                      "x-examples": [
                                        "Complete"
                                      ],
                                      "allOf": [
                                        {
                                          "type": "string",
                                          "description": "Label for the step",
                                          "example": "Find units",
                                          "x-examples": [
                                            "Find units"
                                          ]
                                        }
                                      ]
                                    },
                                    "type": {
                                      "example": "success",
                                      "x-examples": [
                                        "success"
                                      ],
                                      "allOf": [
                                        {
                                          "type": "string",
                                          "description": "Type of workflow step",
                                          "enum": [
                                            "load",
                                            "choice",
                                            "function",
                                            "machine",
                                            "pass",
                                            "fail",
                                            "success",
                                            "user",
                                            "wait"
                                          ]
                                        }
                                      ]
                                    },
                                    "onComplete": {
                                      "type": "object",
                                      "description": "Actions to take when the step completes",
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                },
                                {
                                  "type": "object",
                                  "description": "A step which run at certain times",
                                  "required": [
                                    "stop_at",
                                    "time"
                                  ],
                                  "properties": {
                                    "label": {
                                      "example": "Wait for cable",
                                      "x-examples": [
                                        "Wait for cable"
                                      ],
                                      "allOf": [
                                        {
                                          "type": "string",
                                          "description": "Label for the step",
                                          "example": "Find units",
                                          "x-examples": [
                                            "Find units"
                                          ]
                                        }
                                      ]
                                    },
                                    "type": {
                                      "x-examples": [
                                        "wait"
                                      ],
                                      "example": "wait"
                                    },
                                    "stop_at": {
                                      "type": "integer",
                                      "description": "Time in seconds to stop this task",
                                      "maximum": 900,
                                      "minimum": 1
                                    },
                                    "time": {
                                      "type": "integer",
                                      "description": "Time to wait before checking this step",
                                      "example": 600,
                                      "maximum": 900,
                                      "minimum": 1
                                    },
                                    "listen_for": {
                                      "type": "array",
                                      "description": "List of events and conditions to listen for to trigger",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "event"
                                        ],
                                        "properties": {
                                          "event": {
                                            "type": "string",
                                            "description": "Name of the event to listen for",
                                            "allOf": [
                                              {
                                                "type": "string",
                                                "description": "Possible entity events",
                                                "enum": [
                                                  "CON.attached",
                                                  "CON.created",
                                                  "CON.deleted",
                                                  "CON.detached",
                                                  "CON.removed",
                                                  "CON.updated",
                                                  "CUS.attached",
                                                  "CUS.created",
                                                  "CUS.deleted",
                                                  "CUS.detached",
                                                  "CUS.removed",
                                                  "CUS.updated",
                                                  "LOC.attached",
                                                  "LOC.created",
                                                  "LOC.deleted",
                                                  "LOC.detached",
                                                  "LOC.removed",
                                                  "LOC.updated",
                                                  "NOTE.attached",
                                                  "NOTE.created",
                                                  "NOTE.deleted",
                                                  "NOTE.detached",
                                                  "NOTE.removed",
                                                  "NOTE.updated",
                                                  "PART.attached",
                                                  "PART.created",
                                                  "PART.deleted",
                                                  "PART.detached",
                                                  "PART.removed",
                                                  "PART.updated",
                                                  "PGM.attached",
                                                  "PGM.created",
                                                  "PGM.deleted",
                                                  "PGM.detached",
                                                  "PGM.removed",
                                                  "PGM.updated",
                                                  "PRO.attached",
                                                  "PRO.created",
                                                  "PRO.deleted",
                                                  "PRO.detached",
                                                  "PRO.removed",
                                                  "PRO.updated",
                                                  "RES.attached",
                                                  "RES.created",
                                                  "RES.deleted",
                                                  "RES.detached",
                                                  "RES.removed",
                                                  "RES.updated",
                                                  "UNIT.attached",
                                                  "UNIT.created",
                                                  "UNIT.deleted",
                                                  "UNIT.detached",
                                                  "UNIT.removed",
                                                  "UNIT.updated",
                                                  "USER.attached",
                                                  "USER.created",
                                                  "USER.deleted",
                                                  "USER.detached",
                                                  "USER.removed",
                                                  "USER.updated",
                                                  "WKF.attached",
                                                  "WKF.created",
                                                  "WKF.deleted",
                                                  "WKF.detached",
                                                  "WKF.removed",
                                                  "WKF.updated",
                                                  "WOR.attached",
                                                  "WOR.created",
                                                  "WOR.deleted",
                                                  "WOR.detached",
                                                  "WOR.removed",
                                                  "WOR.updated"
                                                ]
                                              }
                                            ]
                                          },
                                          "event_value": {
                                            "type": "object",
                                            "description": "The event conditions that have to be met",
                                            "allOf": [
                                              {
                                                "description": "A Step choice",
                                                "type": "object",
                                                "maxProperties": 2,
                                                "minProperties": 2,
                                                "required": [
                                                  "variable"
                                                ],
                                                "properties": {
                                                  "variable": {
                                                    "type": "string",
                                                    "description": "Context variable to check",
                                                    "example": "$.parts.available",
                                                    "x-examples": [
                                                      "$.parts.available"
                                                    ]
                                                  },
                                                  "greater_than_equals": {
                                                    "type": "string",
                                                    "description": "Value has to be greater than or equals to",
                                                    "example": "42",
                                                    "x-examples": [
                                                      "42"
                                                    ]
                                                  },
                                                  "less_than_equals": {
                                                    "type": "string",
                                                    "description": "Value has to be less than or equals to",
                                                    "example": "42",
                                                    "x-examples": [
                                                      "42"
                                                    ]
                                                  },
                                                  "greater_than": {
                                                    "type": "string",
                                                    "description": "Value has to be greater than",
                                                    "example": "42",
                                                    "x-examples": [
                                                      "42"
                                                    ]
                                                  },
                                                  "less_than": {
                                                    "type": "string",
                                                    "description": "Value has to be less than",
                                                    "example": "42",
                                                    "x-examples": [
                                                      "42"
                                                    ]
                                                  },
                                                  "equals": {
                                                    "type": "string",
                                                    "description": "Value has to equal",
                                                    "example": "42",
                                                    "x-examples": [
                                                      "42"
                                                    ]
                                                  },
                                                  "not_equals": {
                                                    "type": "string",
                                                    "description": "Value must not equal",
                                                    "example": "42",
                                                    "x-examples": [
                                                      "42"
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "allOf": [
                                    {
                                      "type": "object",
                                      "x-ui-hide": true,
                                      "required": [
                                        "type",
                                        "label",
                                        "goto"
                                      ],
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "Type of workflow step",
                                          "enum": [
                                            "load",
                                            "choice",
                                            "function",
                                            "machine",
                                            "pass",
                                            "fail",
                                            "success",
                                            "user",
                                            "wait"
                                          ]
                                        },
                                        "label": {
                                          "type": "string",
                                          "description": "Label for the step",
                                          "example": "Find units",
                                          "x-examples": [
                                            "Find units"
                                          ]
                                        },
                                        "goto": {
                                          "type": "string",
                                          "description": "Step to move to",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "complete",
                                          "x-examples": [
                                            "complete"
                                          ]
                                        },
                                        "goto-fail": {
                                          "type": "string",
                                          "description": "Step to transition too if this step cannot be completed",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "process-fail",
                                          "x-examples": [
                                            "process-fail"
                                          ]
                                        },
                                        "context": {
                                          "type": "array",
                                          "description": "Initial values to set on the context",
                                          "items": {
                                            "type": "object",
                                            "required": [
                                              "key",
                                              "value"
                                            ],
                                            "properties": {
                                              "key": {
                                                "type": "string",
                                                "description": "The context key to set",
                                                "example": "$.fizz",
                                                "x-examples": [
                                                  "$.fizz",
                                                  "$.unit.status",
                                                  "extract_fields"
                                                ]
                                              },
                                              "value": {
                                                "type": "string",
                                                "description": "Value to set",
                                                "example": "$.buzz",
                                                "x-examples": [
                                                  "$.buzz",
                                                  "Pending",
                                                  true
                                                ]
                                              },
                                              "lock": {
                                                "type": "boolean",
                                                "description": "Prevents other steps from writing this value",
                                                "example": true
                                              },
                                              "ignore": {
                                                "type": "boolean",
                                                "description": "When trying to set a locked key, do not fail",
                                                "example": false
                                              }
                                            }
                                          }
                                        },
                                        "onError": {
                                          "type": "object",
                                          "description": "Action to take when step fails",
                                          "required": [
                                            "finally"
                                          ],
                                          "properties": {
                                            "retry": {
                                              "type": "integer",
                                              "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                              "minimum": 0,
                                              "maximum": 10,
                                              "example": 3,
                                              "default": 0
                                            },
                                            "finally": {
                                              "type": "object",
                                              "description": "What to do after all retries",
                                              "required": [
                                                "goto"
                                              ],
                                              "properties": {
                                                "actions": {
                                                  "type": "array",
                                                  "description": "Actions to take on failure",
                                                  "items": {
                                                    "anyOf": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "type": {
                                                            "type": "string",
                                                            "description": "The type of the action",
                                                            "enum": [
                                                              "email"
                                                            ]
                                                          },
                                                          "options": {
                                                            "type": "object",
                                                            "description": "settings for the action",
                                                            "additionalProperties": {
                                                              "type": "string"
                                                            },
                                                            "x-examples": [
                                                              {
                                                                "to": "bob@example.com",
                                                                "from": "alice@example.com"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  }
                                                },
                                                "goto": {
                                                  "type": "string",
                                                  "description": "Step to transition to on failure",
                                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                                  "example": "failed",
                                                  "x-examples": [
                                                    "failed"
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        },
                                        "onComplete": {
                                          "type": "object",
                                          "description": "Actions to take when the step completes",
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      }
                    },
                    "allOf": [
                      {
                        "x-ui-hide": true,
                        "type": "object",
                        "description": "Common Properties to all entities",
                        "required": [
                          "label"
                        ],
                        "properties": {
                          "label": {
                            "type": "string",
                            "description": "Label for the entity",
                            "example": "primary"
                          },
                          "slug": {
                            "type": "string",
                            "description": "Slug for the entity (Auto-generated from the label)",
                            "readOnly": true,
                            "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$"
                          },
                          "created": {
                            "description": "Date the entity was created",
                            "type": "string",
                            "format": "date-time",
                            "readOnly": true
                          },
                          "updated": {
                            "description": "Last date the entity was updated",
                            "type": "string",
                            "format": "date-time",
                            "readOnly": true
                          }
                        }
                      }
                    ],
                    "example": {
                      "steps": {
                        "fail": {
                          "step": "complete",
                          "type": "user",
                          "options": {
                            "component": "assignUnitsFromCustomerToProject",
                            "payload": {
                              "message": "Device powered off?",
                              "negative_message": "Device not functioning"
                            }
                          },
                          "label": "Find units",
                          "goto": "complete",
                          "goto-fail": "process-fail",
                          "context": [
                            {
                              "key": "$.unit.status",
                              "value": "Pending",
                              "lock": true,
                              "ignore": true
                            }
                          ],
                          "onError": {
                            "finally": {
                              "goto": "failed",
                              "actions": [
                                {
                                  "type": "email",
                                  "options": {
                                    "to": "bob@example.com",
                                    "from": "alice@example.com"
                                  }
                                }
                              ]
                            },
                            "retry": 8
                          },
                          "onComplete": {
                            "actions": [
                              {
                                "type": "email",
                                "options": {
                                  "to": "bob@example.com",
                                  "from": "alice@example.com"
                                }
                              },
                              {
                                "type": "email",
                                "options": {
                                  "to": "bob@example.com",
                                  "from": "alice@example.com"
                                }
                              },
                              {
                                "type": "email",
                                "options": {
                                  "to": "bob@example.com",
                                  "from": "alice@example.com"
                                }
                              }
                            ]
                          }
                        },
                        "amet_b64$": {
                          "step": "complete",
                          "label": "Find units",
                          "type": "success",
                          "onComplete": {
                            "actions": [
                              {
                                "type": "email",
                                "options": {
                                  "to": "bob@example.com",
                                  "from": "alice@example.com"
                                }
                              }
                            ]
                          }
                        },
                        "minim2__": {
                          "step": "complete",
                          "type": "pass",
                          "label": "Find units",
                          "goto": "complete",
                          "goto-fail": "process-fail",
                          "context": [
                            {
                              "key": "$.fizz",
                              "value": "$.buzz",
                              "lock": false,
                              "ignore": true
                            }
                          ],
                          "onError": {
                            "finally": {
                              "goto": "failed",
                              "actions": [
                                {
                                  "type": "email",
                                  "options": {
                                    "to": "bob@example.com",
                                    "from": "alice@example.com"
                                  }
                                },
                                {
                                  "type": "email",
                                  "options": {
                                    "to": "bob@example.com",
                                    "from": "alice@example.com"
                                  }
                                },
                                {
                                  "type": "email",
                                  "options": {
                                    "to": "bob@example.com",
                                    "from": "alice@example.com"
                                  }
                                },
                                {
                                  "type": "email",
                                  "options": {
                                    "to": "bob@example.com",
                                    "from": "alice@example.com"
                                  }
                                }
                              ]
                            },
                            "retry": 0
                          },
                          "onComplete": {
                            "actions": [
                              {
                                "type": "email",
                                "options": {
                                  "to": "bob@example.com",
                                  "from": "alice@example.com"
                                }
                              },
                              {
                                "type": "email",
                                "options": {
                                  "to": "bob@example.com",
                                  "from": "alice@example.com"
                                }
                              },
                              {
                                "type": "email",
                                "options": {
                                  "to": "bob@example.com",
                                  "from": "alice@example.com"
                                }
                              },
                              {
                                "type": "email",
                                "options": {
                                  "to": "bob@example.com",
                                  "from": "alice@example.com"
                                }
                              }
                            ]
                          }
                        }
                      },
                      "starts_at": "entry",
                      "label": "MLTI iPad Assembly Assignment",
                      "workflow_id": "e530652e-28e8-4f64-84af-e1cf0ff7c805",
                      "applies_to": "customer",
                      "slug": "mlti-ipad-assembly-assignment",
                      "version": "1.0",
                      "workflow_version": 7,
                      "context": [
                        {
                          "key": "$.fizz",
                          "value": "Pending",
                          "lock": false,
                          "ignore": true
                        },
                        {
                          "key": "$.unit.status",
                          "value": "true",
                          "lock": false,
                          "ignore": true
                        },
                        {
                          "key": "$.unit.status",
                          "value": "Pending",
                          "lock": false,
                          "ignore": true
                        },
                        {
                          "key": "extract_fields",
                          "value": "Pending",
                          "lock": true,
                          "ignore": false
                        }
                      ],
                      "created": "1991-03-23T20:31:55.727Z",
                      "updated": "1988-03-24T09:13:18.759Z"
                    }
                  },
                  "current_step": {
                    "type": "string",
                    "description": "The current step to execute",
                    "readOnly": true,
                    "example": "assign-units",
                    "x-examples": [
                      "assign-units"
                    ]
                  },
                  "last_steps": {
                    "type": "array",
                    "description": "Ordered list of the executed steps",
                    "readOnly": true,
                    "items": {
                      "type": "object",
                      "description": "Details for the step",
                      "properties": {
                        "step_name": {
                          "type": "string",
                          "description": "Name for the step",
                          "readOnly": true,
                          "example": "choose-units",
                          "x-examples": [
                            "choose-units"
                          ]
                        },
                        "started_at": {
                          "type": "string",
                          "format": "date-time",
                          "description": "The date time the step started",
                          "readOnly": true
                        },
                        "ended_at": {
                          "type": "string",
                          "format": "date-time",
                          "description": "The date time the step ended",
                          "readOnly": true
                        },
                        "time_to_run": {
                          "type": "string",
                          "description": "The total time it took to run the step (with milliseconds)",
                          "readOnly": true,
                          "example": 1567605055995.677,
                          "x-examples": [
                            1567605055995.677
                          ]
                        },
                        "did_error": {
                          "type": "boolean",
                          "description": "Flag to test if the step errored",
                          "readOnly": true
                        },
                        "did_timeout": {
                          "type": "boolean",
                          "description": "Flag if the step timed-out",
                          "readOnly": true
                        }
                      }
                    }
                  },
                  "started_at": {
                    "type": "string",
                    "format": "date-time",
                    "description": "The date time the context started",
                    "readOnly": true
                  },
                  "ended_at": {
                    "type": "string",
                    "format": "date-time",
                    "nullable": true,
                    "description": "The date time the context ended",
                    "readOnly": true
                  },
                  "time_to_run": {
                    "type": "string",
                    "description": "The total time it took to run the workflow (with milliseconds)",
                    "example": 1567605055995.677,
                    "x-examples": [
                      1567605055995.677
                    ],
                    "readOnly": true
                  },
                  "active": {
                    "type": "boolean",
                    "description": "Flag set if there are still steps which need to be executed",
                    "example": true,
                    "readOnly": true
                  },
                  "waiting_for_user": {
                    "type": "boolean",
                    "description": "Flag for when the user needs to complete the step",
                    "example": false
                  },
                  "data": {
                    "type": "object",
                    "description": "Data set for the context",
                    "additionalProperties": true,
                    "readOnly": true,
                    "x-examples": [
                      {
                        "can_foo_the_bar": true,
                        "available_units_by_part": {
                          "373b7cd6-3fde-4afe-a790-411d72e07c89": 42,
                          "8faaacaa-94d4-4f1f-a8eb-39353dbbf524": 84
                        }
                      }
                    ]
                  }
                },
                "example": {
                  "context_id": "MWMwMjIyNTgtYWZjZC00YmYyLWE1NzYtYWU1OWI3YTE1ZDczOlVOSVQ6NTMxMDI5MjQtNDUwYS00ZjFlLWI1ZDQtYTIwN2JjNTg2NTIxOjE1Njc2MDUwNTU5OTUuNDQ1NjYzNDM-",
                  "workflow": {
                    "steps": {
                      "run-ace": {
                        "step": "complete",
                        "label": "Complete",
                        "type": "success",
                        "onComplete": {
                          "actions": [
                            {
                              "type": "email",
                              "options": {
                                "to": "bob@example.com",
                                "from": "alice@example.com"
                              }
                            }
                          ]
                        }
                      }
                    },
                    "starts_at": "entry",
                    "label": "MLTI iPad Assembly Assignment",
                    "workflow_id": "e530652e-28e8-4f64-84af-e1cf0ff7c805",
                    "applies_to": "contact",
                    "slug": "mlti-ipad-assembly-assignment",
                    "version": "1.0",
                    "workflow_version": 7,
                    "context": [
                      {
                        "key": "extract_fields",
                        "value": "true",
                        "lock": false,
                        "ignore": false
                      }
                    ],
                    "created": "1980-10-24T16:13:53.108Z",
                    "updated": "2004-05-16T12:58:40.748Z"
                  },
                  "current_step": "assign-units",
                  "last_steps": [
                    {
                      "step_name": "choose-units",
                      "started_at": "2004-03-26T20:11:11.319Z",
                      "ended_at": "1947-05-20T10:51:37.27Z",
                      "time_to_run": "1567605055995.677",
                      "did_error": true,
                      "did_timeout": false
                    },
                    {
                      "step_name": "choose-units",
                      "started_at": "1996-05-02T21:53:24.816Z",
                      "ended_at": "1957-05-12T04:23:30.642Z",
                      "time_to_run": "1567605055995.677",
                      "did_error": true,
                      "did_timeout": false
                    },
                    {
                      "step_name": "choose-units",
                      "started_at": "1972-09-07T03:05:38.229Z",
                      "ended_at": "1976-02-21T06:04:22.606Z",
                      "time_to_run": "1567605055995.677",
                      "did_error": true,
                      "did_timeout": false
                    },
                    {
                      "step_name": "choose-units",
                      "started_at": "1944-11-06T12:27:38.328Z",
                      "ended_at": "1973-07-18T17:26:33.254Z",
                      "time_to_run": "1567605055995.677",
                      "did_error": true,
                      "did_timeout": false
                    },
                    {
                      "step_name": "choose-units",
                      "started_at": "1990-02-05T22:18:57.355Z",
                      "ended_at": "2007-06-07T06:03:28.691Z",
                      "time_to_run": "1567605055995.677",
                      "did_error": false,
                      "did_timeout": true
                    }
                  ],
                  "started_at": "1983-12-17T14:12:56.411Z",
                  "ended_at": "1946-09-13T16:51:37.652Z",
                  "time_to_run": "1567605055995.677",
                  "active": true,
                  "waiting_for_user": false,
                  "data": {
                    "can_foo_the_bar": true,
                    "available_units_by_part": {
                      "373b7cd6-3fde-4afe-a790-411d72e07c89": 42,
                      "8faaacaa-94d4-4f1f-a8eb-39353dbbf524": 84
                    }
                  }
                }
              }
            ],
            "example": "undefined"
          }
        }
      }
    }
  },
  "allOf": [
    {
      "type": "object",
      "x-hal": true,
      "x-ui-hide": true,
      "properties": {
        "total_count": {
          "type": "integer",
          "format": "int32",
          "readOnly": true,
          "minimum": 0,
          "example": 32
        },
        "limit": {
          "type": "integer",
          "format": "int32",
          "readOnly": true,
          "minimum": 1,
          "maximum": 100,
          "example": 50
        },
        "offset": {
          "type": "string",
          "readOnly": true,
          "example": "363yHhUhhI"
        }
      },
      "allOf": [
        {
          "type": "object",
          "x-ui-hide": true,
          "properties": {
            "_links": {
              "type": "object",
              "readOnly": true,
              "properties": {
                "self": {
                  "type": "object",
                  "properties": {
                    "href": {
                      "type": "string",
                      "format": "uri"
                    }
                  }
                }
              }
            }
          }
        },
        {
          "type": "object",
          "x-ui-hide": true,
          "properties": {
            "_links": {
              "type": "object",
              "readOnly": true,
              "properties": {
                "next": {
                  "type": "object",
                  "properties": {
                    "href": {
                      "type": "string",
                      "format": "uri"
                    }
                  }
                }
              }
            }
          }
        }
      ],
      "example": "undefined"
    }
  ]
}
```

<h3 id="fetchcontextsforworkflow-responses">Responses</h3>

|Status|Meaning|Description|Schema|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|A paged response for contexts|Inline|
|401|[Unauthorized](https://tools.ietf.org/html/rfc7235#section-3.1)|Unauthorized|Inline|
|403|[Forbidden](https://tools.ietf.org/html/rfc7231#section-6.5.3)|Forbidden|Inline|

<h3 id="fetchcontextsforworkflow-responseschema">Response Schema</h3>

Status Code **200**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» _embedded|object|false|none|none|
|»» nter:contexts|[allOf]|false|none|none|
|»»» _links|object|false|none|none|
|»»»» self|object|false|read-only|none|
|»»»»» href|string|false|none|none|

Status Code **401**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» title|any|false|none|none|
|» type|any|false|none|none|
|» status|any|false|none|none|
|» detail|any|false|none|none|

Status Code **403**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» title|any|false|none|none|
|» type|any|false|none|none|
|» status|any|false|none|none|
|» detail|any|false|none|none|

<aside class="success">
This operation does not require authentication
</aside>

## startWorkflow

<a id="opIdstartWorkflow"></a>

`POST /work-flows/:workflow_id/contexts`

*Start workflow*

Starts a workflow on an entity

> Body parameter

```json
{
  "type": "object",
  "properties": {
    "entity_type": {
      "type": "string",
      "description": "Entity type",
      "example": "CUS",
      "enum": [
        "CON",
        "CUS",
        "LOC",
        "NOTE",
        "PART",
        "PGM",
        "PRO",
        "RES",
        "UNIT",
        "USER",
        "WKF",
        "WOR"
      ]
    },
    "entity_id": {
      "type": "string",
      "description": "UUID for the entity",
      "example": "59c834ad-d9cc-4e0f-a569-8f4e52c351b9",
      "x-examples": [
        "59c834ad-d9cc-4e0f-a569-8f4e52c351b9"
      ],
      "pattern": "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"
    }
  }
}
```

<h3 id="startworkflow-parameters">Parameters</h3>

|Name|In|Type|Required|Description|
|---|---|---|---|---|
|workflow_id|path|string|true|Id for the workflow|
|entity_type|body|string|false|Entity type|
|entity_id|body|string|false|UUID for the entity|

#### Enumerated Values

|Parameter|Value|
|---|---|
|entity_type|CON|
|entity_type|CUS|
|entity_type|LOC|
|entity_type|NOTE|
|entity_type|PART|
|entity_type|PGM|
|entity_type|PRO|
|entity_type|RES|
|entity_type|UNIT|
|entity_type|USER|
|entity_type|WKF|
|entity_type|WOR|

> Example responses

> 200 Response

```json
{
  "type": "object",
  "allOf": [
    {
      "type": "object",
      "x-hal": true,
      "x-ui-hide": true,
      "properties": {
        "_links": {
          "type": "object",
          "properties": {
            "self": {
              "type": "object",
              "readOnly": true,
              "properties": {
                "href": {
                  "type": "string",
                  "example": "https://api.nterprise.com/contexts/ab87d29b-02ac-46f0-a487-dc84059907f0"
                }
              }
            }
          }
        }
      },
      "allOf": [
        {
          "x-nter-relation": "contexts",
          "x-nter-model": "Context",
          "x-nter-callable": true,
          "type": "object",
          "properties": {
            "context_id": {
              "type": "string",
              "description": "Identifier for the context",
              "example": "MWMwMjIyNTgtYWZjZC00YmYyLWE1NzYtYWU1OWI3YTE1ZDczOlVOSVQ6NTMxMDI5MjQtNDUwYS00ZjFlLWI1ZDQtYTIwN2JjNTg2NTIxOjE1Njc2MDUwNTU5OTUuNDQ1NjYzNDM-",
              "x-examples": [
                "MWMwMjIyNTgtYWZjZC00YmYyLWE1NzYtYWU1OWI3YTE1ZDczOlVOSVQ6NTMxMDI5MjQtNDUwYS00ZjFlLWI1ZDQtYTIwN2JjNTg2NTIxOjE1Njc2MDUwNTU5OTUuNDQ1NjYzNDM-"
              ],
              "pattern": "^[A-Za-z0-9-_]+$"
            },
            "workflow": {
              "x-id": "#workflow",
              "x-nter-relation": "work-flows",
              "x-nter-model": "WorkFlow",
              "x-nter-callable": true,
              "type": "object",
              "description": "Workflow",
              "required": [
                "steps",
                "starts_at",
                "label",
                "workflow_id",
                "applies_to"
              ],
              "properties": {
                "workflow_id": {
                  "type": "string",
                  "description": "Customer identifier",
                  "example": "e530652e-28e8-4f64-84af-e1cf0ff7c805",
                  "x-examples": [
                    "e530652e-28e8-4f64-84af-e1cf0ff7c805"
                  ],
                  "pattern": "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"
                },
                "label": {
                  "type": "string",
                  "example": "MLTI iPad Assembly Assignment",
                  "x-examples": [
                    "MLTI iPad Assembly Assignment"
                  ],
                  "description": "Label for the workflow"
                },
                "slug": {
                  "type": "string",
                  "description": "Auto-generated slug for the workflow",
                  "example": "mlti-ipad-assembly-assignment",
                  "x-examples": [
                    "mlti-ipad-assembly-assignment"
                  ]
                },
                "version": {
                  "type": "string",
                  "description": "Version of the workflow schema used",
                  "enum": [
                    "1.0"
                  ],
                  "example": "1.0"
                },
                "workflow_version": {
                  "type": "integer",
                  "format": "int32",
                  "example": 7,
                  "x-examples": [
                    7
                  ],
                  "readOnly": true,
                  "description": "Version number for the work flows (the number of times it has been changed"
                },
                "applies_to": {
                  "type": "string",
                  "description": "The entity type this work flow applies too",
                  "enum": [
                    "unit",
                    "part",
                    "program",
                    "project",
                    "customer",
                    "contact"
                  ],
                  "example": "unit"
                },
                "starts_at": {
                  "type": "string",
                  "description": "Starting step",
                  "example": "entry",
                  "x-examples": [
                    "entry"
                  ]
                },
                "context": {
                  "type": "array",
                  "description": "Initial values to set on the context",
                  "items": {
                    "type": "object",
                    "required": [
                      "key",
                      "value"
                    ],
                    "properties": {
                      "key": {
                        "type": "string",
                        "description": "The context key to set",
                        "example": "$.fizz",
                        "x-examples": [
                          "$.fizz",
                          "$.unit.status",
                          "extract_fields"
                        ]
                      },
                      "value": {
                        "type": "string",
                        "description": "Value to set",
                        "example": "$.buzz",
                        "x-examples": [
                          "$.buzz",
                          "Pending",
                          true
                        ]
                      },
                      "lock": {
                        "type": "boolean",
                        "description": "Prevents other steps from writing this value",
                        "example": true
                      },
                      "ignore": {
                        "type": "boolean",
                        "description": "When trying to set a locked key, do not fail",
                        "example": false
                      }
                    }
                  }
                },
                "steps": {
                  "type": "object",
                  "description": "Steps for the workflow",
                  "x-patternProperties": {
                    "(confirm|success|fail|manual|run-ace|follow)": {
                      "type": "object",
                      "allOf": [
                        {
                          "type": "object",
                          "description": "Close step",
                          "required": [
                            "step"
                          ],
                          "properties": {
                            "step": {
                              "type": "string",
                              "description": "Step to mark as complete",
                              "pattern": "^[a-z][a-z-]+[a-z]$",
                              "example": "complete",
                              "x-examples": [
                                "complete"
                              ]
                            }
                          },
                          "anyOf": [
                            {
                              "type": "object",
                              "description": "Require the user confirm an action. This is normally used when Niagara cannot automatically detect that a task or action has been performed.",
                              "x-nter-step-component": "confirm-action",
                              "properties": {
                                "label": {
                                  "x-examples": [
                                    "Confirm the device has powered off"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "component",
                                    "payload"
                                  ],
                                  "properties": {
                                    "component": {
                                      "enum": [
                                        "confirm-action"
                                      ],
                                      "example": "confirm-action",
                                      "x-examples": [
                                        "confirm-action"
                                      ]
                                    },
                                    "payload": {
                                      "type": "object",
                                      "required": [
                                        "message"
                                      ],
                                      "properties": {
                                        "message": {
                                          "type": "string",
                                          "description": "The confirmation message to display to the user",
                                          "example": "Device powered off?",
                                          "x-examples": [
                                            "Device powered off?"
                                          ]
                                        },
                                        "negative_message": {
                                          "type": "string",
                                          "description": "An optional inverse message",
                                          "nullable": true,
                                          "example": "Device not functioning",
                                          "x-examples": [
                                            "Device not functioning"
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "description": "A step which requires a user to complete",
                                  "required": [
                                    "type",
                                    "options"
                                  ],
                                  "properties": {
                                    "type": {
                                      "example": "user",
                                      "x-examples": [
                                        "user"
                                      ]
                                    },
                                    "options": {
                                      "type": "object",
                                      "required": [
                                        "component",
                                        "payload"
                                      ],
                                      "properties": {
                                        "component": {
                                          "type": "string",
                                          "description": "Name of the function to invoke",
                                          "example": "assignUnitsFromCustomerToProject",
                                          "x-examples": [
                                            "assignUnitsFromCustomerToProject"
                                          ]
                                        },
                                        "payload": {
                                          "type": "object"
                                        }
                                      }
                                    }
                                  },
                                  "allOf": [
                                    {
                                      "type": "object",
                                      "x-ui-hide": true,
                                      "required": [
                                        "type",
                                        "label",
                                        "goto"
                                      ],
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "Type of workflow step",
                                          "enum": [
                                            "load",
                                            "choice",
                                            "function",
                                            "machine",
                                            "pass",
                                            "fail",
                                            "success",
                                            "user",
                                            "wait"
                                          ]
                                        },
                                        "label": {
                                          "type": "string",
                                          "description": "Label for the step",
                                          "example": "Find units",
                                          "x-examples": [
                                            "Find units"
                                          ]
                                        },
                                        "goto": {
                                          "type": "string",
                                          "description": "Step to move to",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "complete",
                                          "x-examples": [
                                            "complete"
                                          ]
                                        },
                                        "goto-fail": {
                                          "type": "string",
                                          "description": "Step to transition too if this step cannot be completed",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "process-fail",
                                          "x-examples": [
                                            "process-fail"
                                          ]
                                        },
                                        "context": {
                                          "type": "array",
                                          "description": "Initial values to set on the context",
                                          "items": {
                                            "type": "object",
                                            "required": [
                                              "key",
                                              "value"
                                            ],
                                            "properties": {
                                              "key": {
                                                "type": "string",
                                                "description": "The context key to set",
                                                "example": "$.fizz",
                                                "x-examples": [
                                                  "$.fizz",
                                                  "$.unit.status",
                                                  "extract_fields"
                                                ]
                                              },
                                              "value": {
                                                "type": "string",
                                                "description": "Value to set",
                                                "example": "$.buzz",
                                                "x-examples": [
                                                  "$.buzz",
                                                  "Pending",
                                                  true
                                                ]
                                              },
                                              "lock": {
                                                "type": "boolean",
                                                "description": "Prevents other steps from writing this value",
                                                "example": true
                                              },
                                              "ignore": {
                                                "type": "boolean",
                                                "description": "When trying to set a locked key, do not fail",
                                                "example": false
                                              }
                                            }
                                          }
                                        },
                                        "onError": {
                                          "type": "object",
                                          "description": "Action to take when step fails",
                                          "required": [
                                            "finally"
                                          ],
                                          "properties": {
                                            "retry": {
                                              "type": "integer",
                                              "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                              "minimum": 0,
                                              "maximum": 10,
                                              "example": 3,
                                              "default": 0
                                            },
                                            "finally": {
                                              "type": "object",
                                              "description": "What to do after all retries",
                                              "required": [
                                                "goto"
                                              ],
                                              "properties": {
                                                "actions": {
                                                  "type": "array",
                                                  "description": "Actions to take on failure",
                                                  "items": {
                                                    "anyOf": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "type": {
                                                            "type": "string",
                                                            "description": "The type of the action",
                                                            "enum": [
                                                              "email"
                                                            ]
                                                          },
                                                          "options": {
                                                            "type": "object",
                                                            "description": "settings for the action",
                                                            "additionalProperties": {
                                                              "type": "string"
                                                            },
                                                            "x-examples": [
                                                              {
                                                                "to": "bob@example.com",
                                                                "from": "alice@example.com"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  }
                                                },
                                                "goto": {
                                                  "type": "string",
                                                  "description": "Step to transition to on failure",
                                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                                  "example": "failed",
                                                  "x-examples": [
                                                    "failed"
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        },
                                        "onComplete": {
                                          "type": "object",
                                          "description": "Actions to take when the step completes",
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "object",
                              "description": "Display a link or modal to a user which contains instructions from a PDF",
                              "x-nter-step-component": "follow-pdf-instructions",
                              "required": [
                                "label",
                                "payload"
                              ],
                              "properties": {
                                "label": {
                                  "x-examples": [
                                    "Instruct user to follow steps outlined in Apple PDF"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "component",
                                    "payload"
                                  ],
                                  "properties": {
                                    "component": {
                                      "enum": [
                                        "follow-pds-instructions"
                                      ],
                                      "example": "follow-pdf-instructions",
                                      "x-examples": [
                                        "follow-pdf-instructions"
                                      ]
                                    },
                                    "payload": {
                                      "type": "object",
                                      "required": [
                                        "attachment_id"
                                      ],
                                      "properties": {
                                        "attachment_id": {
                                          "type": "string",
                                          "description": "UUID for the attachment",
                                          "format": "uuid",
                                          "example": "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7",
                                          "x-examples": [
                                            "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7"
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "description": "A step which requires a user to complete",
                                  "required": [
                                    "type",
                                    "options"
                                  ],
                                  "properties": {
                                    "type": {
                                      "example": "user",
                                      "x-examples": [
                                        "user"
                                      ]
                                    },
                                    "options": {
                                      "type": "object",
                                      "required": [
                                        "component",
                                        "payload"
                                      ],
                                      "properties": {
                                        "component": {
                                          "type": "string",
                                          "description": "Name of the function to invoke",
                                          "example": "assignUnitsFromCustomerToProject",
                                          "x-examples": [
                                            "assignUnitsFromCustomerToProject"
                                          ]
                                        },
                                        "payload": {
                                          "type": "object"
                                        }
                                      }
                                    }
                                  },
                                  "allOf": [
                                    {
                                      "type": "object",
                                      "x-ui-hide": true,
                                      "required": [
                                        "type",
                                        "label",
                                        "goto"
                                      ],
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "Type of workflow step",
                                          "enum": [
                                            "load",
                                            "choice",
                                            "function",
                                            "machine",
                                            "pass",
                                            "fail",
                                            "success",
                                            "user",
                                            "wait"
                                          ]
                                        },
                                        "label": {
                                          "type": "string",
                                          "description": "Label for the step",
                                          "example": "Find units",
                                          "x-examples": [
                                            "Find units"
                                          ]
                                        },
                                        "goto": {
                                          "type": "string",
                                          "description": "Step to move to",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "complete",
                                          "x-examples": [
                                            "complete"
                                          ]
                                        },
                                        "goto-fail": {
                                          "type": "string",
                                          "description": "Step to transition too if this step cannot be completed",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "process-fail",
                                          "x-examples": [
                                            "process-fail"
                                          ]
                                        },
                                        "context": {
                                          "type": "array",
                                          "description": "Initial values to set on the context",
                                          "items": {
                                            "type": "object",
                                            "required": [
                                              "key",
                                              "value"
                                            ],
                                            "properties": {
                                              "key": {
                                                "type": "string",
                                                "description": "The context key to set",
                                                "example": "$.fizz",
                                                "x-examples": [
                                                  "$.fizz",
                                                  "$.unit.status",
                                                  "extract_fields"
                                                ]
                                              },
                                              "value": {
                                                "type": "string",
                                                "description": "Value to set",
                                                "example": "$.buzz",
                                                "x-examples": [
                                                  "$.buzz",
                                                  "Pending",
                                                  true
                                                ]
                                              },
                                              "lock": {
                                                "type": "boolean",
                                                "description": "Prevents other steps from writing this value",
                                                "example": true
                                              },
                                              "ignore": {
                                                "type": "boolean",
                                                "description": "When trying to set a locked key, do not fail",
                                                "example": false
                                              }
                                            }
                                          }
                                        },
                                        "onError": {
                                          "type": "object",
                                          "description": "Action to take when step fails",
                                          "required": [
                                            "finally"
                                          ],
                                          "properties": {
                                            "retry": {
                                              "type": "integer",
                                              "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                              "minimum": 0,
                                              "maximum": 10,
                                              "example": 3,
                                              "default": 0
                                            },
                                            "finally": {
                                              "type": "object",
                                              "description": "What to do after all retries",
                                              "required": [
                                                "goto"
                                              ],
                                              "properties": {
                                                "actions": {
                                                  "type": "array",
                                                  "description": "Actions to take on failure",
                                                  "items": {
                                                    "anyOf": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "type": {
                                                            "type": "string",
                                                            "description": "The type of the action",
                                                            "enum": [
                                                              "email"
                                                            ]
                                                          },
                                                          "options": {
                                                            "type": "object",
                                                            "description": "settings for the action",
                                                            "additionalProperties": {
                                                              "type": "string"
                                                            },
                                                            "x-examples": [
                                                              {
                                                                "to": "bob@example.com",
                                                                "from": "alice@example.com"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  }
                                                },
                                                "goto": {
                                                  "type": "string",
                                                  "description": "Step to transition to on failure",
                                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                                  "example": "failed",
                                                  "x-examples": [
                                                    "failed"
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        },
                                        "onComplete": {
                                          "type": "object",
                                          "description": "Actions to take when the step completes",
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "object",
                              "description": "Ask the user to manually enter (or confirm) data for an entity",
                              "x-nter-step-component": "manual-data-entry",
                              "properties": {
                                "label": {
                                  "x-examples": [
                                    "Enter asset tag and confirm serial number"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "component",
                                    "payload"
                                  ],
                                  "properties": {
                                    "component": {
                                      "enum": [
                                        "manual-data-entry"
                                      ],
                                      "example": "manual-data-entry",
                                      "x-examples": [
                                        "manual-data-entry"
                                      ]
                                    },
                                    "payload": {
                                      "type": "object",
                                      "required": [
                                        "fields"
                                      ],
                                      "properties": {
                                        "fields": {
                                          "type": "array",
                                          "description": "Configuration for each field",
                                          "items": {
                                            "type": "object",
                                            "required": [
                                              "input_type",
                                              "label",
                                              "required",
                                              "entity_field"
                                            ],
                                            "properties": {
                                              "input_type": {
                                                "type": "string",
                                                "description": "The type of input field to display",
                                                "enum": [
                                                  "textbox",
                                                  "input"
                                                ]
                                              },
                                              "label": {
                                                "type": "string",
                                                "description": "Label to display for the field",
                                                "example": "Asset Tag",
                                                "x-examples": [
                                                  "Asset Tag"
                                                ]
                                              },
                                              "required": {
                                                "type": "boolean",
                                                "description": "Display the field as required input. Note: this is a helper function. It singles that the user is required to input data at this step. If the field is required on the entity, the user will be presented with a validation message",
                                                "example": true
                                              },
                                              "entity_field": {
                                                "type": "string",
                                                "description": "JSON Path to the field on the entity. If the path does not start with '$' then the entity on the context is assumed. Otherwise the data will be set on the context path",
                                                "example": "input_filter[?(@.key = 'asset-tag')]",
                                                "x-examples": [
                                                  "input_filter[?(@.key = 'asset-tag')]"
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "description": "A step which requires a user to complete",
                                  "required": [
                                    "type",
                                    "options"
                                  ],
                                  "properties": {
                                    "type": {
                                      "example": "user",
                                      "x-examples": [
                                        "user"
                                      ]
                                    },
                                    "options": {
                                      "type": "object",
                                      "required": [
                                        "component",
                                        "payload"
                                      ],
                                      "properties": {
                                        "component": {
                                          "type": "string",
                                          "description": "Name of the function to invoke",
                                          "example": "assignUnitsFromCustomerToProject",
                                          "x-examples": [
                                            "assignUnitsFromCustomerToProject"
                                          ]
                                        },
                                        "payload": {
                                          "type": "object"
                                        }
                                      }
                                    }
                                  },
                                  "allOf": [
                                    {
                                      "type": "object",
                                      "x-ui-hide": true,
                                      "required": [
                                        "type",
                                        "label",
                                        "goto"
                                      ],
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "Type of workflow step",
                                          "enum": [
                                            "load",
                                            "choice",
                                            "function",
                                            "machine",
                                            "pass",
                                            "fail",
                                            "success",
                                            "user",
                                            "wait"
                                          ]
                                        },
                                        "label": {
                                          "type": "string",
                                          "description": "Label for the step",
                                          "example": "Find units",
                                          "x-examples": [
                                            "Find units"
                                          ]
                                        },
                                        "goto": {
                                          "type": "string",
                                          "description": "Step to move to",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "complete",
                                          "x-examples": [
                                            "complete"
                                          ]
                                        },
                                        "goto-fail": {
                                          "type": "string",
                                          "description": "Step to transition too if this step cannot be completed",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "process-fail",
                                          "x-examples": [
                                            "process-fail"
                                          ]
                                        },
                                        "context": {
                                          "type": "array",
                                          "description": "Initial values to set on the context",
                                          "items": {
                                            "type": "object",
                                            "required": [
                                              "key",
                                              "value"
                                            ],
                                            "properties": {
                                              "key": {
                                                "type": "string",
                                                "description": "The context key to set",
                                                "example": "$.fizz",
                                                "x-examples": [
                                                  "$.fizz",
                                                  "$.unit.status",
                                                  "extract_fields"
                                                ]
                                              },
                                              "value": {
                                                "type": "string",
                                                "description": "Value to set",
                                                "example": "$.buzz",
                                                "x-examples": [
                                                  "$.buzz",
                                                  "Pending",
                                                  true
                                                ]
                                              },
                                              "lock": {
                                                "type": "boolean",
                                                "description": "Prevents other steps from writing this value",
                                                "example": true
                                              },
                                              "ignore": {
                                                "type": "boolean",
                                                "description": "When trying to set a locked key, do not fail",
                                                "example": false
                                              }
                                            }
                                          }
                                        },
                                        "onError": {
                                          "type": "object",
                                          "description": "Action to take when step fails",
                                          "required": [
                                            "finally"
                                          ],
                                          "properties": {
                                            "retry": {
                                              "type": "integer",
                                              "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                              "minimum": 0,
                                              "maximum": 10,
                                              "example": 3,
                                              "default": 0
                                            },
                                            "finally": {
                                              "type": "object",
                                              "description": "What to do after all retries",
                                              "required": [
                                                "goto"
                                              ],
                                              "properties": {
                                                "actions": {
                                                  "type": "array",
                                                  "description": "Actions to take on failure",
                                                  "items": {
                                                    "anyOf": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "type": {
                                                            "type": "string",
                                                            "description": "The type of the action",
                                                            "enum": [
                                                              "email"
                                                            ]
                                                          },
                                                          "options": {
                                                            "type": "object",
                                                            "description": "settings for the action",
                                                            "additionalProperties": {
                                                              "type": "string"
                                                            },
                                                            "x-examples": [
                                                              {
                                                                "to": "bob@example.com",
                                                                "from": "alice@example.com"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  }
                                                },
                                                "goto": {
                                                  "type": "string",
                                                  "description": "Step to transition to on failure",
                                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                                  "example": "failed",
                                                  "x-examples": [
                                                    "failed"
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        },
                                        "onComplete": {
                                          "type": "object",
                                          "description": "Actions to take when the step completes",
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "object",
                              "description": "Ask the user to follow a list and check off boxes",
                              "x-nter-step-component": "task-list",
                              "properties": {
                                "label": {
                                  "x-examples": [
                                    "Enter asset tag and confirm serial number"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "component",
                                    "payload"
                                  ],
                                  "properties": {
                                    "component": {
                                      "enum": [
                                        "task-list"
                                      ],
                                      "example": "task-list",
                                      "x-examples": [
                                        "task-list"
                                      ]
                                    },
                                    "payload": {
                                      "type": "object",
                                      "required": [
                                        "items"
                                      ],
                                      "properties": {
                                        "is_qc": {
                                          "type": "boolean",
                                          "description": "Flags this list as a QC task list. This means that a different user can close the task to one previously on the context"
                                        },
                                        "items": {
                                          "type": "array",
                                          "description": "Configuration for each task list item",
                                          "items": {
                                            "type": "object",
                                            "required": [
                                              "label",
                                              "help",
                                              "evaluated",
                                              "na_option"
                                            ],
                                            "properties": {
                                              "label": {
                                                "type": "string",
                                                "description": "Label to display for the field",
                                                "example": "Asset Tag placement",
                                                "x-examples": [
                                                  "Asset Tag placement"
                                                ]
                                              },
                                              "slug": {
                                                "type": "string",
                                                "description": "Slug for the item (Auto-generated from the label)",
                                                "readOnly": true,
                                                "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$",
                                                "example": "asset-tag-placement",
                                                "x-examples": [
                                                  "asset-tag-placement"
                                                ]
                                              },
                                              "help": {
                                                "type": "string",
                                                "description": "Message describing what is needed to be checked",
                                                "example": "Asset Tag attached to the unit in the correct position",
                                                "x-examples": [
                                                  "Asset Tag attached to the unit in the correct position"
                                                ]
                                              },
                                              "evaluated": {
                                                "type": "boolean",
                                                "description": "When set to true, this will fail the step if the value for the item is false or N/A",
                                                "example": true
                                              },
                                              "na_field": {
                                                "type": "boolean",
                                                "description": "Allow the user to select the N/A option when checking off the list",
                                                "example": true
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "description": "A step which requires a user to complete",
                                  "required": [
                                    "type",
                                    "options"
                                  ],
                                  "properties": {
                                    "type": {
                                      "example": "user",
                                      "x-examples": [
                                        "user"
                                      ]
                                    },
                                    "options": {
                                      "type": "object",
                                      "required": [
                                        "component",
                                        "payload"
                                      ],
                                      "properties": {
                                        "component": {
                                          "type": "string",
                                          "description": "Name of the function to invoke",
                                          "example": "assignUnitsFromCustomerToProject",
                                          "x-examples": [
                                            "assignUnitsFromCustomerToProject"
                                          ]
                                        },
                                        "payload": {
                                          "type": "object"
                                        }
                                      }
                                    }
                                  },
                                  "allOf": [
                                    {
                                      "type": "object",
                                      "x-ui-hide": true,
                                      "required": [
                                        "type",
                                        "label",
                                        "goto"
                                      ],
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "Type of workflow step",
                                          "enum": [
                                            "load",
                                            "choice",
                                            "function",
                                            "machine",
                                            "pass",
                                            "fail",
                                            "success",
                                            "user",
                                            "wait"
                                          ]
                                        },
                                        "label": {
                                          "type": "string",
                                          "description": "Label for the step",
                                          "example": "Find units",
                                          "x-examples": [
                                            "Find units"
                                          ]
                                        },
                                        "goto": {
                                          "type": "string",
                                          "description": "Step to move to",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "complete",
                                          "x-examples": [
                                            "complete"
                                          ]
                                        },
                                        "goto-fail": {
                                          "type": "string",
                                          "description": "Step to transition too if this step cannot be completed",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "process-fail",
                                          "x-examples": [
                                            "process-fail"
                                          ]
                                        },
                                        "context": {
                                          "type": "array",
                                          "description": "Initial values to set on the context",
                                          "items": {
                                            "type": "object",
                                            "required": [
                                              "key",
                                              "value"
                                            ],
                                            "properties": {
                                              "key": {
                                                "type": "string",
                                                "description": "The context key to set",
                                                "example": "$.fizz",
                                                "x-examples": [
                                                  "$.fizz",
                                                  "$.unit.status",
                                                  "extract_fields"
                                                ]
                                              },
                                              "value": {
                                                "type": "string",
                                                "description": "Value to set",
                                                "example": "$.buzz",
                                                "x-examples": [
                                                  "$.buzz",
                                                  "Pending",
                                                  true
                                                ]
                                              },
                                              "lock": {
                                                "type": "boolean",
                                                "description": "Prevents other steps from writing this value",
                                                "example": true
                                              },
                                              "ignore": {
                                                "type": "boolean",
                                                "description": "When trying to set a locked key, do not fail",
                                                "example": false
                                              }
                                            }
                                          }
                                        },
                                        "onError": {
                                          "type": "object",
                                          "description": "Action to take when step fails",
                                          "required": [
                                            "finally"
                                          ],
                                          "properties": {
                                            "retry": {
                                              "type": "integer",
                                              "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                              "minimum": 0,
                                              "maximum": 10,
                                              "example": 3,
                                              "default": 0
                                            },
                                            "finally": {
                                              "type": "object",
                                              "description": "What to do after all retries",
                                              "required": [
                                                "goto"
                                              ],
                                              "properties": {
                                                "actions": {
                                                  "type": "array",
                                                  "description": "Actions to take on failure",
                                                  "items": {
                                                    "anyOf": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "type": {
                                                            "type": "string",
                                                            "description": "The type of the action",
                                                            "enum": [
                                                              "email"
                                                            ]
                                                          },
                                                          "options": {
                                                            "type": "object",
                                                            "description": "settings for the action",
                                                            "additionalProperties": {
                                                              "type": "string"
                                                            },
                                                            "x-examples": [
                                                              {
                                                                "to": "bob@example.com",
                                                                "from": "alice@example.com"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  }
                                                },
                                                "goto": {
                                                  "type": "string",
                                                  "description": "Step to transition to on failure",
                                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                                  "example": "failed",
                                                  "x-examples": [
                                                    "failed"
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        },
                                        "onComplete": {
                                          "type": "object",
                                          "description": "Actions to take when the step completes",
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "object",
                              "description": "Run the ACE-IOS application to provision iOS devices or ",
                              "properties": {
                                "type": {
                                  "example": "machine",
                                  "x-examples": [
                                    "machine"
                                  ]
                                },
                                "label": {
                                  "x-examples": [
                                    "Run Application"
                                  ]
                                },
                                "options": {
                                  "type": "object",
                                  "required": [
                                    "application",
                                    "configuration"
                                  ],
                                  "properties": {
                                    "configuration": {
                                      "type": "object",
                                      "description": "ACE Configuration options",
                                      "properties": {
                                        "pairing_cert": {
                                          "type": "string",
                                          "format": "base64",
                                          "description": "Contents of a *.crt file exported from Apple Configurator or MDM",
                                          "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                          "x-examples": [
                                            "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                          ],
                                          "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                        },
                                        "pairing_key": {
                                          "type": "string",
                                          "format": "base64",
                                          "description": "Contents of a *.der file exported from Apple Configurator or MDM",
                                          "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                          "x-examples": [
                                            "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                          ],
                                          "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                        },
                                        "restore_device": {
                                          "type": "boolean",
                                          "description": "Restore device to factory defaults"
                                        },
                                        "automated_enrollment": {
                                          "type": "boolean",
                                          "description": "Automatically enroll the device to MDM"
                                        },
                                        "mdm": {
                                          "type": "object",
                                          "format": "base64",
                                          "description": "The settings for the Customers MDM",
                                          "properties": {
                                            "vendor": {
                                              "type": "string",
                                              "description": "MDM vendor. Currently, supported values are AirWatch, JAMF, and Meraki.",
                                              "enum": [
                                                "AirWatch",
                                                "JAMF",
                                                "Meraki"
                                              ]
                                            },
                                            "console_url": {
                                              "type": "string",
                                              "format": "uri",
                                              "description": "Base URL for HTTP requests",
                                              "example": "http://jamf.zones.com",
                                              "x-examples": [
                                                "http://jamf.zones.com"
                                              ]
                                            },
                                            "user": {
                                              "type": "string",
                                              "description": "MDM User name",
                                              "example": "NterpriseBob",
                                              "x-examples": [
                                                "NterpriseBob"
                                              ]
                                            },
                                            "password": {
                                              "type": "string",
                                              "description": "MDM password"
                                            },
                                            "tenant_code": {
                                              "type": "string",
                                              "description": "MDM authentication key",
                                              "example": "nterprise",
                                              "x-examples": [
                                                "nterprise"
                                              ]
                                            },
                                            "set_asset_tag": {
                                              "type": "string",
                                              "description": "Sets the devices Asset tag based on a field from the unit",
                                              "example": "$._entity.input_filter[?(@.key = 'asset-tag')]",
                                              "x-examples": [
                                                "$._entity.input_filter[?(@.key = 'asset-tag')]"
                                              ]
                                            }
                                          }
                                        },
                                        "field_mappings": {
                                          "type": "array",
                                          "description": "List of fields to map to the device",
                                          "items": {
                                            "type": "object",
                                            "properties": {
                                              "from": {
                                                "type": "string",
                                                "description": "The field reported from ACE",
                                                "enum": [
                                                  "serial_number",
                                                  "name",
                                                  "ecid",
                                                  "udid",
                                                  "configurator_serial",
                                                  "ios",
                                                  "model",
                                                  "storage",
                                                  "wifi_mac",
                                                  "bt_mac",
                                                  "ethernet_mac",
                                                  "thundersync_serial",
                                                  "iccid",
                                                  "iccid2",
                                                  "imei",
                                                  "imei2",
                                                  "missed_profiles",
                                                  "missed_apps",
                                                  "icon_list_regex",
                                                  "icon_layout",
                                                  "bat_capacity"
                                                ]
                                              },
                                              "to": {
                                                "type": "string",
                                                "description": "Field to set on the entity",
                                                "example": "$._entity.input_filter[?(@.key = 'serial-number')]",
                                                "x-examples": [
                                                  "$._entity.input_filter[?(@.key = 'serial-number')]"
                                                ]
                                              }
                                            }
                                          }
                                        },
                                        "wait_for_apps": {
                                          "type": "array",
                                          "description": "A list of applications needed to be installed on the device. This will cause the extension to poll the device for installed applications. Once all the applications have been installed, this step can be completed",
                                          "items": {
                                            "type": "string",
                                            "format": "uri",
                                            "example": "com.apple.itunes",
                                            "x-examples": [
                                              "com.apple.itunes"
                                            ]
                                          }
                                        },
                                        "wait_for_battery_charge": {
                                          "type": "integer",
                                          "description": "The required battery percentage needed before this step can move on",
                                          "minimum": 0,
                                          "maximum": 100
                                        }
                                      }
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "description": "Run an application extension",
                                  "properties": {
                                    "label": {
                                      "x-examples": [
                                        "Run Application"
                                      ]
                                    },
                                    "options": {
                                      "type": "object",
                                      "required": [
                                        "application",
                                        "configuration"
                                      ],
                                      "properties": {
                                        "application": {
                                          "type": "object",
                                          "required": [
                                            "application_id",
                                            "platforms"
                                          ],
                                          "properties": {
                                            "application_id": {
                                              "type": "string",
                                              "description": "Registered application ID",
                                              "example": "ace-ios",
                                              "x-examples": [
                                                "ace-ios"
                                              ]
                                            },
                                            "platforms": {
                                              "type": "array",
                                              "description": "Allowed platforms the application can run on",
                                              "items": {
                                                "type": "object",
                                                "required": [
                                                  "platform",
                                                  "arch"
                                                ],
                                                "properties": {
                                                  "platform": {
                                                    "type": "string",
                                                    "description": "The platform (OS) the application can run on",
                                                    "enum": [
                                                      "aix",
                                                      "darwin",
                                                      "freebsd",
                                                      "linux",
                                                      "openbsd",
                                                      "sunos",
                                                      "win32"
                                                    ]
                                                  },
                                                  "arch": {
                                                    "type": "string",
                                                    "description": "The CPU architecture needed to run the application",
                                                    "enum": [
                                                      "arm",
                                                      "arm64",
                                                      "ia32",
                                                      "mips",
                                                      "mipsel",
                                                      "ppc",
                                                      "ppc64",
                                                      "s390",
                                                      "s390x",
                                                      "x32",
                                                      "x64"
                                                    ]
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "allOf": [
                                    {
                                      "type": "object",
                                      "x-ui-hide": true,
                                      "required": [
                                        "type",
                                        "label",
                                        "goto"
                                      ],
                                      "properties": {
                                        "type": {
                                          "type": "string",
                                          "description": "Type of workflow step",
                                          "enum": [
                                            "load",
                                            "choice",
                                            "function",
                                            "machine",
                                            "pass",
                                            "fail",
                                            "success",
                                            "user",
                                            "wait"
                                          ]
                                        },
                                        "label": {
                                          "type": "string",
                                          "description": "Label for the step",
                                          "example": "Find units",
                                          "x-examples": [
                                            "Find units"
                                          ]
                                        },
                                        "goto": {
                                          "type": "string",
                                          "description": "Step to move to",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "complete",
                                          "x-examples": [
                                            "complete"
                                          ]
                                        },
                                        "goto-fail": {
                                          "type": "string",
                                          "description": "Step to transition too if this step cannot be completed",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "process-fail",
                                          "x-examples": [
                                            "process-fail"
                                          ]
                                        },
                                        "context": {
                                          "type": "array",
                                          "description": "Initial values to set on the context",
                                          "items": {
                                            "type": "object",
                                            "required": [
                                              "key",
                                              "value"
                                            ],
                                            "properties": {
                                              "key": {
                                                "type": "string",
                                                "description": "The context key to set",
                                                "example": "$.fizz",
                                                "x-examples": [
                                                  "$.fizz",
                                                  "$.unit.status",
                                                  "extract_fields"
                                                ]
                                              },
                                              "value": {
                                                "type": "string",
                                                "description": "Value to set",
                                                "example": "$.buzz",
                                                "x-examples": [
                                                  "$.buzz",
                                                  "Pending",
                                                  true
                                                ]
                                              },
                                              "lock": {
                                                "type": "boolean",
                                                "description": "Prevents other steps from writing this value",
                                                "example": true
                                              },
                                              "ignore": {
                                                "type": "boolean",
                                                "description": "When trying to set a locked key, do not fail",
                                                "example": false
                                              }
                                            }
                                          }
                                        },
                                        "onError": {
                                          "type": "object",
                                          "description": "Action to take when step fails",
                                          "required": [
                                            "finally"
                                          ],
                                          "properties": {
                                            "retry": {
                                              "type": "integer",
                                              "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                              "minimum": 0,
                                              "maximum": 10,
                                              "example": 3,
                                              "default": 0
                                            },
                                            "finally": {
                                              "type": "object",
                                              "description": "What to do after all retries",
                                              "required": [
                                                "goto"
                                              ],
                                              "properties": {
                                                "actions": {
                                                  "type": "array",
                                                  "description": "Actions to take on failure",
                                                  "items": {
                                                    "anyOf": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "type": {
                                                            "type": "string",
                                                            "description": "The type of the action",
                                                            "enum": [
                                                              "email"
                                                            ]
                                                          },
                                                          "options": {
                                                            "type": "object",
                                                            "description": "settings for the action",
                                                            "additionalProperties": {
                                                              "type": "string"
                                                            },
                                                            "x-examples": [
                                                              {
                                                                "to": "bob@example.com",
                                                                "from": "alice@example.com"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  }
                                                },
                                                "goto": {
                                                  "type": "string",
                                                  "description": "Step to transition to on failure",
                                                  "pattern": "^[a-z][a-z-]+[a-z]$",
                                                  "example": "failed",
                                                  "x-examples": [
                                                    "failed"
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        },
                                        "onComplete": {
                                          "type": "object",
                                          "description": "Actions to take when the step completes",
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "label": {
                                  "example": "Is device ok?",
                                  "x-examples": [
                                    "Is device ok?"
                                  ]
                                },
                                "type": {
                                  "example": "choice",
                                  "x-examples": [
                                    "choice"
                                  ]
                                },
                                "choices": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "required": [
                                      "goto"
                                    ],
                                    "maxProperties": 2,
                                    "minProperties": 2,
                                    "maximum": 20,
                                    "properties": {
                                      "and": {
                                        "type": "array",
                                        "description": "All choices must be satisfied",
                                        "maximum": 5,
                                        "items": {
                                          "description": "A Step choice",
                                          "type": "object",
                                          "maxProperties": 2,
                                          "minProperties": 2,
                                          "required": [
                                            "variable"
                                          ],
                                          "properties": {
                                            "variable": {
                                              "type": "string",
                                              "description": "Context variable to check",
                                              "example": "$.parts.available",
                                              "x-examples": [
                                                "$.parts.available"
                                              ]
                                            },
                                            "greater_than_equals": {
                                              "type": "string",
                                              "description": "Value has to be greater than or equals to",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "less_than_equals": {
                                              "type": "string",
                                              "description": "Value has to be less than or equals to",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "greater_than": {
                                              "type": "string",
                                              "description": "Value has to be greater than",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "less_than": {
                                              "type": "string",
                                              "description": "Value has to be less than",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "equals": {
                                              "type": "string",
                                              "description": "Value has to equal",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "not_equals": {
                                              "type": "string",
                                              "description": "Value must not equal",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            }
                                          }
                                        }
                                      },
                                      "or": {
                                        "type": "array",
                                        "description": "Any of these choices must be satisfied",
                                        "maximum": 5,
                                        "items": {
                                          "description": "A Step choice",
                                          "type": "object",
                                          "maxProperties": 2,
                                          "minProperties": 2,
                                          "required": [
                                            "variable"
                                          ],
                                          "properties": {
                                            "variable": {
                                              "type": "string",
                                              "description": "Context variable to check",
                                              "example": "$.parts.available",
                                              "x-examples": [
                                                "$.parts.available"
                                              ]
                                            },
                                            "greater_than_equals": {
                                              "type": "string",
                                              "description": "Value has to be greater than or equals to",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "less_than_equals": {
                                              "type": "string",
                                              "description": "Value has to be less than or equals to",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "greater_than": {
                                              "type": "string",
                                              "description": "Value has to be greater than",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "less_than": {
                                              "type": "string",
                                              "description": "Value has to be less than",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "equals": {
                                              "type": "string",
                                              "description": "Value has to equal",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "not_equals": {
                                              "type": "string",
                                              "description": "Value must not equal",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            }
                                          }
                                        }
                                      },
                                      "not": {
                                        "type": "array",
                                        "description": "None of these choices must be satisfied",
                                        "maximum": 5,
                                        "items": {
                                          "description": "A Step choice",
                                          "type": "object",
                                          "maxProperties": 2,
                                          "minProperties": 2,
                                          "required": [
                                            "variable"
                                          ],
                                          "properties": {
                                            "variable": {
                                              "type": "string",
                                              "description": "Context variable to check",
                                              "example": "$.parts.available",
                                              "x-examples": [
                                                "$.parts.available"
                                              ]
                                            },
                                            "greater_than_equals": {
                                              "type": "string",
                                              "description": "Value has to be greater than or equals to",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "less_than_equals": {
                                              "type": "string",
                                              "description": "Value has to be less than or equals to",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "greater_than": {
                                              "type": "string",
                                              "description": "Value has to be greater than",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "less_than": {
                                              "type": "string",
                                              "description": "Value has to be less than",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "equals": {
                                              "type": "string",
                                              "description": "Value has to equal",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "not_equals": {
                                              "type": "string",
                                              "description": "Value must not equal",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            }
                                          }
                                        }
                                      },
                                      "goto": {
                                        "description": "Step to goto when condition is met",
                                        "allOf": [
                                          {
                                            "type": "string",
                                            "description": "Step to move to",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "complete",
                                            "x-examples": [
                                              "complete"
                                            ]
                                          }
                                        ]
                                      }
                                    }
                                  }
                                },
                                "goto": {
                                  "description": "Default step to goto when no choice can be made"
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "required": [
                                    "type",
                                    "label",
                                    "goto"
                                  ],
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    },
                                    "label": {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to move to",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "complete",
                                      "x-examples": [
                                        "complete"
                                      ]
                                    },
                                    "goto-fail": {
                                      "type": "string",
                                      "description": "Step to transition too if this step cannot be completed",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "process-fail",
                                      "x-examples": [
                                        "process-fail"
                                      ]
                                    },
                                    "context": {
                                      "type": "array",
                                      "description": "Initial values to set on the context",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "key",
                                          "value"
                                        ],
                                        "properties": {
                                          "key": {
                                            "type": "string",
                                            "description": "The context key to set",
                                            "example": "$.fizz",
                                            "x-examples": [
                                              "$.fizz",
                                              "$.unit.status",
                                              "extract_fields"
                                            ]
                                          },
                                          "value": {
                                            "type": "string",
                                            "description": "Value to set",
                                            "example": "$.buzz",
                                            "x-examples": [
                                              "$.buzz",
                                              "Pending",
                                              true
                                            ]
                                          },
                                          "lock": {
                                            "type": "boolean",
                                            "description": "Prevents other steps from writing this value",
                                            "example": true
                                          },
                                          "ignore": {
                                            "type": "boolean",
                                            "description": "When trying to set a locked key, do not fail",
                                            "example": false
                                          }
                                        }
                                      }
                                    },
                                    "onError": {
                                      "type": "object",
                                      "description": "Action to take when step fails",
                                      "required": [
                                        "finally"
                                      ],
                                      "properties": {
                                        "retry": {
                                          "type": "integer",
                                          "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                          "minimum": 0,
                                          "maximum": 10,
                                          "example": 3,
                                          "default": 0
                                        },
                                        "finally": {
                                          "type": "object",
                                          "description": "What to do after all retries",
                                          "required": [
                                            "goto"
                                          ],
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "description": "Actions to take on failure",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to transition to on failure",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "failed",
                                              "x-examples": [
                                                "failed"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "onComplete": {
                                      "type": "object",
                                      "description": "Actions to take when the step completes",
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            },
                            {
                              "type": "object",
                              "description": "Finial step which is marked as failed",
                              "properties": {
                                "label": {
                                  "example": "Failed",
                                  "x-examples": [
                                    "Failed"
                                  ],
                                  "allOf": [
                                    {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    }
                                  ]
                                },
                                "type": {
                                  "example": "fail",
                                  "x-examples": [
                                    "fail"
                                  ],
                                  "allOf": [
                                    {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    }
                                  ]
                                },
                                "onComplete": {
                                  "type": "object",
                                  "description": "Actions to take when the step completes",
                                  "properties": {
                                    "actions": {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "The type of the action",
                                                "enum": [
                                                  "email"
                                                ]
                                              },
                                              "options": {
                                                "type": "object",
                                                "description": "settings for the action",
                                                "additionalProperties": {
                                                  "type": "string"
                                                },
                                                "x-examples": [
                                                  {
                                                    "to": "bob@example.com",
                                                    "from": "alice@example.com"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            {
                              "type": "object",
                              "description": "Allows executing actions with out performing any function",
                              "properties": {
                                "label": {
                                  "example": "Send email to project manager",
                                  "x-examples": [
                                    "Send email to project manager"
                                  ]
                                },
                                "type": {
                                  "example": "pass",
                                  "x-examples": [
                                    "pass"
                                  ],
                                  "allOf": [
                                    {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    }
                                  ]
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "required": [
                                    "type",
                                    "label",
                                    "goto"
                                  ],
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    },
                                    "label": {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to move to",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "complete",
                                      "x-examples": [
                                        "complete"
                                      ]
                                    },
                                    "goto-fail": {
                                      "type": "string",
                                      "description": "Step to transition too if this step cannot be completed",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "process-fail",
                                      "x-examples": [
                                        "process-fail"
                                      ]
                                    },
                                    "context": {
                                      "type": "array",
                                      "description": "Initial values to set on the context",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "key",
                                          "value"
                                        ],
                                        "properties": {
                                          "key": {
                                            "type": "string",
                                            "description": "The context key to set",
                                            "example": "$.fizz",
                                            "x-examples": [
                                              "$.fizz",
                                              "$.unit.status",
                                              "extract_fields"
                                            ]
                                          },
                                          "value": {
                                            "type": "string",
                                            "description": "Value to set",
                                            "example": "$.buzz",
                                            "x-examples": [
                                              "$.buzz",
                                              "Pending",
                                              true
                                            ]
                                          },
                                          "lock": {
                                            "type": "boolean",
                                            "description": "Prevents other steps from writing this value",
                                            "example": true
                                          },
                                          "ignore": {
                                            "type": "boolean",
                                            "description": "When trying to set a locked key, do not fail",
                                            "example": false
                                          }
                                        }
                                      }
                                    },
                                    "onError": {
                                      "type": "object",
                                      "description": "Action to take when step fails",
                                      "required": [
                                        "finally"
                                      ],
                                      "properties": {
                                        "retry": {
                                          "type": "integer",
                                          "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                          "minimum": 0,
                                          "maximum": 10,
                                          "example": 3,
                                          "default": 0
                                        },
                                        "finally": {
                                          "type": "object",
                                          "description": "What to do after all retries",
                                          "required": [
                                            "goto"
                                          ],
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "description": "Actions to take on failure",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to transition to on failure",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "failed",
                                              "x-examples": [
                                                "failed"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "onComplete": {
                                      "type": "object",
                                      "description": "Actions to take when the step completes",
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            },
                            {
                              "type": "object",
                              "description": "Finial step which is marked as completed successfully",
                              "properties": {
                                "label": {
                                  "example": "Complete",
                                  "x-examples": [
                                    "Complete"
                                  ],
                                  "allOf": [
                                    {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    }
                                  ]
                                },
                                "type": {
                                  "example": "success",
                                  "x-examples": [
                                    "success"
                                  ],
                                  "allOf": [
                                    {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    }
                                  ]
                                },
                                "onComplete": {
                                  "type": "object",
                                  "description": "Actions to take when the step completes",
                                  "properties": {
                                    "actions": {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "description": "The type of the action",
                                                "enum": [
                                                  "email"
                                                ]
                                              },
                                              "options": {
                                                "type": "object",
                                                "description": "settings for the action",
                                                "additionalProperties": {
                                                  "type": "string"
                                                },
                                                "x-examples": [
                                                  {
                                                    "to": "bob@example.com",
                                                    "from": "alice@example.com"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            {
                              "type": "object",
                              "description": "A step which run at certain times",
                              "required": [
                                "stop_at",
                                "time"
                              ],
                              "properties": {
                                "label": {
                                  "example": "Wait for cable",
                                  "x-examples": [
                                    "Wait for cable"
                                  ],
                                  "allOf": [
                                    {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    }
                                  ]
                                },
                                "type": {
                                  "x-examples": [
                                    "wait"
                                  ],
                                  "example": "wait"
                                },
                                "stop_at": {
                                  "type": "integer",
                                  "description": "Time in seconds to stop this task",
                                  "maximum": 900,
                                  "minimum": 1
                                },
                                "time": {
                                  "type": "integer",
                                  "description": "Time to wait before checking this step",
                                  "example": 600,
                                  "maximum": 900,
                                  "minimum": 1
                                },
                                "listen_for": {
                                  "type": "array",
                                  "description": "List of events and conditions to listen for to trigger",
                                  "items": {
                                    "type": "object",
                                    "required": [
                                      "event"
                                    ],
                                    "properties": {
                                      "event": {
                                        "type": "string",
                                        "description": "Name of the event to listen for",
                                        "allOf": [
                                          {
                                            "type": "string",
                                            "description": "Possible entity events",
                                            "enum": [
                                              "CON.attached",
                                              "CON.created",
                                              "CON.deleted",
                                              "CON.detached",
                                              "CON.removed",
                                              "CON.updated",
                                              "CUS.attached",
                                              "CUS.created",
                                              "CUS.deleted",
                                              "CUS.detached",
                                              "CUS.removed",
                                              "CUS.updated",
                                              "LOC.attached",
                                              "LOC.created",
                                              "LOC.deleted",
                                              "LOC.detached",
                                              "LOC.removed",
                                              "LOC.updated",
                                              "NOTE.attached",
                                              "NOTE.created",
                                              "NOTE.deleted",
                                              "NOTE.detached",
                                              "NOTE.removed",
                                              "NOTE.updated",
                                              "PART.attached",
                                              "PART.created",
                                              "PART.deleted",
                                              "PART.detached",
                                              "PART.removed",
                                              "PART.updated",
                                              "PGM.attached",
                                              "PGM.created",
                                              "PGM.deleted",
                                              "PGM.detached",
                                              "PGM.removed",
                                              "PGM.updated",
                                              "PRO.attached",
                                              "PRO.created",
                                              "PRO.deleted",
                                              "PRO.detached",
                                              "PRO.removed",
                                              "PRO.updated",
                                              "RES.attached",
                                              "RES.created",
                                              "RES.deleted",
                                              "RES.detached",
                                              "RES.removed",
                                              "RES.updated",
                                              "UNIT.attached",
                                              "UNIT.created",
                                              "UNIT.deleted",
                                              "UNIT.detached",
                                              "UNIT.removed",
                                              "UNIT.updated",
                                              "USER.attached",
                                              "USER.created",
                                              "USER.deleted",
                                              "USER.detached",
                                              "USER.removed",
                                              "USER.updated",
                                              "WKF.attached",
                                              "WKF.created",
                                              "WKF.deleted",
                                              "WKF.detached",
                                              "WKF.removed",
                                              "WKF.updated",
                                              "WOR.attached",
                                              "WOR.created",
                                              "WOR.deleted",
                                              "WOR.detached",
                                              "WOR.removed",
                                              "WOR.updated"
                                            ]
                                          }
                                        ]
                                      },
                                      "event_value": {
                                        "type": "object",
                                        "description": "The event conditions that have to be met",
                                        "allOf": [
                                          {
                                            "description": "A Step choice",
                                            "type": "object",
                                            "maxProperties": 2,
                                            "minProperties": 2,
                                            "required": [
                                              "variable"
                                            ],
                                            "properties": {
                                              "variable": {
                                                "type": "string",
                                                "description": "Context variable to check",
                                                "example": "$.parts.available",
                                                "x-examples": [
                                                  "$.parts.available"
                                                ]
                                              },
                                              "greater_than_equals": {
                                                "type": "string",
                                                "description": "Value has to be greater than or equals to",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "less_than_equals": {
                                                "type": "string",
                                                "description": "Value has to be less than or equals to",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "greater_than": {
                                                "type": "string",
                                                "description": "Value has to be greater than",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "less_than": {
                                                "type": "string",
                                                "description": "Value has to be less than",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "equals": {
                                                "type": "string",
                                                "description": "Value has to equal",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              },
                                              "not_equals": {
                                                "type": "string",
                                                "description": "Value must not equal",
                                                "example": "42",
                                                "x-examples": [
                                                  "42"
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    }
                                  }
                                }
                              },
                              "allOf": [
                                {
                                  "type": "object",
                                  "x-ui-hide": true,
                                  "required": [
                                    "type",
                                    "label",
                                    "goto"
                                  ],
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "description": "Type of workflow step",
                                      "enum": [
                                        "load",
                                        "choice",
                                        "function",
                                        "machine",
                                        "pass",
                                        "fail",
                                        "success",
                                        "user",
                                        "wait"
                                      ]
                                    },
                                    "label": {
                                      "type": "string",
                                      "description": "Label for the step",
                                      "example": "Find units",
                                      "x-examples": [
                                        "Find units"
                                      ]
                                    },
                                    "goto": {
                                      "type": "string",
                                      "description": "Step to move to",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "complete",
                                      "x-examples": [
                                        "complete"
                                      ]
                                    },
                                    "goto-fail": {
                                      "type": "string",
                                      "description": "Step to transition too if this step cannot be completed",
                                      "pattern": "^[a-z][a-z-]+[a-z]$",
                                      "example": "process-fail",
                                      "x-examples": [
                                        "process-fail"
                                      ]
                                    },
                                    "context": {
                                      "type": "array",
                                      "description": "Initial values to set on the context",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "key",
                                          "value"
                                        ],
                                        "properties": {
                                          "key": {
                                            "type": "string",
                                            "description": "The context key to set",
                                            "example": "$.fizz",
                                            "x-examples": [
                                              "$.fizz",
                                              "$.unit.status",
                                              "extract_fields"
                                            ]
                                          },
                                          "value": {
                                            "type": "string",
                                            "description": "Value to set",
                                            "example": "$.buzz",
                                            "x-examples": [
                                              "$.buzz",
                                              "Pending",
                                              true
                                            ]
                                          },
                                          "lock": {
                                            "type": "boolean",
                                            "description": "Prevents other steps from writing this value",
                                            "example": true
                                          },
                                          "ignore": {
                                            "type": "boolean",
                                            "description": "When trying to set a locked key, do not fail",
                                            "example": false
                                          }
                                        }
                                      }
                                    },
                                    "onError": {
                                      "type": "object",
                                      "description": "Action to take when step fails",
                                      "required": [
                                        "finally"
                                      ],
                                      "properties": {
                                        "retry": {
                                          "type": "integer",
                                          "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                          "minimum": 0,
                                          "maximum": 10,
                                          "example": 3,
                                          "default": 0
                                        },
                                        "finally": {
                                          "type": "object",
                                          "description": "What to do after all retries",
                                          "required": [
                                            "goto"
                                          ],
                                          "properties": {
                                            "actions": {
                                              "type": "array",
                                              "description": "Actions to take on failure",
                                              "items": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string",
                                                        "description": "The type of the action",
                                                        "enum": [
                                                          "email"
                                                        ]
                                                      },
                                                      "options": {
                                                        "type": "object",
                                                        "description": "settings for the action",
                                                        "additionalProperties": {
                                                          "type": "string"
                                                        },
                                                        "x-examples": [
                                                          {
                                                            "to": "bob@example.com",
                                                            "from": "alice@example.com"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            },
                                            "goto": {
                                              "type": "string",
                                              "description": "Step to transition to on failure",
                                              "pattern": "^[a-z][a-z-]+[a-z]$",
                                              "example": "failed",
                                              "x-examples": [
                                                "failed"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "onComplete": {
                                      "type": "object",
                                      "description": "Actions to take when the step completes",
                                      "properties": {
                                        "actions": {
                                          "type": "array",
                                          "items": {
                                            "anyOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "type": {
                                                    "type": "string",
                                                    "description": "The type of the action",
                                                    "enum": [
                                                      "email"
                                                    ]
                                                  },
                                                  "options": {
                                                    "type": "object",
                                                    "description": "settings for the action",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    },
                                                    "x-examples": [
                                                      {
                                                        "to": "bob@example.com",
                                                        "from": "alice@example.com"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  },
                  "additionalProperties": {
                    "type": "object",
                    "anyOf": [
                      {
                        "type": "object",
                        "description": "Close step",
                        "required": [
                          "step"
                        ],
                        "properties": {
                          "step": {
                            "type": "string",
                            "description": "Step to mark as complete",
                            "pattern": "^[a-z][a-z-]+[a-z]$",
                            "example": "complete",
                            "x-examples": [
                              "complete"
                            ]
                          }
                        },
                        "anyOf": [
                          {
                            "type": "object",
                            "description": "Require the user confirm an action. This is normally used when Niagara cannot automatically detect that a task or action has been performed.",
                            "x-nter-step-component": "confirm-action",
                            "properties": {
                              "label": {
                                "x-examples": [
                                  "Confirm the device has powered off"
                                ]
                              },
                              "options": {
                                "type": "object",
                                "required": [
                                  "component",
                                  "payload"
                                ],
                                "properties": {
                                  "component": {
                                    "enum": [
                                      "confirm-action"
                                    ],
                                    "example": "confirm-action",
                                    "x-examples": [
                                      "confirm-action"
                                    ]
                                  },
                                  "payload": {
                                    "type": "object",
                                    "required": [
                                      "message"
                                    ],
                                    "properties": {
                                      "message": {
                                        "type": "string",
                                        "description": "The confirmation message to display to the user",
                                        "example": "Device powered off?",
                                        "x-examples": [
                                          "Device powered off?"
                                        ]
                                      },
                                      "negative_message": {
                                        "type": "string",
                                        "description": "An optional inverse message",
                                        "nullable": true,
                                        "example": "Device not functioning",
                                        "x-examples": [
                                          "Device not functioning"
                                        ]
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "description": "A step which requires a user to complete",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "example": "user",
                                    "x-examples": [
                                      "user"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "component",
                                      "payload"
                                    ],
                                    "properties": {
                                      "component": {
                                        "type": "string",
                                        "description": "Name of the function to invoke",
                                        "example": "assignUnitsFromCustomerToProject",
                                        "x-examples": [
                                          "assignUnitsFromCustomerToProject"
                                        ]
                                      },
                                      "payload": {
                                        "type": "object"
                                      }
                                    }
                                  }
                                },
                                "allOf": [
                                  {
                                    "type": "object",
                                    "x-ui-hide": true,
                                    "required": [
                                      "type",
                                      "label",
                                      "goto"
                                    ],
                                    "properties": {
                                      "type": {
                                        "type": "string",
                                        "description": "Type of workflow step",
                                        "enum": [
                                          "load",
                                          "choice",
                                          "function",
                                          "machine",
                                          "pass",
                                          "fail",
                                          "success",
                                          "user",
                                          "wait"
                                        ]
                                      },
                                      "label": {
                                        "type": "string",
                                        "description": "Label for the step",
                                        "example": "Find units",
                                        "x-examples": [
                                          "Find units"
                                        ]
                                      },
                                      "goto": {
                                        "type": "string",
                                        "description": "Step to move to",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "complete",
                                        "x-examples": [
                                          "complete"
                                        ]
                                      },
                                      "goto-fail": {
                                        "type": "string",
                                        "description": "Step to transition too if this step cannot be completed",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "process-fail",
                                        "x-examples": [
                                          "process-fail"
                                        ]
                                      },
                                      "context": {
                                        "type": "array",
                                        "description": "Initial values to set on the context",
                                        "items": {
                                          "type": "object",
                                          "required": [
                                            "key",
                                            "value"
                                          ],
                                          "properties": {
                                            "key": {
                                              "type": "string",
                                              "description": "The context key to set",
                                              "example": "$.fizz",
                                              "x-examples": [
                                                "$.fizz",
                                                "$.unit.status",
                                                "extract_fields"
                                              ]
                                            },
                                            "value": {
                                              "type": "string",
                                              "description": "Value to set",
                                              "example": "$.buzz",
                                              "x-examples": [
                                                "$.buzz",
                                                "Pending",
                                                true
                                              ]
                                            },
                                            "lock": {
                                              "type": "boolean",
                                              "description": "Prevents other steps from writing this value",
                                              "example": true
                                            },
                                            "ignore": {
                                              "type": "boolean",
                                              "description": "When trying to set a locked key, do not fail",
                                              "example": false
                                            }
                                          }
                                        }
                                      },
                                      "onError": {
                                        "type": "object",
                                        "description": "Action to take when step fails",
                                        "required": [
                                          "finally"
                                        ],
                                        "properties": {
                                          "retry": {
                                            "type": "integer",
                                            "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                            "minimum": 0,
                                            "maximum": 10,
                                            "example": 3,
                                            "default": 0
                                          },
                                          "finally": {
                                            "type": "object",
                                            "description": "What to do after all retries",
                                            "required": [
                                              "goto"
                                            ],
                                            "properties": {
                                              "actions": {
                                                "type": "array",
                                                "description": "Actions to take on failure",
                                                "items": {
                                                  "anyOf": [
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "type": {
                                                          "type": "string",
                                                          "description": "The type of the action",
                                                          "enum": [
                                                            "email"
                                                          ]
                                                        },
                                                        "options": {
                                                          "type": "object",
                                                          "description": "settings for the action",
                                                          "additionalProperties": {
                                                            "type": "string"
                                                          },
                                                          "x-examples": [
                                                            {
                                                              "to": "bob@example.com",
                                                              "from": "alice@example.com"
                                                            }
                                                          ]
                                                        }
                                                      }
                                                    }
                                                  ]
                                                }
                                              },
                                              "goto": {
                                                "type": "string",
                                                "description": "Step to transition to on failure",
                                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                                "example": "failed",
                                                "x-examples": [
                                                  "failed"
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      },
                                      "onComplete": {
                                        "type": "object",
                                        "description": "Actions to take when the step completes",
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "object",
                            "description": "Display a link or modal to a user which contains instructions from a PDF",
                            "x-nter-step-component": "follow-pdf-instructions",
                            "required": [
                              "label",
                              "payload"
                            ],
                            "properties": {
                              "label": {
                                "x-examples": [
                                  "Instruct user to follow steps outlined in Apple PDF"
                                ]
                              },
                              "options": {
                                "type": "object",
                                "required": [
                                  "component",
                                  "payload"
                                ],
                                "properties": {
                                  "component": {
                                    "enum": [
                                      "follow-pds-instructions"
                                    ],
                                    "example": "follow-pdf-instructions",
                                    "x-examples": [
                                      "follow-pdf-instructions"
                                    ]
                                  },
                                  "payload": {
                                    "type": "object",
                                    "required": [
                                      "attachment_id"
                                    ],
                                    "properties": {
                                      "attachment_id": {
                                        "type": "string",
                                        "description": "UUID for the attachment",
                                        "format": "uuid",
                                        "example": "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7",
                                        "x-examples": [
                                          "eb65b19f-efb4-40e7-991c-03ba1a2d7ca7"
                                        ]
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "description": "A step which requires a user to complete",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "example": "user",
                                    "x-examples": [
                                      "user"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "component",
                                      "payload"
                                    ],
                                    "properties": {
                                      "component": {
                                        "type": "string",
                                        "description": "Name of the function to invoke",
                                        "example": "assignUnitsFromCustomerToProject",
                                        "x-examples": [
                                          "assignUnitsFromCustomerToProject"
                                        ]
                                      },
                                      "payload": {
                                        "type": "object"
                                      }
                                    }
                                  }
                                },
                                "allOf": [
                                  {
                                    "type": "object",
                                    "x-ui-hide": true,
                                    "required": [
                                      "type",
                                      "label",
                                      "goto"
                                    ],
                                    "properties": {
                                      "type": {
                                        "type": "string",
                                        "description": "Type of workflow step",
                                        "enum": [
                                          "load",
                                          "choice",
                                          "function",
                                          "machine",
                                          "pass",
                                          "fail",
                                          "success",
                                          "user",
                                          "wait"
                                        ]
                                      },
                                      "label": {
                                        "type": "string",
                                        "description": "Label for the step",
                                        "example": "Find units",
                                        "x-examples": [
                                          "Find units"
                                        ]
                                      },
                                      "goto": {
                                        "type": "string",
                                        "description": "Step to move to",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "complete",
                                        "x-examples": [
                                          "complete"
                                        ]
                                      },
                                      "goto-fail": {
                                        "type": "string",
                                        "description": "Step to transition too if this step cannot be completed",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "process-fail",
                                        "x-examples": [
                                          "process-fail"
                                        ]
                                      },
                                      "context": {
                                        "type": "array",
                                        "description": "Initial values to set on the context",
                                        "items": {
                                          "type": "object",
                                          "required": [
                                            "key",
                                            "value"
                                          ],
                                          "properties": {
                                            "key": {
                                              "type": "string",
                                              "description": "The context key to set",
                                              "example": "$.fizz",
                                              "x-examples": [
                                                "$.fizz",
                                                "$.unit.status",
                                                "extract_fields"
                                              ]
                                            },
                                            "value": {
                                              "type": "string",
                                              "description": "Value to set",
                                              "example": "$.buzz",
                                              "x-examples": [
                                                "$.buzz",
                                                "Pending",
                                                true
                                              ]
                                            },
                                            "lock": {
                                              "type": "boolean",
                                              "description": "Prevents other steps from writing this value",
                                              "example": true
                                            },
                                            "ignore": {
                                              "type": "boolean",
                                              "description": "When trying to set a locked key, do not fail",
                                              "example": false
                                            }
                                          }
                                        }
                                      },
                                      "onError": {
                                        "type": "object",
                                        "description": "Action to take when step fails",
                                        "required": [
                                          "finally"
                                        ],
                                        "properties": {
                                          "retry": {
                                            "type": "integer",
                                            "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                            "minimum": 0,
                                            "maximum": 10,
                                            "example": 3,
                                            "default": 0
                                          },
                                          "finally": {
                                            "type": "object",
                                            "description": "What to do after all retries",
                                            "required": [
                                              "goto"
                                            ],
                                            "properties": {
                                              "actions": {
                                                "type": "array",
                                                "description": "Actions to take on failure",
                                                "items": {
                                                  "anyOf": [
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "type": {
                                                          "type": "string",
                                                          "description": "The type of the action",
                                                          "enum": [
                                                            "email"
                                                          ]
                                                        },
                                                        "options": {
                                                          "type": "object",
                                                          "description": "settings for the action",
                                                          "additionalProperties": {
                                                            "type": "string"
                                                          },
                                                          "x-examples": [
                                                            {
                                                              "to": "bob@example.com",
                                                              "from": "alice@example.com"
                                                            }
                                                          ]
                                                        }
                                                      }
                                                    }
                                                  ]
                                                }
                                              },
                                              "goto": {
                                                "type": "string",
                                                "description": "Step to transition to on failure",
                                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                                "example": "failed",
                                                "x-examples": [
                                                  "failed"
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      },
                                      "onComplete": {
                                        "type": "object",
                                        "description": "Actions to take when the step completes",
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "object",
                            "description": "Ask the user to manually enter (or confirm) data for an entity",
                            "x-nter-step-component": "manual-data-entry",
                            "properties": {
                              "label": {
                                "x-examples": [
                                  "Enter asset tag and confirm serial number"
                                ]
                              },
                              "options": {
                                "type": "object",
                                "required": [
                                  "component",
                                  "payload"
                                ],
                                "properties": {
                                  "component": {
                                    "enum": [
                                      "manual-data-entry"
                                    ],
                                    "example": "manual-data-entry",
                                    "x-examples": [
                                      "manual-data-entry"
                                    ]
                                  },
                                  "payload": {
                                    "type": "object",
                                    "required": [
                                      "fields"
                                    ],
                                    "properties": {
                                      "fields": {
                                        "type": "array",
                                        "description": "Configuration for each field",
                                        "items": {
                                          "type": "object",
                                          "required": [
                                            "input_type",
                                            "label",
                                            "required",
                                            "entity_field"
                                          ],
                                          "properties": {
                                            "input_type": {
                                              "type": "string",
                                              "description": "The type of input field to display",
                                              "enum": [
                                                "textbox",
                                                "input"
                                              ]
                                            },
                                            "label": {
                                              "type": "string",
                                              "description": "Label to display for the field",
                                              "example": "Asset Tag",
                                              "x-examples": [
                                                "Asset Tag"
                                              ]
                                            },
                                            "required": {
                                              "type": "boolean",
                                              "description": "Display the field as required input. Note: this is a helper function. It singles that the user is required to input data at this step. If the field is required on the entity, the user will be presented with a validation message",
                                              "example": true
                                            },
                                            "entity_field": {
                                              "type": "string",
                                              "description": "JSON Path to the field on the entity. If the path does not start with '$' then the entity on the context is assumed. Otherwise the data will be set on the context path",
                                              "example": "input_filter[?(@.key = 'asset-tag')]",
                                              "x-examples": [
                                                "input_filter[?(@.key = 'asset-tag')]"
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "description": "A step which requires a user to complete",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "example": "user",
                                    "x-examples": [
                                      "user"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "component",
                                      "payload"
                                    ],
                                    "properties": {
                                      "component": {
                                        "type": "string",
                                        "description": "Name of the function to invoke",
                                        "example": "assignUnitsFromCustomerToProject",
                                        "x-examples": [
                                          "assignUnitsFromCustomerToProject"
                                        ]
                                      },
                                      "payload": {
                                        "type": "object"
                                      }
                                    }
                                  }
                                },
                                "allOf": [
                                  {
                                    "type": "object",
                                    "x-ui-hide": true,
                                    "required": [
                                      "type",
                                      "label",
                                      "goto"
                                    ],
                                    "properties": {
                                      "type": {
                                        "type": "string",
                                        "description": "Type of workflow step",
                                        "enum": [
                                          "load",
                                          "choice",
                                          "function",
                                          "machine",
                                          "pass",
                                          "fail",
                                          "success",
                                          "user",
                                          "wait"
                                        ]
                                      },
                                      "label": {
                                        "type": "string",
                                        "description": "Label for the step",
                                        "example": "Find units",
                                        "x-examples": [
                                          "Find units"
                                        ]
                                      },
                                      "goto": {
                                        "type": "string",
                                        "description": "Step to move to",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "complete",
                                        "x-examples": [
                                          "complete"
                                        ]
                                      },
                                      "goto-fail": {
                                        "type": "string",
                                        "description": "Step to transition too if this step cannot be completed",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "process-fail",
                                        "x-examples": [
                                          "process-fail"
                                        ]
                                      },
                                      "context": {
                                        "type": "array",
                                        "description": "Initial values to set on the context",
                                        "items": {
                                          "type": "object",
                                          "required": [
                                            "key",
                                            "value"
                                          ],
                                          "properties": {
                                            "key": {
                                              "type": "string",
                                              "description": "The context key to set",
                                              "example": "$.fizz",
                                              "x-examples": [
                                                "$.fizz",
                                                "$.unit.status",
                                                "extract_fields"
                                              ]
                                            },
                                            "value": {
                                              "type": "string",
                                              "description": "Value to set",
                                              "example": "$.buzz",
                                              "x-examples": [
                                                "$.buzz",
                                                "Pending",
                                                true
                                              ]
                                            },
                                            "lock": {
                                              "type": "boolean",
                                              "description": "Prevents other steps from writing this value",
                                              "example": true
                                            },
                                            "ignore": {
                                              "type": "boolean",
                                              "description": "When trying to set a locked key, do not fail",
                                              "example": false
                                            }
                                          }
                                        }
                                      },
                                      "onError": {
                                        "type": "object",
                                        "description": "Action to take when step fails",
                                        "required": [
                                          "finally"
                                        ],
                                        "properties": {
                                          "retry": {
                                            "type": "integer",
                                            "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                            "minimum": 0,
                                            "maximum": 10,
                                            "example": 3,
                                            "default": 0
                                          },
                                          "finally": {
                                            "type": "object",
                                            "description": "What to do after all retries",
                                            "required": [
                                              "goto"
                                            ],
                                            "properties": {
                                              "actions": {
                                                "type": "array",
                                                "description": "Actions to take on failure",
                                                "items": {
                                                  "anyOf": [
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "type": {
                                                          "type": "string",
                                                          "description": "The type of the action",
                                                          "enum": [
                                                            "email"
                                                          ]
                                                        },
                                                        "options": {
                                                          "type": "object",
                                                          "description": "settings for the action",
                                                          "additionalProperties": {
                                                            "type": "string"
                                                          },
                                                          "x-examples": [
                                                            {
                                                              "to": "bob@example.com",
                                                              "from": "alice@example.com"
                                                            }
                                                          ]
                                                        }
                                                      }
                                                    }
                                                  ]
                                                }
                                              },
                                              "goto": {
                                                "type": "string",
                                                "description": "Step to transition to on failure",
                                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                                "example": "failed",
                                                "x-examples": [
                                                  "failed"
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      },
                                      "onComplete": {
                                        "type": "object",
                                        "description": "Actions to take when the step completes",
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "object",
                            "description": "Ask the user to follow a list and check off boxes",
                            "x-nter-step-component": "task-list",
                            "properties": {
                              "label": {
                                "x-examples": [
                                  "Enter asset tag and confirm serial number"
                                ]
                              },
                              "options": {
                                "type": "object",
                                "required": [
                                  "component",
                                  "payload"
                                ],
                                "properties": {
                                  "component": {
                                    "enum": [
                                      "task-list"
                                    ],
                                    "example": "task-list",
                                    "x-examples": [
                                      "task-list"
                                    ]
                                  },
                                  "payload": {
                                    "type": "object",
                                    "required": [
                                      "items"
                                    ],
                                    "properties": {
                                      "is_qc": {
                                        "type": "boolean",
                                        "description": "Flags this list as a QC task list. This means that a different user can close the task to one previously on the context"
                                      },
                                      "items": {
                                        "type": "array",
                                        "description": "Configuration for each task list item",
                                        "items": {
                                          "type": "object",
                                          "required": [
                                            "label",
                                            "help",
                                            "evaluated",
                                            "na_option"
                                          ],
                                          "properties": {
                                            "label": {
                                              "type": "string",
                                              "description": "Label to display for the field",
                                              "example": "Asset Tag placement",
                                              "x-examples": [
                                                "Asset Tag placement"
                                              ]
                                            },
                                            "slug": {
                                              "type": "string",
                                              "description": "Slug for the item (Auto-generated from the label)",
                                              "readOnly": true,
                                              "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$",
                                              "example": "asset-tag-placement",
                                              "x-examples": [
                                                "asset-tag-placement"
                                              ]
                                            },
                                            "help": {
                                              "type": "string",
                                              "description": "Message describing what is needed to be checked",
                                              "example": "Asset Tag attached to the unit in the correct position",
                                              "x-examples": [
                                                "Asset Tag attached to the unit in the correct position"
                                              ]
                                            },
                                            "evaluated": {
                                              "type": "boolean",
                                              "description": "When set to true, this will fail the step if the value for the item is false or N/A",
                                              "example": true
                                            },
                                            "na_field": {
                                              "type": "boolean",
                                              "description": "Allow the user to select the N/A option when checking off the list",
                                              "example": true
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "description": "A step which requires a user to complete",
                                "required": [
                                  "type",
                                  "options"
                                ],
                                "properties": {
                                  "type": {
                                    "example": "user",
                                    "x-examples": [
                                      "user"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "component",
                                      "payload"
                                    ],
                                    "properties": {
                                      "component": {
                                        "type": "string",
                                        "description": "Name of the function to invoke",
                                        "example": "assignUnitsFromCustomerToProject",
                                        "x-examples": [
                                          "assignUnitsFromCustomerToProject"
                                        ]
                                      },
                                      "payload": {
                                        "type": "object"
                                      }
                                    }
                                  }
                                },
                                "allOf": [
                                  {
                                    "type": "object",
                                    "x-ui-hide": true,
                                    "required": [
                                      "type",
                                      "label",
                                      "goto"
                                    ],
                                    "properties": {
                                      "type": {
                                        "type": "string",
                                        "description": "Type of workflow step",
                                        "enum": [
                                          "load",
                                          "choice",
                                          "function",
                                          "machine",
                                          "pass",
                                          "fail",
                                          "success",
                                          "user",
                                          "wait"
                                        ]
                                      },
                                      "label": {
                                        "type": "string",
                                        "description": "Label for the step",
                                        "example": "Find units",
                                        "x-examples": [
                                          "Find units"
                                        ]
                                      },
                                      "goto": {
                                        "type": "string",
                                        "description": "Step to move to",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "complete",
                                        "x-examples": [
                                          "complete"
                                        ]
                                      },
                                      "goto-fail": {
                                        "type": "string",
                                        "description": "Step to transition too if this step cannot be completed",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "process-fail",
                                        "x-examples": [
                                          "process-fail"
                                        ]
                                      },
                                      "context": {
                                        "type": "array",
                                        "description": "Initial values to set on the context",
                                        "items": {
                                          "type": "object",
                                          "required": [
                                            "key",
                                            "value"
                                          ],
                                          "properties": {
                                            "key": {
                                              "type": "string",
                                              "description": "The context key to set",
                                              "example": "$.fizz",
                                              "x-examples": [
                                                "$.fizz",
                                                "$.unit.status",
                                                "extract_fields"
                                              ]
                                            },
                                            "value": {
                                              "type": "string",
                                              "description": "Value to set",
                                              "example": "$.buzz",
                                              "x-examples": [
                                                "$.buzz",
                                                "Pending",
                                                true
                                              ]
                                            },
                                            "lock": {
                                              "type": "boolean",
                                              "description": "Prevents other steps from writing this value",
                                              "example": true
                                            },
                                            "ignore": {
                                              "type": "boolean",
                                              "description": "When trying to set a locked key, do not fail",
                                              "example": false
                                            }
                                          }
                                        }
                                      },
                                      "onError": {
                                        "type": "object",
                                        "description": "Action to take when step fails",
                                        "required": [
                                          "finally"
                                        ],
                                        "properties": {
                                          "retry": {
                                            "type": "integer",
                                            "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                            "minimum": 0,
                                            "maximum": 10,
                                            "example": 3,
                                            "default": 0
                                          },
                                          "finally": {
                                            "type": "object",
                                            "description": "What to do after all retries",
                                            "required": [
                                              "goto"
                                            ],
                                            "properties": {
                                              "actions": {
                                                "type": "array",
                                                "description": "Actions to take on failure",
                                                "items": {
                                                  "anyOf": [
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "type": {
                                                          "type": "string",
                                                          "description": "The type of the action",
                                                          "enum": [
                                                            "email"
                                                          ]
                                                        },
                                                        "options": {
                                                          "type": "object",
                                                          "description": "settings for the action",
                                                          "additionalProperties": {
                                                            "type": "string"
                                                          },
                                                          "x-examples": [
                                                            {
                                                              "to": "bob@example.com",
                                                              "from": "alice@example.com"
                                                            }
                                                          ]
                                                        }
                                                      }
                                                    }
                                                  ]
                                                }
                                              },
                                              "goto": {
                                                "type": "string",
                                                "description": "Step to transition to on failure",
                                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                                "example": "failed",
                                                "x-examples": [
                                                  "failed"
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      },
                                      "onComplete": {
                                        "type": "object",
                                        "description": "Actions to take when the step completes",
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "object",
                            "description": "Run the ACE-IOS application to provision iOS devices or ",
                            "properties": {
                              "type": {
                                "example": "machine",
                                "x-examples": [
                                  "machine"
                                ]
                              },
                              "label": {
                                "x-examples": [
                                  "Run Application"
                                ]
                              },
                              "options": {
                                "type": "object",
                                "required": [
                                  "application",
                                  "configuration"
                                ],
                                "properties": {
                                  "configuration": {
                                    "type": "object",
                                    "description": "ACE Configuration options",
                                    "properties": {
                                      "pairing_cert": {
                                        "type": "string",
                                        "format": "base64",
                                        "description": "Contents of a *.crt file exported from Apple Configurator or MDM",
                                        "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                        "x-examples": [
                                          "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                        ],
                                        "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                      },
                                      "pairing_key": {
                                        "type": "string",
                                        "format": "base64",
                                        "description": "Contents of a *.der file exported from Apple Configurator or MDM",
                                        "example": "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl",
                                        "x-examples": [
                                          "dGhpcyBpcyBub3QgYSBjZXJ0IGZpbGUganVzdCBhbiBleGFtcGxl"
                                        ],
                                        "pattern": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
                                      },
                                      "restore_device": {
                                        "type": "boolean",
                                        "description": "Restore device to factory defaults"
                                      },
                                      "automated_enrollment": {
                                        "type": "boolean",
                                        "description": "Automatically enroll the device to MDM"
                                      },
                                      "mdm": {
                                        "type": "object",
                                        "format": "base64",
                                        "description": "The settings for the Customers MDM",
                                        "properties": {
                                          "vendor": {
                                            "type": "string",
                                            "description": "MDM vendor. Currently, supported values are AirWatch, JAMF, and Meraki.",
                                            "enum": [
                                              "AirWatch",
                                              "JAMF",
                                              "Meraki"
                                            ]
                                          },
                                          "console_url": {
                                            "type": "string",
                                            "format": "uri",
                                            "description": "Base URL for HTTP requests",
                                            "example": "http://jamf.zones.com",
                                            "x-examples": [
                                              "http://jamf.zones.com"
                                            ]
                                          },
                                          "user": {
                                            "type": "string",
                                            "description": "MDM User name",
                                            "example": "NterpriseBob",
                                            "x-examples": [
                                              "NterpriseBob"
                                            ]
                                          },
                                          "password": {
                                            "type": "string",
                                            "description": "MDM password"
                                          },
                                          "tenant_code": {
                                            "type": "string",
                                            "description": "MDM authentication key",
                                            "example": "nterprise",
                                            "x-examples": [
                                              "nterprise"
                                            ]
                                          },
                                          "set_asset_tag": {
                                            "type": "string",
                                            "description": "Sets the devices Asset tag based on a field from the unit",
                                            "example": "$._entity.input_filter[?(@.key = 'asset-tag')]",
                                            "x-examples": [
                                              "$._entity.input_filter[?(@.key = 'asset-tag')]"
                                            ]
                                          }
                                        }
                                      },
                                      "field_mappings": {
                                        "type": "array",
                                        "description": "List of fields to map to the device",
                                        "items": {
                                          "type": "object",
                                          "properties": {
                                            "from": {
                                              "type": "string",
                                              "description": "The field reported from ACE",
                                              "enum": [
                                                "serial_number",
                                                "name",
                                                "ecid",
                                                "udid",
                                                "configurator_serial",
                                                "ios",
                                                "model",
                                                "storage",
                                                "wifi_mac",
                                                "bt_mac",
                                                "ethernet_mac",
                                                "thundersync_serial",
                                                "iccid",
                                                "iccid2",
                                                "imei",
                                                "imei2",
                                                "missed_profiles",
                                                "missed_apps",
                                                "icon_list_regex",
                                                "icon_layout",
                                                "bat_capacity"
                                              ]
                                            },
                                            "to": {
                                              "type": "string",
                                              "description": "Field to set on the entity",
                                              "example": "$._entity.input_filter[?(@.key = 'serial-number')]",
                                              "x-examples": [
                                                "$._entity.input_filter[?(@.key = 'serial-number')]"
                                              ]
                                            }
                                          }
                                        }
                                      },
                                      "wait_for_apps": {
                                        "type": "array",
                                        "description": "A list of applications needed to be installed on the device. This will cause the extension to poll the device for installed applications. Once all the applications have been installed, this step can be completed",
                                        "items": {
                                          "type": "string",
                                          "format": "uri",
                                          "example": "com.apple.itunes",
                                          "x-examples": [
                                            "com.apple.itunes"
                                          ]
                                        }
                                      },
                                      "wait_for_battery_charge": {
                                        "type": "integer",
                                        "description": "The required battery percentage needed before this step can move on",
                                        "minimum": 0,
                                        "maximum": 100
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "description": "Run an application extension",
                                "properties": {
                                  "label": {
                                    "x-examples": [
                                      "Run Application"
                                    ]
                                  },
                                  "options": {
                                    "type": "object",
                                    "required": [
                                      "application",
                                      "configuration"
                                    ],
                                    "properties": {
                                      "application": {
                                        "type": "object",
                                        "required": [
                                          "application_id",
                                          "platforms"
                                        ],
                                        "properties": {
                                          "application_id": {
                                            "type": "string",
                                            "description": "Registered application ID",
                                            "example": "ace-ios",
                                            "x-examples": [
                                              "ace-ios"
                                            ]
                                          },
                                          "platforms": {
                                            "type": "array",
                                            "description": "Allowed platforms the application can run on",
                                            "items": {
                                              "type": "object",
                                              "required": [
                                                "platform",
                                                "arch"
                                              ],
                                              "properties": {
                                                "platform": {
                                                  "type": "string",
                                                  "description": "The platform (OS) the application can run on",
                                                  "enum": [
                                                    "aix",
                                                    "darwin",
                                                    "freebsd",
                                                    "linux",
                                                    "openbsd",
                                                    "sunos",
                                                    "win32"
                                                  ]
                                                },
                                                "arch": {
                                                  "type": "string",
                                                  "description": "The CPU architecture needed to run the application",
                                                  "enum": [
                                                    "arm",
                                                    "arm64",
                                                    "ia32",
                                                    "mips",
                                                    "mipsel",
                                                    "ppc",
                                                    "ppc64",
                                                    "s390",
                                                    "s390x",
                                                    "x32",
                                                    "x64"
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                },
                                "allOf": [
                                  {
                                    "type": "object",
                                    "x-ui-hide": true,
                                    "required": [
                                      "type",
                                      "label",
                                      "goto"
                                    ],
                                    "properties": {
                                      "type": {
                                        "type": "string",
                                        "description": "Type of workflow step",
                                        "enum": [
                                          "load",
                                          "choice",
                                          "function",
                                          "machine",
                                          "pass",
                                          "fail",
                                          "success",
                                          "user",
                                          "wait"
                                        ]
                                      },
                                      "label": {
                                        "type": "string",
                                        "description": "Label for the step",
                                        "example": "Find units",
                                        "x-examples": [
                                          "Find units"
                                        ]
                                      },
                                      "goto": {
                                        "type": "string",
                                        "description": "Step to move to",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "complete",
                                        "x-examples": [
                                          "complete"
                                        ]
                                      },
                                      "goto-fail": {
                                        "type": "string",
                                        "description": "Step to transition too if this step cannot be completed",
                                        "pattern": "^[a-z][a-z-]+[a-z]$",
                                        "example": "process-fail",
                                        "x-examples": [
                                          "process-fail"
                                        ]
                                      },
                                      "context": {
                                        "type": "array",
                                        "description": "Initial values to set on the context",
                                        "items": {
                                          "type": "object",
                                          "required": [
                                            "key",
                                            "value"
                                          ],
                                          "properties": {
                                            "key": {
                                              "type": "string",
                                              "description": "The context key to set",
                                              "example": "$.fizz",
                                              "x-examples": [
                                                "$.fizz",
                                                "$.unit.status",
                                                "extract_fields"
                                              ]
                                            },
                                            "value": {
                                              "type": "string",
                                              "description": "Value to set",
                                              "example": "$.buzz",
                                              "x-examples": [
                                                "$.buzz",
                                                "Pending",
                                                true
                                              ]
                                            },
                                            "lock": {
                                              "type": "boolean",
                                              "description": "Prevents other steps from writing this value",
                                              "example": true
                                            },
                                            "ignore": {
                                              "type": "boolean",
                                              "description": "When trying to set a locked key, do not fail",
                                              "example": false
                                            }
                                          }
                                        }
                                      },
                                      "onError": {
                                        "type": "object",
                                        "description": "Action to take when step fails",
                                        "required": [
                                          "finally"
                                        ],
                                        "properties": {
                                          "retry": {
                                            "type": "integer",
                                            "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                            "minimum": 0,
                                            "maximum": 10,
                                            "example": 3,
                                            "default": 0
                                          },
                                          "finally": {
                                            "type": "object",
                                            "description": "What to do after all retries",
                                            "required": [
                                              "goto"
                                            ],
                                            "properties": {
                                              "actions": {
                                                "type": "array",
                                                "description": "Actions to take on failure",
                                                "items": {
                                                  "anyOf": [
                                                    {
                                                      "type": "object",
                                                      "properties": {
                                                        "type": {
                                                          "type": "string",
                                                          "description": "The type of the action",
                                                          "enum": [
                                                            "email"
                                                          ]
                                                        },
                                                        "options": {
                                                          "type": "object",
                                                          "description": "settings for the action",
                                                          "additionalProperties": {
                                                            "type": "string"
                                                          },
                                                          "x-examples": [
                                                            {
                                                              "to": "bob@example.com",
                                                              "from": "alice@example.com"
                                                            }
                                                          ]
                                                        }
                                                      }
                                                    }
                                                  ]
                                                }
                                              },
                                              "goto": {
                                                "type": "string",
                                                "description": "Step to transition to on failure",
                                                "pattern": "^[a-z][a-z-]+[a-z]$",
                                                "example": "failed",
                                                "x-examples": [
                                                  "failed"
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      },
                                      "onComplete": {
                                        "type": "object",
                                        "description": "Actions to take when the step completes",
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "label": {
                                "example": "Is device ok?",
                                "x-examples": [
                                  "Is device ok?"
                                ]
                              },
                              "type": {
                                "example": "choice",
                                "x-examples": [
                                  "choice"
                                ]
                              },
                              "choices": {
                                "type": "array",
                                "items": {
                                  "type": "object",
                                  "required": [
                                    "goto"
                                  ],
                                  "maxProperties": 2,
                                  "minProperties": 2,
                                  "maximum": 20,
                                  "properties": {
                                    "and": {
                                      "type": "array",
                                      "description": "All choices must be satisfied",
                                      "maximum": 5,
                                      "items": {
                                        "description": "A Step choice",
                                        "type": "object",
                                        "maxProperties": 2,
                                        "minProperties": 2,
                                        "required": [
                                          "variable"
                                        ],
                                        "properties": {
                                          "variable": {
                                            "type": "string",
                                            "description": "Context variable to check",
                                            "example": "$.parts.available",
                                            "x-examples": [
                                              "$.parts.available"
                                            ]
                                          },
                                          "greater_than_equals": {
                                            "type": "string",
                                            "description": "Value has to be greater than or equals to",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "less_than_equals": {
                                            "type": "string",
                                            "description": "Value has to be less than or equals to",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "greater_than": {
                                            "type": "string",
                                            "description": "Value has to be greater than",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "less_than": {
                                            "type": "string",
                                            "description": "Value has to be less than",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "equals": {
                                            "type": "string",
                                            "description": "Value has to equal",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "not_equals": {
                                            "type": "string",
                                            "description": "Value must not equal",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          }
                                        }
                                      }
                                    },
                                    "or": {
                                      "type": "array",
                                      "description": "Any of these choices must be satisfied",
                                      "maximum": 5,
                                      "items": {
                                        "description": "A Step choice",
                                        "type": "object",
                                        "maxProperties": 2,
                                        "minProperties": 2,
                                        "required": [
                                          "variable"
                                        ],
                                        "properties": {
                                          "variable": {
                                            "type": "string",
                                            "description": "Context variable to check",
                                            "example": "$.parts.available",
                                            "x-examples": [
                                              "$.parts.available"
                                            ]
                                          },
                                          "greater_than_equals": {
                                            "type": "string",
                                            "description": "Value has to be greater than or equals to",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "less_than_equals": {
                                            "type": "string",
                                            "description": "Value has to be less than or equals to",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "greater_than": {
                                            "type": "string",
                                            "description": "Value has to be greater than",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "less_than": {
                                            "type": "string",
                                            "description": "Value has to be less than",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "equals": {
                                            "type": "string",
                                            "description": "Value has to equal",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "not_equals": {
                                            "type": "string",
                                            "description": "Value must not equal",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          }
                                        }
                                      }
                                    },
                                    "not": {
                                      "type": "array",
                                      "description": "None of these choices must be satisfied",
                                      "maximum": 5,
                                      "items": {
                                        "description": "A Step choice",
                                        "type": "object",
                                        "maxProperties": 2,
                                        "minProperties": 2,
                                        "required": [
                                          "variable"
                                        ],
                                        "properties": {
                                          "variable": {
                                            "type": "string",
                                            "description": "Context variable to check",
                                            "example": "$.parts.available",
                                            "x-examples": [
                                              "$.parts.available"
                                            ]
                                          },
                                          "greater_than_equals": {
                                            "type": "string",
                                            "description": "Value has to be greater than or equals to",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "less_than_equals": {
                                            "type": "string",
                                            "description": "Value has to be less than or equals to",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "greater_than": {
                                            "type": "string",
                                            "description": "Value has to be greater than",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "less_than": {
                                            "type": "string",
                                            "description": "Value has to be less than",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "equals": {
                                            "type": "string",
                                            "description": "Value has to equal",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          },
                                          "not_equals": {
                                            "type": "string",
                                            "description": "Value must not equal",
                                            "example": "42",
                                            "x-examples": [
                                              "42"
                                            ]
                                          }
                                        }
                                      }
                                    },
                                    "goto": {
                                      "description": "Step to goto when condition is met",
                                      "allOf": [
                                        {
                                          "type": "string",
                                          "description": "Step to move to",
                                          "pattern": "^[a-z][a-z-]+[a-z]$",
                                          "example": "complete",
                                          "x-examples": [
                                            "complete"
                                          ]
                                        }
                                      ]
                                    }
                                  }
                                }
                              },
                              "goto": {
                                "description": "Default step to goto when no choice can be made"
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "required": [
                                  "type",
                                  "label",
                                  "goto"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "description": "Type of workflow step",
                                    "enum": [
                                      "load",
                                      "choice",
                                      "function",
                                      "machine",
                                      "pass",
                                      "fail",
                                      "success",
                                      "user",
                                      "wait"
                                    ]
                                  },
                                  "label": {
                                    "type": "string",
                                    "description": "Label for the step",
                                    "example": "Find units",
                                    "x-examples": [
                                      "Find units"
                                    ]
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to move to",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "complete",
                                    "x-examples": [
                                      "complete"
                                    ]
                                  },
                                  "goto-fail": {
                                    "type": "string",
                                    "description": "Step to transition too if this step cannot be completed",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "process-fail",
                                    "x-examples": [
                                      "process-fail"
                                    ]
                                  },
                                  "context": {
                                    "type": "array",
                                    "description": "Initial values to set on the context",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "key",
                                        "value"
                                      ],
                                      "properties": {
                                        "key": {
                                          "type": "string",
                                          "description": "The context key to set",
                                          "example": "$.fizz",
                                          "x-examples": [
                                            "$.fizz",
                                            "$.unit.status",
                                            "extract_fields"
                                          ]
                                        },
                                        "value": {
                                          "type": "string",
                                          "description": "Value to set",
                                          "example": "$.buzz",
                                          "x-examples": [
                                            "$.buzz",
                                            "Pending",
                                            true
                                          ]
                                        },
                                        "lock": {
                                          "type": "boolean",
                                          "description": "Prevents other steps from writing this value",
                                          "example": true
                                        },
                                        "ignore": {
                                          "type": "boolean",
                                          "description": "When trying to set a locked key, do not fail",
                                          "example": false
                                        }
                                      }
                                    }
                                  },
                                  "onError": {
                                    "type": "object",
                                    "description": "Action to take when step fails",
                                    "required": [
                                      "finally"
                                    ],
                                    "properties": {
                                      "retry": {
                                        "type": "integer",
                                        "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                        "minimum": 0,
                                        "maximum": 10,
                                        "example": 3,
                                        "default": 0
                                      },
                                      "finally": {
                                        "type": "object",
                                        "description": "What to do after all retries",
                                        "required": [
                                          "goto"
                                        ],
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "description": "Actions to take on failure",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to transition to on failure",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "failed",
                                            "x-examples": [
                                              "failed"
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "onComplete": {
                                    "type": "object",
                                    "description": "Actions to take when the step completes",
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            ]
                          },
                          {
                            "type": "object",
                            "description": "Finial step which is marked as failed",
                            "properties": {
                              "label": {
                                "example": "Failed",
                                "x-examples": [
                                  "Failed"
                                ],
                                "allOf": [
                                  {
                                    "type": "string",
                                    "description": "Label for the step",
                                    "example": "Find units",
                                    "x-examples": [
                                      "Find units"
                                    ]
                                  }
                                ]
                              },
                              "type": {
                                "example": "fail",
                                "x-examples": [
                                  "fail"
                                ],
                                "allOf": [
                                  {
                                    "type": "string",
                                    "description": "Type of workflow step",
                                    "enum": [
                                      "load",
                                      "choice",
                                      "function",
                                      "machine",
                                      "pass",
                                      "fail",
                                      "success",
                                      "user",
                                      "wait"
                                    ]
                                  }
                                ]
                              },
                              "onComplete": {
                                "type": "object",
                                "description": "Actions to take when the step completes",
                                "properties": {
                                  "actions": {
                                    "type": "array",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "The type of the action",
                                              "enum": [
                                                "email"
                                              ]
                                            },
                                            "options": {
                                              "type": "object",
                                              "description": "settings for the action",
                                              "additionalProperties": {
                                                "type": "string"
                                              },
                                              "x-examples": [
                                                {
                                                  "to": "bob@example.com",
                                                  "from": "alice@example.com"
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          },
                          {
                            "type": "object",
                            "description": "Allows executing actions with out performing any function",
                            "properties": {
                              "label": {
                                "example": "Send email to project manager",
                                "x-examples": [
                                  "Send email to project manager"
                                ]
                              },
                              "type": {
                                "example": "pass",
                                "x-examples": [
                                  "pass"
                                ],
                                "allOf": [
                                  {
                                    "type": "string",
                                    "description": "Type of workflow step",
                                    "enum": [
                                      "load",
                                      "choice",
                                      "function",
                                      "machine",
                                      "pass",
                                      "fail",
                                      "success",
                                      "user",
                                      "wait"
                                    ]
                                  }
                                ]
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "required": [
                                  "type",
                                  "label",
                                  "goto"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "description": "Type of workflow step",
                                    "enum": [
                                      "load",
                                      "choice",
                                      "function",
                                      "machine",
                                      "pass",
                                      "fail",
                                      "success",
                                      "user",
                                      "wait"
                                    ]
                                  },
                                  "label": {
                                    "type": "string",
                                    "description": "Label for the step",
                                    "example": "Find units",
                                    "x-examples": [
                                      "Find units"
                                    ]
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to move to",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "complete",
                                    "x-examples": [
                                      "complete"
                                    ]
                                  },
                                  "goto-fail": {
                                    "type": "string",
                                    "description": "Step to transition too if this step cannot be completed",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "process-fail",
                                    "x-examples": [
                                      "process-fail"
                                    ]
                                  },
                                  "context": {
                                    "type": "array",
                                    "description": "Initial values to set on the context",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "key",
                                        "value"
                                      ],
                                      "properties": {
                                        "key": {
                                          "type": "string",
                                          "description": "The context key to set",
                                          "example": "$.fizz",
                                          "x-examples": [
                                            "$.fizz",
                                            "$.unit.status",
                                            "extract_fields"
                                          ]
                                        },
                                        "value": {
                                          "type": "string",
                                          "description": "Value to set",
                                          "example": "$.buzz",
                                          "x-examples": [
                                            "$.buzz",
                                            "Pending",
                                            true
                                          ]
                                        },
                                        "lock": {
                                          "type": "boolean",
                                          "description": "Prevents other steps from writing this value",
                                          "example": true
                                        },
                                        "ignore": {
                                          "type": "boolean",
                                          "description": "When trying to set a locked key, do not fail",
                                          "example": false
                                        }
                                      }
                                    }
                                  },
                                  "onError": {
                                    "type": "object",
                                    "description": "Action to take when step fails",
                                    "required": [
                                      "finally"
                                    ],
                                    "properties": {
                                      "retry": {
                                        "type": "integer",
                                        "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                        "minimum": 0,
                                        "maximum": 10,
                                        "example": 3,
                                        "default": 0
                                      },
                                      "finally": {
                                        "type": "object",
                                        "description": "What to do after all retries",
                                        "required": [
                                          "goto"
                                        ],
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "description": "Actions to take on failure",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to transition to on failure",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "failed",
                                            "x-examples": [
                                              "failed"
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "onComplete": {
                                    "type": "object",
                                    "description": "Actions to take when the step completes",
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            ]
                          },
                          {
                            "type": "object",
                            "description": "Finial step which is marked as completed successfully",
                            "properties": {
                              "label": {
                                "example": "Complete",
                                "x-examples": [
                                  "Complete"
                                ],
                                "allOf": [
                                  {
                                    "type": "string",
                                    "description": "Label for the step",
                                    "example": "Find units",
                                    "x-examples": [
                                      "Find units"
                                    ]
                                  }
                                ]
                              },
                              "type": {
                                "example": "success",
                                "x-examples": [
                                  "success"
                                ],
                                "allOf": [
                                  {
                                    "type": "string",
                                    "description": "Type of workflow step",
                                    "enum": [
                                      "load",
                                      "choice",
                                      "function",
                                      "machine",
                                      "pass",
                                      "fail",
                                      "success",
                                      "user",
                                      "wait"
                                    ]
                                  }
                                ]
                              },
                              "onComplete": {
                                "type": "object",
                                "description": "Actions to take when the step completes",
                                "properties": {
                                  "actions": {
                                    "type": "array",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "type": {
                                              "type": "string",
                                              "description": "The type of the action",
                                              "enum": [
                                                "email"
                                              ]
                                            },
                                            "options": {
                                              "type": "object",
                                              "description": "settings for the action",
                                              "additionalProperties": {
                                                "type": "string"
                                              },
                                              "x-examples": [
                                                {
                                                  "to": "bob@example.com",
                                                  "from": "alice@example.com"
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          },
                          {
                            "type": "object",
                            "description": "A step which run at certain times",
                            "required": [
                              "stop_at",
                              "time"
                            ],
                            "properties": {
                              "label": {
                                "example": "Wait for cable",
                                "x-examples": [
                                  "Wait for cable"
                                ],
                                "allOf": [
                                  {
                                    "type": "string",
                                    "description": "Label for the step",
                                    "example": "Find units",
                                    "x-examples": [
                                      "Find units"
                                    ]
                                  }
                                ]
                              },
                              "type": {
                                "x-examples": [
                                  "wait"
                                ],
                                "example": "wait"
                              },
                              "stop_at": {
                                "type": "integer",
                                "description": "Time in seconds to stop this task",
                                "maximum": 900,
                                "minimum": 1
                              },
                              "time": {
                                "type": "integer",
                                "description": "Time to wait before checking this step",
                                "example": 600,
                                "maximum": 900,
                                "minimum": 1
                              },
                              "listen_for": {
                                "type": "array",
                                "description": "List of events and conditions to listen for to trigger",
                                "items": {
                                  "type": "object",
                                  "required": [
                                    "event"
                                  ],
                                  "properties": {
                                    "event": {
                                      "type": "string",
                                      "description": "Name of the event to listen for",
                                      "allOf": [
                                        {
                                          "type": "string",
                                          "description": "Possible entity events",
                                          "enum": [
                                            "CON.attached",
                                            "CON.created",
                                            "CON.deleted",
                                            "CON.detached",
                                            "CON.removed",
                                            "CON.updated",
                                            "CUS.attached",
                                            "CUS.created",
                                            "CUS.deleted",
                                            "CUS.detached",
                                            "CUS.removed",
                                            "CUS.updated",
                                            "LOC.attached",
                                            "LOC.created",
                                            "LOC.deleted",
                                            "LOC.detached",
                                            "LOC.removed",
                                            "LOC.updated",
                                            "NOTE.attached",
                                            "NOTE.created",
                                            "NOTE.deleted",
                                            "NOTE.detached",
                                            "NOTE.removed",
                                            "NOTE.updated",
                                            "PART.attached",
                                            "PART.created",
                                            "PART.deleted",
                                            "PART.detached",
                                            "PART.removed",
                                            "PART.updated",
                                            "PGM.attached",
                                            "PGM.created",
                                            "PGM.deleted",
                                            "PGM.detached",
                                            "PGM.removed",
                                            "PGM.updated",
                                            "PRO.attached",
                                            "PRO.created",
                                            "PRO.deleted",
                                            "PRO.detached",
                                            "PRO.removed",
                                            "PRO.updated",
                                            "RES.attached",
                                            "RES.created",
                                            "RES.deleted",
                                            "RES.detached",
                                            "RES.removed",
                                            "RES.updated",
                                            "UNIT.attached",
                                            "UNIT.created",
                                            "UNIT.deleted",
                                            "UNIT.detached",
                                            "UNIT.removed",
                                            "UNIT.updated",
                                            "USER.attached",
                                            "USER.created",
                                            "USER.deleted",
                                            "USER.detached",
                                            "USER.removed",
                                            "USER.updated",
                                            "WKF.attached",
                                            "WKF.created",
                                            "WKF.deleted",
                                            "WKF.detached",
                                            "WKF.removed",
                                            "WKF.updated",
                                            "WOR.attached",
                                            "WOR.created",
                                            "WOR.deleted",
                                            "WOR.detached",
                                            "WOR.removed",
                                            "WOR.updated"
                                          ]
                                        }
                                      ]
                                    },
                                    "event_value": {
                                      "type": "object",
                                      "description": "The event conditions that have to be met",
                                      "allOf": [
                                        {
                                          "description": "A Step choice",
                                          "type": "object",
                                          "maxProperties": 2,
                                          "minProperties": 2,
                                          "required": [
                                            "variable"
                                          ],
                                          "properties": {
                                            "variable": {
                                              "type": "string",
                                              "description": "Context variable to check",
                                              "example": "$.parts.available",
                                              "x-examples": [
                                                "$.parts.available"
                                              ]
                                            },
                                            "greater_than_equals": {
                                              "type": "string",
                                              "description": "Value has to be greater than or equals to",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "less_than_equals": {
                                              "type": "string",
                                              "description": "Value has to be less than or equals to",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "greater_than": {
                                              "type": "string",
                                              "description": "Value has to be greater than",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "less_than": {
                                              "type": "string",
                                              "description": "Value has to be less than",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "equals": {
                                              "type": "string",
                                              "description": "Value has to equal",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            },
                                            "not_equals": {
                                              "type": "string",
                                              "description": "Value must not equal",
                                              "example": "42",
                                              "x-examples": [
                                                "42"
                                              ]
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            },
                            "allOf": [
                              {
                                "type": "object",
                                "x-ui-hide": true,
                                "required": [
                                  "type",
                                  "label",
                                  "goto"
                                ],
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "description": "Type of workflow step",
                                    "enum": [
                                      "load",
                                      "choice",
                                      "function",
                                      "machine",
                                      "pass",
                                      "fail",
                                      "success",
                                      "user",
                                      "wait"
                                    ]
                                  },
                                  "label": {
                                    "type": "string",
                                    "description": "Label for the step",
                                    "example": "Find units",
                                    "x-examples": [
                                      "Find units"
                                    ]
                                  },
                                  "goto": {
                                    "type": "string",
                                    "description": "Step to move to",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "complete",
                                    "x-examples": [
                                      "complete"
                                    ]
                                  },
                                  "goto-fail": {
                                    "type": "string",
                                    "description": "Step to transition too if this step cannot be completed",
                                    "pattern": "^[a-z][a-z-]+[a-z]$",
                                    "example": "process-fail",
                                    "x-examples": [
                                      "process-fail"
                                    ]
                                  },
                                  "context": {
                                    "type": "array",
                                    "description": "Initial values to set on the context",
                                    "items": {
                                      "type": "object",
                                      "required": [
                                        "key",
                                        "value"
                                      ],
                                      "properties": {
                                        "key": {
                                          "type": "string",
                                          "description": "The context key to set",
                                          "example": "$.fizz",
                                          "x-examples": [
                                            "$.fizz",
                                            "$.unit.status",
                                            "extract_fields"
                                          ]
                                        },
                                        "value": {
                                          "type": "string",
                                          "description": "Value to set",
                                          "example": "$.buzz",
                                          "x-examples": [
                                            "$.buzz",
                                            "Pending",
                                            true
                                          ]
                                        },
                                        "lock": {
                                          "type": "boolean",
                                          "description": "Prevents other steps from writing this value",
                                          "example": true
                                        },
                                        "ignore": {
                                          "type": "boolean",
                                          "description": "When trying to set a locked key, do not fail",
                                          "example": false
                                        }
                                      }
                                    }
                                  },
                                  "onError": {
                                    "type": "object",
                                    "description": "Action to take when step fails",
                                    "required": [
                                      "finally"
                                    ],
                                    "properties": {
                                      "retry": {
                                        "type": "integer",
                                        "description": "Number of times to retry this step. Note: retry will only occur on steps which automatically failed. If the step was transitioned using the 'goto-fail' step, the actions will be fired but the step WILL NOT be re-tried",
                                        "minimum": 0,
                                        "maximum": 10,
                                        "example": 3,
                                        "default": 0
                                      },
                                      "finally": {
                                        "type": "object",
                                        "description": "What to do after all retries",
                                        "required": [
                                          "goto"
                                        ],
                                        "properties": {
                                          "actions": {
                                            "type": "array",
                                            "description": "Actions to take on failure",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "description": "The type of the action",
                                                      "enum": [
                                                        "email"
                                                      ]
                                                    },
                                                    "options": {
                                                      "type": "object",
                                                      "description": "settings for the action",
                                                      "additionalProperties": {
                                                        "type": "string"
                                                      },
                                                      "x-examples": [
                                                        {
                                                          "to": "bob@example.com",
                                                          "from": "alice@example.com"
                                                        }
                                                      ]
                                                    }
                                                  }
                                                }
                                              ]
                                            }
                                          },
                                          "goto": {
                                            "type": "string",
                                            "description": "Step to transition to on failure",
                                            "pattern": "^[a-z][a-z-]+[a-z]$",
                                            "example": "failed",
                                            "x-examples": [
                                              "failed"
                                            ]
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "onComplete": {
                                    "type": "object",
                                    "description": "Actions to take when the step completes",
                                    "properties": {
                                      "actions": {
                                        "type": "array",
                                        "items": {
                                          "anyOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "type": {
                                                  "type": "string",
                                                  "description": "The type of the action",
                                                  "enum": [
                                                    "email"
                                                  ]
                                                },
                                                "options": {
                                                  "type": "object",
                                                  "description": "settings for the action",
                                                  "additionalProperties": {
                                                    "type": "string"
                                                  },
                                                  "x-examples": [
                                                    {
                                                      "to": "bob@example.com",
                                                      "from": "alice@example.com"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                }
              },
              "allOf": [
                {
                  "x-ui-hide": true,
                  "type": "object",
                  "description": "Common Properties to all entities",
                  "required": [
                    "label"
                  ],
                  "properties": {
                    "label": {
                      "type": "string",
                      "description": "Label for the entity",
                      "example": "primary"
                    },
                    "slug": {
                      "type": "string",
                      "description": "Slug for the entity (Auto-generated from the label)",
                      "readOnly": true,
                      "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$"
                    },
                    "created": {
                      "description": "Date the entity was created",
                      "type": "string",
                      "format": "date-time",
                      "readOnly": true
                    },
                    "updated": {
                      "description": "Last date the entity was updated",
                      "type": "string",
                      "format": "date-time",
                      "readOnly": true
                    }
                  }
                }
              ],
              "example": {
                "steps": {
                  "fail": {
                    "step": "complete",
                    "type": "user",
                    "options": {
                      "component": "assignUnitsFromCustomerToProject",
                      "payload": {
                        "message": "Device powered off?",
                        "negative_message": "Device not functioning"
                      }
                    },
                    "label": "Find units",
                    "goto": "complete",
                    "goto-fail": "process-fail",
                    "context": [
                      {
                        "key": "$.unit.status",
                        "value": "Pending",
                        "lock": true,
                        "ignore": true
                      }
                    ],
                    "onError": {
                      "finally": {
                        "goto": "failed",
                        "actions": [
                          {
                            "type": "email",
                            "options": {
                              "to": "bob@example.com",
                              "from": "alice@example.com"
                            }
                          }
                        ]
                      },
                      "retry": 8
                    },
                    "onComplete": {
                      "actions": [
                        {
                          "type": "email",
                          "options": {
                            "to": "bob@example.com",
                            "from": "alice@example.com"
                          }
                        },
                        {
                          "type": "email",
                          "options": {
                            "to": "bob@example.com",
                            "from": "alice@example.com"
                          }
                        },
                        {
                          "type": "email",
                          "options": {
                            "to": "bob@example.com",
                            "from": "alice@example.com"
                          }
                        }
                      ]
                    }
                  },
                  "amet_b64$": {
                    "step": "complete",
                    "label": "Find units",
                    "type": "success",
                    "onComplete": {
                      "actions": [
                        {
                          "type": "email",
                          "options": {
                            "to": "bob@example.com",
                            "from": "alice@example.com"
                          }
                        }
                      ]
                    }
                  },
                  "minim2__": {
                    "step": "complete",
                    "type": "pass",
                    "label": "Find units",
                    "goto": "complete",
                    "goto-fail": "process-fail",
                    "context": [
                      {
                        "key": "$.fizz",
                        "value": "$.buzz",
                        "lock": false,
                        "ignore": true
                      }
                    ],
                    "onError": {
                      "finally": {
                        "goto": "failed",
                        "actions": [
                          {
                            "type": "email",
                            "options": {
                              "to": "bob@example.com",
                              "from": "alice@example.com"
                            }
                          },
                          {
                            "type": "email",
                            "options": {
                              "to": "bob@example.com",
                              "from": "alice@example.com"
                            }
                          },
                          {
                            "type": "email",
                            "options": {
                              "to": "bob@example.com",
                              "from": "alice@example.com"
                            }
                          },
                          {
                            "type": "email",
                            "options": {
                              "to": "bob@example.com",
                              "from": "alice@example.com"
                            }
                          }
                        ]
                      },
                      "retry": 0
                    },
                    "onComplete": {
                      "actions": [
                        {
                          "type": "email",
                          "options": {
                            "to": "bob@example.com",
                            "from": "alice@example.com"
                          }
                        },
                        {
                          "type": "email",
                          "options": {
                            "to": "bob@example.com",
                            "from": "alice@example.com"
                          }
                        },
                        {
                          "type": "email",
                          "options": {
                            "to": "bob@example.com",
                            "from": "alice@example.com"
                          }
                        },
                        {
                          "type": "email",
                          "options": {
                            "to": "bob@example.com",
                            "from": "alice@example.com"
                          }
                        }
                      ]
                    }
                  }
                },
                "starts_at": "entry",
                "label": "MLTI iPad Assembly Assignment",
                "workflow_id": "e530652e-28e8-4f64-84af-e1cf0ff7c805",
                "applies_to": "customer",
                "slug": "mlti-ipad-assembly-assignment",
                "version": "1.0",
                "workflow_version": 7,
                "context": [
                  {
                    "key": "$.fizz",
                    "value": "Pending",
                    "lock": false,
                    "ignore": true
                  },
                  {
                    "key": "$.unit.status",
                    "value": "true",
                    "lock": false,
                    "ignore": true
                  },
                  {
                    "key": "$.unit.status",
                    "value": "Pending",
                    "lock": false,
                    "ignore": true
                  },
                  {
                    "key": "extract_fields",
                    "value": "Pending",
                    "lock": true,
                    "ignore": false
                  }
                ],
                "created": "1991-03-23T20:31:55.727Z",
                "updated": "1988-03-24T09:13:18.759Z"
              }
            },
            "current_step": {
              "type": "string",
              "description": "The current step to execute",
              "readOnly": true,
              "example": "assign-units",
              "x-examples": [
                "assign-units"
              ]
            },
            "last_steps": {
              "type": "array",
              "description": "Ordered list of the executed steps",
              "readOnly": true,
              "items": {
                "type": "object",
                "description": "Details for the step",
                "properties": {
                  "step_name": {
                    "type": "string",
                    "description": "Name for the step",
                    "readOnly": true,
                    "example": "choose-units",
                    "x-examples": [
                      "choose-units"
                    ]
                  },
                  "started_at": {
                    "type": "string",
                    "format": "date-time",
                    "description": "The date time the step started",
                    "readOnly": true
                  },
                  "ended_at": {
                    "type": "string",
                    "format": "date-time",
                    "description": "The date time the step ended",
                    "readOnly": true
                  },
                  "time_to_run": {
                    "type": "string",
                    "description": "The total time it took to run the step (with milliseconds)",
                    "readOnly": true,
                    "example": 1567605055995.677,
                    "x-examples": [
                      1567605055995.677
                    ]
                  },
                  "did_error": {
                    "type": "boolean",
                    "description": "Flag to test if the step errored",
                    "readOnly": true
                  },
                  "did_timeout": {
                    "type": "boolean",
                    "description": "Flag if the step timed-out",
                    "readOnly": true
                  }
                }
              }
            },
            "started_at": {
              "type": "string",
              "format": "date-time",
              "description": "The date time the context started",
              "readOnly": true
            },
            "ended_at": {
              "type": "string",
              "format": "date-time",
              "nullable": true,
              "description": "The date time the context ended",
              "readOnly": true
            },
            "time_to_run": {
              "type": "string",
              "description": "The total time it took to run the workflow (with milliseconds)",
              "example": 1567605055995.677,
              "x-examples": [
                1567605055995.677
              ],
              "readOnly": true
            },
            "active": {
              "type": "boolean",
              "description": "Flag set if there are still steps which need to be executed",
              "example": true,
              "readOnly": true
            },
            "waiting_for_user": {
              "type": "boolean",
              "description": "Flag for when the user needs to complete the step",
              "example": false
            },
            "data": {
              "type": "object",
              "description": "Data set for the context",
              "additionalProperties": true,
              "readOnly": true,
              "x-examples": [
                {
                  "can_foo_the_bar": true,
                  "available_units_by_part": {
                    "373b7cd6-3fde-4afe-a790-411d72e07c89": 42,
                    "8faaacaa-94d4-4f1f-a8eb-39353dbbf524": 84
                  }
                }
              ]
            }
          },
          "example": {
            "context_id": "MWMwMjIyNTgtYWZjZC00YmYyLWE1NzYtYWU1OWI3YTE1ZDczOlVOSVQ6NTMxMDI5MjQtNDUwYS00ZjFlLWI1ZDQtYTIwN2JjNTg2NTIxOjE1Njc2MDUwNTU5OTUuNDQ1NjYzNDM-",
            "workflow": {
              "steps": {
                "run-ace": {
                  "step": "complete",
                  "label": "Complete",
                  "type": "success",
                  "onComplete": {
                    "actions": [
                      {
                        "type": "email",
                        "options": {
                          "to": "bob@example.com",
                          "from": "alice@example.com"
                        }
                      }
                    ]
                  }
                }
              },
              "starts_at": "entry",
              "label": "MLTI iPad Assembly Assignment",
              "workflow_id": "e530652e-28e8-4f64-84af-e1cf0ff7c805",
              "applies_to": "contact",
              "slug": "mlti-ipad-assembly-assignment",
              "version": "1.0",
              "workflow_version": 7,
              "context": [
                {
                  "key": "extract_fields",
                  "value": "true",
                  "lock": false,
                  "ignore": false
                }
              ],
              "created": "1980-10-24T16:13:53.108Z",
              "updated": "2004-05-16T12:58:40.748Z"
            },
            "current_step": "assign-units",
            "last_steps": [
              {
                "step_name": "choose-units",
                "started_at": "2004-03-26T20:11:11.319Z",
                "ended_at": "1947-05-20T10:51:37.27Z",
                "time_to_run": "1567605055995.677",
                "did_error": true,
                "did_timeout": false
              },
              {
                "step_name": "choose-units",
                "started_at": "1996-05-02T21:53:24.816Z",
                "ended_at": "1957-05-12T04:23:30.642Z",
                "time_to_run": "1567605055995.677",
                "did_error": true,
                "did_timeout": false
              },
              {
                "step_name": "choose-units",
                "started_at": "1972-09-07T03:05:38.229Z",
                "ended_at": "1976-02-21T06:04:22.606Z",
                "time_to_run": "1567605055995.677",
                "did_error": true,
                "did_timeout": false
              },
              {
                "step_name": "choose-units",
                "started_at": "1944-11-06T12:27:38.328Z",
                "ended_at": "1973-07-18T17:26:33.254Z",
                "time_to_run": "1567605055995.677",
                "did_error": true,
                "did_timeout": false
              },
              {
                "step_name": "choose-units",
                "started_at": "1990-02-05T22:18:57.355Z",
                "ended_at": "2007-06-07T06:03:28.691Z",
                "time_to_run": "1567605055995.677",
                "did_error": false,
                "did_timeout": true
              }
            ],
            "started_at": "1983-12-17T14:12:56.411Z",
            "ended_at": "1946-09-13T16:51:37.652Z",
            "time_to_run": "1567605055995.677",
            "active": true,
            "waiting_for_user": false,
            "data": {
              "can_foo_the_bar": true,
              "available_units_by_part": {
                "373b7cd6-3fde-4afe-a790-411d72e07c89": 42,
                "8faaacaa-94d4-4f1f-a8eb-39353dbbf524": 84
              }
            }
          }
        }
      ],
      "example": "undefined"
    }
  ]
}
```

<h3 id="startworkflow-responses">Responses</h3>

|Status|Meaning|Description|Schema|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|A context response|Inline|
|400|[Bad Request](https://tools.ietf.org/html/rfc7231#section-6.5.1)|Bad Request|Inline|
|401|[Unauthorized](https://tools.ietf.org/html/rfc7235#section-3.1)|Unauthorized|Inline|
|403|[Forbidden](https://tools.ietf.org/html/rfc7231#section-6.5.3)|Forbidden|Inline|

<h3 id="startworkflow-responseschema">Response Schema</h3>

Status Code **200**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» _links|object|false|none|none|
|»» self|object|false|read-only|none|
|»»» href|string|false|none|none|

Status Code **400**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» title|any|false|none|none|
|» type|any|false|none|none|
|» status|any|false|none|none|
|» detail|any|false|none|none|

Status Code **401**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» title|any|false|none|none|
|» type|any|false|none|none|
|» status|any|false|none|none|
|» detail|any|false|none|none|

Status Code **403**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|» title|any|false|none|none|
|» type|any|false|none|none|
|» status|any|false|none|none|
|» detail|any|false|none|none|

<aside class="success">
This operation does not require authentication
</aside>

# Schemas

<h2 id="tocSworkflow">Workflow</h2>

<a id="schemaworkflow"></a>

```yaml
steps:
  fail:
    step: complete
    type: user
    options:
      component: assignUnitsFromCustomerToProject
      payload:
        message: Device powered off?
        negative_message: Device not functioning
    label: Find units
    goto: complete
    goto-fail: process-fail
    context:
      - key: $.unit.status
        value: Pending
        lock: true
        ignore: true
    onError:
      finally:
        goto: failed
        actions:
          - type: email
            options:
              to: bob@example.com
              from: alice@example.com
      retry: 8
    onComplete:
      actions:
        - type: email
          options:
            to: bob@example.com
            from: alice@example.com
        - type: email
          options:
            to: bob@example.com
            from: alice@example.com
        - type: email
          options:
            to: bob@example.com
            from: alice@example.com
  amet_b64$:
    step: complete
    label: Find units
    type: success
    onComplete:
      actions:
        - type: email
          options:
            to: bob@example.com
            from: alice@example.com
  minim2__:
    step: complete
    type: pass
    label: Find units
    goto: complete
    goto-fail: process-fail
    context:
      - key: $.fizz
        value: $.buzz
        lock: false
        ignore: true
    onError:
      finally:
        goto: failed
        actions:
          - type: email
            options:
              to: bob@example.com
              from: alice@example.com
          - type: email
            options:
              to: bob@example.com
              from: alice@example.com
          - type: email
            options:
              to: bob@example.com
              from: alice@example.com
          - type: email
            options:
              to: bob@example.com
              from: alice@example.com
      retry: 0
    onComplete:
      actions:
        - type: email
          options:
            to: bob@example.com
            from: alice@example.com
        - type: email
          options:
            to: bob@example.com
            from: alice@example.com
        - type: email
          options:
            to: bob@example.com
            from: alice@example.com
        - type: email
          options:
            to: bob@example.com
            from: alice@example.com
starts_at: entry
label: MLTI iPad Assembly Assignment
workflow_id: e530652e-28e8-4f64-84af-e1cf0ff7c805
applies_to: customer
slug: mlti-ipad-assembly-assignment
version: '1.0'
workflow_version: 7
context:
  - key: $.fizz
    value: Pending
    lock: false
    ignore: true
  - key: $.unit.status
    value: 'true'
    lock: false
    ignore: true
  - key: $.unit.status
    value: Pending
    lock: false
    ignore: true
  - key: extract_fields
    value: Pending
    lock: true
    ignore: false
created: '1991-03-23T20:31:55.727Z'
updated: '1988-03-24T09:13:18.759Z'

```

*Workflow*

### Properties

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|workflow_id|string|true|none|Customer identifier|
|label|string|true|none|Label for the workflow|
|slug|string|false|none|Auto-generated slug for the workflow|
|version|string|false|none|Version of the workflow schema used|
|workflow_version|integer(int32)|false|read-only|Version number for the work flows (the number of times it has been changed|
|applies_to|string|true|none|The entity type this work flow applies too|
|starts_at|string|true|none|Starting step|
|context|[object]|false|none|Initial values to set on the context|
|» key|string|true|none|The context key to set|
|» value|string|true|none|Value to set|
|» lock|boolean|false|none|Prevents other steps from writing this value|
|» ignore|boolean|false|none|When trying to set a locked key, do not fail|
|steps|object|true|none|Steps for the workflow|
|» **additionalProperties**|object|false|none|Close step|
|»» step|string|true|none|Step to mark as complete|

#### Enumerated Values

|Property|Value|
|---|---|
|version|1.0|
|applies_to|unit|
|applies_to|part|
|applies_to|program|
|applies_to|project|
|applies_to|customer|
|applies_to|contact|

