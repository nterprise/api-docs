{
  "type": "choice",
  "label": "Find units",
  "goto": "complete",
  "choices": [
    {
      "goto": "complete",
      "and": [
        {
          "variable": "$.parts.available",
          "greater_than_equals": "42"
        }
      ]
    }
  ],
  "goto-fail": "process-fail",
  "context": [
    {
      "key": "$.fizz",
      "value": "Pending",
      "lock": true,
      "ignore": false
    },
    {
      "key": "$.fizz",
      "value": "$.buzz",
      "lock": true,
      "ignore": true
    },
    {
      "key": "$.unit.status",
      "value": "Pending",
      "lock": true,
      "ignore": false
    },
    {
      "key": "$.fizz",
      "value": "$.buzz",
      "lock": true,
      "ignore": true
    }
  ],
  "onError": {
    "finally": {
      "goto": "failed",
      "actions": [
        {
          "type": "email",
          "options": {
            "to": "bob@example.com",
            "from": "alice@example.com"
          }
        },
        {
          "type": "email",
          "options": {
            "to": "bob@example.com",
            "from": "alice@example.com"
          }
        },
        {
          "type": "email",
          "options": {
            "to": "bob@example.com",
            "from": "alice@example.com"
          }
        },
        {
          "type": "email",
          "options": {
            "to": "bob@example.com",
            "from": "alice@example.com"
          }
        },
        {
          "type": "email",
          "options": {
            "to": "bob@example.com",
            "from": "alice@example.com"
          }
        }
      ]
    },
    "retry": 9
  },
  "onComplete": {
    "actions": [
      {
        "type": "email",
        "options": {
          "to": "bob@example.com",
          "from": "alice@example.com"
        }
      },
      {
        "type": "email",
        "options": {
          "to": "bob@example.com",
          "from": "alice@example.com"
        }
      }
    ]
  }
}