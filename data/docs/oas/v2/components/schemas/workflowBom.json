{
  "x-id": "#bom",
  "description": "Defines the properties for a work flow Bill of Material",
  "properties": {
    "label": {
      "example": "Bill of materials for: MLTI iPad Assembly Assignment"
    },
    "parts_needed": {
      "type": "array",
      "description": "A List of parts",
      "items": {
        "type": "object",
        "properties": {
          "part": {
            "$ref": "./part.json"
          },
          "total": {
            "type": "integer",
            "format": "int32",
            "minimum": 1,
            "description": "number of units needed",
            "example": 4,
            "x-examples": [
              4
            ]
          },
          "total_by_allocation": {
            "type": "object",
            "properties": {
              "allocated": {
                "type": "integer",
                "format": "int32",
                "minimum": 0,
                "description": "number of units needed to be allocated",
                "example": 6,
                "x-examples": [
                  6
                ]
              },
              "unallocated": {
                "type": "integer",
                "format": "int32",
                "minimum": 0,
                "description": "number of units needed to be unallocated",
                "example": 1,
                "x-examples": [
                  1
                ]
              },
              "enters_allocated": {
                "type": "boolean",
                "description": "Weather the unit starts allocated",
                "example": false
              },
              "leaves_allocated": {
                "type": "boolean",
                "description": "Weather the unit ends allocated",
                "example": false
              }
            }
          },
          "total_by_status": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "total": {
                  "type": "integer",
                  "format": "int32",
                  "minimum": 1,
                  "description": "number of units needed at this status",
                  "example": 1,
                  "x-examples": [
                    1
                  ]
                },
                "enters_at": {
                  "type": "boolean",
                  "description": "Weather the unit is required to have this status at the start of the workflow",
                  "example": false
                },
                "leaves_at": {
                  "type": "boolean",
                  "description": "Weather the unit is has this status at the end of the workflow",
                  "example": false
                },
                "status": {
                  "$ref": "./status.json"
                }
              }
            }
          }
        }
      }
    },
    "workflow": {
      "type": "object",
      "description": "The workflow",
      "allOf": [
        {
          "$ref": "./workflow.json"
        }
      ]
    }
  },
  "allOf": [
    {
      "$ref": "./entityCommon.json#/properties/created"
    },
    {
      "$ref": "./entityCommon.json#/properties/updated"
    }
  ],
  "example": {
    "$ref": "../examples/workflowBom.json"
  }
}